function L6(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in n)){const s=Object.getOwnPropertyDescriptor(r,o);s&&Object.defineProperty(n,o,s.get?s:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}})();function p3(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var hp={exports:{}},Zs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r7;function H6(){if(r7)return Zs;r7=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,s){var a=null;if(s!==void 0&&(a=""+s),o.key!==void 0&&(a=""+o.key),"key"in o){s={};for(var c in o)c!=="key"&&(s[c]=o[c])}else s=o;return o=s.ref,{$$typeof:n,type:r,key:a,ref:o!==void 0?o:null,props:s}}return Zs.Fragment=e,Zs.jsx=t,Zs.jsxs=t,Zs}var i7;function z6(){return i7||(i7=1,hp.exports=H6()),hp.exports}var S=z6(),pp={exports:{}},Me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o7;function B6(){if(o7)return Me;o7=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function b(A){return A===null||typeof A!="object"?null:(A=g&&A[g]||A["@@iterator"],typeof A=="function"?A:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,x={};function M(A,F,q){this.props=A,this.context=F,this.refs=x,this.updater=q||v}M.prototype.isReactComponent={},M.prototype.setState=function(A,F){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,F,"setState")},M.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function k(){}k.prototype=M.prototype;function O(A,F,q){this.props=A,this.context=F,this.refs=x,this.updater=q||v}var D=O.prototype=new k;D.constructor=O,C(D,M.prototype),D.isPureReactComponent=!0;var P=Array.isArray,I={H:null,A:null,T:null,S:null,V:null},Q=Object.prototype.hasOwnProperty;function te(A,F,q,J,ie,Ce){return q=Ce.ref,{$$typeof:n,type:A,key:F,ref:q!==void 0?q:null,props:Ce}}function X(A,F){return te(A.type,F,void 0,void 0,void 0,A.props)}function se(A){return typeof A=="object"&&A!==null&&A.$$typeof===n}function ne(A){var F={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(q){return F[q]})}var me=/\/+/g;function he(A,F){return typeof A=="object"&&A!==null&&A.key!=null?ne(""+A.key):F.toString(36)}function xe(){}function re(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(xe,xe):(A.status="pending",A.then(function(F){A.status==="pending"&&(A.status="fulfilled",A.value=F)},function(F){A.status==="pending"&&(A.status="rejected",A.reason=F)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function $(A,F,q,J,ie){var Ce=typeof A;(Ce==="undefined"||Ce==="boolean")&&(A=null);var oe=!1;if(A===null)oe=!0;else switch(Ce){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(A.$$typeof){case n:case e:oe=!0;break;case m:return oe=A._init,$(oe(A._payload),F,q,J,ie)}}if(oe)return ie=ie(A),oe=J===""?"."+he(A,0):J,P(ie)?(q="",oe!=null&&(q=oe.replace(me,"$&/")+"/"),$(ie,F,q,"",function(Zt){return Zt})):ie!=null&&(se(ie)&&(ie=X(ie,q+(ie.key==null||A&&A.key===ie.key?"":(""+ie.key).replace(me,"$&/")+"/")+oe)),F.push(ie)),1;oe=0;var qe=J===""?".":J+":";if(P(A))for(var He=0;He<A.length;He++)J=A[He],Ce=qe+he(J,He),oe+=$(J,F,q,Ce,ie);else if(He=b(A),typeof He=="function")for(A=He.call(A),He=0;!(J=A.next()).done;)J=J.value,Ce=qe+he(J,He++),oe+=$(J,F,q,Ce,ie);else if(Ce==="object"){if(typeof A.then=="function")return $(re(A),F,q,J,ie);throw F=String(A),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return oe}function H(A,F,q){if(A==null)return A;var J=[],ie=0;return $(A,J,"","",function(Ce){return F.call(q,Ce,ie++)}),J}function _(A){if(A._status===-1){var F=A._result;F=F(),F.then(function(q){(A._status===0||A._status===-1)&&(A._status=1,A._result=q)},function(q){(A._status===0||A._status===-1)&&(A._status=2,A._result=q)}),A._status===-1&&(A._status=0,A._result=F)}if(A._status===1)return A._result.default;throw A._result}var z=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function Y(){}return Me.Children={map:H,forEach:function(A,F,q){H(A,function(){F.apply(this,arguments)},q)},count:function(A){var F=0;return H(A,function(){F++}),F},toArray:function(A){return H(A,function(F){return F})||[]},only:function(A){if(!se(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},Me.Component=M,Me.Fragment=t,Me.Profiler=o,Me.PureComponent=O,Me.StrictMode=r,Me.Suspense=d,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Me.__COMPILER_RUNTIME={__proto__:null,c:function(A){return I.H.useMemoCache(A)}},Me.cache=function(A){return function(){return A.apply(null,arguments)}},Me.cloneElement=function(A,F,q){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var J=C({},A.props),ie=A.key,Ce=void 0;if(F!=null)for(oe in F.ref!==void 0&&(Ce=void 0),F.key!==void 0&&(ie=""+F.key),F)!Q.call(F,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&F.ref===void 0||(J[oe]=F[oe]);var oe=arguments.length-2;if(oe===1)J.children=q;else if(1<oe){for(var qe=Array(oe),He=0;He<oe;He++)qe[He]=arguments[He+2];J.children=qe}return te(A.type,ie,void 0,void 0,Ce,J)},Me.createContext=function(A){return A={$$typeof:a,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:s,_context:A},A},Me.createElement=function(A,F,q){var J,ie={},Ce=null;if(F!=null)for(J in F.key!==void 0&&(Ce=""+F.key),F)Q.call(F,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(ie[J]=F[J]);var oe=arguments.length-2;if(oe===1)ie.children=q;else if(1<oe){for(var qe=Array(oe),He=0;He<oe;He++)qe[He]=arguments[He+2];ie.children=qe}if(A&&A.defaultProps)for(J in oe=A.defaultProps,oe)ie[J]===void 0&&(ie[J]=oe[J]);return te(A,Ce,void 0,void 0,null,ie)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(A){return{$$typeof:c,render:A}},Me.isValidElement=se,Me.lazy=function(A){return{$$typeof:m,_payload:{_status:-1,_result:A},_init:_}},Me.memo=function(A,F){return{$$typeof:h,type:A,compare:F===void 0?null:F}},Me.startTransition=function(A){var F=I.T,q={};I.T=q;try{var J=A(),ie=I.S;ie!==null&&ie(q,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(Y,z)}catch(Ce){z(Ce)}finally{I.T=F}},Me.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Me.use=function(A){return I.H.use(A)},Me.useActionState=function(A,F,q){return I.H.useActionState(A,F,q)},Me.useCallback=function(A,F){return I.H.useCallback(A,F)},Me.useContext=function(A){return I.H.useContext(A)},Me.useDebugValue=function(){},Me.useDeferredValue=function(A,F){return I.H.useDeferredValue(A,F)},Me.useEffect=function(A,F,q){var J=I.H;if(typeof q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(A,F)},Me.useId=function(){return I.H.useId()},Me.useImperativeHandle=function(A,F,q){return I.H.useImperativeHandle(A,F,q)},Me.useInsertionEffect=function(A,F){return I.H.useInsertionEffect(A,F)},Me.useLayoutEffect=function(A,F){return I.H.useLayoutEffect(A,F)},Me.useMemo=function(A,F){return I.H.useMemo(A,F)},Me.useOptimistic=function(A,F){return I.H.useOptimistic(A,F)},Me.useReducer=function(A,F,q){return I.H.useReducer(A,F,q)},Me.useRef=function(A){return I.H.useRef(A)},Me.useState=function(A){return I.H.useState(A)},Me.useSyncExternalStore=function(A,F,q){return I.H.useSyncExternalStore(A,F,q)},Me.useTransition=function(){return I.H.useTransition()},Me.version="19.1.0",Me}var l7;function X1(){return l7||(l7=1,pp.exports=B6()),pp.exports}var w=X1();const Ht=p3(w),m3=L6({__proto__:null,default:Ht},[w]);var mp={exports:{}},Gs={},gp={exports:{}},yp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s7;function j6(){return s7||(s7=1,function(n){function e(H,_){var z=H.length;H.push(_);e:for(;0<z;){var Y=z-1>>>1,A=H[Y];if(0<o(A,_))H[Y]=_,H[z]=A,z=Y;else break e}}function t(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var _=H[0],z=H.pop();if(z!==_){H[0]=z;e:for(var Y=0,A=H.length,F=A>>>1;Y<F;){var q=2*(Y+1)-1,J=H[q],ie=q+1,Ce=H[ie];if(0>o(J,z))ie<A&&0>o(Ce,J)?(H[Y]=Ce,H[ie]=z,Y=ie):(H[Y]=J,H[q]=z,Y=q);else if(ie<A&&0>o(Ce,z))H[Y]=Ce,H[ie]=z,Y=ie;else break e}}return _}function o(H,_){var z=H.sortIndex-_.sortIndex;return z!==0?z:H.id-_.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();n.unstable_now=function(){return a.now()-c}}var d=[],h=[],m=1,g=null,b=3,v=!1,C=!1,x=!1,M=!1,k=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function P(H){for(var _=t(h);_!==null;){if(_.callback===null)r(h);else if(_.startTime<=H)r(h),_.sortIndex=_.expirationTime,e(d,_);else break;_=t(h)}}function I(H){if(x=!1,P(H),!C)if(t(d)!==null)C=!0,Q||(Q=!0,he());else{var _=t(h);_!==null&&$(I,_.startTime-H)}}var Q=!1,te=-1,X=5,se=-1;function ne(){return M?!0:!(n.unstable_now()-se<X)}function me(){if(M=!1,Q){var H=n.unstable_now();se=H;var _=!0;try{e:{C=!1,x&&(x=!1,O(te),te=-1),v=!0;var z=b;try{t:{for(P(H),g=t(d);g!==null&&!(g.expirationTime>H&&ne());){var Y=g.callback;if(typeof Y=="function"){g.callback=null,b=g.priorityLevel;var A=Y(g.expirationTime<=H);if(H=n.unstable_now(),typeof A=="function"){g.callback=A,P(H),_=!0;break t}g===t(d)&&r(d),P(H)}else r(d);g=t(d)}if(g!==null)_=!0;else{var F=t(h);F!==null&&$(I,F.startTime-H),_=!1}}break e}finally{g=null,b=z,v=!1}_=void 0}}finally{_?he():Q=!1}}}var he;if(typeof D=="function")he=function(){D(me)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,re=xe.port2;xe.port1.onmessage=me,he=function(){re.postMessage(null)}}else he=function(){k(me,0)};function $(H,_){te=k(function(){H(n.unstable_now())},_)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(H){switch(b){case 1:case 2:case 3:var _=3;break;default:_=b}var z=b;b=_;try{return H()}finally{b=z}},n.unstable_requestPaint=function(){M=!0},n.unstable_runWithPriority=function(H,_){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var z=b;b=H;try{return _()}finally{b=z}},n.unstable_scheduleCallback=function(H,_,z){var Y=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Y+z:Y):z=Y,H){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=z+A,H={id:m++,callback:_,priorityLevel:H,startTime:z,expirationTime:A,sortIndex:-1},z>Y?(H.sortIndex=z,e(h,H),t(d)===null&&H===t(h)&&(x?(O(te),te=-1):x=!0,$(I,z-Y))):(H.sortIndex=A,e(d,H),C||v||(C=!0,Q||(Q=!0,he()))),H},n.unstable_shouldYield=ne,n.unstable_wrapCallback=function(H){var _=b;return function(){var z=b;b=_;try{return H.apply(this,arguments)}finally{b=z}}}}(yp)),yp}var a7;function I6(){return a7||(a7=1,gp.exports=j6()),gp.exports}var bp={exports:{}},Qt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u7;function V6(){if(u7)return Qt;u7=1;var n=X1();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function s(d,h,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:g==null?null:""+g,children:d,containerInfo:h,implementation:m}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Qt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Qt.createPortal=function(d,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return s(d,h,null,m)},Qt.flushSync=function(d){var h=a.T,m=r.p;try{if(a.T=null,r.p=2,d)return d()}finally{a.T=h,r.p=m,r.d.f()}},Qt.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(d,h))},Qt.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},Qt.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var m=h.as,g=c(m,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?r.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:b,fetchPriority:v}):m==="script"&&r.d.X(d,{crossOrigin:g,integrity:b,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Qt.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=c(h.as,h.crossOrigin);r.d.M(d,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(d)},Qt.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,g=c(m,h.crossOrigin);r.d.L(d,m,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Qt.preloadModule=function(d,h){if(typeof d=="string")if(h){var m=c(h.as,h.crossOrigin);r.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(d)},Qt.requestFormReset=function(d){r.d.r(d)},Qt.unstable_batchedUpdates=function(d,h){return d(h)},Qt.useFormState=function(d,h,m){return a.H.useFormState(d,h,m)},Qt.useFormStatus=function(){return a.H.useHostTransitionStatus()},Qt.version="19.1.0",Qt}var c7;function g3(){if(c7)return bp.exports;c7=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),bp.exports=V6(),bp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f7;function U6(){if(f7)return Gs;f7=1;var n=I6(),e=X1(),t=g3();function r(i){var l="https://react.dev/errors/"+i;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)l+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function s(i){var l=i,u=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(u=l.return),i=l.return;while(i)}return l.tag===3?u:null}function a(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function c(i){if(s(i)!==i)throw Error(r(188))}function d(i){var l=i.alternate;if(!l){if(l=s(i),l===null)throw Error(r(188));return l!==i?null:i}for(var u=i,f=l;;){var p=u.return;if(p===null)break;var y=p.alternate;if(y===null){if(f=p.return,f!==null){u=f;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===u)return c(p),i;if(y===f)return c(p),l;y=y.sibling}throw Error(r(188))}if(u.return!==f.return)u=p,f=y;else{for(var E=!1,T=p.child;T;){if(T===u){E=!0,u=p,f=y;break}if(T===f){E=!0,f=p,u=y;break}T=T.sibling}if(!E){for(T=y.child;T;){if(T===u){E=!0,u=y,f=p;break}if(T===f){E=!0,f=y,u=p;break}T=T.sibling}if(!E)throw Error(r(189))}}if(u.alternate!==f)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?i:l}function h(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i;for(i=i.child;i!==null;){if(l=h(i),l!==null)return l;i=i.sibling}return null}var m=Object.assign,g=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),D=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),se=Symbol.for("react.activity"),ne=Symbol.for("react.memo_cache_sentinel"),me=Symbol.iterator;function he(i){return i===null||typeof i!="object"?null:(i=me&&i[me]||i["@@iterator"],typeof i=="function"?i:null)}var xe=Symbol.for("react.client.reference");function re(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===xe?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case C:return"Fragment";case M:return"Profiler";case x:return"StrictMode";case I:return"Suspense";case Q:return"SuspenseList";case se:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case v:return"Portal";case D:return(i.displayName||"Context")+".Provider";case O:return(i._context.displayName||"Context")+".Consumer";case P:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case te:return l=i.displayName||null,l!==null?l:re(i.type)||"Memo";case X:l=i._payload,i=i._init;try{return re(i(l))}catch{}}return null}var $=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},Y=[],A=-1;function F(i){return{current:i}}function q(i){0>A||(i.current=Y[A],Y[A]=null,A--)}function J(i,l){A++,Y[A]=i.current,i.current=l}var ie=F(null),Ce=F(null),oe=F(null),qe=F(null);function He(i,l){switch(J(oe,l),J(Ce,i),J(ie,null),l.nodeType){case 9:case 11:i=(i=l.documentElement)&&(i=i.namespaceURI)?Ny(i):0;break;default:if(i=l.tagName,l=l.namespaceURI)l=Ny(l),i=Dy(l,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}q(ie),J(ie,i)}function Zt(){q(ie),q(Ce),q(oe)}function kn(i){i.memoizedState!==null&&J(qe,i);var l=ie.current,u=Dy(l,i.type);l!==u&&(J(Ce,i),J(ie,u))}function Se(i){Ce.current===i&&(q(ie),q(Ce)),qe.current===i&&(q(qe),qs._currentValue=z)}var Ne=Object.prototype.hasOwnProperty,Ee=n.unstable_scheduleCallback,we=n.unstable_cancelCallback,ut=n.unstable_shouldYield,lt=n.unstable_requestPaint,Xe=n.unstable_now,Bt=n.unstable_getCurrentPriorityLevel,Ue=n.unstable_ImmediatePriority,Ye=n.unstable_UserBlockingPriority,Gt=n.unstable_NormalPriority,de=n.unstable_LowPriority,Ie=n.unstable_IdlePriority,ge=n.log,We=n.unstable_setDisableYieldValue,_e=null,ze=null;function hn(i){if(typeof ge=="function"&&We(i),ze&&typeof ze.setStrictMode=="function")try{ze.setStrictMode(_e,i)}catch{}}var Rt=Math.clz32?Math.clz32:Cr,Fi=Math.log,pn=Math.LN2;function Cr(i){return i>>>=0,i===0?32:31-(Fi(i)/pn|0)|0}var xr=256,Ki=4194304;function lr(i){var l=i&42;if(l!==0)return l;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Sr(i,l,u){var f=i.pendingLanes;if(f===0)return 0;var p=0,y=i.suspendedLanes,E=i.pingedLanes;i=i.warmLanes;var T=f&134217727;return T!==0?(f=T&~y,f!==0?p=lr(f):(E&=T,E!==0?p=lr(E):u||(u=T&~i,u!==0&&(p=lr(u))))):(T=f&~y,T!==0?p=lr(T):E!==0?p=lr(E):u||(u=f&~i,u!==0&&(p=lr(u)))),p===0?0:l!==0&&l!==p&&(l&y)===0&&(y=p&-p,u=l&-l,y>=u||y===32&&(u&4194048)!==0)?l:p}function mn(i,l){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&l)===0}function Vo(i,l){switch(i){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ka(){var i=xr;return xr<<=1,(xr&4194048)===0&&(xr=256),i}function Jl(){var i=Ki;return Ki<<=1,(Ki&62914560)===0&&(Ki=4194304),i}function Uo(i){for(var l=[],u=0;31>u;u++)l.push(i);return l}function Ql(i,l){i.pendingLanes|=l,l!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function xv(i,l,u,f,p,y){var E=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var T=i.entanglements,R=i.expirationTimes,j=i.hiddenUpdates;for(u=E&~u;0<u;){var K=31-Rt(u),G=1<<K;T[K]=0,R[K]=-1;var V=j[K];if(V!==null)for(j[K]=null,K=0;K<V.length;K++){var U=V[K];U!==null&&(U.lane&=-536870913)}u&=~G}f!==0&&g0(i,f,0),y!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=y&~(E&~l))}function g0(i,l,u){i.pendingLanes|=l,i.suspendedLanes&=~l;var f=31-Rt(l);i.entangledLanes|=l,i.entanglements[f]=i.entanglements[f]|1073741824|u&4194090}function y0(i,l){var u=i.entangledLanes|=l;for(i=i.entanglements;u;){var f=31-Rt(u),p=1<<f;p&l|i[f]&l&&(i[f]|=l),u&=~p}}function rd(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function id(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function b0(){var i=_.p;return i!==0?i:(i=window.event,i===void 0?32:Qy(i.type))}function Sv(i,l){var u=_.p;try{return _.p=i,l()}finally{_.p=u}}var Qr=Math.random().toString(36).slice(2),Yt="__reactFiber$"+Qr,gn="__reactProps$"+Qr,_o="__reactContainer$"+Qr,od="__reactEvents$"+Qr,Ev="__reactListeners$"+Qr,wv="__reactHandles$"+Qr,v0="__reactResources$"+Qr,Xl="__reactMarker$"+Qr;function ld(i){delete i[Yt],delete i[gn],delete i[od],delete i[Ev],delete i[wv]}function qo(i){var l=i[Yt];if(l)return l;for(var u=i.parentNode;u;){if(l=u[_o]||u[Yt]){if(u=l.alternate,l.child!==null||u!==null&&u.child!==null)for(i=By(i);i!==null;){if(u=i[Yt])return u;i=By(i)}return l}i=u,u=i.parentNode}return null}function Po(i){if(i=i[Yt]||i[_o]){var l=i.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return i}return null}function Wl(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i.stateNode;throw Error(r(33))}function Fo(i){var l=i[v0];return l||(l=i[v0]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Ot(i){i[Xl]=!0}var C0=new Set,x0={};function $i(i,l){Ko(i,l),Ko(i+"Capture",l)}function Ko(i,l){for(x0[i]=l,i=0;i<l.length;i++)C0.add(l[i])}var Mv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),S0={},E0={};function Tv(i){return Ne.call(E0,i)?!0:Ne.call(S0,i)?!1:Mv.test(i)?E0[i]=!0:(S0[i]=!0,!1)}function $a(i,l,u){if(Tv(l))if(u===null)i.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(l);return;case"boolean":var f=l.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(l);return}}i.setAttribute(l,""+u)}}function Za(i,l,u){if(u===null)i.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttribute(l,""+u)}}function Er(i,l,u,f){if(f===null)i.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(l,u,""+f)}}var sd,w0;function $o(i){if(sd===void 0)try{throw Error()}catch(u){var l=u.stack.trim().match(/\n( *(at )?)/);sd=l&&l[1]||"",w0=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+sd+i+w0}var ad=!1;function ud(i,l){if(!i||ad)return"";ad=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(l){var G=function(){throw Error()};if(Object.defineProperty(G.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(G,[])}catch(U){var V=U}Reflect.construct(i,[],G)}else{try{G.call()}catch(U){V=U}i.call(G.prototype)}}else{try{throw Error()}catch(U){V=U}(G=i())&&typeof G.catch=="function"&&G.catch(function(){})}}catch(U){if(U&&V&&typeof U.stack=="string")return[U.stack,V.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=f.DetermineComponentFrameRoot(),E=y[0],T=y[1];if(E&&T){var R=E.split(`
`),j=T.split(`
`);for(p=f=0;f<R.length&&!R[f].includes("DetermineComponentFrameRoot");)f++;for(;p<j.length&&!j[p].includes("DetermineComponentFrameRoot");)p++;if(f===R.length||p===j.length)for(f=R.length-1,p=j.length-1;1<=f&&0<=p&&R[f]!==j[p];)p--;for(;1<=f&&0<=p;f--,p--)if(R[f]!==j[p]){if(f!==1||p!==1)do if(f--,p--,0>p||R[f]!==j[p]){var K=`
`+R[f].replace(" at new "," at ");return i.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",i.displayName)),K}while(1<=f&&0<=p);break}}}finally{ad=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?$o(u):""}function kv(i){switch(i.tag){case 26:case 27:case 5:return $o(i.type);case 16:return $o("Lazy");case 13:return $o("Suspense");case 19:return $o("SuspenseList");case 0:case 15:return ud(i.type,!1);case 11:return ud(i.type.render,!1);case 1:return ud(i.type,!0);case 31:return $o("Activity");default:return""}}function M0(i){try{var l="";do l+=kv(i),i=i.return;while(i);return l}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function In(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function T0(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Av(i){var l=T0(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,l),f=""+i[l];if(!i.hasOwnProperty(l)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,y=u.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return p.call(this)},set:function(E){f=""+E,y.call(this,E)}}),Object.defineProperty(i,l,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(E){f=""+E},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function Ga(i){i._valueTracker||(i._valueTracker=Av(i))}function k0(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var u=l.getValue(),f="";return i&&(f=T0(i)?i.checked?"true":"false":i.value),i=f,i!==u?(l.setValue(i),!0):!1}function Ya(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Rv=/[\n"\\]/g;function Vn(i){return i.replace(Rv,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function cd(i,l,u,f,p,y,E,T){i.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?i.type=E:i.removeAttribute("type"),l!=null?E==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+In(l)):i.value!==""+In(l)&&(i.value=""+In(l)):E!=="submit"&&E!=="reset"||i.removeAttribute("value"),l!=null?fd(i,E,In(l)):u!=null?fd(i,E,In(u)):f!=null&&i.removeAttribute("value"),p==null&&y!=null&&(i.defaultChecked=!!y),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.name=""+In(T):i.removeAttribute("name")}function A0(i,l,u,f,p,y,E,T){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),l!=null||u!=null){if(!(y!=="submit"&&y!=="reset"||l!=null))return;u=u!=null?""+In(u):"",l=l!=null?""+In(l):u,T||l===i.value||(i.value=l),i.defaultValue=l}f=f??p,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=T?i.checked:!!f,i.defaultChecked=!!f,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(i.name=E)}function fd(i,l,u){l==="number"&&Ya(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function Zo(i,l,u,f){if(i=i.options,l){l={};for(var p=0;p<u.length;p++)l["$"+u[p]]=!0;for(u=0;u<i.length;u++)p=l.hasOwnProperty("$"+i[u].value),i[u].selected!==p&&(i[u].selected=p),p&&f&&(i[u].defaultSelected=!0)}else{for(u=""+In(u),l=null,p=0;p<i.length;p++){if(i[p].value===u){i[p].selected=!0,f&&(i[p].defaultSelected=!0);return}l!==null||i[p].disabled||(l=i[p])}l!==null&&(l.selected=!0)}}function R0(i,l,u){if(l!=null&&(l=""+In(l),l!==i.value&&(i.value=l),u==null)){i.defaultValue!==l&&(i.defaultValue=l);return}i.defaultValue=u!=null?""+In(u):""}function O0(i,l,u,f){if(l==null){if(f!=null){if(u!=null)throw Error(r(92));if($(f)){if(1<f.length)throw Error(r(93));f=f[0]}u=f}u==null&&(u=""),l=u}u=In(l),i.defaultValue=u,f=i.textContent,f===u&&f!==""&&f!==null&&(i.value=f)}function Go(i,l){if(l){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=l;return}}i.textContent=l}var Ov=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function N0(i,l,u){var f=l.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?i.setProperty(l,""):l==="float"?i.cssFloat="":i[l]="":f?i.setProperty(l,u):typeof u!="number"||u===0||Ov.has(l)?l==="float"?i.cssFloat=u:i[l]=(""+u).trim():i[l]=u+"px"}function D0(i,l,u){if(l!=null&&typeof l!="object")throw Error(r(62));if(i=i.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||l!=null&&l.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var p in l)f=l[p],l.hasOwnProperty(p)&&u[p]!==f&&N0(i,p,f)}else for(var y in l)l.hasOwnProperty(y)&&N0(i,y,l[y])}function dd(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ja(i){return Dv.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var hd=null;function pd(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Yo=null,Jo=null;function L0(i){var l=Po(i);if(l&&(i=l.stateNode)){var u=i[gn]||null;e:switch(i=l.stateNode,l.type){case"input":if(cd(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),l=u.name,u.type==="radio"&&l!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Vn(""+l)+'"][type="radio"]'),l=0;l<u.length;l++){var f=u[l];if(f!==i&&f.form===i.form){var p=f[gn]||null;if(!p)throw Error(r(90));cd(f,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(l=0;l<u.length;l++)f=u[l],f.form===i.form&&k0(f)}break e;case"textarea":R0(i,u.value,u.defaultValue);break e;case"select":l=u.value,l!=null&&Zo(i,!!u.multiple,l,!1)}}}var md=!1;function H0(i,l,u){if(md)return i(l,u);md=!0;try{var f=i(l);return f}finally{if(md=!1,(Yo!==null||Jo!==null)&&(zu(),Yo&&(l=Yo,i=Jo,Jo=Yo=null,L0(l),i)))for(l=0;l<i.length;l++)L0(i[l])}}function es(i,l){var u=i.stateNode;if(u===null)return null;var f=u[gn]||null;if(f===null)return null;u=f[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(r(231,l,typeof u));return u}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gd=!1;if(wr)try{var ts={};Object.defineProperty(ts,"passive",{get:function(){gd=!0}}),window.addEventListener("test",ts,ts),window.removeEventListener("test",ts,ts)}catch{gd=!1}var Xr=null,yd=null,Qa=null;function z0(){if(Qa)return Qa;var i,l=yd,u=l.length,f,p="value"in Xr?Xr.value:Xr.textContent,y=p.length;for(i=0;i<u&&l[i]===p[i];i++);var E=u-i;for(f=1;f<=E&&l[u-f]===p[y-f];f++);return Qa=p.slice(i,1<f?1-f:void 0)}function Xa(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function Wa(){return!0}function B0(){return!1}function yn(i){function l(u,f,p,y,E){this._reactName=u,this._targetInst=p,this.type=f,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var T in i)i.hasOwnProperty(T)&&(u=i[T],this[T]=u?u(y):y[T]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Wa:B0,this.isPropagationStopped=B0,this}return m(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Wa)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Wa)},persist:function(){},isPersistent:Wa}),l}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eu=yn(Zi),ns=m({},Zi,{view:0,detail:0}),Lv=yn(ns),bd,vd,rs,tu=m({},ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xd,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==rs&&(rs&&i.type==="mousemove"?(bd=i.screenX-rs.screenX,vd=i.screenY-rs.screenY):vd=bd=0,rs=i),bd)},movementY:function(i){return"movementY"in i?i.movementY:vd}}),j0=yn(tu),Hv=m({},tu,{dataTransfer:0}),zv=yn(Hv),Bv=m({},ns,{relatedTarget:0}),Cd=yn(Bv),jv=m({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),Iv=yn(jv),Vv=m({},Zi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Uv=yn(Vv),_v=m({},Zi,{data:0}),I0=yn(_v),qv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kv(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=Fv[i])?!!l[i]:!1}function xd(){return Kv}var $v=m({},ns,{key:function(i){if(i.key){var l=qv[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=Xa(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Pv[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xd,charCode:function(i){return i.type==="keypress"?Xa(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Xa(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Zv=yn($v),Gv=m({},tu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),V0=yn(Gv),Yv=m({},ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xd}),Jv=yn(Yv),Qv=m({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xv=yn(Qv),Wv=m({},tu,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),eC=yn(Wv),tC=m({},Zi,{newState:0,oldState:0}),nC=yn(tC),rC=[9,13,27,32],Sd=wr&&"CompositionEvent"in window,is=null;wr&&"documentMode"in document&&(is=document.documentMode);var iC=wr&&"TextEvent"in window&&!is,U0=wr&&(!Sd||is&&8<is&&11>=is),_0=" ",q0=!1;function P0(i,l){switch(i){case"keyup":return rC.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function F0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Qo=!1;function oC(i,l){switch(i){case"compositionend":return F0(l);case"keypress":return l.which!==32?null:(q0=!0,_0);case"textInput":return i=l.data,i===_0&&q0?null:i;default:return null}}function lC(i,l){if(Qo)return i==="compositionend"||!Sd&&P0(i,l)?(i=z0(),Qa=yd=Xr=null,Qo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return U0&&l.locale!=="ko"?null:l.data;default:return null}}var sC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function K0(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!sC[i.type]:l==="textarea"}function $0(i,l,u,f){Yo?Jo?Jo.push(f):Jo=[f]:Yo=f,l=_u(l,"onChange"),0<l.length&&(u=new eu("onChange","change",null,u,f),i.push({event:u,listeners:l}))}var ls=null,ss=null;function aC(i){Ty(i,0)}function nu(i){var l=Wl(i);if(k0(l))return i}function Z0(i,l){if(i==="change")return l}var G0=!1;if(wr){var Ed;if(wr){var wd="oninput"in document;if(!wd){var Y0=document.createElement("div");Y0.setAttribute("oninput","return;"),wd=typeof Y0.oninput=="function"}Ed=wd}else Ed=!1;G0=Ed&&(!document.documentMode||9<document.documentMode)}function J0(){ls&&(ls.detachEvent("onpropertychange",Q0),ss=ls=null)}function Q0(i){if(i.propertyName==="value"&&nu(ss)){var l=[];$0(l,ss,i,pd(i)),H0(aC,l)}}function uC(i,l,u){i==="focusin"?(J0(),ls=l,ss=u,ls.attachEvent("onpropertychange",Q0)):i==="focusout"&&J0()}function cC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return nu(ss)}function fC(i,l){if(i==="click")return nu(l)}function dC(i,l){if(i==="input"||i==="change")return nu(l)}function hC(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var An=typeof Object.is=="function"?Object.is:hC;function as(i,l){if(An(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var u=Object.keys(i),f=Object.keys(l);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var p=u[f];if(!Ne.call(l,p)||!An(i[p],l[p]))return!1}return!0}function X0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function W0(i,l){var u=X0(i);i=0;for(var f;u;){if(u.nodeType===3){if(f=i+u.textContent.length,i<=l&&f>=l)return{node:u,offset:l-i};i=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=X0(u)}}function e2(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?e2(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function t2(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var l=Ya(i.document);l instanceof i.HTMLIFrameElement;){try{var u=typeof l.contentWindow.location.href=="string"}catch{u=!1}if(u)i=l.contentWindow;else break;l=Ya(i.document)}return l}function Md(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}var pC=wr&&"documentMode"in document&&11>=document.documentMode,Xo=null,Td=null,us=null,kd=!1;function n2(i,l,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;kd||Xo==null||Xo!==Ya(f)||(f=Xo,"selectionStart"in f&&Md(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),us&&as(us,f)||(us=f,f=_u(Td,"onSelect"),0<f.length&&(l=new eu("onSelect","select",null,l,u),i.push({event:l,listeners:f}),l.target=Xo)))}function Gi(i,l){var u={};return u[i.toLowerCase()]=l.toLowerCase(),u["Webkit"+i]="webkit"+l,u["Moz"+i]="moz"+l,u}var Wo={animationend:Gi("Animation","AnimationEnd"),animationiteration:Gi("Animation","AnimationIteration"),animationstart:Gi("Animation","AnimationStart"),transitionrun:Gi("Transition","TransitionRun"),transitionstart:Gi("Transition","TransitionStart"),transitioncancel:Gi("Transition","TransitionCancel"),transitionend:Gi("Transition","TransitionEnd")},Ad={},r2={};wr&&(r2=document.createElement("div").style,"AnimationEvent"in window||(delete Wo.animationend.animation,delete Wo.animationiteration.animation,delete Wo.animationstart.animation),"TransitionEvent"in window||delete Wo.transitionend.transition);function Yi(i){if(Ad[i])return Ad[i];if(!Wo[i])return i;var l=Wo[i],u;for(u in l)if(l.hasOwnProperty(u)&&u in r2)return Ad[i]=l[u];return i}var i2=Yi("animationend"),o2=Yi("animationiteration"),l2=Yi("animationstart"),mC=Yi("transitionrun"),gC=Yi("transitionstart"),yC=Yi("transitioncancel"),s2=Yi("transitionend"),a2=new Map,Rd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rd.push("scrollEnd");function er(i,l){a2.set(i,l),$i(l,[i])}var u2=new WeakMap;function Un(i,l){if(typeof i=="object"&&i!==null){var u=u2.get(i);return u!==void 0?u:(l={value:i,source:l,stack:M0(l)},u2.set(i,l),l)}return{value:i,source:l,stack:M0(l)}}var _n=[],el=0,Od=0;function ru(){for(var i=el,l=Od=el=0;l<i;){var u=_n[l];_n[l++]=null;var f=_n[l];_n[l++]=null;var p=_n[l];_n[l++]=null;var y=_n[l];if(_n[l++]=null,f!==null&&p!==null){var E=f.pending;E===null?p.next=p:(p.next=E.next,E.next=p),f.pending=p}y!==0&&c2(u,p,y)}}function iu(i,l,u,f){_n[el++]=i,_n[el++]=l,_n[el++]=u,_n[el++]=f,Od|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function Nd(i,l,u,f){return iu(i,l,u,f),ou(i)}function tl(i,l){return iu(i,null,null,l),ou(i)}function c2(i,l,u){i.lanes|=u;var f=i.alternate;f!==null&&(f.lanes|=u);for(var p=!1,y=i.return;y!==null;)y.childLanes|=u,f=y.alternate,f!==null&&(f.childLanes|=u),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(p=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,p&&l!==null&&(p=31-Rt(u),i=y.hiddenUpdates,f=i[p],f===null?i[p]=[l]:f.push(l),l.lane=u|536870912),y):null}function ou(i){if(50<Hs)throw Hs=0,jh=null,Error(r(185));for(var l=i.return;l!==null;)i=l,l=i.return;return i.tag===3?i.stateNode:null}var nl={};function bC(i,l,u,f){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(i,l,u,f){return new bC(i,l,u,f)}function Dd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Mr(i,l){var u=i.alternate;return u===null?(u=Rn(i.tag,l,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=l,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,l=i.dependencies,u.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function f2(i,l){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=l,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,l=u.dependencies,i.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),i}function lu(i,l,u,f,p,y){var E=0;if(f=i,typeof i=="function")Dd(i)&&(E=1);else if(typeof i=="string")E=C6(i,u,ie.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case se:return i=Rn(31,u,l,p),i.elementType=se,i.lanes=y,i;case C:return Ji(u.children,p,y,l);case x:E=8,p|=24;break;case M:return i=Rn(12,u,l,p|2),i.elementType=M,i.lanes=y,i;case I:return i=Rn(13,u,l,p),i.elementType=I,i.lanes=y,i;case Q:return i=Rn(19,u,l,p),i.elementType=Q,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case k:case D:E=10;break e;case O:E=9;break e;case P:E=11;break e;case te:E=14;break e;case X:E=16,f=null;break e}E=29,u=Error(r(130,i===null?"null":typeof i,"")),f=null}return l=Rn(E,u,l,p),l.elementType=i,l.type=f,l.lanes=y,l}function Ji(i,l,u,f){return i=Rn(7,i,f,l),i.lanes=u,i}function Ld(i,l,u){return i=Rn(6,i,null,l),i.lanes=u,i}function Hd(i,l,u){return l=Rn(4,i.children!==null?i.children:[],i.key,l),l.lanes=u,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}var rl=[],il=0,su=null,au=0,qn=[],Pn=0,Qi=null,Tr=1,kr="";function Xi(i,l){rl[il++]=au,rl[il++]=su,su=i,au=l}function d2(i,l,u){qn[Pn++]=Tr,qn[Pn++]=kr,qn[Pn++]=Qi,Qi=i;var f=Tr;i=kr;var p=32-Rt(f)-1;f&=~(1<<p),u+=1;var y=32-Rt(l)+p;if(30<y){var E=p-p%5;y=(f&(1<<E)-1).toString(32),f>>=E,p-=E,Tr=1<<32-Rt(l)+p|u<<p|f,kr=y+i}else Tr=1<<y|u<<p|f,kr=i}function zd(i){i.return!==null&&(Xi(i,1),d2(i,1,0))}function Bd(i){for(;i===su;)su=rl[--il],rl[il]=null,au=rl[--il],rl[il]=null;for(;i===Qi;)Qi=qn[--Pn],qn[Pn]=null,kr=qn[--Pn],qn[Pn]=null,Tr=qn[--Pn],qn[Pn]=null}var ln=null,ct=null,Ve=!1,Wi=null,sr=!1,jd=Error(r(519));function eo(i){var l=Error(r(418,""));throw ds(Un(l,i)),jd}function h2(i){var l=i.stateNode,u=i.type,f=i.memoizedProps;switch(l[Yt]=i,l[gn]=f,u){case"dialog":Le("cancel",l),Le("close",l);break;case"iframe":case"object":case"embed":Le("load",l);break;case"video":case"audio":for(u=0;u<Bs.length;u++)Le(Bs[u],l);break;case"source":Le("error",l);break;case"img":case"image":case"link":Le("error",l),Le("load",l);break;case"details":Le("toggle",l);break;case"input":Le("invalid",l),A0(l,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),Ga(l);break;case"select":Le("invalid",l);break;case"textarea":Le("invalid",l),O0(l,f.value,f.defaultValue,f.children),Ga(l)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||l.textContent===""+u||f.suppressHydrationWarning===!0||Oy(l.textContent,u)?(f.popover!=null&&(Le("beforetoggle",l),Le("toggle",l)),f.onScroll!=null&&Le("scroll",l),f.onScrollEnd!=null&&Le("scrollend",l),f.onClick!=null&&(l.onclick=qu),l=!0):l=!1,l||eo(i)}function p2(i){for(ln=i.return;ln;)switch(ln.tag){case 5:case 13:sr=!1;return;case 27:case 3:sr=!0;return;default:ln=ln.return}}function cs(i){if(i!==ln)return!1;if(!Ve)return p2(i),Ve=!0,!1;var l=i.tag,u;if((u=l!==3&&l!==27)&&((u=l===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||Wh(i.type,i.memoizedProps)),u=!u),u&&ct&&eo(i),p2(i),l===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,l=0;i;){if(i.nodeType===8)if(u=i.data,u==="/$"){if(l===0){ct=nr(i.nextSibling);break e}l--}else u!=="$"&&u!=="$!"&&u!=="$?"||l++;i=i.nextSibling}ct=null}}else l===27?(l=ct,pi(i.type)?(i=rp,rp=null,ct=i):ct=l):ct=ln?nr(i.stateNode.nextSibling):null;return!0}function fs(){ct=ln=null,Ve=!1}function m2(){var i=Wi;return i!==null&&(Cn===null?Cn=i:Cn.push.apply(Cn,i),Wi=null),i}function ds(i){Wi===null?Wi=[i]:Wi.push(i)}var Id=F(null),to=null,Ar=null;function Wr(i,l,u){J(Id,l._currentValue),l._currentValue=u}function Rr(i){i._currentValue=Id.current,q(Id)}function Vd(i,l,u){for(;i!==null;){var f=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,f!==null&&(f.childLanes|=l)):f!==null&&(f.childLanes&l)!==l&&(f.childLanes|=l),i===u)break;i=i.return}}function Ud(i,l,u,f){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var y=p.dependencies;if(y!==null){var E=p.child;y=y.firstContext;e:for(;y!==null;){var T=y;y=p;for(var R=0;R<l.length;R++)if(T.context===l[R]){y.lanes|=u,T=y.alternate,T!==null&&(T.lanes|=u),Vd(y.return,u,i),f||(E=null);break e}y=T.next}}else if(p.tag===18){if(E=p.return,E===null)throw Error(r(341));E.lanes|=u,y=E.alternate,y!==null&&(y.lanes|=u),Vd(E,u,i),E=null}else E=p.child;if(E!==null)E.return=p;else for(E=p;E!==null;){if(E===i){E=null;break}if(p=E.sibling,p!==null){p.return=E.return,E=p;break}E=E.return}p=E}}function hs(i,l,u,f){i=null;for(var p=l,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var E=p.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var T=p.type;An(p.pendingProps.value,E.value)||(i!==null?i.push(T):i=[T])}}else if(p===qe.current){if(E=p.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(qs):i=[qs])}p=p.return}i!==null&&Ud(l,i,u,f),l.flags|=262144}function uu(i){for(i=i.firstContext;i!==null;){if(!An(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function no(i){to=i,Ar=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Jt(i){return g2(to,i)}function cu(i,l){return to===null&&no(i),g2(i,l)}function g2(i,l){var u=l._currentValue;if(l={context:l,memoizedValue:u,next:null},Ar===null){if(i===null)throw Error(r(308));Ar=l,i.dependencies={lanes:0,firstContext:l},i.flags|=524288}else Ar=Ar.next=l;return u}var vC=typeof AbortController<"u"?AbortController:function(){var i=[],l=this.signal={aborted:!1,addEventListener:function(u,f){i.push(f)}};this.abort=function(){l.aborted=!0,i.forEach(function(u){return u()})}},CC=n.unstable_scheduleCallback,xC=n.unstable_NormalPriority,Mt={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _d(){return{controller:new vC,data:new Map,refCount:0}}function ps(i){i.refCount--,i.refCount===0&&CC(xC,function(){i.controller.abort()})}var ms=null,qd=0,ol=0,ll=null;function SC(i,l){if(ms===null){var u=ms=[];qd=0,ol=Fh(),ll={status:"pending",value:void 0,then:function(f){u.push(f)}}}return qd++,l.then(y2,y2),l}function y2(){if(--qd===0&&ms!==null){ll!==null&&(ll.status="fulfilled");var i=ms;ms=null,ol=0,ll=null;for(var l=0;l<i.length;l++)(0,i[l])()}}function EC(i,l){var u=[],f={status:"pending",value:null,reason:null,then:function(p){u.push(p)}};return i.then(function(){f.status="fulfilled",f.value=l;for(var p=0;p<u.length;p++)(0,u[p])(l)},function(p){for(f.status="rejected",f.reason=p,p=0;p<u.length;p++)(0,u[p])(void 0)}),f}var b2=H.S;H.S=function(i,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&SC(i,l),b2!==null&&b2(i,l)};var ro=F(null);function Pd(){var i=ro.current;return i!==null?i:et.pooledCache}function fu(i,l){l===null?J(ro,ro.current):J(ro,l.pool)}function v2(){var i=Pd();return i===null?null:{parent:Mt._currentValue,pool:i}}var gs=Error(r(460)),C2=Error(r(474)),du=Error(r(542)),Fd={then:function(){}};function x2(i){return i=i.status,i==="fulfilled"||i==="rejected"}function hu(){}function S2(i,l,u){switch(u=i[u],u===void 0?i.push(l):u!==l&&(l.then(hu,hu),l=u),l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,w2(i),i;default:if(typeof l.status=="string")l.then(hu,hu);else{if(i=et,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=l,i.status="pending",i.then(function(f){if(l.status==="pending"){var p=l;p.status="fulfilled",p.value=f}},function(f){if(l.status==="pending"){var p=l;p.status="rejected",p.reason=f}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,w2(i),i}throw ys=l,gs}}var ys=null;function E2(){if(ys===null)throw Error(r(459));var i=ys;return ys=null,i}function w2(i){if(i===gs||i===du)throw Error(r(483))}var ei=!1;function Kd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $d(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ti(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ni(i,l,u){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(Pe&2)!==0){var p=f.pending;return p===null?l.next=l:(l.next=p.next,p.next=l),f.pending=l,l=ou(i),c2(i,null,u),l}return iu(i,f,l,u),ou(i)}function bs(i,l,u){if(l=l.updateQueue,l!==null&&(l=l.shared,(u&4194048)!==0)){var f=l.lanes;f&=i.pendingLanes,u|=f,l.lanes=u,y0(i,u)}}function Zd(i,l){var u=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var p=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var E={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};y===null?p=y=E:y=y.next=E,u=u.next}while(u!==null);y===null?p=y=l:y=y.next=l}else p=y=l;u={baseState:f.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:f.shared,callbacks:f.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=l:i.next=l,u.lastBaseUpdate=l}var Gd=!1;function vs(){if(Gd){var i=ll;if(i!==null)throw i}}function Cs(i,l,u,f){Gd=!1;var p=i.updateQueue;ei=!1;var y=p.firstBaseUpdate,E=p.lastBaseUpdate,T=p.shared.pending;if(T!==null){p.shared.pending=null;var R=T,j=R.next;R.next=null,E===null?y=j:E.next=j,E=R;var K=i.alternate;K!==null&&(K=K.updateQueue,T=K.lastBaseUpdate,T!==E&&(T===null?K.firstBaseUpdate=j:T.next=j,K.lastBaseUpdate=R))}if(y!==null){var G=p.baseState;E=0,K=j=R=null,T=y;do{var V=T.lane&-536870913,U=V!==T.lane;if(U?(Be&V)===V:(f&V)===V){V!==0&&V===ol&&(Gd=!0),K!==null&&(K=K.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var be=i,pe=T;V=l;var Ze=u;switch(pe.tag){case 1:if(be=pe.payload,typeof be=="function"){G=be.call(Ze,G,V);break e}G=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=pe.payload,V=typeof be=="function"?be.call(Ze,G,V):be,V==null)break e;G=m({},G,V);break e;case 2:ei=!0}}V=T.callback,V!==null&&(i.flags|=64,U&&(i.flags|=8192),U=p.callbacks,U===null?p.callbacks=[V]:U.push(V))}else U={lane:V,tag:T.tag,payload:T.payload,callback:T.callback,next:null},K===null?(j=K=U,R=G):K=K.next=U,E|=V;if(T=T.next,T===null){if(T=p.shared.pending,T===null)break;U=T,T=U.next,U.next=null,p.lastBaseUpdate=U,p.shared.pending=null}}while(!0);K===null&&(R=G),p.baseState=R,p.firstBaseUpdate=j,p.lastBaseUpdate=K,y===null&&(p.shared.lanes=0),ci|=E,i.lanes=E,i.memoizedState=G}}function M2(i,l){if(typeof i!="function")throw Error(r(191,i));i.call(l)}function T2(i,l){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)M2(u[i],l)}var sl=F(null),pu=F(0);function k2(i,l){i=Br,J(pu,i),J(sl,l),Br=i|l.baseLanes}function Yd(){J(pu,Br),J(sl,sl.current)}function Jd(){Br=pu.current,q(sl),q(pu)}var ri=0,Ae=null,Ke=null,St=null,mu=!1,al=!1,io=!1,gu=0,xs=0,ul=null,wC=0;function gt(){throw Error(r(321))}function Qd(i,l){if(l===null)return!1;for(var u=0;u<l.length&&u<i.length;u++)if(!An(i[u],l[u]))return!1;return!0}function Xd(i,l,u,f,p,y){return ri=y,Ae=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,H.H=i===null||i.memoizedState===null?cg:fg,io=!1,y=u(f,p),io=!1,al&&(y=R2(l,u,f,p)),A2(i),y}function A2(i){H.H=Su;var l=Ke!==null&&Ke.next!==null;if(ri=0,St=Ke=Ae=null,mu=!1,xs=0,ul=null,l)throw Error(r(300));i===null||Nt||(i=i.dependencies,i!==null&&uu(i)&&(Nt=!0))}function R2(i,l,u,f){Ae=i;var p=0;do{if(al&&(ul=null),xs=0,al=!1,25<=p)throw Error(r(301));if(p+=1,St=Ke=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}H.H=NC,y=l(u,f)}while(al);return y}function MC(){var i=H.H,l=i.useState()[0];return l=typeof l.then=="function"?Ss(l):l,i=i.useState()[0],(Ke!==null?Ke.memoizedState:null)!==i&&(Ae.flags|=1024),l}function Wd(){var i=gu!==0;return gu=0,i}function eh(i,l,u){l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~u}function th(i){if(mu){for(i=i.memoizedState;i!==null;){var l=i.queue;l!==null&&(l.pending=null),i=i.next}mu=!1}ri=0,St=Ke=Ae=null,al=!1,xs=gu=0,ul=null}function bn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?Ae.memoizedState=St=i:St=St.next=i,St}function Et(){if(Ke===null){var i=Ae.alternate;i=i!==null?i.memoizedState:null}else i=Ke.next;var l=St===null?Ae.memoizedState:St.next;if(l!==null)St=l,Ke=i;else{if(i===null)throw Ae.alternate===null?Error(r(467)):Error(r(310));Ke=i,i={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},St===null?Ae.memoizedState=St=i:St=St.next=i}return St}function nh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ss(i){var l=xs;return xs+=1,ul===null&&(ul=[]),i=S2(ul,i,l),l=Ae,(St===null?l.memoizedState:St.next)===null&&(l=l.alternate,H.H=l===null||l.memoizedState===null?cg:fg),i}function yu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ss(i);if(i.$$typeof===D)return Jt(i)}throw Error(r(438,String(i)))}function rh(i){var l=null,u=Ae.updateQueue;if(u!==null&&(l=u.memoCache),l==null){var f=Ae.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(l={data:f.data.map(function(p){return p.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),u===null&&(u=nh(),Ae.updateQueue=u),u.memoCache=l,u=l.data[l.index],u===void 0)for(u=l.data[l.index]=Array(i),f=0;f<i;f++)u[f]=ne;return l.index++,u}function Or(i,l){return typeof l=="function"?l(i):l}function bu(i){var l=Et();return ih(l,Ke,i)}function ih(i,l,u){var f=i.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=u;var p=i.baseQueue,y=f.pending;if(y!==null){if(p!==null){var E=p.next;p.next=y.next,y.next=E}l.baseQueue=p=y,f.pending=null}if(y=i.baseState,p===null)i.memoizedState=y;else{l=p.next;var T=E=null,R=null,j=l,K=!1;do{var G=j.lane&-536870913;if(G!==j.lane?(Be&G)===G:(ri&G)===G){var V=j.revertLane;if(V===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),G===ol&&(K=!0);else if((ri&V)===V){j=j.next,V===ol&&(K=!0);continue}else G={lane:0,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},R===null?(T=R=G,E=y):R=R.next=G,Ae.lanes|=V,ci|=V;G=j.action,io&&u(y,G),y=j.hasEagerState?j.eagerState:u(y,G)}else V={lane:G,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},R===null?(T=R=V,E=y):R=R.next=V,Ae.lanes|=G,ci|=G;j=j.next}while(j!==null&&j!==l);if(R===null?E=y:R.next=T,!An(y,i.memoizedState)&&(Nt=!0,K&&(u=ll,u!==null)))throw u;i.memoizedState=y,i.baseState=E,i.baseQueue=R,f.lastRenderedState=y}return p===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function oh(i){var l=Et(),u=l.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=i;var f=u.dispatch,p=u.pending,y=l.memoizedState;if(p!==null){u.pending=null;var E=p=p.next;do y=i(y,E.action),E=E.next;while(E!==p);An(y,l.memoizedState)||(Nt=!0),l.memoizedState=y,l.baseQueue===null&&(l.baseState=y),u.lastRenderedState=y}return[y,f]}function O2(i,l,u){var f=Ae,p=Et(),y=Ve;if(y){if(u===void 0)throw Error(r(407));u=u()}else u=l();var E=!An((Ke||p).memoizedState,u);E&&(p.memoizedState=u,Nt=!0),p=p.queue;var T=L2.bind(null,f,p,i);if(Es(2048,8,T,[i]),p.getSnapshot!==l||E||St!==null&&St.memoizedState.tag&1){if(f.flags|=2048,cl(9,vu(),D2.bind(null,f,p,u,l),null),et===null)throw Error(r(349));y||(ri&124)!==0||N2(f,l,u)}return u}function N2(i,l,u){i.flags|=16384,i={getSnapshot:l,value:u},l=Ae.updateQueue,l===null?(l=nh(),Ae.updateQueue=l,l.stores=[i]):(u=l.stores,u===null?l.stores=[i]:u.push(i))}function D2(i,l,u,f){l.value=u,l.getSnapshot=f,H2(l)&&z2(i)}function L2(i,l,u){return u(function(){H2(l)&&z2(i)})}function H2(i){var l=i.getSnapshot;i=i.value;try{var u=l();return!An(i,u)}catch{return!0}}function z2(i){var l=tl(i,2);l!==null&&Hn(l,i,2)}function lh(i){var l=bn();if(typeof i=="function"){var u=i;if(i=u(),io){hn(!0);try{u()}finally{hn(!1)}}}return l.memoizedState=l.baseState=i,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Or,lastRenderedState:i},l}function B2(i,l,u,f){return i.baseState=u,ih(i,Ke,typeof f=="function"?f:Or)}function TC(i,l,u,f,p){if(xu(i))throw Error(r(485));if(i=l.action,i!==null){var y={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){y.listeners.push(E)}};H.T!==null?u(!0):y.isTransition=!1,f(y),u=l.pending,u===null?(y.next=l.pending=y,j2(l,y)):(y.next=u.next,l.pending=u.next=y)}}function j2(i,l){var u=l.action,f=l.payload,p=i.state;if(l.isTransition){var y=H.T,E={};H.T=E;try{var T=u(p,f),R=H.S;R!==null&&R(E,T),I2(i,l,T)}catch(j){sh(i,l,j)}finally{H.T=y}}else try{y=u(p,f),I2(i,l,y)}catch(j){sh(i,l,j)}}function I2(i,l,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){V2(i,l,f)},function(f){return sh(i,l,f)}):V2(i,l,u)}function V2(i,l,u){l.status="fulfilled",l.value=u,U2(l),i.state=u,l=i.pending,l!==null&&(u=l.next,u===l?i.pending=null:(u=u.next,l.next=u,j2(i,u)))}function sh(i,l,u){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do l.status="rejected",l.reason=u,U2(l),l=l.next;while(l!==f)}i.action=null}function U2(i){i=i.listeners;for(var l=0;l<i.length;l++)(0,i[l])()}function _2(i,l){return l}function q2(i,l){if(Ve){var u=et.formState;if(u!==null){e:{var f=Ae;if(Ve){if(ct){t:{for(var p=ct,y=sr;p.nodeType!==8;){if(!y){p=null;break t}if(p=nr(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){ct=nr(p.nextSibling),f=p.data==="F!";break e}}eo(f)}f=!1}f&&(l=u[0])}}return u=bn(),u.memoizedState=u.baseState=l,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_2,lastRenderedState:l},u.queue=f,u=sg.bind(null,Ae,f),f.dispatch=u,f=lh(!1),y=dh.bind(null,Ae,!1,f.queue),f=bn(),p={state:l,dispatch:null,action:i,pending:null},f.queue=p,u=TC.bind(null,Ae,p,y,u),p.dispatch=u,f.memoizedState=i,[l,u,!1]}function P2(i){var l=Et();return F2(l,Ke,i)}function F2(i,l,u){if(l=ih(i,l,_2)[0],i=bu(Or)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var f=Ss(l)}catch(E){throw E===gs?du:E}else f=l;l=Et();var p=l.queue,y=p.dispatch;return u!==l.memoizedState&&(Ae.flags|=2048,cl(9,vu(),kC.bind(null,p,u),null)),[f,y,i]}function kC(i,l){i.action=l}function K2(i){var l=Et(),u=Ke;if(u!==null)return F2(l,u,i);Et(),l=l.memoizedState,u=Et();var f=u.queue.dispatch;return u.memoizedState=i,[l,f,!1]}function cl(i,l,u,f){return i={tag:i,create:u,deps:f,inst:l,next:null},l=Ae.updateQueue,l===null&&(l=nh(),Ae.updateQueue=l),u=l.lastEffect,u===null?l.lastEffect=i.next=i:(f=u.next,u.next=i,i.next=f,l.lastEffect=i),i}function vu(){return{destroy:void 0,resource:void 0}}function $2(){return Et().memoizedState}function Cu(i,l,u,f){var p=bn();f=f===void 0?null:f,Ae.flags|=i,p.memoizedState=cl(1|l,vu(),u,f)}function Es(i,l,u,f){var p=Et();f=f===void 0?null:f;var y=p.memoizedState.inst;Ke!==null&&f!==null&&Qd(f,Ke.memoizedState.deps)?p.memoizedState=cl(l,y,u,f):(Ae.flags|=i,p.memoizedState=cl(1|l,y,u,f))}function Z2(i,l){Cu(8390656,8,i,l)}function G2(i,l){Es(2048,8,i,l)}function Y2(i,l){return Es(4,2,i,l)}function J2(i,l){return Es(4,4,i,l)}function Q2(i,l){if(typeof l=="function"){i=i();var u=l(i);return function(){typeof u=="function"?u():l(null)}}if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function X2(i,l,u){u=u!=null?u.concat([i]):null,Es(4,4,Q2.bind(null,l,i),u)}function ah(){}function W2(i,l){var u=Et();l=l===void 0?null:l;var f=u.memoizedState;return l!==null&&Qd(l,f[1])?f[0]:(u.memoizedState=[i,l],i)}function eg(i,l){var u=Et();l=l===void 0?null:l;var f=u.memoizedState;if(l!==null&&Qd(l,f[1]))return f[0];if(f=i(),io){hn(!0);try{i()}finally{hn(!1)}}return u.memoizedState=[f,l],f}function uh(i,l,u){return u===void 0||(ri&1073741824)!==0?i.memoizedState=l:(i.memoizedState=u,i=ry(),Ae.lanes|=i,ci|=i,u)}function tg(i,l,u,f){return An(u,l)?u:sl.current!==null?(i=uh(i,u,f),An(i,l)||(Nt=!0),i):(ri&42)===0?(Nt=!0,i.memoizedState=u):(i=ry(),Ae.lanes|=i,ci|=i,l)}function ng(i,l,u,f,p){var y=_.p;_.p=y!==0&&8>y?y:8;var E=H.T,T={};H.T=T,dh(i,!1,l,u);try{var R=p(),j=H.S;if(j!==null&&j(T,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var K=EC(R,f);ws(i,l,K,Ln(i))}else ws(i,l,f,Ln(i))}catch(G){ws(i,l,{then:function(){},status:"rejected",reason:G},Ln())}finally{_.p=y,H.T=E}}function AC(){}function ch(i,l,u,f){if(i.tag!==5)throw Error(r(476));var p=rg(i).queue;ng(i,p,l,z,u===null?AC:function(){return ig(i),u(f)})}function rg(i){var l=i.memoizedState;if(l!==null)return l;l={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Or,lastRenderedState:z},next:null};var u={};return l.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Or,lastRenderedState:u},next:null},i.memoizedState=l,i=i.alternate,i!==null&&(i.memoizedState=l),l}function ig(i){var l=rg(i).next.queue;ws(i,l,{},Ln())}function fh(){return Jt(qs)}function og(){return Et().memoizedState}function lg(){return Et().memoizedState}function RC(i){for(var l=i.return;l!==null;){switch(l.tag){case 24:case 3:var u=Ln();i=ti(u);var f=ni(l,i,u);f!==null&&(Hn(f,l,u),bs(f,l,u)),l={cache:_d()},i.payload=l;return}l=l.return}}function OC(i,l,u){var f=Ln();u={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},xu(i)?ag(l,u):(u=Nd(i,l,u,f),u!==null&&(Hn(u,i,f),ug(u,l,f)))}function sg(i,l,u){var f=Ln();ws(i,l,u,f)}function ws(i,l,u,f){var p={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(xu(i))ag(l,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=l.lastRenderedReducer,y!==null))try{var E=l.lastRenderedState,T=y(E,u);if(p.hasEagerState=!0,p.eagerState=T,An(T,E))return iu(i,l,p,0),et===null&&ru(),!1}catch{}finally{}if(u=Nd(i,l,p,f),u!==null)return Hn(u,i,f),ug(u,l,f),!0}return!1}function dh(i,l,u,f){if(f={lane:2,revertLane:Fh(),action:f,hasEagerState:!1,eagerState:null,next:null},xu(i)){if(l)throw Error(r(479))}else l=Nd(i,u,f,2),l!==null&&Hn(l,i,2)}function xu(i){var l=i.alternate;return i===Ae||l!==null&&l===Ae}function ag(i,l){al=mu=!0;var u=i.pending;u===null?l.next=l:(l.next=u.next,u.next=l),i.pending=l}function ug(i,l,u){if((u&4194048)!==0){var f=l.lanes;f&=i.pendingLanes,u|=f,l.lanes=u,y0(i,u)}}var Su={readContext:Jt,use:yu,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt},cg={readContext:Jt,use:yu,useCallback:function(i,l){return bn().memoizedState=[i,l===void 0?null:l],i},useContext:Jt,useEffect:Z2,useImperativeHandle:function(i,l,u){u=u!=null?u.concat([i]):null,Cu(4194308,4,Q2.bind(null,l,i),u)},useLayoutEffect:function(i,l){return Cu(4194308,4,i,l)},useInsertionEffect:function(i,l){Cu(4,2,i,l)},useMemo:function(i,l){var u=bn();l=l===void 0?null:l;var f=i();if(io){hn(!0);try{i()}finally{hn(!1)}}return u.memoizedState=[f,l],f},useReducer:function(i,l,u){var f=bn();if(u!==void 0){var p=u(l);if(io){hn(!0);try{u(l)}finally{hn(!1)}}}else p=l;return f.memoizedState=f.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},f.queue=i,i=i.dispatch=OC.bind(null,Ae,i),[f.memoizedState,i]},useRef:function(i){var l=bn();return i={current:i},l.memoizedState=i},useState:function(i){i=lh(i);var l=i.queue,u=sg.bind(null,Ae,l);return l.dispatch=u,[i.memoizedState,u]},useDebugValue:ah,useDeferredValue:function(i,l){var u=bn();return uh(u,i,l)},useTransition:function(){var i=lh(!1);return i=ng.bind(null,Ae,i.queue,!0,!1),bn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,l,u){var f=Ae,p=bn();if(Ve){if(u===void 0)throw Error(r(407));u=u()}else{if(u=l(),et===null)throw Error(r(349));(Be&124)!==0||N2(f,l,u)}p.memoizedState=u;var y={value:u,getSnapshot:l};return p.queue=y,Z2(L2.bind(null,f,y,i),[i]),f.flags|=2048,cl(9,vu(),D2.bind(null,f,y,u,l),null),u},useId:function(){var i=bn(),l=et.identifierPrefix;if(Ve){var u=kr,f=Tr;u=(f&~(1<<32-Rt(f)-1)).toString(32)+u,l="«"+l+"R"+u,u=gu++,0<u&&(l+="H"+u.toString(32)),l+="»"}else u=wC++,l="«"+l+"r"+u.toString(32)+"»";return i.memoizedState=l},useHostTransitionStatus:fh,useFormState:q2,useActionState:q2,useOptimistic:function(i){var l=bn();l.memoizedState=l.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=u,l=dh.bind(null,Ae,!0,u),u.dispatch=l,[i,l]},useMemoCache:rh,useCacheRefresh:function(){return bn().memoizedState=RC.bind(null,Ae)}},fg={readContext:Jt,use:yu,useCallback:W2,useContext:Jt,useEffect:G2,useImperativeHandle:X2,useInsertionEffect:Y2,useLayoutEffect:J2,useMemo:eg,useReducer:bu,useRef:$2,useState:function(){return bu(Or)},useDebugValue:ah,useDeferredValue:function(i,l){var u=Et();return tg(u,Ke.memoizedState,i,l)},useTransition:function(){var i=bu(Or)[0],l=Et().memoizedState;return[typeof i=="boolean"?i:Ss(i),l]},useSyncExternalStore:O2,useId:og,useHostTransitionStatus:fh,useFormState:P2,useActionState:P2,useOptimistic:function(i,l){var u=Et();return B2(u,Ke,i,l)},useMemoCache:rh,useCacheRefresh:lg},NC={readContext:Jt,use:yu,useCallback:W2,useContext:Jt,useEffect:G2,useImperativeHandle:X2,useInsertionEffect:Y2,useLayoutEffect:J2,useMemo:eg,useReducer:oh,useRef:$2,useState:function(){return oh(Or)},useDebugValue:ah,useDeferredValue:function(i,l){var u=Et();return Ke===null?uh(u,i,l):tg(u,Ke.memoizedState,i,l)},useTransition:function(){var i=oh(Or)[0],l=Et().memoizedState;return[typeof i=="boolean"?i:Ss(i),l]},useSyncExternalStore:O2,useId:og,useHostTransitionStatus:fh,useFormState:K2,useActionState:K2,useOptimistic:function(i,l){var u=Et();return Ke!==null?B2(u,Ke,i,l):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:rh,useCacheRefresh:lg},fl=null,Ms=0;function Eu(i){var l=Ms;return Ms+=1,fl===null&&(fl=[]),S2(fl,i,l)}function Ts(i,l){l=l.props.ref,i.ref=l!==void 0?l:null}function wu(i,l){throw l.$$typeof===g?Error(r(525)):(i=Object.prototype.toString.call(l),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i)))}function dg(i){var l=i._init;return l(i._payload)}function hg(i){function l(L,N){if(i){var B=L.deletions;B===null?(L.deletions=[N],L.flags|=16):B.push(N)}}function u(L,N){if(!i)return null;for(;N!==null;)l(L,N),N=N.sibling;return null}function f(L){for(var N=new Map;L!==null;)L.key!==null?N.set(L.key,L):N.set(L.index,L),L=L.sibling;return N}function p(L,N){return L=Mr(L,N),L.index=0,L.sibling=null,L}function y(L,N,B){return L.index=B,i?(B=L.alternate,B!==null?(B=B.index,B<N?(L.flags|=67108866,N):B):(L.flags|=67108866,N)):(L.flags|=1048576,N)}function E(L){return i&&L.alternate===null&&(L.flags|=67108866),L}function T(L,N,B,Z){return N===null||N.tag!==6?(N=Ld(B,L.mode,Z),N.return=L,N):(N=p(N,B),N.return=L,N)}function R(L,N,B,Z){var ae=B.type;return ae===C?K(L,N,B.props.children,Z,B.key):N!==null&&(N.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===X&&dg(ae)===N.type)?(N=p(N,B.props),Ts(N,B),N.return=L,N):(N=lu(B.type,B.key,B.props,null,L.mode,Z),Ts(N,B),N.return=L,N)}function j(L,N,B,Z){return N===null||N.tag!==4||N.stateNode.containerInfo!==B.containerInfo||N.stateNode.implementation!==B.implementation?(N=Hd(B,L.mode,Z),N.return=L,N):(N=p(N,B.children||[]),N.return=L,N)}function K(L,N,B,Z,ae){return N===null||N.tag!==7?(N=Ji(B,L.mode,Z,ae),N.return=L,N):(N=p(N,B),N.return=L,N)}function G(L,N,B){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Ld(""+N,L.mode,B),N.return=L,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case b:return B=lu(N.type,N.key,N.props,null,L.mode,B),Ts(B,N),B.return=L,B;case v:return N=Hd(N,L.mode,B),N.return=L,N;case X:var Z=N._init;return N=Z(N._payload),G(L,N,B)}if($(N)||he(N))return N=Ji(N,L.mode,B,null),N.return=L,N;if(typeof N.then=="function")return G(L,Eu(N),B);if(N.$$typeof===D)return G(L,cu(L,N),B);wu(L,N)}return null}function V(L,N,B,Z){var ae=N!==null?N.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return ae!==null?null:T(L,N,""+B,Z);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case b:return B.key===ae?R(L,N,B,Z):null;case v:return B.key===ae?j(L,N,B,Z):null;case X:return ae=B._init,B=ae(B._payload),V(L,N,B,Z)}if($(B)||he(B))return ae!==null?null:K(L,N,B,Z,null);if(typeof B.then=="function")return V(L,N,Eu(B),Z);if(B.$$typeof===D)return V(L,N,cu(L,B),Z);wu(L,B)}return null}function U(L,N,B,Z,ae){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return L=L.get(B)||null,T(N,L,""+Z,ae);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case b:return L=L.get(Z.key===null?B:Z.key)||null,R(N,L,Z,ae);case v:return L=L.get(Z.key===null?B:Z.key)||null,j(N,L,Z,ae);case X:var Oe=Z._init;return Z=Oe(Z._payload),U(L,N,B,Z,ae)}if($(Z)||he(Z))return L=L.get(B)||null,K(N,L,Z,ae,null);if(typeof Z.then=="function")return U(L,N,B,Eu(Z),ae);if(Z.$$typeof===D)return U(L,N,B,cu(N,Z),ae);wu(N,Z)}return null}function be(L,N,B,Z){for(var ae=null,Oe=null,fe=N,ye=N=0,Lt=null;fe!==null&&ye<B.length;ye++){fe.index>ye?(Lt=fe,fe=null):Lt=fe.sibling;var je=V(L,fe,B[ye],Z);if(je===null){fe===null&&(fe=Lt);break}i&&fe&&je.alternate===null&&l(L,fe),N=y(je,N,ye),Oe===null?ae=je:Oe.sibling=je,Oe=je,fe=Lt}if(ye===B.length)return u(L,fe),Ve&&Xi(L,ye),ae;if(fe===null){for(;ye<B.length;ye++)fe=G(L,B[ye],Z),fe!==null&&(N=y(fe,N,ye),Oe===null?ae=fe:Oe.sibling=fe,Oe=fe);return Ve&&Xi(L,ye),ae}for(fe=f(fe);ye<B.length;ye++)Lt=U(fe,L,ye,B[ye],Z),Lt!==null&&(i&&Lt.alternate!==null&&fe.delete(Lt.key===null?ye:Lt.key),N=y(Lt,N,ye),Oe===null?ae=Lt:Oe.sibling=Lt,Oe=Lt);return i&&fe.forEach(function(vi){return l(L,vi)}),Ve&&Xi(L,ye),ae}function pe(L,N,B,Z){if(B==null)throw Error(r(151));for(var ae=null,Oe=null,fe=N,ye=N=0,Lt=null,je=B.next();fe!==null&&!je.done;ye++,je=B.next()){fe.index>ye?(Lt=fe,fe=null):Lt=fe.sibling;var vi=V(L,fe,je.value,Z);if(vi===null){fe===null&&(fe=Lt);break}i&&fe&&vi.alternate===null&&l(L,fe),N=y(vi,N,ye),Oe===null?ae=vi:Oe.sibling=vi,Oe=vi,fe=Lt}if(je.done)return u(L,fe),Ve&&Xi(L,ye),ae;if(fe===null){for(;!je.done;ye++,je=B.next())je=G(L,je.value,Z),je!==null&&(N=y(je,N,ye),Oe===null?ae=je:Oe.sibling=je,Oe=je);return Ve&&Xi(L,ye),ae}for(fe=f(fe);!je.done;ye++,je=B.next())je=U(fe,L,ye,je.value,Z),je!==null&&(i&&je.alternate!==null&&fe.delete(je.key===null?ye:je.key),N=y(je,N,ye),Oe===null?ae=je:Oe.sibling=je,Oe=je);return i&&fe.forEach(function(D6){return l(L,D6)}),Ve&&Xi(L,ye),ae}function Ze(L,N,B,Z){if(typeof B=="object"&&B!==null&&B.type===C&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case b:e:{for(var ae=B.key;N!==null;){if(N.key===ae){if(ae=B.type,ae===C){if(N.tag===7){u(L,N.sibling),Z=p(N,B.props.children),Z.return=L,L=Z;break e}}else if(N.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===X&&dg(ae)===N.type){u(L,N.sibling),Z=p(N,B.props),Ts(Z,B),Z.return=L,L=Z;break e}u(L,N);break}else l(L,N);N=N.sibling}B.type===C?(Z=Ji(B.props.children,L.mode,Z,B.key),Z.return=L,L=Z):(Z=lu(B.type,B.key,B.props,null,L.mode,Z),Ts(Z,B),Z.return=L,L=Z)}return E(L);case v:e:{for(ae=B.key;N!==null;){if(N.key===ae)if(N.tag===4&&N.stateNode.containerInfo===B.containerInfo&&N.stateNode.implementation===B.implementation){u(L,N.sibling),Z=p(N,B.children||[]),Z.return=L,L=Z;break e}else{u(L,N);break}else l(L,N);N=N.sibling}Z=Hd(B,L.mode,Z),Z.return=L,L=Z}return E(L);case X:return ae=B._init,B=ae(B._payload),Ze(L,N,B,Z)}if($(B))return be(L,N,B,Z);if(he(B)){if(ae=he(B),typeof ae!="function")throw Error(r(150));return B=ae.call(B),pe(L,N,B,Z)}if(typeof B.then=="function")return Ze(L,N,Eu(B),Z);if(B.$$typeof===D)return Ze(L,N,cu(L,B),Z);wu(L,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,N!==null&&N.tag===6?(u(L,N.sibling),Z=p(N,B),Z.return=L,L=Z):(u(L,N),Z=Ld(B,L.mode,Z),Z.return=L,L=Z),E(L)):u(L,N)}return function(L,N,B,Z){try{Ms=0;var ae=Ze(L,N,B,Z);return fl=null,ae}catch(fe){if(fe===gs||fe===du)throw fe;var Oe=Rn(29,fe,null,L.mode);return Oe.lanes=Z,Oe.return=L,Oe}finally{}}}var dl=hg(!0),pg=hg(!1),Fn=F(null),ar=null;function ii(i){var l=i.alternate;J(Tt,Tt.current&1),J(Fn,i),ar===null&&(l===null||sl.current!==null||l.memoizedState!==null)&&(ar=i)}function mg(i){if(i.tag===22){if(J(Tt,Tt.current),J(Fn,i),ar===null){var l=i.alternate;l!==null&&l.memoizedState!==null&&(ar=i)}}else oi()}function oi(){J(Tt,Tt.current),J(Fn,Fn.current)}function Nr(i){q(Fn),ar===i&&(ar=null),q(Tt)}var Tt=F(0);function Mu(i){for(var l=i;l!==null;){if(l.tag===13){var u=l.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||np(u)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function hh(i,l,u,f){l=i.memoizedState,u=u(f,l),u=u==null?l:m({},l,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var ph={enqueueSetState:function(i,l,u){i=i._reactInternals;var f=Ln(),p=ti(f);p.payload=l,u!=null&&(p.callback=u),l=ni(i,p,f),l!==null&&(Hn(l,i,f),bs(l,i,f))},enqueueReplaceState:function(i,l,u){i=i._reactInternals;var f=Ln(),p=ti(f);p.tag=1,p.payload=l,u!=null&&(p.callback=u),l=ni(i,p,f),l!==null&&(Hn(l,i,f),bs(l,i,f))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var u=Ln(),f=ti(u);f.tag=2,l!=null&&(f.callback=l),l=ni(i,f,u),l!==null&&(Hn(l,i,u),bs(l,i,u))}};function gg(i,l,u,f,p,y,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,y,E):l.prototype&&l.prototype.isPureReactComponent?!as(u,f)||!as(p,y):!0}function yg(i,l,u,f){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(u,f),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(u,f),l.state!==i&&ph.enqueueReplaceState(l,l.state,null)}function oo(i,l){var u=l;if("ref"in l){u={};for(var f in l)f!=="ref"&&(u[f]=l[f])}if(i=i.defaultProps){u===l&&(u=m({},u));for(var p in i)u[p]===void 0&&(u[p]=i[p])}return u}var Tu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function bg(i){Tu(i)}function vg(i){console.error(i)}function Cg(i){Tu(i)}function ku(i,l){try{var u=i.onUncaughtError;u(l.value,{componentStack:l.stack})}catch(f){setTimeout(function(){throw f})}}function xg(i,l,u){try{var f=i.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function mh(i,l,u){return u=ti(u),u.tag=3,u.payload={element:null},u.callback=function(){ku(i,l)},u}function Sg(i){return i=ti(i),i.tag=3,i}function Eg(i,l,u,f){var p=u.type.getDerivedStateFromError;if(typeof p=="function"){var y=f.value;i.payload=function(){return p(y)},i.callback=function(){xg(l,u,f)}}var E=u.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(i.callback=function(){xg(l,u,f),typeof p!="function"&&(fi===null?fi=new Set([this]):fi.add(this));var T=f.stack;this.componentDidCatch(f.value,{componentStack:T!==null?T:""})})}function DC(i,l,u,f,p){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(l=u.alternate,l!==null&&hs(l,u,p,!0),u=Fn.current,u!==null){switch(u.tag){case 13:return ar===null?Vh():u.alternate===null&&ft===0&&(ft=3),u.flags&=-257,u.flags|=65536,u.lanes=p,f===Fd?u.flags|=16384:(l=u.updateQueue,l===null?u.updateQueue=new Set([f]):l.add(f),_h(i,f,p)),!1;case 22:return u.flags|=65536,f===Fd?u.flags|=16384:(l=u.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=l):(u=l.retryQueue,u===null?l.retryQueue=new Set([f]):u.add(f)),_h(i,f,p)),!1}throw Error(r(435,u.tag))}return _h(i,f,p),Vh(),!1}if(Ve)return l=Fn.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=p,f!==jd&&(i=Error(r(422),{cause:f}),ds(Un(i,u)))):(f!==jd&&(l=Error(r(423),{cause:f}),ds(Un(l,u))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,f=Un(f,u),p=mh(i.stateNode,f,p),Zd(i,p),ft!==4&&(ft=2)),!1;var y=Error(r(520),{cause:f});if(y=Un(y,u),Ls===null?Ls=[y]:Ls.push(y),ft!==4&&(ft=2),l===null)return!0;f=Un(f,u),u=l;do{switch(u.tag){case 3:return u.flags|=65536,i=p&-p,u.lanes|=i,i=mh(u.stateNode,f,i),Zd(u,i),!1;case 1:if(l=u.type,y=u.stateNode,(u.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(fi===null||!fi.has(y))))return u.flags|=65536,p&=-p,u.lanes|=p,p=Sg(p),Eg(p,i,u,f),Zd(u,p),!1}u=u.return}while(u!==null);return!1}var wg=Error(r(461)),Nt=!1;function jt(i,l,u,f){l.child=i===null?pg(l,null,u,f):dl(l,i.child,u,f)}function Mg(i,l,u,f,p){u=u.render;var y=l.ref;if("ref"in f){var E={};for(var T in f)T!=="ref"&&(E[T]=f[T])}else E=f;return no(l),f=Xd(i,l,u,E,y,p),T=Wd(),i!==null&&!Nt?(eh(i,l,p),Dr(i,l,p)):(Ve&&T&&zd(l),l.flags|=1,jt(i,l,f,p),l.child)}function Tg(i,l,u,f,p){if(i===null){var y=u.type;return typeof y=="function"&&!Dd(y)&&y.defaultProps===void 0&&u.compare===null?(l.tag=15,l.type=y,kg(i,l,y,f,p)):(i=lu(u.type,null,f,l,l.mode,p),i.ref=l.ref,i.return=l,l.child=i)}if(y=i.child,!Eh(i,p)){var E=y.memoizedProps;if(u=u.compare,u=u!==null?u:as,u(E,f)&&i.ref===l.ref)return Dr(i,l,p)}return l.flags|=1,i=Mr(y,f),i.ref=l.ref,i.return=l,l.child=i}function kg(i,l,u,f,p){if(i!==null){var y=i.memoizedProps;if(as(y,f)&&i.ref===l.ref)if(Nt=!1,l.pendingProps=f=y,Eh(i,p))(i.flags&131072)!==0&&(Nt=!0);else return l.lanes=i.lanes,Dr(i,l,p)}return gh(i,l,u,f,p)}function Ag(i,l,u){var f=l.pendingProps,p=f.children,y=i!==null?i.memoizedState:null;if(f.mode==="hidden"){if((l.flags&128)!==0){if(f=y!==null?y.baseLanes|u:u,i!==null){for(p=l.child=i.child,y=0;p!==null;)y=y|p.lanes|p.childLanes,p=p.sibling;l.childLanes=y&~f}else l.childLanes=0,l.child=null;return Rg(i,l,f,u)}if((u&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},i!==null&&fu(l,y!==null?y.cachePool:null),y!==null?k2(l,y):Yd(),mg(l);else return l.lanes=l.childLanes=536870912,Rg(i,l,y!==null?y.baseLanes|u:u,u)}else y!==null?(fu(l,y.cachePool),k2(l,y),oi(),l.memoizedState=null):(i!==null&&fu(l,null),Yd(),oi());return jt(i,l,p,u),l.child}function Rg(i,l,u,f){var p=Pd();return p=p===null?null:{parent:Mt._currentValue,pool:p},l.memoizedState={baseLanes:u,cachePool:p},i!==null&&fu(l,null),Yd(),mg(l),i!==null&&hs(i,l,f,!0),null}function Au(i,l){var u=l.ref;if(u===null)i!==null&&i.ref!==null&&(l.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(i===null||i.ref!==u)&&(l.flags|=4194816)}}function gh(i,l,u,f,p){return no(l),u=Xd(i,l,u,f,void 0,p),f=Wd(),i!==null&&!Nt?(eh(i,l,p),Dr(i,l,p)):(Ve&&f&&zd(l),l.flags|=1,jt(i,l,u,p),l.child)}function Og(i,l,u,f,p,y){return no(l),l.updateQueue=null,u=R2(l,f,u,p),A2(i),f=Wd(),i!==null&&!Nt?(eh(i,l,y),Dr(i,l,y)):(Ve&&f&&zd(l),l.flags|=1,jt(i,l,u,y),l.child)}function Ng(i,l,u,f,p){if(no(l),l.stateNode===null){var y=nl,E=u.contextType;typeof E=="object"&&E!==null&&(y=Jt(E)),y=new u(f,y),l.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=ph,l.stateNode=y,y._reactInternals=l,y=l.stateNode,y.props=f,y.state=l.memoizedState,y.refs={},Kd(l),E=u.contextType,y.context=typeof E=="object"&&E!==null?Jt(E):nl,y.state=l.memoizedState,E=u.getDerivedStateFromProps,typeof E=="function"&&(hh(l,u,E,f),y.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(E=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),E!==y.state&&ph.enqueueReplaceState(y,y.state,null),Cs(l,f,y,p),vs(),y.state=l.memoizedState),typeof y.componentDidMount=="function"&&(l.flags|=4194308),f=!0}else if(i===null){y=l.stateNode;var T=l.memoizedProps,R=oo(u,T);y.props=R;var j=y.context,K=u.contextType;E=nl,typeof K=="object"&&K!==null&&(E=Jt(K));var G=u.getDerivedStateFromProps;K=typeof G=="function"||typeof y.getSnapshotBeforeUpdate=="function",T=l.pendingProps!==T,K||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T||j!==E)&&yg(l,y,f,E),ei=!1;var V=l.memoizedState;y.state=V,Cs(l,f,y,p),vs(),j=l.memoizedState,T||V!==j||ei?(typeof G=="function"&&(hh(l,u,G,f),j=l.memoizedState),(R=ei||gg(l,u,R,f,V,j,E))?(K||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(l.flags|=4194308)):(typeof y.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=f,l.memoizedState=j),y.props=f,y.state=j,y.context=E,f=R):(typeof y.componentDidMount=="function"&&(l.flags|=4194308),f=!1)}else{y=l.stateNode,$d(i,l),E=l.memoizedProps,K=oo(u,E),y.props=K,G=l.pendingProps,V=y.context,j=u.contextType,R=nl,typeof j=="object"&&j!==null&&(R=Jt(j)),T=u.getDerivedStateFromProps,(j=typeof T=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==G||V!==R)&&yg(l,y,f,R),ei=!1,V=l.memoizedState,y.state=V,Cs(l,f,y,p),vs();var U=l.memoizedState;E!==G||V!==U||ei||i!==null&&i.dependencies!==null&&uu(i.dependencies)?(typeof T=="function"&&(hh(l,u,T,f),U=l.memoizedState),(K=ei||gg(l,u,K,f,V,U,R)||i!==null&&i.dependencies!==null&&uu(i.dependencies))?(j||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(f,U,R),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(f,U,R)),typeof y.componentDidUpdate=="function"&&(l.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===i.memoizedProps&&V===i.memoizedState||(l.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&V===i.memoizedState||(l.flags|=1024),l.memoizedProps=f,l.memoizedState=U),y.props=f,y.state=U,y.context=R,f=K):(typeof y.componentDidUpdate!="function"||E===i.memoizedProps&&V===i.memoizedState||(l.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&V===i.memoizedState||(l.flags|=1024),f=!1)}return y=f,Au(i,l),f=(l.flags&128)!==0,y||f?(y=l.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:y.render(),l.flags|=1,i!==null&&f?(l.child=dl(l,i.child,null,p),l.child=dl(l,null,u,p)):jt(i,l,u,p),l.memoizedState=y.state,i=l.child):i=Dr(i,l,p),i}function Dg(i,l,u,f){return fs(),l.flags|=256,jt(i,l,u,f),l.child}var yh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bh(i){return{baseLanes:i,cachePool:v2()}}function vh(i,l,u){return i=i!==null?i.childLanes&~u:0,l&&(i|=Kn),i}function Lg(i,l,u){var f=l.pendingProps,p=!1,y=(l.flags&128)!==0,E;if((E=y)||(E=i!==null&&i.memoizedState===null?!1:(Tt.current&2)!==0),E&&(p=!0,l.flags&=-129),E=(l.flags&32)!==0,l.flags&=-33,i===null){if(Ve){if(p?ii(l):oi(),Ve){var T=ct,R;if(R=T){e:{for(R=T,T=sr;R.nodeType!==8;){if(!T){T=null;break e}if(R=nr(R.nextSibling),R===null){T=null;break e}}T=R}T!==null?(l.memoizedState={dehydrated:T,treeContext:Qi!==null?{id:Tr,overflow:kr}:null,retryLane:536870912,hydrationErrors:null},R=Rn(18,null,null,0),R.stateNode=T,R.return=l,l.child=R,ln=l,ct=null,R=!0):R=!1}R||eo(l)}if(T=l.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return np(T)?l.lanes=32:l.lanes=536870912,null;Nr(l)}return T=f.children,f=f.fallback,p?(oi(),p=l.mode,T=Ru({mode:"hidden",children:T},p),f=Ji(f,p,u,null),T.return=l,f.return=l,T.sibling=f,l.child=T,p=l.child,p.memoizedState=bh(u),p.childLanes=vh(i,E,u),l.memoizedState=yh,f):(ii(l),Ch(l,T))}if(R=i.memoizedState,R!==null&&(T=R.dehydrated,T!==null)){if(y)l.flags&256?(ii(l),l.flags&=-257,l=xh(i,l,u)):l.memoizedState!==null?(oi(),l.child=i.child,l.flags|=128,l=null):(oi(),p=f.fallback,T=l.mode,f=Ru({mode:"visible",children:f.children},T),p=Ji(p,T,u,null),p.flags|=2,f.return=l,p.return=l,f.sibling=p,l.child=f,dl(l,i.child,null,u),f=l.child,f.memoizedState=bh(u),f.childLanes=vh(i,E,u),l.memoizedState=yh,l=p);else if(ii(l),np(T)){if(E=T.nextSibling&&T.nextSibling.dataset,E)var j=E.dgst;E=j,f=Error(r(419)),f.stack="",f.digest=E,ds({value:f,source:null,stack:null}),l=xh(i,l,u)}else if(Nt||hs(i,l,u,!1),E=(u&i.childLanes)!==0,Nt||E){if(E=et,E!==null&&(f=u&-u,f=(f&42)!==0?1:rd(f),f=(f&(E.suspendedLanes|u))!==0?0:f,f!==0&&f!==R.retryLane))throw R.retryLane=f,tl(i,f),Hn(E,i,f),wg;T.data==="$?"||Vh(),l=xh(i,l,u)}else T.data==="$?"?(l.flags|=192,l.child=i.child,l=null):(i=R.treeContext,ct=nr(T.nextSibling),ln=l,Ve=!0,Wi=null,sr=!1,i!==null&&(qn[Pn++]=Tr,qn[Pn++]=kr,qn[Pn++]=Qi,Tr=i.id,kr=i.overflow,Qi=l),l=Ch(l,f.children),l.flags|=4096);return l}return p?(oi(),p=f.fallback,T=l.mode,R=i.child,j=R.sibling,f=Mr(R,{mode:"hidden",children:f.children}),f.subtreeFlags=R.subtreeFlags&65011712,j!==null?p=Mr(j,p):(p=Ji(p,T,u,null),p.flags|=2),p.return=l,f.return=l,f.sibling=p,l.child=f,f=p,p=l.child,T=i.child.memoizedState,T===null?T=bh(u):(R=T.cachePool,R!==null?(j=Mt._currentValue,R=R.parent!==j?{parent:j,pool:j}:R):R=v2(),T={baseLanes:T.baseLanes|u,cachePool:R}),p.memoizedState=T,p.childLanes=vh(i,E,u),l.memoizedState=yh,f):(ii(l),u=i.child,i=u.sibling,u=Mr(u,{mode:"visible",children:f.children}),u.return=l,u.sibling=null,i!==null&&(E=l.deletions,E===null?(l.deletions=[i],l.flags|=16):E.push(i)),l.child=u,l.memoizedState=null,u)}function Ch(i,l){return l=Ru({mode:"visible",children:l},i.mode),l.return=i,i.child=l}function Ru(i,l){return i=Rn(22,i,null,l),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function xh(i,l,u){return dl(l,i.child,null,u),i=Ch(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function Hg(i,l,u){i.lanes|=l;var f=i.alternate;f!==null&&(f.lanes|=l),Vd(i.return,l,u)}function Sh(i,l,u,f,p){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:p}:(y.isBackwards=l,y.rendering=null,y.renderingStartTime=0,y.last=f,y.tail=u,y.tailMode=p)}function zg(i,l,u){var f=l.pendingProps,p=f.revealOrder,y=f.tail;if(jt(i,l,f.children,u),f=Tt.current,(f&2)!==0)f=f&1|2,l.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Hg(i,u,l);else if(i.tag===19)Hg(i,u,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}switch(J(Tt,f),p){case"forwards":for(u=l.child,p=null;u!==null;)i=u.alternate,i!==null&&Mu(i)===null&&(p=u),u=u.sibling;u=p,u===null?(p=l.child,l.child=null):(p=u.sibling,u.sibling=null),Sh(l,!1,p,u,y);break;case"backwards":for(u=null,p=l.child,l.child=null;p!==null;){if(i=p.alternate,i!==null&&Mu(i)===null){l.child=p;break}i=p.sibling,p.sibling=u,u=p,p=i}Sh(l,!0,u,null,y);break;case"together":Sh(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Dr(i,l,u){if(i!==null&&(l.dependencies=i.dependencies),ci|=l.lanes,(u&l.childLanes)===0)if(i!==null){if(hs(i,l,u,!1),(u&l.childLanes)===0)return null}else return null;if(i!==null&&l.child!==i.child)throw Error(r(153));if(l.child!==null){for(i=l.child,u=Mr(i,i.pendingProps),l.child=u,u.return=l;i.sibling!==null;)i=i.sibling,u=u.sibling=Mr(i,i.pendingProps),u.return=l;u.sibling=null}return l.child}function Eh(i,l){return(i.lanes&l)!==0?!0:(i=i.dependencies,!!(i!==null&&uu(i)))}function LC(i,l,u){switch(l.tag){case 3:He(l,l.stateNode.containerInfo),Wr(l,Mt,i.memoizedState.cache),fs();break;case 27:case 5:kn(l);break;case 4:He(l,l.stateNode.containerInfo);break;case 10:Wr(l,l.type,l.memoizedProps.value);break;case 13:var f=l.memoizedState;if(f!==null)return f.dehydrated!==null?(ii(l),l.flags|=128,null):(u&l.child.childLanes)!==0?Lg(i,l,u):(ii(l),i=Dr(i,l,u),i!==null?i.sibling:null);ii(l);break;case 19:var p=(i.flags&128)!==0;if(f=(u&l.childLanes)!==0,f||(hs(i,l,u,!1),f=(u&l.childLanes)!==0),p){if(f)return zg(i,l,u);l.flags|=128}if(p=l.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),J(Tt,Tt.current),f)break;return null;case 22:case 23:return l.lanes=0,Ag(i,l,u);case 24:Wr(l,Mt,i.memoizedState.cache)}return Dr(i,l,u)}function Bg(i,l,u){if(i!==null)if(i.memoizedProps!==l.pendingProps)Nt=!0;else{if(!Eh(i,u)&&(l.flags&128)===0)return Nt=!1,LC(i,l,u);Nt=(i.flags&131072)!==0}else Nt=!1,Ve&&(l.flags&1048576)!==0&&d2(l,au,l.index);switch(l.lanes=0,l.tag){case 16:e:{i=l.pendingProps;var f=l.elementType,p=f._init;if(f=p(f._payload),l.type=f,typeof f=="function")Dd(f)?(i=oo(f,i),l.tag=1,l=Ng(null,l,f,i,u)):(l.tag=0,l=gh(null,l,f,i,u));else{if(f!=null){if(p=f.$$typeof,p===P){l.tag=11,l=Mg(null,l,f,i,u);break e}else if(p===te){l.tag=14,l=Tg(null,l,f,i,u);break e}}throw l=re(f)||f,Error(r(306,l,""))}}return l;case 0:return gh(i,l,l.type,l.pendingProps,u);case 1:return f=l.type,p=oo(f,l.pendingProps),Ng(i,l,f,p,u);case 3:e:{if(He(l,l.stateNode.containerInfo),i===null)throw Error(r(387));f=l.pendingProps;var y=l.memoizedState;p=y.element,$d(i,l),Cs(l,f,null,u);var E=l.memoizedState;if(f=E.cache,Wr(l,Mt,f),f!==y.cache&&Ud(l,[Mt],u,!0),vs(),f=E.element,y.isDehydrated)if(y={element:f,isDehydrated:!1,cache:E.cache},l.updateQueue.baseState=y,l.memoizedState=y,l.flags&256){l=Dg(i,l,f,u);break e}else if(f!==p){p=Un(Error(r(424)),l),ds(p),l=Dg(i,l,f,u);break e}else{switch(i=l.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ct=nr(i.firstChild),ln=l,Ve=!0,Wi=null,sr=!0,u=pg(l,null,f,u),l.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(fs(),f===p){l=Dr(i,l,u);break e}jt(i,l,f,u)}l=l.child}return l;case 26:return Au(i,l),i===null?(u=Uy(l.type,null,l.pendingProps,null))?l.memoizedState=u:Ve||(u=l.type,i=l.pendingProps,f=Pu(oe.current).createElement(u),f[Yt]=l,f[gn]=i,Vt(f,u,i),Ot(f),l.stateNode=f):l.memoizedState=Uy(l.type,i.memoizedProps,l.pendingProps,i.memoizedState),null;case 27:return kn(l),i===null&&Ve&&(f=l.stateNode=jy(l.type,l.pendingProps,oe.current),ln=l,sr=!0,p=ct,pi(l.type)?(rp=p,ct=nr(f.firstChild)):ct=p),jt(i,l,l.pendingProps.children,u),Au(i,l),i===null&&(l.flags|=4194304),l.child;case 5:return i===null&&Ve&&((p=f=ct)&&(f=s6(f,l.type,l.pendingProps,sr),f!==null?(l.stateNode=f,ln=l,ct=nr(f.firstChild),sr=!1,p=!0):p=!1),p||eo(l)),kn(l),p=l.type,y=l.pendingProps,E=i!==null?i.memoizedProps:null,f=y.children,Wh(p,y)?f=null:E!==null&&Wh(p,E)&&(l.flags|=32),l.memoizedState!==null&&(p=Xd(i,l,MC,null,null,u),qs._currentValue=p),Au(i,l),jt(i,l,f,u),l.child;case 6:return i===null&&Ve&&((i=u=ct)&&(u=a6(u,l.pendingProps,sr),u!==null?(l.stateNode=u,ln=l,ct=null,i=!0):i=!1),i||eo(l)),null;case 13:return Lg(i,l,u);case 4:return He(l,l.stateNode.containerInfo),f=l.pendingProps,i===null?l.child=dl(l,null,f,u):jt(i,l,f,u),l.child;case 11:return Mg(i,l,l.type,l.pendingProps,u);case 7:return jt(i,l,l.pendingProps,u),l.child;case 8:return jt(i,l,l.pendingProps.children,u),l.child;case 12:return jt(i,l,l.pendingProps.children,u),l.child;case 10:return f=l.pendingProps,Wr(l,l.type,f.value),jt(i,l,f.children,u),l.child;case 9:return p=l.type._context,f=l.pendingProps.children,no(l),p=Jt(p),f=f(p),l.flags|=1,jt(i,l,f,u),l.child;case 14:return Tg(i,l,l.type,l.pendingProps,u);case 15:return kg(i,l,l.type,l.pendingProps,u);case 19:return zg(i,l,u);case 31:return f=l.pendingProps,u=l.mode,f={mode:f.mode,children:f.children},i===null?(u=Ru(f,u),u.ref=l.ref,l.child=u,u.return=l,l=u):(u=Mr(i.child,f),u.ref=l.ref,l.child=u,u.return=l,l=u),l;case 22:return Ag(i,l,u);case 24:return no(l),f=Jt(Mt),i===null?(p=Pd(),p===null&&(p=et,y=_d(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=u),p=y),l.memoizedState={parent:f,cache:p},Kd(l),Wr(l,Mt,p)):((i.lanes&u)!==0&&($d(i,l),Cs(l,null,null,u),vs()),p=i.memoizedState,y=l.memoizedState,p.parent!==f?(p={parent:f,cache:f},l.memoizedState=p,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=p),Wr(l,Mt,f)):(f=y.cache,Wr(l,Mt,f),f!==p.cache&&Ud(l,[Mt],u,!0))),jt(i,l,l.pendingProps.children,u),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function Lr(i){i.flags|=4}function jg(i,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Ky(l)){if(l=Fn.current,l!==null&&((Be&4194048)===Be?ar!==null:(Be&62914560)!==Be&&(Be&536870912)===0||l!==ar))throw ys=Fd,C2;i.flags|=8192}}function Ou(i,l){l!==null&&(i.flags|=4),i.flags&16384&&(l=i.tag!==22?Jl():536870912,i.lanes|=l,gl|=l)}function ks(i,l){if(!Ve)switch(i.tailMode){case"hidden":l=i.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function st(i){var l=i.alternate!==null&&i.alternate.child===i.child,u=0,f=0;if(l)for(var p=i.child;p!==null;)u|=p.lanes|p.childLanes,f|=p.subtreeFlags&65011712,f|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)u|=p.lanes|p.childLanes,f|=p.subtreeFlags,f|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=f,i.childLanes=u,l}function HC(i,l,u){var f=l.pendingProps;switch(Bd(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(l),null;case 1:return st(l),null;case 3:return u=l.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),Rr(Mt),Zt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(cs(l)?Lr(l):i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,m2())),st(l),null;case 26:return u=l.memoizedState,i===null?(Lr(l),u!==null?(st(l),jg(l,u)):(st(l),l.flags&=-16777217)):u?u!==i.memoizedState?(Lr(l),st(l),jg(l,u)):(st(l),l.flags&=-16777217):(i.memoizedProps!==f&&Lr(l),st(l),l.flags&=-16777217),null;case 27:Se(l),u=oe.current;var p=l.type;if(i!==null&&l.stateNode!=null)i.memoizedProps!==f&&Lr(l);else{if(!f){if(l.stateNode===null)throw Error(r(166));return st(l),null}i=ie.current,cs(l)?h2(l):(i=jy(p,f,u),l.stateNode=i,Lr(l))}return st(l),null;case 5:if(Se(l),u=l.type,i!==null&&l.stateNode!=null)i.memoizedProps!==f&&Lr(l);else{if(!f){if(l.stateNode===null)throw Error(r(166));return st(l),null}if(i=ie.current,cs(l))h2(l);else{switch(p=Pu(oe.current),i){case 1:i=p.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:i=p.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":i=p.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":i=p.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":i=p.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof f.is=="string"?p.createElement("select",{is:f.is}):p.createElement("select"),f.multiple?i.multiple=!0:f.size&&(i.size=f.size);break;default:i=typeof f.is=="string"?p.createElement(u,{is:f.is}):p.createElement(u)}}i[Yt]=l,i[gn]=f;e:for(p=l.child;p!==null;){if(p.tag===5||p.tag===6)i.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break e;for(;p.sibling===null;){if(p.return===null||p.return===l)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}l.stateNode=i;e:switch(Vt(i,u,f),u){case"button":case"input":case"select":case"textarea":i=!!f.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Lr(l)}}return st(l),l.flags&=-16777217,null;case 6:if(i&&l.stateNode!=null)i.memoizedProps!==f&&Lr(l);else{if(typeof f!="string"&&l.stateNode===null)throw Error(r(166));if(i=oe.current,cs(l)){if(i=l.stateNode,u=l.memoizedProps,f=null,p=ln,p!==null)switch(p.tag){case 27:case 5:f=p.memoizedProps}i[Yt]=l,i=!!(i.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||Oy(i.nodeValue,u)),i||eo(l)}else i=Pu(i).createTextNode(f),i[Yt]=l,l.stateNode=i}return st(l),null;case 13:if(f=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=cs(l),f!==null&&f.dehydrated!==null){if(i===null){if(!p)throw Error(r(318));if(p=l.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[Yt]=l}else fs(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;st(l),p=!1}else p=m2(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return l.flags&256?(Nr(l),l):(Nr(l),null)}if(Nr(l),(l.flags&128)!==0)return l.lanes=u,l;if(u=f!==null,i=i!==null&&i.memoizedState!==null,u){f=l.child,p=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(p=f.alternate.memoizedState.cachePool.pool);var y=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),y!==p&&(f.flags|=2048)}return u!==i&&u&&(l.child.flags|=8192),Ou(l,l.updateQueue),st(l),null;case 4:return Zt(),i===null&&Gh(l.stateNode.containerInfo),st(l),null;case 10:return Rr(l.type),st(l),null;case 19:if(q(Tt),p=l.memoizedState,p===null)return st(l),null;if(f=(l.flags&128)!==0,y=p.rendering,y===null)if(f)ks(p,!1);else{if(ft!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(y=Mu(i),y!==null){for(l.flags|=128,ks(p,!1),i=y.updateQueue,l.updateQueue=i,Ou(l,i),l.subtreeFlags=0,i=u,u=l.child;u!==null;)f2(u,i),u=u.sibling;return J(Tt,Tt.current&1|2),l.child}i=i.sibling}p.tail!==null&&Xe()>Lu&&(l.flags|=128,f=!0,ks(p,!1),l.lanes=4194304)}else{if(!f)if(i=Mu(y),i!==null){if(l.flags|=128,f=!0,i=i.updateQueue,l.updateQueue=i,Ou(l,i),ks(p,!0),p.tail===null&&p.tailMode==="hidden"&&!y.alternate&&!Ve)return st(l),null}else 2*Xe()-p.renderingStartTime>Lu&&u!==536870912&&(l.flags|=128,f=!0,ks(p,!1),l.lanes=4194304);p.isBackwards?(y.sibling=l.child,l.child=y):(i=p.last,i!==null?i.sibling=y:l.child=y,p.last=y)}return p.tail!==null?(l=p.tail,p.rendering=l,p.tail=l.sibling,p.renderingStartTime=Xe(),l.sibling=null,i=Tt.current,J(Tt,f?i&1|2:i&1),l):(st(l),null);case 22:case 23:return Nr(l),Jd(),f=l.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(l.flags|=8192):f&&(l.flags|=8192),f?(u&536870912)!==0&&(l.flags&128)===0&&(st(l),l.subtreeFlags&6&&(l.flags|=8192)):st(l),u=l.updateQueue,u!==null&&Ou(l,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==u&&(l.flags|=2048),i!==null&&q(ro),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),l.memoizedState.cache!==u&&(l.flags|=2048),Rr(Mt),st(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function zC(i,l){switch(Bd(l),l.tag){case 1:return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return Rr(Mt),Zt(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 26:case 27:case 5:return Se(l),null;case 13:if(Nr(l),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(r(340));fs()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return q(Tt),null;case 4:return Zt(),null;case 10:return Rr(l.type),null;case 22:case 23:return Nr(l),Jd(),i!==null&&q(ro),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 24:return Rr(Mt),null;case 25:return null;default:return null}}function Ig(i,l){switch(Bd(l),l.tag){case 3:Rr(Mt),Zt();break;case 26:case 27:case 5:Se(l);break;case 4:Zt();break;case 13:Nr(l);break;case 19:q(Tt);break;case 10:Rr(l.type);break;case 22:case 23:Nr(l),Jd(),i!==null&&q(ro);break;case 24:Rr(Mt)}}function As(i,l){try{var u=l.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&i)===i){f=void 0;var y=u.create,E=u.inst;f=y(),E.destroy=f}u=u.next}while(u!==p)}}catch(T){Je(l,l.return,T)}}function li(i,l,u){try{var f=l.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var y=p.next;f=y;do{if((f.tag&i)===i){var E=f.inst,T=E.destroy;if(T!==void 0){E.destroy=void 0,p=l;var R=u,j=T;try{j()}catch(K){Je(p,R,K)}}}f=f.next}while(f!==y)}}catch(K){Je(l,l.return,K)}}function Vg(i){var l=i.updateQueue;if(l!==null){var u=i.stateNode;try{T2(l,u)}catch(f){Je(i,i.return,f)}}}function Ug(i,l,u){u.props=oo(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(f){Je(i,l,f)}}function Rs(i,l){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof u=="function"?i.refCleanup=u(f):u.current=f}}catch(p){Je(i,l,p)}}function ur(i,l){var u=i.ref,f=i.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(p){Je(i,l,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(p){Je(i,l,p)}else u.current=null}function _g(i){var l=i.type,u=i.memoizedProps,f=i.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break e;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(p){Je(i,i.return,p)}}function wh(i,l,u){try{var f=i.stateNode;n6(f,i.type,u,l),f[gn]=l}catch(p){Je(i,i.return,p)}}function qg(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&pi(i.type)||i.tag===4}function Mh(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||qg(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&pi(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Th(i,l,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,l?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,l):(l=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,l.appendChild(i),u=u._reactRootContainer,u!=null||l.onclick!==null||(l.onclick=qu));else if(f!==4&&(f===27&&pi(i.type)&&(u=i.stateNode,l=null),i=i.child,i!==null))for(Th(i,l,u),i=i.sibling;i!==null;)Th(i,l,u),i=i.sibling}function Nu(i,l,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,l?u.insertBefore(i,l):u.appendChild(i);else if(f!==4&&(f===27&&pi(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(Nu(i,l,u),i=i.sibling;i!==null;)Nu(i,l,u),i=i.sibling}function Pg(i){var l=i.stateNode,u=i.memoizedProps;try{for(var f=i.type,p=l.attributes;p.length;)l.removeAttributeNode(p[0]);Vt(l,f,u),l[Yt]=i,l[gn]=u}catch(y){Je(i,i.return,y)}}var Hr=!1,yt=!1,kh=!1,Fg=typeof WeakSet=="function"?WeakSet:Set,Dt=null;function BC(i,l){if(i=i.containerInfo,Qh=Yu,i=t2(i),Md(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var p=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var E=0,T=-1,R=-1,j=0,K=0,G=i,V=null;t:for(;;){for(var U;G!==u||p!==0&&G.nodeType!==3||(T=E+p),G!==y||f!==0&&G.nodeType!==3||(R=E+f),G.nodeType===3&&(E+=G.nodeValue.length),(U=G.firstChild)!==null;)V=G,G=U;for(;;){if(G===i)break t;if(V===u&&++j===p&&(T=E),V===y&&++K===f&&(R=E),(U=G.nextSibling)!==null)break;G=V,V=G.parentNode}G=U}u=T===-1||R===-1?null:{start:T,end:R}}else u=null}u=u||{start:0,end:0}}else u=null;for(Xh={focusedElem:i,selectionRange:u},Yu=!1,Dt=l;Dt!==null;)if(l=Dt,i=l.child,(l.subtreeFlags&1024)!==0&&i!==null)i.return=l,Dt=i;else for(;Dt!==null;){switch(l=Dt,y=l.alternate,i=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,u=l,p=y.memoizedProps,y=y.memoizedState,f=u.stateNode;try{var be=oo(u.type,p,u.elementType===u.type);i=f.getSnapshotBeforeUpdate(be,y),f.__reactInternalSnapshotBeforeUpdate=i}catch(pe){Je(u,u.return,pe)}}break;case 3:if((i&1024)!==0){if(i=l.stateNode.containerInfo,u=i.nodeType,u===9)tp(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":tp(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=l.sibling,i!==null){i.return=l.return,Dt=i;break}Dt=l.return}}function Kg(i,l,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:si(i,u),f&4&&As(5,u);break;case 1:if(si(i,u),f&4)if(i=u.stateNode,l===null)try{i.componentDidMount()}catch(E){Je(u,u.return,E)}else{var p=oo(u.type,l.memoizedProps);l=l.memoizedState;try{i.componentDidUpdate(p,l,i.__reactInternalSnapshotBeforeUpdate)}catch(E){Je(u,u.return,E)}}f&64&&Vg(u),f&512&&Rs(u,u.return);break;case 3:if(si(i,u),f&64&&(i=u.updateQueue,i!==null)){if(l=null,u.child!==null)switch(u.child.tag){case 27:case 5:l=u.child.stateNode;break;case 1:l=u.child.stateNode}try{T2(i,l)}catch(E){Je(u,u.return,E)}}break;case 27:l===null&&f&4&&Pg(u);case 26:case 5:si(i,u),l===null&&f&4&&_g(u),f&512&&Rs(u,u.return);break;case 12:si(i,u);break;case 13:si(i,u),f&4&&Gg(i,u),f&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=KC.bind(null,u),u6(i,u))));break;case 22:if(f=u.memoizedState!==null||Hr,!f){l=l!==null&&l.memoizedState!==null||yt,p=Hr;var y=yt;Hr=f,(yt=l)&&!y?ai(i,u,(u.subtreeFlags&8772)!==0):si(i,u),Hr=p,yt=y}break;case 30:break;default:si(i,u)}}function $g(i){var l=i.alternate;l!==null&&(i.alternate=null,$g(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&ld(l)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ot=null,vn=!1;function zr(i,l,u){for(u=u.child;u!==null;)Zg(i,l,u),u=u.sibling}function Zg(i,l,u){if(ze&&typeof ze.onCommitFiberUnmount=="function")try{ze.onCommitFiberUnmount(_e,u)}catch{}switch(u.tag){case 26:yt||ur(u,l),zr(i,l,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:yt||ur(u,l);var f=ot,p=vn;pi(u.type)&&(ot=u.stateNode,vn=!1),zr(i,l,u),Is(u.stateNode),ot=f,vn=p;break;case 5:yt||ur(u,l);case 6:if(f=ot,p=vn,ot=null,zr(i,l,u),ot=f,vn=p,ot!==null)if(vn)try{(ot.nodeType===9?ot.body:ot.nodeName==="HTML"?ot.ownerDocument.body:ot).removeChild(u.stateNode)}catch(y){Je(u,l,y)}else try{ot.removeChild(u.stateNode)}catch(y){Je(u,l,y)}break;case 18:ot!==null&&(vn?(i=ot,zy(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),$s(i)):zy(ot,u.stateNode));break;case 4:f=ot,p=vn,ot=u.stateNode.containerInfo,vn=!0,zr(i,l,u),ot=f,vn=p;break;case 0:case 11:case 14:case 15:yt||li(2,u,l),yt||li(4,u,l),zr(i,l,u);break;case 1:yt||(ur(u,l),f=u.stateNode,typeof f.componentWillUnmount=="function"&&Ug(u,l,f)),zr(i,l,u);break;case 21:zr(i,l,u);break;case 22:yt=(f=yt)||u.memoizedState!==null,zr(i,l,u),yt=f;break;default:zr(i,l,u)}}function Gg(i,l){if(l.memoizedState===null&&(i=l.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{$s(i)}catch(u){Je(l,l.return,u)}}function jC(i){switch(i.tag){case 13:case 19:var l=i.stateNode;return l===null&&(l=i.stateNode=new Fg),l;case 22:return i=i.stateNode,l=i._retryCache,l===null&&(l=i._retryCache=new Fg),l;default:throw Error(r(435,i.tag))}}function Ah(i,l){var u=jC(i);l.forEach(function(f){var p=$C.bind(null,i,f);u.has(f)||(u.add(f),f.then(p,p))})}function On(i,l){var u=l.deletions;if(u!==null)for(var f=0;f<u.length;f++){var p=u[f],y=i,E=l,T=E;e:for(;T!==null;){switch(T.tag){case 27:if(pi(T.type)){ot=T.stateNode,vn=!1;break e}break;case 5:ot=T.stateNode,vn=!1;break e;case 3:case 4:ot=T.stateNode.containerInfo,vn=!0;break e}T=T.return}if(ot===null)throw Error(r(160));Zg(y,E,p),ot=null,vn=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)Yg(l,i),l=l.sibling}var tr=null;function Yg(i,l){var u=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:On(l,i),Nn(i),f&4&&(li(3,i,i.return),As(3,i),li(5,i,i.return));break;case 1:On(l,i),Nn(i),f&512&&(yt||u===null||ur(u,u.return)),f&64&&Hr&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var p=tr;if(On(l,i),Nn(i),f&512&&(yt||u===null||ur(u,u.return)),f&4){var y=u!==null?u.memoizedState:null;if(f=i.memoizedState,u===null)if(f===null)if(i.stateNode===null){e:{f=i.type,u=i.memoizedProps,p=p.ownerDocument||p;t:switch(f){case"title":y=p.getElementsByTagName("title")[0],(!y||y[Xl]||y[Yt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(f),p.head.insertBefore(y,p.querySelector("head > title"))),Vt(y,f,u),y[Yt]=i,Ot(y),f=y;break e;case"link":var E=Py("link","href",p).get(f+(u.href||""));if(E){for(var T=0;T<E.length;T++)if(y=E[T],y.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&y.getAttribute("rel")===(u.rel==null?null:u.rel)&&y.getAttribute("title")===(u.title==null?null:u.title)&&y.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){E.splice(T,1);break t}}y=p.createElement(f),Vt(y,f,u),p.head.appendChild(y);break;case"meta":if(E=Py("meta","content",p).get(f+(u.content||""))){for(T=0;T<E.length;T++)if(y=E[T],y.getAttribute("content")===(u.content==null?null:""+u.content)&&y.getAttribute("name")===(u.name==null?null:u.name)&&y.getAttribute("property")===(u.property==null?null:u.property)&&y.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&y.getAttribute("charset")===(u.charSet==null?null:u.charSet)){E.splice(T,1);break t}}y=p.createElement(f),Vt(y,f,u),p.head.appendChild(y);break;default:throw Error(r(468,f))}y[Yt]=i,Ot(y),f=y}i.stateNode=f}else Fy(p,i.type,i.stateNode);else i.stateNode=qy(p,f,i.memoizedProps);else y!==f?(y===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):y.count--,f===null?Fy(p,i.type,i.stateNode):qy(p,f,i.memoizedProps)):f===null&&i.stateNode!==null&&wh(i,i.memoizedProps,u.memoizedProps)}break;case 27:On(l,i),Nn(i),f&512&&(yt||u===null||ur(u,u.return)),u!==null&&f&4&&wh(i,i.memoizedProps,u.memoizedProps);break;case 5:if(On(l,i),Nn(i),f&512&&(yt||u===null||ur(u,u.return)),i.flags&32){p=i.stateNode;try{Go(p,"")}catch(U){Je(i,i.return,U)}}f&4&&i.stateNode!=null&&(p=i.memoizedProps,wh(i,p,u!==null?u.memoizedProps:p)),f&1024&&(kh=!0);break;case 6:if(On(l,i),Nn(i),f&4){if(i.stateNode===null)throw Error(r(162));f=i.memoizedProps,u=i.stateNode;try{u.nodeValue=f}catch(U){Je(i,i.return,U)}}break;case 3:if($u=null,p=tr,tr=Fu(l.containerInfo),On(l,i),tr=p,Nn(i),f&4&&u!==null&&u.memoizedState.isDehydrated)try{$s(l.containerInfo)}catch(U){Je(i,i.return,U)}kh&&(kh=!1,Jg(i));break;case 4:f=tr,tr=Fu(i.stateNode.containerInfo),On(l,i),Nn(i),tr=f;break;case 12:On(l,i),Nn(i);break;case 13:On(l,i),Nn(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Hh=Xe()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Ah(i,f)));break;case 22:p=i.memoizedState!==null;var R=u!==null&&u.memoizedState!==null,j=Hr,K=yt;if(Hr=j||p,yt=K||R,On(l,i),yt=K,Hr=j,Nn(i),f&8192)e:for(l=i.stateNode,l._visibility=p?l._visibility&-2:l._visibility|1,p&&(u===null||R||Hr||yt||lo(i)),u=null,l=i;;){if(l.tag===5||l.tag===26){if(u===null){R=u=l;try{if(y=R.stateNode,p)E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{T=R.stateNode;var G=R.memoizedProps.style,V=G!=null&&G.hasOwnProperty("display")?G.display:null;T.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(U){Je(R,R.return,U)}}}else if(l.tag===6){if(u===null){R=l;try{R.stateNode.nodeValue=p?"":R.memoizedProps}catch(U){Je(R,R.return,U)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===i)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break e;for(;l.sibling===null;){if(l.return===null||l.return===i)break e;u===l&&(u=null),l=l.return}u===l&&(u=null),l.sibling.return=l.return,l=l.sibling}f&4&&(f=i.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,Ah(i,u))));break;case 19:On(l,i),Nn(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Ah(i,f)));break;case 30:break;case 21:break;default:On(l,i),Nn(i)}}function Nn(i){var l=i.flags;if(l&2){try{for(var u,f=i.return;f!==null;){if(qg(f)){u=f;break}f=f.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var p=u.stateNode,y=Mh(i);Nu(i,y,p);break;case 5:var E=u.stateNode;u.flags&32&&(Go(E,""),u.flags&=-33);var T=Mh(i);Nu(i,T,E);break;case 3:case 4:var R=u.stateNode.containerInfo,j=Mh(i);Th(i,j,R);break;default:throw Error(r(161))}}catch(K){Je(i,i.return,K)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function Jg(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var l=i;Jg(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),i=i.sibling}}function si(i,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)Kg(i,l.alternate,l),l=l.sibling}function lo(i){for(i=i.child;i!==null;){var l=i;switch(l.tag){case 0:case 11:case 14:case 15:li(4,l,l.return),lo(l);break;case 1:ur(l,l.return);var u=l.stateNode;typeof u.componentWillUnmount=="function"&&Ug(l,l.return,u),lo(l);break;case 27:Is(l.stateNode);case 26:case 5:ur(l,l.return),lo(l);break;case 22:l.memoizedState===null&&lo(l);break;case 30:lo(l);break;default:lo(l)}i=i.sibling}}function ai(i,l,u){for(u=u&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var f=l.alternate,p=i,y=l,E=y.flags;switch(y.tag){case 0:case 11:case 15:ai(p,y,u),As(4,y);break;case 1:if(ai(p,y,u),f=y,p=f.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(j){Je(f,f.return,j)}if(f=y,p=f.updateQueue,p!==null){var T=f.stateNode;try{var R=p.shared.hiddenCallbacks;if(R!==null)for(p.shared.hiddenCallbacks=null,p=0;p<R.length;p++)M2(R[p],T)}catch(j){Je(f,f.return,j)}}u&&E&64&&Vg(y),Rs(y,y.return);break;case 27:Pg(y);case 26:case 5:ai(p,y,u),u&&f===null&&E&4&&_g(y),Rs(y,y.return);break;case 12:ai(p,y,u);break;case 13:ai(p,y,u),u&&E&4&&Gg(p,y);break;case 22:y.memoizedState===null&&ai(p,y,u),Rs(y,y.return);break;case 30:break;default:ai(p,y,u)}l=l.sibling}}function Rh(i,l){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(i=l.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&ps(u))}function Oh(i,l){i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&ps(i))}function cr(i,l,u,f){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Qg(i,l,u,f),l=l.sibling}function Qg(i,l,u,f){var p=l.flags;switch(l.tag){case 0:case 11:case 15:cr(i,l,u,f),p&2048&&As(9,l);break;case 1:cr(i,l,u,f);break;case 3:cr(i,l,u,f),p&2048&&(i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&ps(i)));break;case 12:if(p&2048){cr(i,l,u,f),i=l.stateNode;try{var y=l.memoizedProps,E=y.id,T=y.onPostCommit;typeof T=="function"&&T(E,l.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(R){Je(l,l.return,R)}}else cr(i,l,u,f);break;case 13:cr(i,l,u,f);break;case 23:break;case 22:y=l.stateNode,E=l.alternate,l.memoizedState!==null?y._visibility&2?cr(i,l,u,f):Os(i,l):y._visibility&2?cr(i,l,u,f):(y._visibility|=2,hl(i,l,u,f,(l.subtreeFlags&10256)!==0)),p&2048&&Rh(E,l);break;case 24:cr(i,l,u,f),p&2048&&Oh(l.alternate,l);break;default:cr(i,l,u,f)}}function hl(i,l,u,f,p){for(p=p&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var y=i,E=l,T=u,R=f,j=E.flags;switch(E.tag){case 0:case 11:case 15:hl(y,E,T,R,p),As(8,E);break;case 23:break;case 22:var K=E.stateNode;E.memoizedState!==null?K._visibility&2?hl(y,E,T,R,p):Os(y,E):(K._visibility|=2,hl(y,E,T,R,p)),p&&j&2048&&Rh(E.alternate,E);break;case 24:hl(y,E,T,R,p),p&&j&2048&&Oh(E.alternate,E);break;default:hl(y,E,T,R,p)}l=l.sibling}}function Os(i,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var u=i,f=l,p=f.flags;switch(f.tag){case 22:Os(u,f),p&2048&&Rh(f.alternate,f);break;case 24:Os(u,f),p&2048&&Oh(f.alternate,f);break;default:Os(u,f)}l=l.sibling}}var Ns=8192;function pl(i){if(i.subtreeFlags&Ns)for(i=i.child;i!==null;)Xg(i),i=i.sibling}function Xg(i){switch(i.tag){case 26:pl(i),i.flags&Ns&&i.memoizedState!==null&&S6(tr,i.memoizedState,i.memoizedProps);break;case 5:pl(i);break;case 3:case 4:var l=tr;tr=Fu(i.stateNode.containerInfo),pl(i),tr=l;break;case 22:i.memoizedState===null&&(l=i.alternate,l!==null&&l.memoizedState!==null?(l=Ns,Ns=16777216,pl(i),Ns=l):pl(i));break;default:pl(i)}}function Wg(i){var l=i.alternate;if(l!==null&&(i=l.child,i!==null)){l.child=null;do l=i.sibling,i.sibling=null,i=l;while(i!==null)}}function Ds(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var f=l[u];Dt=f,ty(f,i)}Wg(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ey(i),i=i.sibling}function ey(i){switch(i.tag){case 0:case 11:case 15:Ds(i),i.flags&2048&&li(9,i,i.return);break;case 3:Ds(i);break;case 12:Ds(i);break;case 22:var l=i.stateNode;i.memoizedState!==null&&l._visibility&2&&(i.return===null||i.return.tag!==13)?(l._visibility&=-3,Du(i)):Ds(i);break;default:Ds(i)}}function Du(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var f=l[u];Dt=f,ty(f,i)}Wg(i)}for(i=i.child;i!==null;){switch(l=i,l.tag){case 0:case 11:case 15:li(8,l,l.return),Du(l);break;case 22:u=l.stateNode,u._visibility&2&&(u._visibility&=-3,Du(l));break;default:Du(l)}i=i.sibling}}function ty(i,l){for(;Dt!==null;){var u=Dt;switch(u.tag){case 0:case 11:case 15:li(8,u,l);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:ps(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,Dt=f;else e:for(u=i;Dt!==null;){f=Dt;var p=f.sibling,y=f.return;if($g(f),f===u){Dt=null;break e}if(p!==null){p.return=y,Dt=p;break e}Dt=y}}}var IC={getCacheForType:function(i){var l=Jt(Mt),u=l.data.get(i);return u===void 0&&(u=i(),l.data.set(i,u)),u}},VC=typeof WeakMap=="function"?WeakMap:Map,Pe=0,et=null,De=null,Be=0,Fe=0,Dn=null,ui=!1,ml=!1,Nh=!1,Br=0,ft=0,ci=0,so=0,Dh=0,Kn=0,gl=0,Ls=null,Cn=null,Lh=!1,Hh=0,Lu=1/0,Hu=null,fi=null,It=0,di=null,yl=null,bl=0,zh=0,Bh=null,ny=null,Hs=0,jh=null;function Ln(){if((Pe&2)!==0&&Be!==0)return Be&-Be;if(H.T!==null){var i=ol;return i!==0?i:Fh()}return b0()}function ry(){Kn===0&&(Kn=(Be&536870912)===0||Ve?Ka():536870912);var i=Fn.current;return i!==null&&(i.flags|=32),Kn}function Hn(i,l,u){(i===et&&(Fe===2||Fe===9)||i.cancelPendingCommit!==null)&&(vl(i,0),hi(i,Be,Kn,!1)),Ql(i,u),((Pe&2)===0||i!==et)&&(i===et&&((Pe&2)===0&&(so|=u),ft===4&&hi(i,Be,Kn,!1)),fr(i))}function iy(i,l,u){if((Pe&6)!==0)throw Error(r(327));var f=!u&&(l&124)===0&&(l&i.expiredLanes)===0||mn(i,l),p=f?qC(i,l):Uh(i,l,!0),y=f;do{if(p===0){ml&&!f&&hi(i,l,0,!1);break}else{if(u=i.current.alternate,y&&!UC(u)){p=Uh(i,l,!1),y=!1;continue}if(p===2){if(y=l,i.errorRecoveryDisabledLanes&y)var E=0;else E=i.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){l=E;e:{var T=i;p=Ls;var R=T.current.memoizedState.isDehydrated;if(R&&(vl(T,E).flags|=256),E=Uh(T,E,!1),E!==2){if(Nh&&!R){T.errorRecoveryDisabledLanes|=y,so|=y,p=4;break e}y=Cn,Cn=p,y!==null&&(Cn===null?Cn=y:Cn.push.apply(Cn,y))}p=E}if(y=!1,p!==2)continue}}if(p===1){vl(i,0),hi(i,l,0,!0);break}e:{switch(f=i,y=p,y){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:hi(f,l,Kn,!ui);break e;case 2:Cn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(p=Hh+300-Xe(),10<p)){if(hi(f,l,Kn,!ui),Sr(f,0,!0)!==0)break e;f.timeoutHandle=Ly(oy.bind(null,f,u,Cn,Hu,Lh,l,Kn,so,gl,ui,y,2,-0,0),p);break e}oy(f,u,Cn,Hu,Lh,l,Kn,so,gl,ui,y,0,-0,0)}}break}while(!0);fr(i)}function oy(i,l,u,f,p,y,E,T,R,j,K,G,V,U){if(i.timeoutHandle=-1,G=l.subtreeFlags,(G&8192||(G&16785408)===16785408)&&(_s={stylesheets:null,count:0,unsuspend:x6},Xg(l),G=E6(),G!==null)){i.cancelPendingCommit=G(dy.bind(null,i,l,y,u,f,p,E,T,R,K,1,V,U)),hi(i,y,E,!j);return}dy(i,l,y,u,f,p,E,T,R)}function UC(i){for(var l=i;;){var u=l.tag;if((u===0||u===11||u===15)&&l.flags&16384&&(u=l.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var p=u[f],y=p.getSnapshot;p=p.value;try{if(!An(y(),p))return!1}catch{return!1}}if(u=l.child,l.subtreeFlags&16384&&u!==null)u.return=l,l=u;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function hi(i,l,u,f){l&=~Dh,l&=~so,i.suspendedLanes|=l,i.pingedLanes&=~l,f&&(i.warmLanes|=l),f=i.expirationTimes;for(var p=l;0<p;){var y=31-Rt(p),E=1<<y;f[y]=-1,p&=~E}u!==0&&g0(i,u,l)}function zu(){return(Pe&6)===0?(zs(0),!1):!0}function Ih(){if(De!==null){if(Fe===0)var i=De.return;else i=De,Ar=to=null,th(i),fl=null,Ms=0,i=De;for(;i!==null;)Ig(i.alternate,i),i=i.return;De=null}}function vl(i,l){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,i6(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),Ih(),et=i,De=u=Mr(i.current,null),Be=l,Fe=0,Dn=null,ui=!1,ml=mn(i,l),Nh=!1,gl=Kn=Dh=so=ci=ft=0,Cn=Ls=null,Lh=!1,(l&8)!==0&&(l|=l&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=l;0<f;){var p=31-Rt(f),y=1<<p;l|=i[p],f&=~y}return Br=l,ru(),u}function ly(i,l){Ae=null,H.H=Su,l===gs||l===du?(l=E2(),Fe=3):l===C2?(l=E2(),Fe=4):Fe=l===wg?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Dn=l,De===null&&(ft=1,ku(i,Un(l,i.current)))}function sy(){var i=H.H;return H.H=Su,i===null?Su:i}function ay(){var i=H.A;return H.A=IC,i}function Vh(){ft=4,ui||(Be&4194048)!==Be&&Fn.current!==null||(ml=!0),(ci&134217727)===0&&(so&134217727)===0||et===null||hi(et,Be,Kn,!1)}function Uh(i,l,u){var f=Pe;Pe|=2;var p=sy(),y=ay();(et!==i||Be!==l)&&(Hu=null,vl(i,l)),l=!1;var E=ft;e:do try{if(Fe!==0&&De!==null){var T=De,R=Dn;switch(Fe){case 8:Ih(),E=6;break e;case 3:case 2:case 9:case 6:Fn.current===null&&(l=!0);var j=Fe;if(Fe=0,Dn=null,Cl(i,T,R,j),u&&ml){E=0;break e}break;default:j=Fe,Fe=0,Dn=null,Cl(i,T,R,j)}}_C(),E=ft;break}catch(K){ly(i,K)}while(!0);return l&&i.shellSuspendCounter++,Ar=to=null,Pe=f,H.H=p,H.A=y,De===null&&(et=null,Be=0,ru()),E}function _C(){for(;De!==null;)uy(De)}function qC(i,l){var u=Pe;Pe|=2;var f=sy(),p=ay();et!==i||Be!==l?(Hu=null,Lu=Xe()+500,vl(i,l)):ml=mn(i,l);e:do try{if(Fe!==0&&De!==null){l=De;var y=Dn;t:switch(Fe){case 1:Fe=0,Dn=null,Cl(i,l,y,1);break;case 2:case 9:if(x2(y)){Fe=0,Dn=null,cy(l);break}l=function(){Fe!==2&&Fe!==9||et!==i||(Fe=7),fr(i)},y.then(l,l);break e;case 3:Fe=7;break e;case 4:Fe=5;break e;case 7:x2(y)?(Fe=0,Dn=null,cy(l)):(Fe=0,Dn=null,Cl(i,l,y,7));break;case 5:var E=null;switch(De.tag){case 26:E=De.memoizedState;case 5:case 27:var T=De;if(!E||Ky(E)){Fe=0,Dn=null;var R=T.sibling;if(R!==null)De=R;else{var j=T.return;j!==null?(De=j,Bu(j)):De=null}break t}}Fe=0,Dn=null,Cl(i,l,y,5);break;case 6:Fe=0,Dn=null,Cl(i,l,y,6);break;case 8:Ih(),ft=6;break e;default:throw Error(r(462))}}PC();break}catch(K){ly(i,K)}while(!0);return Ar=to=null,H.H=f,H.A=p,Pe=u,De!==null?0:(et=null,Be=0,ru(),ft)}function PC(){for(;De!==null&&!ut();)uy(De)}function uy(i){var l=Bg(i.alternate,i,Br);i.memoizedProps=i.pendingProps,l===null?Bu(i):De=l}function cy(i){var l=i,u=l.alternate;switch(l.tag){case 15:case 0:l=Og(u,l,l.pendingProps,l.type,void 0,Be);break;case 11:l=Og(u,l,l.pendingProps,l.type.render,l.ref,Be);break;case 5:th(l);default:Ig(u,l),l=De=f2(l,Br),l=Bg(u,l,Br)}i.memoizedProps=i.pendingProps,l===null?Bu(i):De=l}function Cl(i,l,u,f){Ar=to=null,th(l),fl=null,Ms=0;var p=l.return;try{if(DC(i,p,l,u,Be)){ft=1,ku(i,Un(u,i.current)),De=null;return}}catch(y){if(p!==null)throw De=p,y;ft=1,ku(i,Un(u,i.current)),De=null;return}l.flags&32768?(Ve||f===1?i=!0:ml||(Be&536870912)!==0?i=!1:(ui=i=!0,(f===2||f===9||f===3||f===6)&&(f=Fn.current,f!==null&&f.tag===13&&(f.flags|=16384))),fy(l,i)):Bu(l)}function Bu(i){var l=i;do{if((l.flags&32768)!==0){fy(l,ui);return}i=l.return;var u=HC(l.alternate,l,Br);if(u!==null){De=u;return}if(l=l.sibling,l!==null){De=l;return}De=l=i}while(l!==null);ft===0&&(ft=5)}function fy(i,l){do{var u=zC(i.alternate,i);if(u!==null){u.flags&=32767,De=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!l&&(i=i.sibling,i!==null)){De=i;return}De=i=u}while(i!==null);ft=6,De=null}function dy(i,l,u,f,p,y,E,T,R){i.cancelPendingCommit=null;do ju();while(It!==0);if((Pe&6)!==0)throw Error(r(327));if(l!==null){if(l===i.current)throw Error(r(177));if(y=l.lanes|l.childLanes,y|=Od,xv(i,u,y,E,T,R),i===et&&(De=et=null,Be=0),yl=l,di=i,bl=u,zh=y,Bh=p,ny=f,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,ZC(Gt,function(){return yy(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||f){f=H.T,H.T=null,p=_.p,_.p=2,E=Pe,Pe|=4;try{BC(i,l,u)}finally{Pe=E,_.p=p,H.T=f}}It=1,hy(),py(),my()}}function hy(){if(It===1){It=0;var i=di,l=yl,u=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||u){u=H.T,H.T=null;var f=_.p;_.p=2;var p=Pe;Pe|=4;try{Yg(l,i);var y=Xh,E=t2(i.containerInfo),T=y.focusedElem,R=y.selectionRange;if(E!==T&&T&&T.ownerDocument&&e2(T.ownerDocument.documentElement,T)){if(R!==null&&Md(T)){var j=R.start,K=R.end;if(K===void 0&&(K=j),"selectionStart"in T)T.selectionStart=j,T.selectionEnd=Math.min(K,T.value.length);else{var G=T.ownerDocument||document,V=G&&G.defaultView||window;if(V.getSelection){var U=V.getSelection(),be=T.textContent.length,pe=Math.min(R.start,be),Ze=R.end===void 0?pe:Math.min(R.end,be);!U.extend&&pe>Ze&&(E=Ze,Ze=pe,pe=E);var L=W0(T,pe),N=W0(T,Ze);if(L&&N&&(U.rangeCount!==1||U.anchorNode!==L.node||U.anchorOffset!==L.offset||U.focusNode!==N.node||U.focusOffset!==N.offset)){var B=G.createRange();B.setStart(L.node,L.offset),U.removeAllRanges(),pe>Ze?(U.addRange(B),U.extend(N.node,N.offset)):(B.setEnd(N.node,N.offset),U.addRange(B))}}}}for(G=[],U=T;U=U.parentNode;)U.nodeType===1&&G.push({element:U,left:U.scrollLeft,top:U.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<G.length;T++){var Z=G[T];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Yu=!!Qh,Xh=Qh=null}finally{Pe=p,_.p=f,H.T=u}}i.current=l,It=2}}function py(){if(It===2){It=0;var i=di,l=yl,u=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||u){u=H.T,H.T=null;var f=_.p;_.p=2;var p=Pe;Pe|=4;try{Kg(i,l.alternate,l)}finally{Pe=p,_.p=f,H.T=u}}It=3}}function my(){if(It===4||It===3){It=0,lt();var i=di,l=yl,u=bl,f=ny;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?It=5:(It=0,yl=di=null,gy(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(fi=null),id(u),l=l.stateNode,ze&&typeof ze.onCommitFiberRoot=="function")try{ze.onCommitFiberRoot(_e,l,void 0,(l.current.flags&128)===128)}catch{}if(f!==null){l=H.T,p=_.p,_.p=2,H.T=null;try{for(var y=i.onRecoverableError,E=0;E<f.length;E++){var T=f[E];y(T.value,{componentStack:T.stack})}}finally{H.T=l,_.p=p}}(bl&3)!==0&&ju(),fr(i),p=i.pendingLanes,(u&4194090)!==0&&(p&42)!==0?i===jh?Hs++:(Hs=0,jh=i):Hs=0,zs(0)}}function gy(i,l){(i.pooledCacheLanes&=l)===0&&(l=i.pooledCache,l!=null&&(i.pooledCache=null,ps(l)))}function ju(i){return hy(),py(),my(),yy()}function yy(){if(It!==5)return!1;var i=di,l=zh;zh=0;var u=id(bl),f=H.T,p=_.p;try{_.p=32>u?32:u,H.T=null,u=Bh,Bh=null;var y=di,E=bl;if(It=0,yl=di=null,bl=0,(Pe&6)!==0)throw Error(r(331));var T=Pe;if(Pe|=4,ey(y.current),Qg(y,y.current,E,u),Pe=T,zs(0,!1),ze&&typeof ze.onPostCommitFiberRoot=="function")try{ze.onPostCommitFiberRoot(_e,y)}catch{}return!0}finally{_.p=p,H.T=f,gy(i,l)}}function by(i,l,u){l=Un(u,l),l=mh(i.stateNode,l,2),i=ni(i,l,2),i!==null&&(Ql(i,2),fr(i))}function Je(i,l,u){if(i.tag===3)by(i,i,u);else for(;l!==null;){if(l.tag===3){by(l,i,u);break}else if(l.tag===1){var f=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(fi===null||!fi.has(f))){i=Un(u,i),u=Sg(2),f=ni(l,u,2),f!==null&&(Eg(u,f,l,i),Ql(f,2),fr(f));break}}l=l.return}}function _h(i,l,u){var f=i.pingCache;if(f===null){f=i.pingCache=new VC;var p=new Set;f.set(l,p)}else p=f.get(l),p===void 0&&(p=new Set,f.set(l,p));p.has(u)||(Nh=!0,p.add(u),i=FC.bind(null,i,l,u),l.then(i,i))}function FC(i,l,u){var f=i.pingCache;f!==null&&f.delete(l),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,et===i&&(Be&u)===u&&(ft===4||ft===3&&(Be&62914560)===Be&&300>Xe()-Hh?(Pe&2)===0&&vl(i,0):Dh|=u,gl===Be&&(gl=0)),fr(i)}function vy(i,l){l===0&&(l=Jl()),i=tl(i,l),i!==null&&(Ql(i,l),fr(i))}function KC(i){var l=i.memoizedState,u=0;l!==null&&(u=l.retryLane),vy(i,u)}function $C(i,l){var u=0;switch(i.tag){case 13:var f=i.stateNode,p=i.memoizedState;p!==null&&(u=p.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(l),vy(i,u)}function ZC(i,l){return Ee(i,l)}var Iu=null,xl=null,qh=!1,Vu=!1,Ph=!1,ao=0;function fr(i){i!==xl&&i.next===null&&(xl===null?Iu=xl=i:xl=xl.next=i),Vu=!0,qh||(qh=!0,YC())}function zs(i,l){if(!Ph&&Vu){Ph=!0;do for(var u=!1,f=Iu;f!==null;){if(i!==0){var p=f.pendingLanes;if(p===0)var y=0;else{var E=f.suspendedLanes,T=f.pingedLanes;y=(1<<31-Rt(42|i)+1)-1,y&=p&~(E&~T),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(u=!0,Ey(f,y))}else y=Be,y=Sr(f,f===et?y:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(y&3)===0||mn(f,y)||(u=!0,Ey(f,y));f=f.next}while(u);Ph=!1}}function GC(){Cy()}function Cy(){Vu=qh=!1;var i=0;ao!==0&&(r6()&&(i=ao),ao=0);for(var l=Xe(),u=null,f=Iu;f!==null;){var p=f.next,y=xy(f,l);y===0?(f.next=null,u===null?Iu=p:u.next=p,p===null&&(xl=u)):(u=f,(i!==0||(y&3)!==0)&&(Vu=!0)),f=p}zs(i)}function xy(i,l){for(var u=i.suspendedLanes,f=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var E=31-Rt(y),T=1<<E,R=p[E];R===-1?((T&u)===0||(T&f)!==0)&&(p[E]=Vo(T,l)):R<=l&&(i.expiredLanes|=T),y&=~T}if(l=et,u=Be,u=Sr(i,i===l?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,u===0||i===l&&(Fe===2||Fe===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&we(f),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||mn(i,u)){if(l=u&-u,l===i.callbackPriority)return l;switch(f!==null&&we(f),id(u)){case 2:case 8:u=Ye;break;case 32:u=Gt;break;case 268435456:u=Ie;break;default:u=Gt}return f=Sy.bind(null,i),u=Ee(u,f),i.callbackPriority=l,i.callbackNode=u,l}return f!==null&&f!==null&&we(f),i.callbackPriority=2,i.callbackNode=null,2}function Sy(i,l){if(It!==0&&It!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(ju()&&i.callbackNode!==u)return null;var f=Be;return f=Sr(i,i===et?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(iy(i,f,l),xy(i,Xe()),i.callbackNode!=null&&i.callbackNode===u?Sy.bind(null,i):null)}function Ey(i,l){if(ju())return null;iy(i,l,!0)}function YC(){o6(function(){(Pe&6)!==0?Ee(Ue,GC):Cy()})}function Fh(){return ao===0&&(ao=Ka()),ao}function wy(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ja(""+i)}function My(i,l){var u=l.ownerDocument.createElement("input");return u.name=l.name,u.value=l.value,i.id&&u.setAttribute("form",i.id),l.parentNode.insertBefore(u,l),i=new FormData(i),u.parentNode.removeChild(u),i}function JC(i,l,u,f,p){if(l==="submit"&&u&&u.stateNode===p){var y=wy((p[gn]||null).action),E=f.submitter;E&&(l=(l=E[gn]||null)?wy(l.formAction):E.getAttribute("formAction"),l!==null&&(y=l,E=null));var T=new eu("action","action",null,f,p);i.push({event:T,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(ao!==0){var R=E?My(p,E):new FormData(p);ch(u,{pending:!0,data:R,method:p.method,action:y},null,R)}}else typeof y=="function"&&(T.preventDefault(),R=E?My(p,E):new FormData(p),ch(u,{pending:!0,data:R,method:p.method,action:y},y,R))},currentTarget:p}]})}}for(var Kh=0;Kh<Rd.length;Kh++){var $h=Rd[Kh],QC=$h.toLowerCase(),XC=$h[0].toUpperCase()+$h.slice(1);er(QC,"on"+XC)}er(i2,"onAnimationEnd"),er(o2,"onAnimationIteration"),er(l2,"onAnimationStart"),er("dblclick","onDoubleClick"),er("focusin","onFocus"),er("focusout","onBlur"),er(mC,"onTransitionRun"),er(gC,"onTransitionStart"),er(yC,"onTransitionCancel"),er(s2,"onTransitionEnd"),Ko("onMouseEnter",["mouseout","mouseover"]),Ko("onMouseLeave",["mouseout","mouseover"]),Ko("onPointerEnter",["pointerout","pointerover"]),Ko("onPointerLeave",["pointerout","pointerover"]),$i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$i("onBeforeInput",["compositionend","keypress","textInput","paste"]),$i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bs));function Ty(i,l){l=(l&4)!==0;for(var u=0;u<i.length;u++){var f=i[u],p=f.event;f=f.listeners;e:{var y=void 0;if(l)for(var E=f.length-1;0<=E;E--){var T=f[E],R=T.instance,j=T.currentTarget;if(T=T.listener,R!==y&&p.isPropagationStopped())break e;y=T,p.currentTarget=j;try{y(p)}catch(K){Tu(K)}p.currentTarget=null,y=R}else for(E=0;E<f.length;E++){if(T=f[E],R=T.instance,j=T.currentTarget,T=T.listener,R!==y&&p.isPropagationStopped())break e;y=T,p.currentTarget=j;try{y(p)}catch(K){Tu(K)}p.currentTarget=null,y=R}}}}function Le(i,l){var u=l[od];u===void 0&&(u=l[od]=new Set);var f=i+"__bubble";u.has(f)||(ky(l,i,2,!1),u.add(f))}function Zh(i,l,u){var f=0;l&&(f|=4),ky(u,i,f,l)}var Uu="_reactListening"+Math.random().toString(36).slice(2);function Gh(i){if(!i[Uu]){i[Uu]=!0,C0.forEach(function(u){u!=="selectionchange"&&(WC.has(u)||Zh(u,!1,i),Zh(u,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[Uu]||(l[Uu]=!0,Zh("selectionchange",!1,l))}}function ky(i,l,u,f){switch(Qy(l)){case 2:var p=T6;break;case 8:p=k6;break;default:p=ap}u=p.bind(null,l,u,i),p=void 0,!gd||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(p=!0),f?p!==void 0?i.addEventListener(l,u,{capture:!0,passive:p}):i.addEventListener(l,u,!0):p!==void 0?i.addEventListener(l,u,{passive:p}):i.addEventListener(l,u,!1)}function Yh(i,l,u,f,p){var y=f;if((l&1)===0&&(l&2)===0&&f!==null)e:for(;;){if(f===null)return;var E=f.tag;if(E===3||E===4){var T=f.stateNode.containerInfo;if(T===p)break;if(E===4)for(E=f.return;E!==null;){var R=E.tag;if((R===3||R===4)&&E.stateNode.containerInfo===p)return;E=E.return}for(;T!==null;){if(E=qo(T),E===null)return;if(R=E.tag,R===5||R===6||R===26||R===27){f=y=E;continue e}T=T.parentNode}}f=f.return}H0(function(){var j=y,K=pd(u),G=[];e:{var V=a2.get(i);if(V!==void 0){var U=eu,be=i;switch(i){case"keypress":if(Xa(u)===0)break e;case"keydown":case"keyup":U=Zv;break;case"focusin":be="focus",U=Cd;break;case"focusout":be="blur",U=Cd;break;case"beforeblur":case"afterblur":U=Cd;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=j0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=zv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=Jv;break;case i2:case o2:case l2:U=Iv;break;case s2:U=Xv;break;case"scroll":case"scrollend":U=Lv;break;case"wheel":U=eC;break;case"copy":case"cut":case"paste":U=Uv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=V0;break;case"toggle":case"beforetoggle":U=nC}var pe=(l&4)!==0,Ze=!pe&&(i==="scroll"||i==="scrollend"),L=pe?V!==null?V+"Capture":null:V;pe=[];for(var N=j,B;N!==null;){var Z=N;if(B=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||B===null||L===null||(Z=es(N,L),Z!=null&&pe.push(js(N,Z,B))),Ze)break;N=N.return}0<pe.length&&(V=new U(V,be,null,u,K),G.push({event:V,listeners:pe}))}}if((l&7)===0){e:{if(V=i==="mouseover"||i==="pointerover",U=i==="mouseout"||i==="pointerout",V&&u!==hd&&(be=u.relatedTarget||u.fromElement)&&(qo(be)||be[_o]))break e;if((U||V)&&(V=K.window===K?K:(V=K.ownerDocument)?V.defaultView||V.parentWindow:window,U?(be=u.relatedTarget||u.toElement,U=j,be=be?qo(be):null,be!==null&&(Ze=s(be),pe=be.tag,be!==Ze||pe!==5&&pe!==27&&pe!==6)&&(be=null)):(U=null,be=j),U!==be)){if(pe=j0,Z="onMouseLeave",L="onMouseEnter",N="mouse",(i==="pointerout"||i==="pointerover")&&(pe=V0,Z="onPointerLeave",L="onPointerEnter",N="pointer"),Ze=U==null?V:Wl(U),B=be==null?V:Wl(be),V=new pe(Z,N+"leave",U,u,K),V.target=Ze,V.relatedTarget=B,Z=null,qo(K)===j&&(pe=new pe(L,N+"enter",be,u,K),pe.target=B,pe.relatedTarget=Ze,Z=pe),Ze=Z,U&&be)t:{for(pe=U,L=be,N=0,B=pe;B;B=Sl(B))N++;for(B=0,Z=L;Z;Z=Sl(Z))B++;for(;0<N-B;)pe=Sl(pe),N--;for(;0<B-N;)L=Sl(L),B--;for(;N--;){if(pe===L||L!==null&&pe===L.alternate)break t;pe=Sl(pe),L=Sl(L)}pe=null}else pe=null;U!==null&&Ay(G,V,U,pe,!1),be!==null&&Ze!==null&&Ay(G,Ze,be,pe,!0)}}e:{if(V=j?Wl(j):window,U=V.nodeName&&V.nodeName.toLowerCase(),U==="select"||U==="input"&&V.type==="file")var ae=Z0;else if(K0(V))if(G0)ae=dC;else{ae=cC;var Oe=uC}else U=V.nodeName,!U||U.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?j&&dd(j.elementType)&&(ae=Z0):ae=fC;if(ae&&(ae=ae(i,j))){$0(G,ae,u,K);break e}Oe&&Oe(i,V,j),i==="focusout"&&j&&V.type==="number"&&j.memoizedProps.value!=null&&fd(V,"number",V.value)}switch(Oe=j?Wl(j):window,i){case"focusin":(K0(Oe)||Oe.contentEditable==="true")&&(Xo=Oe,Td=j,us=null);break;case"focusout":us=Td=Xo=null;break;case"mousedown":kd=!0;break;case"contextmenu":case"mouseup":case"dragend":kd=!1,n2(G,u,K);break;case"selectionchange":if(pC)break;case"keydown":case"keyup":n2(G,u,K)}var fe;if(Sd)e:{switch(i){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else Qo?P0(i,u)&&(ye="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(ye="onCompositionStart");ye&&(U0&&u.locale!=="ko"&&(Qo||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&Qo&&(fe=z0()):(Xr=K,yd="value"in Xr?Xr.value:Xr.textContent,Qo=!0)),Oe=_u(j,ye),0<Oe.length&&(ye=new I0(ye,i,null,u,K),G.push({event:ye,listeners:Oe}),fe?ye.data=fe:(fe=F0(u),fe!==null&&(ye.data=fe)))),(fe=iC?oC(i,u):lC(i,u))&&(ye=_u(j,"onBeforeInput"),0<ye.length&&(Oe=new I0("onBeforeInput","beforeinput",null,u,K),G.push({event:Oe,listeners:ye}),Oe.data=fe)),JC(G,i,j,u,K)}Ty(G,l)})}function js(i,l,u){return{instance:i,listener:l,currentTarget:u}}function _u(i,l){for(var u=l+"Capture",f=[];i!==null;){var p=i,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=es(i,u),p!=null&&f.unshift(js(i,p,y)),p=es(i,l),p!=null&&f.push(js(i,p,y))),i.tag===3)return f;i=i.return}return[]}function Sl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Ay(i,l,u,f,p){for(var y=l._reactName,E=[];u!==null&&u!==f;){var T=u,R=T.alternate,j=T.stateNode;if(T=T.tag,R!==null&&R===f)break;T!==5&&T!==26&&T!==27||j===null||(R=j,p?(j=es(u,y),j!=null&&E.unshift(js(u,j,R))):p||(j=es(u,y),j!=null&&E.push(js(u,j,R)))),u=u.return}E.length!==0&&i.push({event:l,listeners:E})}var e6=/\r\n?/g,t6=/\u0000|\uFFFD/g;function Ry(i){return(typeof i=="string"?i:""+i).replace(e6,`
`).replace(t6,"")}function Oy(i,l){return l=Ry(l),Ry(i)===l}function qu(){}function $e(i,l,u,f,p,y){switch(u){case"children":typeof f=="string"?l==="body"||l==="textarea"&&f===""||Go(i,f):(typeof f=="number"||typeof f=="bigint")&&l!=="body"&&Go(i,""+f);break;case"className":Za(i,"class",f);break;case"tabIndex":Za(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Za(i,u,f);break;case"style":D0(i,f,y);break;case"data":if(l!=="object"){Za(i,"data",f);break}case"src":case"href":if(f===""&&(l!=="a"||u!=="href")){i.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(u);break}f=Ja(""+f),i.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(u==="formAction"?(l!=="input"&&$e(i,l,"name",p.name,p,null),$e(i,l,"formEncType",p.formEncType,p,null),$e(i,l,"formMethod",p.formMethod,p,null),$e(i,l,"formTarget",p.formTarget,p,null)):($e(i,l,"encType",p.encType,p,null),$e(i,l,"method",p.method,p,null),$e(i,l,"target",p.target,p,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(u);break}f=Ja(""+f),i.setAttribute(u,f);break;case"onClick":f!=null&&(i.onclick=qu);break;case"onScroll":f!=null&&Le("scroll",i);break;case"onScrollEnd":f!=null&&Le("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(u=f.__html,u!=null){if(p.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}u=Ja(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(u,""+f):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":f===!0?i.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(u,f):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(u,f):i.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(u):i.setAttribute(u,f);break;case"popover":Le("beforetoggle",i),Le("toggle",i),$a(i,"popover",f);break;case"xlinkActuate":Er(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Er(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Er(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Er(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Er(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Er(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Er(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Er(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Er(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":$a(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Nv.get(u)||u,$a(i,u,f))}}function Jh(i,l,u,f,p,y){switch(u){case"style":D0(i,f,y);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(u=f.__html,u!=null){if(p.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"children":typeof f=="string"?Go(i,f):(typeof f=="number"||typeof f=="bigint")&&Go(i,""+f);break;case"onScroll":f!=null&&Le("scroll",i);break;case"onScrollEnd":f!=null&&Le("scrollend",i);break;case"onClick":f!=null&&(i.onclick=qu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!x0.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(p=u.endsWith("Capture"),l=u.slice(2,p?u.length-7:void 0),y=i[gn]||null,y=y!=null?y[u]:null,typeof y=="function"&&i.removeEventListener(l,y,p),typeof f=="function")){typeof y!="function"&&y!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(l,f,p);break e}u in i?i[u]=f:f===!0?i.setAttribute(u,""):$a(i,u,f)}}}function Vt(i,l,u){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",i),Le("load",i);var f=!1,p=!1,y;for(y in u)if(u.hasOwnProperty(y)){var E=u[y];if(E!=null)switch(y){case"src":f=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:$e(i,l,y,E,u,null)}}p&&$e(i,l,"srcSet",u.srcSet,u,null),f&&$e(i,l,"src",u.src,u,null);return;case"input":Le("invalid",i);var T=y=E=p=null,R=null,j=null;for(f in u)if(u.hasOwnProperty(f)){var K=u[f];if(K!=null)switch(f){case"name":p=K;break;case"type":E=K;break;case"checked":R=K;break;case"defaultChecked":j=K;break;case"value":y=K;break;case"defaultValue":T=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,l));break;default:$e(i,l,f,K,u,null)}}A0(i,y,T,R,j,E,p,!1),Ga(i);return;case"select":Le("invalid",i),f=E=y=null;for(p in u)if(u.hasOwnProperty(p)&&(T=u[p],T!=null))switch(p){case"value":y=T;break;case"defaultValue":E=T;break;case"multiple":f=T;default:$e(i,l,p,T,u,null)}l=y,u=E,i.multiple=!!f,l!=null?Zo(i,!!f,l,!1):u!=null&&Zo(i,!!f,u,!0);return;case"textarea":Le("invalid",i),y=p=f=null;for(E in u)if(u.hasOwnProperty(E)&&(T=u[E],T!=null))switch(E){case"value":f=T;break;case"defaultValue":p=T;break;case"children":y=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:$e(i,l,E,T,u,null)}O0(i,f,p,y),Ga(i);return;case"option":for(R in u)if(u.hasOwnProperty(R)&&(f=u[R],f!=null))switch(R){case"selected":i.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:$e(i,l,R,f,u,null)}return;case"dialog":Le("beforetoggle",i),Le("toggle",i),Le("cancel",i),Le("close",i);break;case"iframe":case"object":Le("load",i);break;case"video":case"audio":for(f=0;f<Bs.length;f++)Le(Bs[f],i);break;case"image":Le("error",i),Le("load",i);break;case"details":Le("toggle",i);break;case"embed":case"source":case"link":Le("error",i),Le("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in u)if(u.hasOwnProperty(j)&&(f=u[j],f!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:$e(i,l,j,f,u,null)}return;default:if(dd(l)){for(K in u)u.hasOwnProperty(K)&&(f=u[K],f!==void 0&&Jh(i,l,K,f,u,void 0));return}}for(T in u)u.hasOwnProperty(T)&&(f=u[T],f!=null&&$e(i,l,T,f,u,null))}function n6(i,l,u,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,E=null,T=null,R=null,j=null,K=null;for(U in u){var G=u[U];if(u.hasOwnProperty(U)&&G!=null)switch(U){case"checked":break;case"value":break;case"defaultValue":R=G;default:f.hasOwnProperty(U)||$e(i,l,U,null,f,G)}}for(var V in f){var U=f[V];if(G=u[V],f.hasOwnProperty(V)&&(U!=null||G!=null))switch(V){case"type":y=U;break;case"name":p=U;break;case"checked":j=U;break;case"defaultChecked":K=U;break;case"value":E=U;break;case"defaultValue":T=U;break;case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(r(137,l));break;default:U!==G&&$e(i,l,V,U,f,G)}}cd(i,E,T,R,j,K,y,p);return;case"select":U=E=T=V=null;for(y in u)if(R=u[y],u.hasOwnProperty(y)&&R!=null)switch(y){case"value":break;case"multiple":U=R;default:f.hasOwnProperty(y)||$e(i,l,y,null,f,R)}for(p in f)if(y=f[p],R=u[p],f.hasOwnProperty(p)&&(y!=null||R!=null))switch(p){case"value":V=y;break;case"defaultValue":T=y;break;case"multiple":E=y;default:y!==R&&$e(i,l,p,y,f,R)}l=T,u=E,f=U,V!=null?Zo(i,!!u,V,!1):!!f!=!!u&&(l!=null?Zo(i,!!u,l,!0):Zo(i,!!u,u?[]:"",!1));return;case"textarea":U=V=null;for(T in u)if(p=u[T],u.hasOwnProperty(T)&&p!=null&&!f.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:$e(i,l,T,null,f,p)}for(E in f)if(p=f[E],y=u[E],f.hasOwnProperty(E)&&(p!=null||y!=null))switch(E){case"value":V=p;break;case"defaultValue":U=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==y&&$e(i,l,E,p,f,y)}R0(i,V,U);return;case"option":for(var be in u)if(V=u[be],u.hasOwnProperty(be)&&V!=null&&!f.hasOwnProperty(be))switch(be){case"selected":i.selected=!1;break;default:$e(i,l,be,null,f,V)}for(R in f)if(V=f[R],U=u[R],f.hasOwnProperty(R)&&V!==U&&(V!=null||U!=null))switch(R){case"selected":i.selected=V&&typeof V!="function"&&typeof V!="symbol";break;default:$e(i,l,R,V,f,U)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pe in u)V=u[pe],u.hasOwnProperty(pe)&&V!=null&&!f.hasOwnProperty(pe)&&$e(i,l,pe,null,f,V);for(j in f)if(V=f[j],U=u[j],f.hasOwnProperty(j)&&V!==U&&(V!=null||U!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(137,l));break;default:$e(i,l,j,V,f,U)}return;default:if(dd(l)){for(var Ze in u)V=u[Ze],u.hasOwnProperty(Ze)&&V!==void 0&&!f.hasOwnProperty(Ze)&&Jh(i,l,Ze,void 0,f,V);for(K in f)V=f[K],U=u[K],!f.hasOwnProperty(K)||V===U||V===void 0&&U===void 0||Jh(i,l,K,V,f,U);return}}for(var L in u)V=u[L],u.hasOwnProperty(L)&&V!=null&&!f.hasOwnProperty(L)&&$e(i,l,L,null,f,V);for(G in f)V=f[G],U=u[G],!f.hasOwnProperty(G)||V===U||V==null&&U==null||$e(i,l,G,V,f,U)}var Qh=null,Xh=null;function Pu(i){return i.nodeType===9?i:i.ownerDocument}function Ny(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Dy(i,l){if(i===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&l==="foreignObject"?0:i}function Wh(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var ep=null;function r6(){var i=window.event;return i&&i.type==="popstate"?i===ep?!1:(ep=i,!0):(ep=null,!1)}var Ly=typeof setTimeout=="function"?setTimeout:void 0,i6=typeof clearTimeout=="function"?clearTimeout:void 0,Hy=typeof Promise=="function"?Promise:void 0,o6=typeof queueMicrotask=="function"?queueMicrotask:typeof Hy<"u"?function(i){return Hy.resolve(null).then(i).catch(l6)}:Ly;function l6(i){setTimeout(function(){throw i})}function pi(i){return i==="head"}function zy(i,l){var u=l,f=0,p=0;do{var y=u.nextSibling;if(i.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"){if(0<f&&8>f){u=f;var E=i.ownerDocument;if(u&1&&Is(E.documentElement),u&2&&Is(E.body),u&4)for(u=E.head,Is(u),E=u.firstChild;E;){var T=E.nextSibling,R=E.nodeName;E[Xl]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&E.rel.toLowerCase()==="stylesheet"||u.removeChild(E),E=T}}if(p===0){i.removeChild(y),$s(l);return}p--}else u==="$"||u==="$?"||u==="$!"?p++:f=u.charCodeAt(0)-48;else f=0;u=y}while(u);$s(l)}function tp(i){var l=i.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var u=l;switch(l=l.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":tp(u),ld(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function s6(i,l,u,f){for(;i.nodeType===1;){var p=u;if(i.nodeName.toLowerCase()!==l.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[Xl])switch(l){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(l==="input"&&i.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=nr(i.nextSibling),i===null)break}return null}function a6(i,l,u){if(l==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=nr(i.nextSibling),i===null))return null;return i}function np(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function u6(i,l){var u=i.ownerDocument;if(i.data!=="$?"||u.readyState==="complete")l();else{var f=function(){l(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function nr(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return i}var rp=null;function By(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(l===0)return i;l--}else u==="/$"&&l++}i=i.previousSibling}return null}function jy(i,l,u){switch(l=Pu(u),i){case"html":if(i=l.documentElement,!i)throw Error(r(452));return i;case"head":if(i=l.head,!i)throw Error(r(453));return i;case"body":if(i=l.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Is(i){for(var l=i.attributes;l.length;)i.removeAttributeNode(l[0]);ld(i)}var $n=new Map,Iy=new Set;function Fu(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var jr=_.d;_.d={f:c6,r:f6,D:d6,C:h6,L:p6,m:m6,X:y6,S:g6,M:b6};function c6(){var i=jr.f(),l=zu();return i||l}function f6(i){var l=Po(i);l!==null&&l.tag===5&&l.type==="form"?ig(l):jr.r(i)}var El=typeof document>"u"?null:document;function Vy(i,l,u){var f=El;if(f&&typeof l=="string"&&l){var p=Vn(l);p='link[rel="'+i+'"][href="'+p+'"]',typeof u=="string"&&(p+='[crossorigin="'+u+'"]'),Iy.has(p)||(Iy.add(p),i={rel:i,crossOrigin:u,href:l},f.querySelector(p)===null&&(l=f.createElement("link"),Vt(l,"link",i),Ot(l),f.head.appendChild(l)))}}function d6(i){jr.D(i),Vy("dns-prefetch",i,null)}function h6(i,l){jr.C(i,l),Vy("preconnect",i,l)}function p6(i,l,u){jr.L(i,l,u);var f=El;if(f&&i&&l){var p='link[rel="preload"][as="'+Vn(l)+'"]';l==="image"&&u&&u.imageSrcSet?(p+='[imagesrcset="'+Vn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(p+='[imagesizes="'+Vn(u.imageSizes)+'"]')):p+='[href="'+Vn(i)+'"]';var y=p;switch(l){case"style":y=wl(i);break;case"script":y=Ml(i)}$n.has(y)||(i=m({rel:"preload",href:l==="image"&&u&&u.imageSrcSet?void 0:i,as:l},u),$n.set(y,i),f.querySelector(p)!==null||l==="style"&&f.querySelector(Vs(y))||l==="script"&&f.querySelector(Us(y))||(l=f.createElement("link"),Vt(l,"link",i),Ot(l),f.head.appendChild(l)))}}function m6(i,l){jr.m(i,l);var u=El;if(u&&i){var f=l&&typeof l.as=="string"?l.as:"script",p='link[rel="modulepreload"][as="'+Vn(f)+'"][href="'+Vn(i)+'"]',y=p;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Ml(i)}if(!$n.has(y)&&(i=m({rel:"modulepreload",href:i},l),$n.set(y,i),u.querySelector(p)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Us(y)))return}f=u.createElement("link"),Vt(f,"link",i),Ot(f),u.head.appendChild(f)}}}function g6(i,l,u){jr.S(i,l,u);var f=El;if(f&&i){var p=Fo(f).hoistableStyles,y=wl(i);l=l||"default";var E=p.get(y);if(!E){var T={loading:0,preload:null};if(E=f.querySelector(Vs(y)))T.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":l},u),(u=$n.get(y))&&ip(i,u);var R=E=f.createElement("link");Ot(R),Vt(R,"link",i),R._p=new Promise(function(j,K){R.onload=j,R.onerror=K}),R.addEventListener("load",function(){T.loading|=1}),R.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Ku(E,l,f)}E={type:"stylesheet",instance:E,count:1,state:T},p.set(y,E)}}}function y6(i,l){jr.X(i,l);var u=El;if(u&&i){var f=Fo(u).hoistableScripts,p=Ml(i),y=f.get(p);y||(y=u.querySelector(Us(p)),y||(i=m({src:i,async:!0},l),(l=$n.get(p))&&op(i,l),y=u.createElement("script"),Ot(y),Vt(y,"link",i),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(p,y))}}function b6(i,l){jr.M(i,l);var u=El;if(u&&i){var f=Fo(u).hoistableScripts,p=Ml(i),y=f.get(p);y||(y=u.querySelector(Us(p)),y||(i=m({src:i,async:!0,type:"module"},l),(l=$n.get(p))&&op(i,l),y=u.createElement("script"),Ot(y),Vt(y,"link",i),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(p,y))}}function Uy(i,l,u,f){var p=(p=oe.current)?Fu(p):null;if(!p)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(l=wl(u.href),u=Fo(p).hoistableStyles,f=u.get(l),f||(f={type:"style",instance:null,count:0,state:null},u.set(l,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=wl(u.href);var y=Fo(p).hoistableStyles,E=y.get(i);if(E||(p=p.ownerDocument||p,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,E),(y=p.querySelector(Vs(i)))&&!y._p&&(E.instance=y,E.state.loading=5),$n.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},$n.set(i,u),y||v6(p,i,u,E.state))),l&&f===null)throw Error(r(528,""));return E}if(l&&f!==null)throw Error(r(529,""));return null;case"script":return l=u.async,u=u.src,typeof u=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Ml(u),u=Fo(p).hoistableScripts,f=u.get(l),f||(f={type:"script",instance:null,count:0,state:null},u.set(l,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function wl(i){return'href="'+Vn(i)+'"'}function Vs(i){return'link[rel="stylesheet"]['+i+"]"}function _y(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function v6(i,l,u,f){i.querySelector('link[rel="preload"][as="style"]['+l+"]")?f.loading=1:(l=i.createElement("link"),f.preload=l,l.addEventListener("load",function(){return f.loading|=1}),l.addEventListener("error",function(){return f.loading|=2}),Vt(l,"link",u),Ot(l),i.head.appendChild(l))}function Ml(i){return'[src="'+Vn(i)+'"]'}function Us(i){return"script[async]"+i}function qy(i,l,u){if(l.count++,l.instance===null)switch(l.type){case"style":var f=i.querySelector('style[data-href~="'+Vn(u.href)+'"]');if(f)return l.instance=f,Ot(f),f;var p=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),Ot(f),Vt(f,"style",p),Ku(f,u.precedence,i),l.instance=f;case"stylesheet":p=wl(u.href);var y=i.querySelector(Vs(p));if(y)return l.state.loading|=4,l.instance=y,Ot(y),y;f=_y(u),(p=$n.get(p))&&ip(f,p),y=(i.ownerDocument||i).createElement("link"),Ot(y);var E=y;return E._p=new Promise(function(T,R){E.onload=T,E.onerror=R}),Vt(y,"link",f),l.state.loading|=4,Ku(y,u.precedence,i),l.instance=y;case"script":return y=Ml(u.src),(p=i.querySelector(Us(y)))?(l.instance=p,Ot(p),p):(f=u,(p=$n.get(y))&&(f=m({},u),op(f,p)),i=i.ownerDocument||i,p=i.createElement("script"),Ot(p),Vt(p,"link",f),i.head.appendChild(p),l.instance=p);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(f=l.instance,l.state.loading|=4,Ku(f,u.precedence,i));return l.instance}function Ku(i,l,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=f.length?f[f.length-1]:null,y=p,E=0;E<f.length;E++){var T=f[E];if(T.dataset.precedence===l)y=T;else if(y!==p)break}y?y.parentNode.insertBefore(i,y.nextSibling):(l=u.nodeType===9?u.head:u,l.insertBefore(i,l.firstChild))}function ip(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.title==null&&(i.title=l.title)}function op(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.integrity==null&&(i.integrity=l.integrity)}var $u=null;function Py(i,l,u){if($u===null){var f=new Map,p=$u=new Map;p.set(u,f)}else p=$u,f=p.get(u),f||(f=new Map,p.set(u,f));if(f.has(i))return f;for(f.set(i,null),u=u.getElementsByTagName(i),p=0;p<u.length;p++){var y=u[p];if(!(y[Xl]||y[Yt]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var E=y.getAttribute(l)||"";E=i+E;var T=f.get(E);T?T.push(y):f.set(E,[y])}}return f}function Fy(i,l,u){i=i.ownerDocument||i,i.head.insertBefore(u,l==="title"?i.querySelector("head > title"):null)}function C6(i,l,u){if(u===1||l.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return i=l.disabled,typeof l.precedence=="string"&&i==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function Ky(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var _s=null;function x6(){}function S6(i,l,u){if(_s===null)throw Error(r(475));var f=_s;if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=wl(u.href),y=i.querySelector(Vs(p));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(f.count++,f=Zu.bind(f),i.then(f,f)),l.state.loading|=4,l.instance=y,Ot(y);return}y=i.ownerDocument||i,u=_y(u),(p=$n.get(p))&&ip(u,p),y=y.createElement("link"),Ot(y);var E=y;E._p=new Promise(function(T,R){E.onload=T,E.onerror=R}),Vt(y,"link",u),l.instance=y}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(f.count++,l=Zu.bind(f),i.addEventListener("load",l),i.addEventListener("error",l))}}function E6(){if(_s===null)throw Error(r(475));var i=_s;return i.stylesheets&&i.count===0&&lp(i,i.stylesheets),0<i.count?function(l){var u=setTimeout(function(){if(i.stylesheets&&lp(i,i.stylesheets),i.unsuspend){var f=i.unsuspend;i.unsuspend=null,f()}},6e4);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(u)}}:null}function Zu(){if(this.count--,this.count===0){if(this.stylesheets)lp(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Gu=null;function lp(i,l){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Gu=new Map,l.forEach(w6,i),Gu=null,Zu.call(i))}function w6(i,l){if(!(l.state.loading&4)){var u=Gu.get(i);if(u)var f=u.get(null);else{u=new Map,Gu.set(i,u);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var E=p[y];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(u.set(E.dataset.precedence,E),f=E)}f&&u.set(null,f)}p=l.instance,E=p.getAttribute("data-precedence"),y=u.get(E)||f,y===f&&u.set(null,p),u.set(E,p),this.count++,f=Zu.bind(this),p.addEventListener("load",f),p.addEventListener("error",f),y?y.parentNode.insertBefore(p,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),l.state.loading|=4}}var qs={$$typeof:D,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function M6(i,l,u,f,p,y,E,T){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Uo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uo(0),this.hiddenUpdates=Uo(null),this.identifierPrefix=f,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function $y(i,l,u,f,p,y,E,T,R,j,K,G){return i=new M6(i,l,u,E,T,R,j,G),l=1,y===!0&&(l|=24),y=Rn(3,null,null,l),i.current=y,y.stateNode=i,l=_d(),l.refCount++,i.pooledCache=l,l.refCount++,y.memoizedState={element:f,isDehydrated:u,cache:l},Kd(y),i}function Zy(i){return i?(i=nl,i):nl}function Gy(i,l,u,f,p,y){p=Zy(p),f.context===null?f.context=p:f.pendingContext=p,f=ti(l),f.payload={element:u},y=y===void 0?null:y,y!==null&&(f.callback=y),u=ni(i,f,l),u!==null&&(Hn(u,i,l),bs(u,i,l))}function Yy(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<l?u:l}}function sp(i,l){Yy(i,l),(i=i.alternate)&&Yy(i,l)}function Jy(i){if(i.tag===13){var l=tl(i,67108864);l!==null&&Hn(l,i,67108864),sp(i,67108864)}}var Yu=!0;function T6(i,l,u,f){var p=H.T;H.T=null;var y=_.p;try{_.p=2,ap(i,l,u,f)}finally{_.p=y,H.T=p}}function k6(i,l,u,f){var p=H.T;H.T=null;var y=_.p;try{_.p=8,ap(i,l,u,f)}finally{_.p=y,H.T=p}}function ap(i,l,u,f){if(Yu){var p=up(f);if(p===null)Yh(i,l,f,Ju,u),Xy(i,f);else if(R6(p,i,l,u,f))f.stopPropagation();else if(Xy(i,f),l&4&&-1<A6.indexOf(i)){for(;p!==null;){var y=Po(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var E=lr(y.pendingLanes);if(E!==0){var T=y;for(T.pendingLanes|=2,T.entangledLanes|=2;E;){var R=1<<31-Rt(E);T.entanglements[1]|=R,E&=~R}fr(y),(Pe&6)===0&&(Lu=Xe()+500,zs(0))}}break;case 13:T=tl(y,2),T!==null&&Hn(T,y,2),zu(),sp(y,2)}if(y=up(f),y===null&&Yh(i,l,f,Ju,u),y===p)break;p=y}p!==null&&f.stopPropagation()}else Yh(i,l,f,null,u)}}function up(i){return i=pd(i),cp(i)}var Ju=null;function cp(i){if(Ju=null,i=qo(i),i!==null){var l=s(i);if(l===null)i=null;else{var u=l.tag;if(u===13){if(i=a(l),i!==null)return i;i=null}else if(u===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null)}}return Ju=i,null}function Qy(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Bt()){case Ue:return 2;case Ye:return 8;case Gt:case de:return 32;case Ie:return 268435456;default:return 32}default:return 32}}var fp=!1,mi=null,gi=null,yi=null,Ps=new Map,Fs=new Map,bi=[],A6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Xy(i,l){switch(i){case"focusin":case"focusout":mi=null;break;case"dragenter":case"dragleave":gi=null;break;case"mouseover":case"mouseout":yi=null;break;case"pointerover":case"pointerout":Ps.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fs.delete(l.pointerId)}}function Ks(i,l,u,f,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:l,domEventName:u,eventSystemFlags:f,nativeEvent:y,targetContainers:[p]},l!==null&&(l=Po(l),l!==null&&Jy(l)),i):(i.eventSystemFlags|=f,l=i.targetContainers,p!==null&&l.indexOf(p)===-1&&l.push(p),i)}function R6(i,l,u,f,p){switch(l){case"focusin":return mi=Ks(mi,i,l,u,f,p),!0;case"dragenter":return gi=Ks(gi,i,l,u,f,p),!0;case"mouseover":return yi=Ks(yi,i,l,u,f,p),!0;case"pointerover":var y=p.pointerId;return Ps.set(y,Ks(Ps.get(y)||null,i,l,u,f,p)),!0;case"gotpointercapture":return y=p.pointerId,Fs.set(y,Ks(Fs.get(y)||null,i,l,u,f,p)),!0}return!1}function Wy(i){var l=qo(i.target);if(l!==null){var u=s(l);if(u!==null){if(l=u.tag,l===13){if(l=a(u),l!==null){i.blockedOn=l,Sv(i.priority,function(){if(u.tag===13){var f=Ln();f=rd(f);var p=tl(u,f);p!==null&&Hn(p,u,f),sp(u,f)}});return}}else if(l===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Qu(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var u=up(i.nativeEvent);if(u===null){u=i.nativeEvent;var f=new u.constructor(u.type,u);hd=f,u.target.dispatchEvent(f),hd=null}else return l=Po(u),l!==null&&Jy(l),i.blockedOn=u,!1;l.shift()}return!0}function e7(i,l,u){Qu(i)&&u.delete(l)}function O6(){fp=!1,mi!==null&&Qu(mi)&&(mi=null),gi!==null&&Qu(gi)&&(gi=null),yi!==null&&Qu(yi)&&(yi=null),Ps.forEach(e7),Fs.forEach(e7)}function Xu(i,l){i.blockedOn===l&&(i.blockedOn=null,fp||(fp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,O6)))}var Wu=null;function t7(i){Wu!==i&&(Wu=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Wu===i&&(Wu=null);for(var l=0;l<i.length;l+=3){var u=i[l],f=i[l+1],p=i[l+2];if(typeof f!="function"){if(cp(f||u)===null)continue;break}var y=Po(u);y!==null&&(i.splice(l,3),l-=3,ch(y,{pending:!0,data:p,method:u.method,action:f},f,p))}}))}function $s(i){function l(R){return Xu(R,i)}mi!==null&&Xu(mi,i),gi!==null&&Xu(gi,i),yi!==null&&Xu(yi,i),Ps.forEach(l),Fs.forEach(l);for(var u=0;u<bi.length;u++){var f=bi[u];f.blockedOn===i&&(f.blockedOn=null)}for(;0<bi.length&&(u=bi[0],u.blockedOn===null);)Wy(u),u.blockedOn===null&&bi.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var p=u[f],y=u[f+1],E=p[gn]||null;if(typeof y=="function")E||t7(u);else if(E){var T=null;if(y&&y.hasAttribute("formAction")){if(p=y,E=y[gn]||null)T=E.formAction;else if(cp(p)!==null)continue}else T=E.action;typeof T=="function"?u[f+1]=T:(u.splice(f,3),f-=3),t7(u)}}}function dp(i){this._internalRoot=i}ec.prototype.render=dp.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(r(409));var u=l.current,f=Ln();Gy(u,f,i,l,null,null)},ec.prototype.unmount=dp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;Gy(i.current,2,null,i,null,null),zu(),l[_o]=null}};function ec(i){this._internalRoot=i}ec.prototype.unstable_scheduleHydration=function(i){if(i){var l=b0();i={blockedOn:null,target:i,priority:l};for(var u=0;u<bi.length&&l!==0&&l<bi[u].priority;u++);bi.splice(u,0,i),u===0&&Wy(i)}};var n7=e.version;if(n7!=="19.1.0")throw Error(r(527,n7,"19.1.0"));_.findDOMNode=function(i){var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=d(l),i=i!==null?h(i):null,i=i===null?null:i.stateNode,i};var N6={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tc.isDisabled&&tc.supportsFiber)try{_e=tc.inject(N6),ze=tc}catch{}}return Gs.createRoot=function(i,l){if(!o(i))throw Error(r(299));var u=!1,f="",p=bg,y=vg,E=Cg,T=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(p=l.onUncaughtError),l.onCaughtError!==void 0&&(y=l.onCaughtError),l.onRecoverableError!==void 0&&(E=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(T=l.unstable_transitionCallbacks)),l=$y(i,1,!1,null,null,u,f,p,y,E,T,null),i[_o]=l.current,Gh(i),new dp(l)},Gs.hydrateRoot=function(i,l,u){if(!o(i))throw Error(r(299));var f=!1,p="",y=bg,E=vg,T=Cg,R=null,j=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(p=u.identifierPrefix),u.onUncaughtError!==void 0&&(y=u.onUncaughtError),u.onCaughtError!==void 0&&(E=u.onCaughtError),u.onRecoverableError!==void 0&&(T=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(R=u.unstable_transitionCallbacks),u.formState!==void 0&&(j=u.formState)),l=$y(i,1,!0,l,u??null,f,p,y,E,T,R,j),l.context=Zy(null),u=l.current,f=Ln(),f=rd(f),p=ti(f),p.callback=null,ni(u,p,f),u=f,l.current.lanes=u,Ql(l,u),fr(l),i[_o]=l.current,Gh(i),new ec(l)},Gs.version="19.1.0",Gs}var d7;function _6(){if(d7)return mp.exports;d7=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),mp.exports=U6(),mp.exports}var q6=_6();function Ut(n){this.content=n}Ut.prototype={constructor:Ut,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,o=r.find(n),s=r.content.slice();return o==-1?s.push(t||n,e):(s[o+1]=e,t&&(s[o]=t)),new Ut(s)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Ut(t)},addToStart:function(n,e){return new Ut([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Ut(t)},addBefore:function(n,e,t){var r=this.remove(e),o=r.content.slice(),s=r.find(n);return o.splice(s==-1?o.length:s,0,e,t),new Ut(o)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Ut.from(n),n.size?new Ut(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Ut.from(n),n.size?new Ut(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Ut.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Ut.from=function(n){if(n instanceof Ut)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Ut(e)};function y3(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let o=n.child(r),s=e.child(r);if(o==s){t+=o.nodeSize;continue}if(!o.sameMarkup(s))return t;if(o.isText&&o.text!=s.text){for(let a=0;o.text[a]==s.text[a];a++)t++;return t}if(o.content.size||s.content.size){let a=y3(o.content,s.content,t+1);if(a!=null)return a}t+=o.nodeSize}}function b3(n,e,t,r){for(let o=n.childCount,s=e.childCount;;){if(o==0||s==0)return o==s?null:{a:t,b:r};let a=n.child(--o),c=e.child(--s),d=a.nodeSize;if(a==c){t-=d,r-=d;continue}if(!a.sameMarkup(c))return{a:t,b:r};if(a.isText&&a.text!=c.text){let h=0,m=Math.min(a.text.length,c.text.length);for(;h<m&&a.text[a.text.length-h-1]==c.text[c.text.length-h-1];)h++,t--,r--;return{a:t,b:r}}if(a.content.size||c.content.size){let h=b3(a.content,c.content,t-1,r-1);if(h)return h}t-=d,r-=d}}let ee=class sn{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,o=0,s){for(let a=0,c=0;c<t;a++){let d=this.content[a],h=c+d.nodeSize;if(h>e&&r(d,o+c,s||null,a)!==!1&&d.content.size){let m=c+1;d.nodesBetween(Math.max(0,e-m),Math.min(d.content.size,t-m),r,o+m)}c=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,o){let s="",a=!0;return this.nodesBetween(e,t,(c,d)=>{let h=c.isText?c.text.slice(Math.max(e,d)-d,t-d):c.isLeaf?o?typeof o=="function"?o(c):o:c.type.spec.leafText?c.type.spec.leafText(c):"":"";c.isBlock&&(c.isLeaf&&h||c.isTextblock)&&r&&(a?a=!1:s+=r),s+=h},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,o=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(o[o.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)o.push(e.content[s]);return new sn(o,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],o=0;if(t>e)for(let s=0,a=0;a<t;s++){let c=this.content[s],d=a+c.nodeSize;d>e&&((a<e||d>t)&&(c.isText?c=c.cut(Math.max(0,e-a),Math.min(c.text.length,t-a)):c=c.cut(Math.max(0,e-a-1),Math.min(c.content.size,t-a-1))),r.push(c),o+=c.nodeSize),a=d}return new sn(r,o)}cutByIndex(e,t){return e==t?sn.empty:e==0&&t==this.content.length?this:new sn(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let o=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return o[e]=t,new sn(o,s)}addToStart(e){return new sn([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new sn(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let o=this.content[t];e(o,r,t),r+=o.nodeSize}}findDiffStart(e,t=0){return y3(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return b3(this,e,t,r)}findIndex(e,t=-1){if(e==0)return nc(0,e);if(e==this.size)return nc(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,o=0;;r++){let s=this.child(r),a=o+s.nodeSize;if(a>=e)return a==e||t>0?nc(r+1,a):nc(r,o);o=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return sn.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new sn(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return sn.empty;let t,r=0;for(let o=0;o<e.length;o++){let s=e[o];r+=s.nodeSize,o&&s.isText&&e[o-1].sameMarkup(s)?(t||(t=e.slice(0,o)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new sn(t||e,r)}static from(e){if(!e)return sn.empty;if(e instanceof sn)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new sn([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};ee.empty=new ee([],0);const vp={index:0,offset:0};function nc(n,e){return vp.index=n,vp.offset=e,vp}function Ac(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!Ac(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!Ac(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Qe=class a1{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let o=0;o<e.length;o++){let s=e[o];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,o));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,o)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Ac(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let o=r.create(t.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return a1.none;if(e instanceof a1)return[e];let t=e.slice();return t.sort((r,o)=>r.type.rank-o.type.rank),t}};Qe.none=[];let Rc=class extends Error{},le=class Al{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=C3(this.content,e+this.openStart,t);return r&&new Al(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Al(v3(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Al.empty;let r=t.openStart||0,o=t.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Al(ee.fromJSON(e,t.content),r,o)}static maxOpen(e,t=!0){let r=0,o=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)o++;return new Al(e,r,o)}};le.empty=new le(ee.empty,0,0);function v3(n,e,t){let{index:r,offset:o}=n.findIndex(e),s=n.maybeChild(r),{index:a,offset:c}=n.findIndex(t);if(o==e||s.isText){if(c!=t&&!n.child(a).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=a)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(v3(s.content,e-o-1,t-o-1)))}function C3(n,e,t,r){let{index:o,offset:s}=n.findIndex(e),a=n.maybeChild(o);if(s==e||a.isText)return n.cut(0,e).append(t).append(n.cut(e));let c=C3(a.content,e-s-1,t);return c&&n.replaceChild(o,a.copy(c))}function P6(n,e,t){if(t.openStart>n.depth)throw new Rc("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Rc("Inconsistent open depths");return x3(n,e,t,0)}function x3(n,e,t,r){let o=n.index(r),s=n.node(r);if(o==e.index(r)&&r<n.depth-t.openStart){let a=x3(n,e,t,r+1);return s.copy(s.content.replaceChild(o,a))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let a=n.parent,c=a.content;return wo(a,c.cut(0,n.parentOffset).append(t.content).append(c.cut(e.parentOffset)))}else{let{start:a,end:c}=F6(t,n);return wo(s,E3(n,a,c,e,r))}else return wo(s,Oc(n,e,r))}function S3(n,e){if(!e.type.compatibleContent(n.type))throw new Rc("Cannot join "+e.type.name+" onto "+n.type.name)}function u1(n,e,t){let r=n.node(t);return S3(r,e.node(t)),r}function Eo(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function la(n,e,t,r){let o=(e||n).node(t),s=0,a=e?e.index(t):o.childCount;n&&(s=n.index(t),n.depth>t?s++:n.textOffset&&(Eo(n.nodeAfter,r),s++));for(let c=s;c<a;c++)Eo(o.child(c),r);e&&e.depth==t&&e.textOffset&&Eo(e.nodeBefore,r)}function wo(n,e){return n.type.checkContent(e),n.copy(e)}function E3(n,e,t,r,o){let s=n.depth>o&&u1(n,e,o+1),a=r.depth>o&&u1(t,r,o+1),c=[];return la(null,n,o,c),s&&a&&e.index(o)==t.index(o)?(S3(s,a),Eo(wo(s,E3(n,e,t,r,o+1)),c)):(s&&Eo(wo(s,Oc(n,e,o+1)),c),la(e,t,o,c),a&&Eo(wo(a,Oc(t,r,o+1)),c)),la(r,null,o,c),new ee(c)}function Oc(n,e,t){let r=[];if(la(null,n,t,r),n.depth>t){let o=u1(n,e,t+1);Eo(wo(o,Oc(n,e,t+1)),r)}return la(e,null,t,r),new ee(r)}function F6(n,e){let t=e.depth-n.openStart,o=e.node(t).copy(n.content);for(let s=t-1;s>=0;s--)o=e.node(s).copy(ee.from(o));return{start:o.resolveNoCache(n.openStart+t),end:o.resolveNoCache(o.content.size-n.openEnd-t)}}class Ca{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(t);return r?e.child(t).cut(r):o}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],o=t==0?0:this.path[t*3-1]+1;for(let s=0;s<e;s++)o+=r.child(s).nodeSize;return o}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Qe.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),o=e.maybeChild(t);if(!r){let c=r;r=o,o=c}let s=r.marks;for(var a=0;a<s.length;a++)s[a].type.spec.inclusive===!1&&(!o||!s[a].isInSet(o.marks))&&(s=s[a--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,o=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!o||!r[s].isInSet(o.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new Nc(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],o=0,s=t;for(let a=e;;){let{index:c,offset:d}=a.content.findIndex(s),h=s-d;if(r.push(a,c,o+d),!h||(a=a.child(c),a.isText))break;s=h-1,o+=d+1}return new Ca(t,r,s)}static resolveCached(e,t){let r=h7.get(e);if(r)for(let s=0;s<r.elts.length;s++){let a=r.elts[s];if(a.pos==t)return a}else h7.set(e,r=new K6);let o=r.elts[r.i]=Ca.resolve(e,t);return r.i=(r.i+1)%$6,o}}class K6{constructor(){this.elts=[],this.i=0}}const $6=12,h7=new WeakMap;class Nc{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Z6=Object.create(null);let Ni=class c1{constructor(e,t,r,o=Qe.none){this.type=e,this.attrs=t,this.marks=o,this.content=r||ee.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,o=0){this.content.nodesBetween(e,t,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,o){return this.content.textBetween(e,t,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&Ac(this.attrs,t||e.defaultAttrs||Z6)&&Qe.sameSet(this.marks,r||Qe.none)}copy(e=null){return e==this.content?this:new c1(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new c1(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return le.empty;let o=this.resolve(e),s=this.resolve(t),a=r?0:o.sharedDepth(t),c=o.start(a),h=o.node(a).content.cut(o.pos-c,s.pos-c);return new le(h,o.depth-a,s.depth-a)}replace(e,t,r){return P6(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:o}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(o==e||t.isText)return t;e-=o+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let o=this.content.child(t-1);return{node:o,index:t-1,offset:r-o.nodeSize}}resolve(e){return Ca.resolveCached(this,e)}resolveNoCache(e){return Ca.resolve(this,e)}rangeHasMark(e,t,r){let o=!1;return t>e&&this.nodesBetween(e,t,s=>(r.isInSet(s.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),w3(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=ee.empty,o=0,s=r.childCount){let a=this.contentMatchAt(e).matchFragment(r,o,s),c=a&&a.matchFragment(this.content,t);if(!c||!c.validEnd)return!1;for(let d=o;d<s;d++)if(!this.type.allowsMarks(r.child(d).marks))return!1;return!0}canReplaceWith(e,t,r,o){if(o&&!this.type.allowsMarks(o))return!1;let s=this.contentMatchAt(e).matchType(r),a=s&&s.matchFragment(this.content,t);return a?a.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Qe.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Qe.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let o=ee.fromJSON(e,t.content),s=e.nodeType(t.type).create(t.attrs,o,r);return s.type.checkAttrs(s.attrs),s}};Ni.prototype.text=void 0;class Dc extends Ni{constructor(e,t,r,o){if(super(e,t,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):w3(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Dc(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Dc(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function w3(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Ro{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new G6(e,t);if(r.next==null)return Ro.empty;let o=M3(r);r.next&&r.err("Unexpected trailing text");let s=t8(e8(o));return n8(s,r),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let o=this;for(let s=t;o&&s<r;s++)o=o.matchType(e.child(s).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let o=[this];function s(a,c){let d=a.matchFragment(e,r);if(d&&(!t||d.validEnd))return ee.from(c.map(h=>h.createAndFill()));for(let h=0;h<a.next.length;h++){let{type:m,next:g}=a.next[h];if(!(m.isText||m.hasRequiredAttrs())&&o.indexOf(g)==-1){o.push(g);let b=s(g,c.concat(m));if(b)return b}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),s=o.match;if(s.matchType(e)){let a=[];for(let c=o;c.type;c=c.via)a.push(c.type);return a.reverse()}for(let a=0;a<s.next.length;a++){let{type:c,next:d}=s.next[a];!c.isLeaf&&!c.hasRequiredAttrs()&&!(c.name in t)&&(!o.type||d.validEnd)&&(r.push({match:c.contentMatch,type:c,via:o}),t[c.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&t(r.next[o].next)}return t(this),e.map((r,o)=>{let s=o+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)s+=(a?", ":"")+r.next[a].type.name+"->"+e.indexOf(r.next[a].next);return s}).join(`
`)}}Ro.empty=new Ro(!0);class G6{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function M3(n){let e=[];do e.push(Y6(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Y6(n){let e=[];do e.push(J6(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function J6(n){let e=W6(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=Q6(n,e);else break;return e}function p7(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function Q6(n,e){let t=p7(n),r=t;return n.eat(",")&&(n.next!="}"?r=p7(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function X6(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let o=[];for(let s in t){let a=t[s];a.isInGroup(e)&&o.push(a)}return o.length==0&&n.err("No node type or group '"+e+"' found"),o}function W6(n){if(n.eat("(")){let e=M3(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=X6(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function e8(n){let e=[[]];return o(s(n,0),t()),e;function t(){return e.push([])-1}function r(a,c,d){let h={term:d,to:c};return e[a].push(h),h}function o(a,c){a.forEach(d=>d.to=c)}function s(a,c){if(a.type=="choice")return a.exprs.reduce((d,h)=>d.concat(s(h,c)),[]);if(a.type=="seq")for(let d=0;;d++){let h=s(a.exprs[d],c);if(d==a.exprs.length-1)return h;o(h,c=t())}else if(a.type=="star"){let d=t();return r(c,d),o(s(a.expr,d),d),[r(d)]}else if(a.type=="plus"){let d=t();return o(s(a.expr,c),d),o(s(a.expr,d),d),[r(d)]}else{if(a.type=="opt")return[r(c)].concat(s(a.expr,c));if(a.type=="range"){let d=c;for(let h=0;h<a.min;h++){let m=t();o(s(a.expr,d),m),d=m}if(a.max==-1)o(s(a.expr,d),d);else for(let h=a.min;h<a.max;h++){let m=t();r(d,m),o(s(a.expr,d),m),d=m}return[r(d)]}else{if(a.type=="name")return[r(c,void 0,a.value)];throw new Error("Unknown expr type")}}}}function T3(n,e){return e-n}function m7(n,e){let t=[];return r(e),t.sort(T3);function r(o){let s=n[o];if(s.length==1&&!s[0].term)return r(s[0].to);t.push(o);for(let a=0;a<s.length;a++){let{term:c,to:d}=s[a];!c&&t.indexOf(d)==-1&&r(d)}}}function t8(n){let e=Object.create(null);return t(m7(n,0));function t(r){let o=[];r.forEach(a=>{n[a].forEach(({term:c,to:d})=>{if(!c)return;let h;for(let m=0;m<o.length;m++)o[m][0]==c&&(h=o[m][1]);m7(n,d).forEach(m=>{h||o.push([c,h=[]]),h.indexOf(m)==-1&&h.push(m)})})});let s=e[r.join(",")]=new Ro(r.indexOf(n.length-1)>-1);for(let a=0;a<o.length;a++){let c=o[a][1].sort(T3);s.next.push({type:o[a][0],next:e[c.join(",")]||t(c)})}return s}}function n8(n,e){for(let t=0,r=[n];t<r.length;t++){let o=r[t],s=!o.validEnd,a=[];for(let c=0;c<o.next.length;c++){let{type:d,next:h}=o.next[c];a.push(d.name),s&&!(d.isText||d.hasRequiredAttrs())&&(s=!1),r.indexOf(h)==-1&&r.push(h)}s&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function k3(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function A3(n,e){let t=Object.create(null);for(let r in n){let o=e&&e[r];if(o===void 0){let s=n[r];if(s.hasDefault)o=s.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=o}return t}function R3(n,e,t,r){for(let o in e)if(!(o in n))throw new RangeError(`Unsupported attribute ${o} for ${t} of type ${o}`);for(let o in n){let s=n[o];s.validate&&s.validate(e[o])}}function O3(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new i8(n,r,e[r]);return t}let g7=class N3{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=O3(e,r.attrs),this.defaultAttrs=k3(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ro.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:A3(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ni(this,this.computeAttrs(e),ee.from(t),Qe.setFrom(r))}createChecked(e=null,t,r){return t=ee.from(t),this.checkContent(t),new Ni(this,this.computeAttrs(e),t,Qe.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=ee.from(t),t.size){let a=this.contentMatch.fillBefore(t);if(!a)return null;t=a.append(t)}let o=this.contentMatch.matchFragment(t),s=o&&o.fillBefore(ee.empty,!0);return s?new Ni(this,e,t.append(s),Qe.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){R3(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:Qe.none:e}static compile(e,t){let r=Object.create(null);e.forEach((s,a)=>r[s]=new N3(s,t,a));let o=t.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function r8(n,e,t){let r=t.split("|");return o=>{let s=o===null?"null":typeof o;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${s}`)}}class i8{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?r8(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class kf{constructor(e,t,r,o){this.name=e,this.rank=t,this.schema=r,this.spec=o,this.attrs=O3(e,o.attrs),this.excluded=null;let s=k3(this.attrs);this.instance=s?new Qe(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Qe(this,A3(this.attrs,e))}static compile(e,t){let r=Object.create(null),o=0;return e.forEach((s,a)=>r[s]=new kf(s,o++,t,a)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){R3(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class D3{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let o in e)t[o]=e[o];t.nodes=Ut.from(e.nodes),t.marks=Ut.from(e.marks||{}),this.nodes=g7.compile(this.spec.nodes,this),this.marks=kf.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let s=this.nodes[o],a=s.spec.content||"",c=s.spec.marks;if(s.contentMatch=r[a]||(r[a]=Ro.parse(a,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=c=="_"?null:c?y7(this,c.split(" ")):c==""||!s.inlineContent?[]:null}for(let o in this.marks){let s=this.marks[o],a=s.spec.excludes;s.excluded=a==null?[s]:a==""?[]:y7(this,a.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof g7){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,o)}text(e,t){let r=this.nodes.text;return new Dc(r,r.defaultAttrs,e,Qe.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Ni.fromJSON(this,e)}markFromJSON(e){return Qe.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function y7(n,e){let t=[];for(let r=0;r<e.length;r++){let o=e[r],s=n.marks[o],a=s;if(s)t.push(s);else for(let c in n.marks){let d=n.marks[c];(o=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(o)>-1)&&t.push(a=d)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function o8(n){return n.tag!=null}function l8(n){return n.style!=null}class Di{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(o=>{if(o8(o))this.tags.push(o);else if(l8(o)){let s=/[^=]*/.exec(o.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let s=e.nodes[o.node];return s.contentMatch.matchType(s)})}parse(e,t={}){let r=new v7(this,t,!1);return r.addAll(e,Qe.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new v7(this,t,!0);return r.addAll(e,Qe.none,t.from,t.to),le.maxOpen(r.finish())}matchTag(e,t,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let s=this.tags[o];if(u8(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let a=s.getAttrs(e);if(a===!1)continue;s.attrs=a||void 0}return s}}}matchStyle(e,t,r,o){for(let s=o?this.styles.indexOf(o)+1:0;s<this.styles.length;s++){let a=this.styles[s],c=a.style;if(!(c.indexOf(e)!=0||a.context&&!r.matchesContext(a.context)||c.length>e.length&&(c.charCodeAt(e.length)!=61||c.slice(e.length+1)!=t))){if(a.getAttrs){let d=a.getAttrs(t);if(d===!1)continue;a.attrs=d||void 0}return a}}}static schemaRules(e){let t=[];function r(o){let s=o.priority==null?50:o.priority,a=0;for(;a<t.length;a++){let c=t[a];if((c.priority==null?50:c.priority)<s)break}t.splice(a,0,o)}for(let o in e.marks){let s=e.marks[o].spec.parseDOM;s&&s.forEach(a=>{r(a=C7(a)),a.mark||a.ignore||a.clearMark||(a.mark=o)})}for(let o in e.nodes){let s=e.nodes[o].spec.parseDOM;s&&s.forEach(a=>{r(a=C7(a)),a.node||a.ignore||a.mark||(a.node=o)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Di(e,Di.schemaRules(e)))}}const L3={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},s8={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},H3={ol:!0,ul:!0},xa=1,f1=2,sa=4;function b7(n,e,t){return e!=null?(e?xa:0)|(e==="full"?f1:0):n&&n.whitespace=="pre"?xa|f1:t&~sa}class rc{constructor(e,t,r,o,s,a){this.type=e,this.attrs=t,this.marks=r,this.solid=o,this.options=a,this.content=[],this.activeMarks=Qe.none,this.match=s||(a&sa?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(ee.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&xa)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-o[0].length))}}let t=ee.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(ee.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!L3.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class v7{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=t.topNode,s,a=b7(null,t.preserveWhitespace,0)|(r?sa:0);o?s=new rc(o.type,o.attrs,Qe.none,!0,t.topMatch||o.type.contentMatch,a):r?s=new rc(null,null,Qe.none,!0,null,a):s=new rc(e.schema.topNodeType,null,Qe.none,!0,null,a),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,o=this.top,s=o.options&f1?"full":this.localPreserveWS||(o.options&xa)>0;if(s==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=o.content[o.content.length-1],c=e.previousSibling;(!a||c&&c.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let o=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let a=e.nodeName.toLowerCase(),c;H3.hasOwnProperty(a)&&this.parser.normalizeLists&&a8(e);let d=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(c=this.parser.matchTag(e,this,r));e:if(d?d.ignore:s8.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,t);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(e=d.skip);let h,m=this.needsBlock;if(L3.hasOwnProperty(a))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),h=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let g=d&&d.skip?t:this.readStyles(e,t);g&&this.addAll(e,g),h&&this.sync(s),this.needsBlock=m}else{let h=this.readStyles(e,t);h&&this.addElementByRule(e,d,h,d.consuming===!1?c:void 0)}this.localPreserveWS=o}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let s=this.parser.matchedStyles[o],a=r.getPropertyValue(s);if(a)for(let c=void 0;;){let d=this.parser.matchStyle(s,a,this,c);if(!d)break;if(d.ignore)return null;if(d.clearMark?t=t.filter(h=>!d.clearMark(h)):t=t.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)c=d;else break}}return t}addElementByRule(e,t,r,o){let s,a;if(t.node)if(a=this.parser.schema.nodes[t.node],a.isLeaf)this.insertNode(a.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let d=this.enter(a,t.attrs||null,r,t.preserveWhitespace);d&&(s=!0,r=d)}else{let d=this.parser.schema.marks[t.mark];r=r.concat(d.create(t.attrs))}let c=this.top;if(a&&a.isLeaf)this.findInside(e);else if(o)this.addElement(e,r,o);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(d=>this.insertNode(d,r,!1));else{let d=e;typeof t.contentElement=="string"?d=e.querySelector(t.contentElement):typeof t.contentElement=="function"?d=t.contentElement(e):t.contentElement&&(d=t.contentElement),this.findAround(e,d,!0),this.addAll(d,r),this.findAround(e,d,!1)}s&&this.sync(c)&&this.open--}addAll(e,t,r,o){let s=r||0;for(let a=r?e.childNodes[r]:e.firstChild,c=o==null?null:e.childNodes[o];a!=c;a=a.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(a,t);this.findAtPoint(e,s)}findPlace(e,t,r){let o,s;for(let a=this.open,c=0;a>=0;a--){let d=this.nodes[a],h=d.findWrapping(e);if(h&&(!o||o.length>h.length+c)&&(o=h,s=d,!h.length))break;if(d.solid){if(r)break;c+=2}}if(!o)return null;this.sync(s);for(let a=0;a<o.length;a++)t=this.enterInner(o[a],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(t=this.enterInner(s,null,t))}let o=this.findPlace(e,t,r);if(o){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let a=Qe.none;for(let c of o.concat(e.marks))(s.type?s.type.allowsMarkType(c.type):x7(c.type,e.type))&&(a=c.addToSet(a));return s.content.push(e.mark(a)),!0}return!1}enter(e,t,r,o){let s=this.findPlace(e.create(t),r,!1);return s&&(s=this.enterInner(e,t,r,!0,o)),s}enterInner(e,t,r,o=!1,s){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(e);let c=b7(e,s,a.options);a.options&sa&&a.content.length==0&&(c|=sa);let d=Qe.none;return r=r.filter(h=>(a.type?a.type.allowsMarkType(h.type):x7(h.type,e))?(d=h.addToSet(d),!1):!0),this.nodes.push(new rc(e,t,d,o,null,c)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=xa)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&t.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(o?0:1),a=(c,d)=>{for(;c>=0;c--){let h=t[c];if(h==""){if(c==t.length-1||c==0)continue;for(;d>=s;d--)if(a(c-1,d))return!0;return!1}else{let m=d>0||d==0&&o?this.nodes[d].type:r&&d>=s?r.node(d-s).type:null;if(!m||m.name!=h&&!m.isInGroup(h))return!1;d--}}return!0};return a(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function a8(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&H3.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function u8(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function C7(n){let e={};for(let t in n)e[t]=n[t];return e}function x7(n,e){let t=e.schema.nodes;for(let r in t){let o=t[r];if(!o.allowsMarkType(n))continue;let s=[],a=c=>{s.push(c);for(let d=0;d<c.edgeCount;d++){let{type:h,next:m}=c.edge(d);if(h==e||s.indexOf(m)<0&&a(m))return!0}};if(a(o.contentMatch))return!0}}class Bo{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=Cp(t).createDocumentFragment());let o=r,s=[];return e.forEach(a=>{if(s.length||a.marks.length){let c=0,d=0;for(;c<s.length&&d<a.marks.length;){let h=a.marks[d];if(!this.marks[h.type.name]){d++;continue}if(!h.eq(s[c][0])||h.type.spec.spanning===!1)break;c++,d++}for(;c<s.length;)o=s.pop()[1];for(;d<a.marks.length;){let h=a.marks[d++],m=this.serializeMark(h,a.isInline,t);m&&(s.push([h,o]),o.appendChild(m.dom),o=m.contentDOM||m.dom)}}o.appendChild(this.serializeNodeInner(a,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:o}=bc(Cp(t),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,o)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let o=e.marks.length-1;o>=0;o--){let s=this.serializeMark(e.marks[o],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,t,r={}){let o=this.marks[e.type.name];return o&&bc(Cp(r),o(e,t),null,e.attrs)}static renderSpec(e,t,r=null,o){return bc(e,t,r,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Bo(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=S7(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return S7(e.marks)}}function S7(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function Cp(n){return n.document||window.document}const E7=new WeakMap;function c8(n){let e=E7.get(n);return e===void 0&&E7.set(n,e=f8(n)),e}function f8(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let o=0;o<r.length;o++)t(r[o]);else for(let o in r)t(r[o])}return t(n),e}function bc(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],s;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=c8(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=o.indexOf(" ");a>0&&(t=o.slice(0,a),o=o.slice(a+1));let c,d=t?n.createElementNS(t,o):n.createElement(o),h=e[1],m=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){m=2;for(let g in h)if(h[g]!=null){let b=g.indexOf(" ");b>0?d.setAttributeNS(g.slice(0,b),g.slice(b+1),h[g]):d.setAttribute(g,h[g])}}for(let g=m;g<e.length;g++){let b=e[g];if(b===0){if(g<e.length-1||g>m)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:v,contentDOM:C}=bc(n,b,t,r);if(d.appendChild(v),C){if(c)throw new RangeError("Multiple content holes");c=C}}}return{dom:d,contentDOM:c}}const z3=65535,B3=Math.pow(2,16);function d8(n,e){return n+e*B3}function w7(n){return n&z3}function h8(n){return(n-(n&z3))/B3}const j3=1,I3=2,vc=4,V3=8;let d1=class{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&V3)>0}get deletedBefore(){return(this.delInfo&(j3|vc))>0}get deletedAfter(){return(this.delInfo&(I3|vc))>0}get deletedAcross(){return(this.delInfo&vc)>0}},Oo=class Rl{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Rl.empty)return Rl.empty}recover(e){let t=0,r=w7(e);if(!this.inverted)for(let o=0;o<r;o++)t+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+t+h8(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let o=0,s=this.inverted?2:1,a=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let d=this.ranges[c]-(this.inverted?o:0);if(d>e)break;let h=this.ranges[c+s],m=this.ranges[c+a],g=d+h;if(e<=g){let b=h?e==d?-1:e==g?1:t:t,v=d+o+(b<0?0:m);if(r)return v;let C=e==(t<0?d:g)?null:d8(c/3,e-d),x=e==d?I3:e==g?j3:vc;return(t<0?e!=d:e!=g)&&(x|=V3),new d1(v,x,C)}o+=m-h}return r?e+o:new d1(e+o,0,null)}touches(e,t){let r=0,o=w7(t),s=this.inverted?2:1,a=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let d=this.ranges[c]-(this.inverted?r:0);if(d>e)break;let h=this.ranges[c+s],m=d+h;if(e<=m&&c==o*3)return!0;r+=this.ranges[c+a]-h}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,s=0;o<this.ranges.length;o+=3){let a=this.ranges[o],c=a-(this.inverted?s:0),d=a+(this.inverted?0:s),h=this.ranges[o+t],m=this.ranges[o+r];e(c,c+h,d,d+m),s+=m-h}}invert(){return new Rl(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Rl.empty:new Rl(e<0?[0,-e,0]:[0,0,e])}};Oo.empty=new Oo([]);class Sa{constructor(e,t,r=0,o=e?e.length:0){this.mirror=t,this.from=r,this.to=o,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Sa(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let o=e.getMirror(t);this.appendMap(e._maps[t],o!=null&&o<t?r+o:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let o=e.getMirror(t);this.appendMap(e._maps[t].invert(),o!=null&&o>t?r-o-1:void 0)}}invert(){let e=new Sa;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let o=0;for(let s=this.from;s<this.to;s++){let a=this._maps[s],c=a.mapResult(e,t);if(c.recover!=null){let d=this.getMirror(s);if(d!=null&&d>s&&d<this.to){s=d,e=this._maps[d].recover(c.recover);continue}}o|=c.delInfo,e=c.pos}return r?e:new d1(e,o,null)}}const xp=Object.create(null);let tn=class{getMap(){return Oo.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=xp[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in xp)throw new RangeError("Duplicate use of step JSON ID "+e);return xp[e]=t,t.prototype.jsonID=e,t}},un=class Qs{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Qs(e,null)}static fail(e){return new Qs(null,e)}static fromReplace(e,t,r,o){try{return Qs.ok(e.replace(t,r,o))}catch(s){if(s instanceof Rc)return Qs.fail(s.message);throw s}}};function W1(n,e,t){let r=[];for(let o=0;o<n.childCount;o++){let s=n.child(o);s.content.size&&(s=s.copy(W1(s.content,e,s))),s.isInline&&(s=e(s,t,o)),r.push(s)}return ee.fromArray(r)}let em=class Xs extends tn{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),s=new le(W1(t.content,(a,c)=>!a.isAtom||!c.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),o),t.openStart,t.openEnd);return un.fromReplace(e,this.from,this.to,s)}invert(){return new Ha(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Xs(t.pos,r.pos,this.mark)}merge(e){return e instanceof Xs&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Xs(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Xs(t.from,t.to,e.markFromJSON(t.mark))}};tn.jsonID("addMark",em);let Ha=class Ws extends tn{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new le(W1(t.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),t.openStart,t.openEnd);return un.fromReplace(e,this.from,this.to,r)}invert(){return new em(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Ws(t.pos,r.pos,this.mark)}merge(e){return e instanceof Ws&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ws(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ws(t.from,t.to,e.markFromJSON(t.mark))}};tn.jsonID("removeMark",Ha);let tm=class ea extends tn{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return un.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return un.fromReplace(e,this.pos,this.pos+1,new le(ee.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let o=0;o<t.marks.length;o++)if(!t.marks[o].isInSet(r))return new ea(this.pos,t.marks[o]);return new ea(this.pos,this.mark)}}return new Lc(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ea(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ea(t.pos,e.markFromJSON(t.mark))}};tn.jsonID("addNodeMark",tm);let Lc=class h1 extends tn{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return un.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return un.fromReplace(e,this.pos,this.pos+1,new le(ee.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new tm(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new h1(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new h1(t.pos,e.markFromJSON(t.mark))}};tn.jsonID("removeNodeMark",Lc);let ir=class co extends tn{constructor(e,t,r,o=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=o}apply(e){return this.structure&&p1(e,this.from,this.to)?un.fail("Structure replace would overwrite content"):un.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Oo([this.from,this.to-this.from,this.slice.size])}invert(e){return new co(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new co(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof co)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?le.empty:new le(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new co(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?le.empty:new le(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new co(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new co(t.from,t.to,le.fromJSON(e,t.slice),!!t.structure)}};tn.jsonID("replace",ir);let Tn=class Cc extends tn{constructor(e,t,r,o,s,a,c=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=o,this.slice=s,this.insert=a,this.structure=c}apply(e){if(this.structure&&(p1(e,this.from,this.gapFrom)||p1(e,this.gapTo,this.to)))return un.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return un.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?un.fromReplace(e,this.from,this.to,r):un.fail("Content does not fit in gap")}getMap(){return new Oo([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Cc(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||o<t.pos||s>r.pos?null:new Cc(t.pos,r.pos,o,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Cc(t.from,t.to,t.gapFrom,t.gapTo,le.fromJSON(e,t.slice),t.insert,!!t.structure)}};tn.jsonID("replaceAround",Tn);function p1(n,e,t){let r=n.resolve(e),o=t-e,s=r.depth;for(;o>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,o--;if(o>0){let a=r.node(s).maybeChild(r.indexAfter(s));for(;o>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,o--}}return!1}function p8(n,e,t,r){let o=[],s=[],a,c;n.doc.nodesBetween(e,t,(d,h,m)=>{if(!d.isInline)return;let g=d.marks;if(!r.isInSet(g)&&m.type.allowsMarkType(r.type)){let b=Math.max(h,e),v=Math.min(h+d.nodeSize,t),C=r.addToSet(g);for(let x=0;x<g.length;x++)g[x].isInSet(C)||(a&&a.to==b&&a.mark.eq(g[x])?a.to=v:o.push(a=new Ha(b,v,g[x])));c&&c.to==b?c.to=v:s.push(c=new em(b,v,r))}}),o.forEach(d=>n.step(d)),s.forEach(d=>n.step(d))}function m8(n,e,t,r){let o=[],s=0;n.doc.nodesBetween(e,t,(a,c)=>{if(!a.isInline)return;s++;let d=null;if(r instanceof kf){let h=a.marks,m;for(;m=r.isInSet(h);)(d||(d=[])).push(m),h=m.removeFromSet(h)}else r?r.isInSet(a.marks)&&(d=[r]):d=a.marks;if(d&&d.length){let h=Math.min(c+a.nodeSize,t);for(let m=0;m<d.length;m++){let g=d[m],b;for(let v=0;v<o.length;v++){let C=o[v];C.step==s-1&&g.eq(o[v].style)&&(b=C)}b?(b.to=h,b.step=s):o.push({style:g,from:Math.max(c,e),to:h,step:s})}}}),o.forEach(a=>n.step(new Ha(a.from,a.to,a.style)))}function nm(n,e,t,r=t.contentMatch,o=!0){let s=n.doc.nodeAt(e),a=[],c=e+1;for(let d=0;d<s.childCount;d++){let h=s.child(d),m=c+h.nodeSize,g=r.matchType(h.type);if(!g)a.push(new ir(c,m,le.empty));else{r=g;for(let b=0;b<h.marks.length;b++)t.allowsMarkType(h.marks[b].type)||n.step(new Ha(c,m,h.marks[b]));if(o&&h.isText&&t.whitespace!="pre"){let b,v=/\r?\n|\r/g,C;for(;b=v.exec(h.text);)C||(C=new le(ee.from(t.schema.text(" ",t.allowedMarks(h.marks))),0,0)),a.push(new ir(c+b.index,c+b.index+b[0].length,C))}}c=m}if(!r.validEnd){let d=r.fillBefore(ee.empty,!0);n.replace(c,c,new le(d,0,0))}for(let d=a.length-1;d>=0;d--)n.step(a[d])}function g8(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Gl(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let o=n.$from.node(r),s=n.$from.index(r),a=n.$to.indexAfter(r);if(r<n.depth&&o.canReplace(s,a,t))return r;if(r==0||o.type.spec.isolating||!g8(o,s,a))break}return null}function y8(n,e,t){let{$from:r,$to:o,depth:s}=e,a=r.before(s+1),c=o.after(s+1),d=a,h=c,m=ee.empty,g=0;for(let C=s,x=!1;C>t;C--)x||r.index(C)>0?(x=!0,m=ee.from(r.node(C).copy(m)),g++):d--;let b=ee.empty,v=0;for(let C=s,x=!1;C>t;C--)x||o.after(C+1)<o.end(C)?(x=!0,b=ee.from(o.node(C).copy(b)),v++):h++;n.step(new Tn(d,h,a,c,new le(m.append(b),g,v),m.size-g,!0))}function rm(n,e,t=null,r=n){let o=b8(n,e),s=o&&v8(r,e);return s?o.map(M7).concat({type:e,attrs:t}).concat(s.map(M7)):null}function M7(n){return{type:n,attrs:null}}function b8(n,e){let{parent:t,startIndex:r,endIndex:o}=n,s=t.contentMatchAt(r).findWrapping(e);if(!s)return null;let a=s.length?s[0]:e;return t.canReplaceWith(r,o,a)?s:null}function v8(n,e){let{parent:t,startIndex:r,endIndex:o}=n,s=t.child(r),a=e.contentMatch.findWrapping(s.type);if(!a)return null;let d=(a.length?a[a.length-1]:e).contentMatch;for(let h=r;d&&h<o;h++)d=d.matchType(t.child(h).type);return!d||!d.validEnd?null:a}function C8(n,e,t){let r=ee.empty;for(let a=t.length-1;a>=0;a--){if(r.size){let c=t[a].type.contentMatch.matchFragment(r);if(!c||!c.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ee.from(t[a].type.create(t[a].attrs,r))}let o=e.start,s=e.end;n.step(new Tn(o,s,o,s,new le(r,0,0),t.length,!0))}function x8(n,e,t,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(e,t,(a,c)=>{let d=typeof o=="function"?o(a):o;if(a.isTextblock&&!a.hasMarkup(r,d)&&S8(n.doc,n.mapping.slice(s).map(c),r)){let h=null;if(r.schema.linebreakReplacement){let v=r.whitespace=="pre",C=!!r.contentMatch.matchType(r.schema.linebreakReplacement);v&&!C?h=!1:!v&&C&&(h=!0)}h===!1&&_3(n,a,c,s),nm(n,n.mapping.slice(s).map(c,1),r,void 0,h===null);let m=n.mapping.slice(s),g=m.map(c,1),b=m.map(c+a.nodeSize,1);return n.step(new Tn(g,b,g+1,b-1,new le(ee.from(r.create(d,null,a.marks)),0,0),1,!0)),h===!0&&U3(n,a,c,s),!1}})}function U3(n,e,t,r){e.forEach((o,s)=>{if(o.isText){let a,c=/\r?\n|\r/g;for(;a=c.exec(o.text);){let d=n.mapping.slice(r).map(t+1+s+a.index);n.replaceWith(d,d+1,e.type.schema.linebreakReplacement.create())}}})}function _3(n,e,t,r){e.forEach((o,s)=>{if(o.type==o.type.schema.linebreakReplacement){let a=n.mapping.slice(r).map(t+1+s);n.replaceWith(a,a+1,e.type.schema.text(`
`))}})}function S8(n,e,t){let r=n.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,t)}function E8(n,e,t,r,o){let s=n.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");t||(t=s.type);let a=t.create(r,null,o||s.marks);if(s.isLeaf)return n.replaceWith(e,e+s.nodeSize,a);if(!t.validContent(s.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new Tn(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new le(ee.from(a),0,0),1,!0))}function Zr(n,e,t=1,r){let o=n.resolve(e),s=o.depth-t,a=r&&r[r.length-1]||o.parent;if(s<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!a.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let h=o.depth-1,m=t-2;h>s;h--,m--){let g=o.node(h),b=o.index(h);if(g.type.spec.isolating)return!1;let v=g.content.cutByIndex(b,g.childCount),C=r&&r[m+1];C&&(v=v.replaceChild(0,C.type.create(C.attrs)));let x=r&&r[m]||g;if(!g.canReplace(b+1,g.childCount)||!x.type.validContent(v))return!1}let c=o.indexAfter(s),d=r&&r[0];return o.node(s).canReplaceWith(c,c,d?d.type:o.node(s+1).type)}function w8(n,e,t=1,r){let o=n.doc.resolve(e),s=ee.empty,a=ee.empty;for(let c=o.depth,d=o.depth-t,h=t-1;c>d;c--,h--){s=ee.from(o.node(c).copy(s));let m=r&&r[h];a=ee.from(m?m.type.create(m.attrs,a):o.node(c).copy(a))}n.step(new ir(e,e,new le(s.append(a),t,t),!0))}function Ui(n,e){let t=n.resolve(e),r=t.index();return q3(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function M8(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let o=0;o<e.childCount;o++){let s=e.child(o),a=s.type==r?n.type.schema.nodes.text:s.type;if(t=t.matchType(a),!t||!n.type.allowsMarks(s.marks))return!1}return t.validEnd}function q3(n,e){return!!(n&&e&&!n.isLeaf&&M8(n,e))}function Af(n,e,t=-1){let r=n.resolve(e);for(let o=r.depth;;o--){let s,a,c=r.index(o);if(o==r.depth?(s=r.nodeBefore,a=r.nodeAfter):t>0?(s=r.node(o+1),c++,a=r.node(o).maybeChild(c)):(s=r.node(o).maybeChild(c-1),a=r.node(o+1)),s&&!s.isTextblock&&q3(s,a)&&r.node(o).canReplace(c,c+1))return e;if(o==0)break;e=t<0?r.before(o):r.after(o)}}function T8(n,e,t){let r=null,{linebreakReplacement:o}=n.doc.type.schema,s=n.doc.resolve(e-t),a=s.node().type;if(o&&a.inlineContent){let m=a.whitespace=="pre",g=!!a.contentMatch.matchType(o);m&&!g?r=!1:!m&&g&&(r=!0)}let c=n.steps.length;if(r===!1){let m=n.doc.resolve(e+t);_3(n,m.node(),m.before(),c)}a.inlineContent&&nm(n,e+t-1,a,s.node().contentMatchAt(s.index()),r==null);let d=n.mapping.slice(c),h=d.map(e-t);if(n.step(new ir(h,d.map(e+t,-1),le.empty,!0)),r===!0){let m=n.doc.resolve(h);U3(n,m.node(),m.before(),n.steps.length)}return n}function k8(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let s=r.index(o);if(r.node(o).canReplaceWith(s,s,t))return r.before(o+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let s=r.indexAfter(o);if(r.node(o).canReplaceWith(s,s,t))return r.after(o+1);if(s<r.node(o).childCount)return null}return null}function P3(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let o=t.content;for(let s=0;s<t.openStart;s++)o=o.firstChild.content;for(let s=1;s<=(t.openStart==0&&t.size?2:1);s++)for(let a=r.depth;a>=0;a--){let c=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,d=r.index(a)+(c>0?1:0),h=r.node(a),m=!1;if(s==1)m=h.canReplace(d,d,o);else{let g=h.contentMatchAt(d).findWrapping(o.firstChild.type);m=g&&h.canReplaceWith(d,d,g[0])}if(m)return c==0?r.pos:c<0?r.before(a+1):r.after(a+1)}return null}function Rf(n,e,t=e,r=le.empty){if(e==t&&!r.size)return null;let o=n.resolve(e),s=n.resolve(t);return F3(o,s,r)?new ir(e,t,r):new A8(o,s,r).fit()}function F3(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class A8{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=ee.empty;for(let o=0;o<=e.depth;o++){let s=e.node(o);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=ee.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let s=this.placed,a=r.depth,c=o.depth;for(;a&&c&&s.childCount==1;)s=s.firstChild.content,a--,c--;let d=new le(s,a,c);return e>-1?new Tn(r.pos,e,this.$to.pos,this.$to.end(),d,t):d.size||r.pos!=this.$to.pos?new ir(r.pos,o.pos,d):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let s=t.firstChild;if(t.childCount>1&&(o=0),s.type.spec.isolating&&o<=r){e=r;break}t=s.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let o,s=null;r?(s=Sp(this.unplaced.content,r-1).firstChild,o=s.content):o=this.unplaced.content;let a=o.firstChild;for(let c=this.depth;c>=0;c--){let{type:d,match:h}=this.frontier[c],m,g=null;if(t==1&&(a?h.matchType(a.type)||(g=h.fillBefore(ee.from(a),!1)):s&&d.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:c,parent:s,inject:g};if(t==2&&a&&(m=h.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:c,parent:s,wrap:m};if(s&&h.matchType(s.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,o=Sp(e,t);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new le(e,t+1,Math.max(r,o.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,o=Sp(e,t);if(o.childCount<=1&&t>0){let s=e.size-t<=t+o.size;this.unplaced=new le(ta(e,t-1,1),t-1,s?t-1:r)}else this.unplaced=new le(ta(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:o,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let x=0;x<s.length;x++)this.openFrontierNode(s[x]);let a=this.unplaced,c=r?r.content:a.content,d=a.openStart-e,h=0,m=[],{match:g,type:b}=this.frontier[t];if(o){for(let x=0;x<o.childCount;x++)m.push(o.child(x));g=g.matchFragment(o)}let v=c.size+e-(a.content.size-a.openEnd);for(;h<c.childCount;){let x=c.child(h),M=g.matchType(x.type);if(!M)break;h++,(h>1||d==0||x.content.size)&&(g=M,m.push(K3(x.mark(b.allowedMarks(x.marks)),h==1?d:0,h==c.childCount?v:-1)))}let C=h==c.childCount;C||(v=-1),this.placed=na(this.placed,t,ee.from(m)),this.frontier[t].match=g,C&&v<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let x=0,M=c;x<v;x++){let k=M.lastChild;this.frontier.push({type:k.type,match:k.contentMatchAt(k.childCount)}),M=k.content}this.unplaced=C?e==0?le.empty:new le(ta(a.content,e-1,1),e-1,v<0?a.openEnd:e-1):new le(ta(a.content,e,h),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Ep(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:o}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=Ep(e,t,o,r,s);if(a){for(let c=t-1;c>=0;c--){let{match:d,type:h}=this.frontier[c],m=Ep(e,c,h,d,!0);if(!m||m.childCount)continue e}return{depth:t,fit:a,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=na(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let o=e.node(r),s=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,s)}return e}openFrontierNode(e,t=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=na(this.placed,this.depth,ee.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(ee.empty,!0);t.childCount&&(this.placed=na(this.placed,this.frontier.length,t))}}function ta(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(ta(n.firstChild.content,e-1,t)))}function na(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(na(n.lastChild.content,e-1,t)))}function Sp(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function K3(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,K3(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(ee.empty,!0)))),n.copy(r)}function Ep(n,e,t,r,o){let s=n.node(e),a=o?n.indexAfter(e):n.index(e);if(a==s.childCount&&!t.compatibleContent(s.type))return null;let c=r.fillBefore(s.content,!0,a);return c&&!R8(t,s.content,a)?c:null}function R8(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function O8(n){return n.spec.defining||n.spec.definingForContent}function N8(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let o=n.doc.resolve(e),s=n.doc.resolve(t);if(F3(o,s,r))return n.step(new ir(e,t,r));let a=Z3(o,n.doc.resolve(t));a[a.length-1]==0&&a.pop();let c=-(o.depth+1);a.unshift(c);for(let b=o.depth,v=o.pos-1;b>0;b--,v--){let C=o.node(b).type.spec;if(C.defining||C.definingAsContext||C.isolating)break;a.indexOf(b)>-1?c=b:o.before(b)==v&&a.splice(1,0,-b)}let d=a.indexOf(c),h=[],m=r.openStart;for(let b=r.content,v=0;;v++){let C=b.firstChild;if(h.push(C),v==r.openStart)break;b=C.content}for(let b=m-1;b>=0;b--){let v=h[b],C=O8(v.type);if(C&&!v.sameMarkup(o.node(Math.abs(c)-1)))m=b;else if(C||!v.type.isTextblock)break}for(let b=r.openStart;b>=0;b--){let v=(b+m+1)%(r.openStart+1),C=h[v];if(C)for(let x=0;x<a.length;x++){let M=a[(x+d)%a.length],k=!0;M<0&&(k=!1,M=-M);let O=o.node(M-1),D=o.index(M-1);if(O.canReplaceWith(D,D,C.type,C.marks))return n.replace(o.before(M),k?s.after(M):t,new le($3(r.content,0,r.openStart,v),v,r.openEnd))}}let g=n.steps.length;for(let b=a.length-1;b>=0&&(n.replace(e,t,r),!(n.steps.length>g));b--){let v=a[b];v<0||(e=o.before(v),t=s.after(v))}}function $3(n,e,t,r,o){if(e<t){let s=n.firstChild;n=n.replaceChild(0,s.copy($3(s.content,e+1,t,r,s)))}if(e>r){let s=o.contentMatchAt(0),a=s.fillBefore(n).append(n);n=a.append(s.matchFragment(a).fillBefore(ee.empty,!0))}return n}function D8(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let o=k8(n.doc,e,r.type);o!=null&&(e=t=o)}n.replaceRange(e,t,new le(ee.from(r),0,0))}function L8(n,e,t){let r=n.doc.resolve(e),o=n.doc.resolve(t),s=Z3(r,o);for(let a=0;a<s.length;a++){let c=s[a],d=a==s.length-1;if(d&&c==0||r.node(c).type.contentMatch.validEnd)return n.delete(r.start(c),o.end(c));if(c>0&&(d||r.node(c-1).canReplace(r.index(c-1),o.indexAfter(c-1))))return n.delete(r.before(c),o.after(c))}for(let a=1;a<=r.depth&&a<=o.depth;a++)if(e-r.start(a)==r.depth-a&&t>r.end(a)&&o.end(a)-t!=o.depth-a&&r.start(a-1)==o.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),o.index(a-1)))return n.delete(r.before(a),t);n.delete(e,t)}function Z3(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let o=r;o>=0;o--){let s=n.start(o);if(s<n.pos-(n.depth-o)||e.end(o)>e.pos+(e.depth-o)||n.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(s==e.start(o)||o==n.depth&&o==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==s-1)&&t.push(o)}return t}let G3=class xc extends tn{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return un.fail("No node at attribute step's position");let r=Object.create(null);for(let s in t.attrs)r[s]=t.attrs[s];r[this.attr]=this.value;let o=t.type.create(r,null,t.marks);return un.fromReplace(e,this.pos,this.pos+1,new le(ee.from(o),0,t.isLeaf?0:1))}getMap(){return Oo.empty}invert(e){return new xc(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new xc(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new xc(t.pos,t.attr,t.value)}};tn.jsonID("attr",G3);let Y3=class m1 extends tn{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let o in e.attrs)t[o]=e.attrs[o];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return un.ok(r)}getMap(){return Oo.empty}invert(e){return new m1(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new m1(t.attr,t.value)}};tn.jsonID("docAttr",Y3);let Ul=class extends Error{};Ul=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Ul.prototype=Object.create(Error.prototype);Ul.prototype.constructor=Ul;Ul.prototype.name="TransformError";class J3{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Sa}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Ul(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=le.empty){let o=Rf(this.doc,e,t,r);return o&&this.step(o),this}replaceWith(e,t,r){return this.replace(e,t,new le(ee.from(r),0,0))}delete(e,t){return this.replace(e,t,le.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return N8(this,e,t,r),this}replaceRangeWith(e,t,r){return D8(this,e,t,r),this}deleteRange(e,t){return L8(this,e,t),this}lift(e,t){return y8(this,e,t),this}join(e,t=1){return T8(this,e,t),this}wrap(e,t){return C8(this,e,t),this}setBlockType(e,t=e,r,o=null){return x8(this,e,t,r,o),this}setNodeMarkup(e,t,r=null,o){return E8(this,e,t,r,o),this}setNodeAttribute(e,t,r){return this.step(new G3(e,t,r)),this}setDocAttribute(e,t){return this.step(new Y3(e,t)),this}addNodeMark(e,t){return this.step(new tm(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof Qe)t.isInSet(r.marks)&&this.step(new Lc(e,t));else{let o=r.marks,s,a=[];for(;s=t.isInSet(o);)a.push(new Lc(e,s)),o=s.removeFromSet(o);for(let c=a.length-1;c>=0;c--)this.step(a[c])}return this}split(e,t=1,r){return w8(this,e,t,r),this}addMark(e,t,r){return p8(this,e,t,r),this}removeMark(e,t,r){return m8(this,e,t,r),this}clearIncompatible(e,t,r){return nm(this,e,t,r),this}}const wp=Object.create(null);let Te=class{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new H8(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=le.empty){let r=t.content.lastChild,o=null;for(let c=0;c<t.openEnd;c++)o=r,r=r.lastChild;let s=e.steps.length,a=this.ranges;for(let c=0;c<a.length;c++){let{$from:d,$to:h}=a[c],m=e.mapping.slice(s);e.replaceRange(m.map(d.pos),m.map(h.pos),c?le.empty:t),c==0&&A7(e,s,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:a,$to:c}=o[s],d=e.mapping.slice(r),h=d.map(a.pos),m=d.map(c.pos);s?e.deleteRange(h,m):(e.replaceRangeWith(h,m,t),A7(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let o=e.parent.inlineContent?new ve(e):Ol(e.node(0),e.parent,e.pos,e.index(),t,r);if(o)return o;for(let s=e.depth-1;s>=0;s--){let a=t<0?Ol(e.node(0),e.node(s),e.before(s+1),e.index(s),t,r):Ol(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,r);if(a)return a}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Bn(e.node(0))}static atStart(e){return Ol(e,e,0,0,1)||new Bn(e)}static atEnd(e){return Ol(e,e,e.content.size,e.childCount,-1)||new Bn(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=wp[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in wp)throw new RangeError("Duplicate use of selection JSON ID "+e);return wp[e]=t,t.prototype.jsonID=e,t}getBookmark(){return ve.between(this.$anchor,this.$head).getBookmark()}};Te.prototype.visible=!0;class H8{constructor(e,t){this.$from=e,this.$to=t}}let T7=!1;function k7(n){!T7&&!n.parent.inlineContent&&(T7=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class ve extends Te{constructor(e,t=e){k7(e),k7(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return Te.near(r);let o=e.resolve(t.map(this.anchor));return new ve(o.parent.inlineContent?o:r,r)}replace(e,t=le.empty){if(super.replace(e,t),t==le.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof ve&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Of(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ve(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let o=e.resolve(t);return new this(o,r==t?o:e.resolve(r))}static between(e,t,r){let o=e.pos-t.pos;if((!r||o)&&(r=o>=0?1:-1),!t.parent.inlineContent){let s=Te.findFrom(t,r,!0)||Te.findFrom(t,-r,!0);if(s)t=s.$head;else return Te.near(t,r)}return e.parent.inlineContent||(o==0?e=t:(e=(Te.findFrom(e,-r,!0)||Te.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=o<0&&(e=t))),new ve(e,t)}}Te.jsonID("text",ve);class Of{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Of(e.map(this.anchor),e.map(this.head))}resolve(e){return ve.between(e.resolve(this.anchor),e.resolve(this.head))}}class ce extends Te{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:o}=t.mapResult(this.anchor),s=e.resolve(o);return r?Te.near(s):new ce(s)}content(){return new le(ee.from(this.node),0,0)}eq(e){return e instanceof ce&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new im(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ce(e.resolve(t.anchor))}static create(e,t){return new ce(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ce.prototype.visible=!1;Te.jsonID("node",ce);class im{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new Of(r,r):new im(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&ce.isSelectable(r)?new ce(t):Te.near(t)}}class Bn extends Te{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=le.empty){if(t==le.empty){e.delete(0,e.doc.content.size);let r=Te.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Bn(e)}map(e){return new Bn(e)}eq(e){return e instanceof Bn}getBookmark(){return z8}}Te.jsonID("all",Bn);const z8={map(){return this},resolve(n){return new Bn(n)}};function Ol(n,e,t,r,o,s=!1){if(e.inlineContent)return ve.create(n,t);for(let a=r-(o>0?0:1);o>0?a<e.childCount:a>=0;a+=o){let c=e.child(a);if(c.isAtom){if(!s&&ce.isSelectable(c))return ce.create(n,t-(o<0?c.nodeSize:0))}else{let d=Ol(n,c,t+o,o<0?c.childCount:0,o,s);if(d)return d}t+=c.nodeSize*o}return null}function A7(n,e,t){let r=n.steps.length-1;if(r<e)return;let o=n.steps[r];if(!(o instanceof ir||o instanceof Tn))return;let s=n.mapping.maps[r],a;s.forEach((c,d,h,m)=>{a==null&&(a=m)}),n.setSelection(Te.near(n.doc.resolve(a),t))}const R7=1,ic=2,O7=4;class B8 extends J3{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|R7)&~ic,this.storedMarks=null,this}get selectionSet(){return(this.updated&R7)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=ic,this}ensureMarks(e){return Qe.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&ic)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~ic,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Qe.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let o=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let s=this.storedMarks;if(!s){let a=this.doc.resolve(t);s=r==t?a.marks():a.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,o.text(e,s)),this.selection.empty||this.setSelection(Te.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=O7,this}get scrolledIntoView(){return(this.updated&O7)>0}}function N7(n,e){return!e||!n?n:n.bind(e)}class ra{constructor(e,t,r){this.name=e,this.init=N7(t.init,r),this.apply=N7(t.apply,r)}}const j8=[new ra("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new ra("selection",{init(n,e){return n.selection||Te.atStart(e.doc)},apply(n){return n.selection}}),new ra("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new ra("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Mp{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=j8.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new ra(r.key,r.spec.state,r))})}}class Ll{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),o=null;for(;;){let s=!1;for(let a=0;a<this.config.plugins.length;a++){let c=this.config.plugins[a];if(c.spec.appendTransaction){let d=o?o[a].n:0,h=o?o[a].state:this,m=d<t.length&&c.spec.appendTransaction.call(c,d?t.slice(d):t,h,r);if(m&&r.filterTransaction(m,a)){if(m.setMeta("appendedTransaction",e),!o){o=[];for(let g=0;g<this.config.plugins.length;g++)o.push(g<a?{state:r,n:t.length}:{state:this,n:0})}t.push(m),r=r.applyInner(m),s=!0}o&&(o[a]={state:r,n:t.length})}}if(!s)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Ll(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let s=r[o];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new B8(this)}static create(e){let t=new Mp(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Ll(t);for(let o=0;o<t.fields.length;o++)r[t.fields[o].name]=t.fields[o].init(e,r);return r}reconfigure(e){let t=new Mp(this.schema,e.plugins),r=t.fields,o=new Ll(t);for(let s=0;s<r.length;s++){let a=r[s].name;o[a]=this.hasOwnProperty(a)?this[a]:r[s].init(e,o)}return o}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],s=o.spec.state;s&&s.toJSON&&(t[r]=s.toJSON.call(o,this[o.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new Mp(e.schema,e.plugins),s=new Ll(o);return o.fields.forEach(a=>{if(a.name=="doc")s.doc=Ni.fromJSON(e.schema,t.doc);else if(a.name=="selection")s.selection=Te.fromJSON(s.doc,t.selection);else if(a.name=="storedMarks")t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let c in r){let d=r[c],h=d.spec.state;if(d.key==a.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(t,c)){s[a.name]=h.fromJSON.call(d,e,t[c],s);return}}s[a.name]=a.init(e,s)}}),s}}function Q3(n,e,t){for(let r in n){let o=n[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=Q3(o,e,{})),t[r]=o}return t}class pt{constructor(e){this.spec=e,this.props={},e.props&&Q3(e.props,this,this.props),this.key=e.key?e.key.key:X3("plugin")}getState(e){return e[this.key]}}const Tp=Object.create(null);function X3(n){return n in Tp?n+"$"+ ++Tp[n]:(Tp[n]=0,n+"$")}class $t{constructor(e="key"){this.key=X3(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Pt=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},_l=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let g1=null;const qr=function(n,e,t){let r=g1||(g1=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},I8=function(){g1=null},No=function(n,e,t,r){return t&&(D7(n,e,t,r,-1)||D7(n,e,t,r,1))},V8=/^(img|br|input|textarea|hr)$/i;function D7(n,e,t,r,o){for(var s;;){if(n==t&&e==r)return!0;if(e==(o<0?0:Jn(n))){let a=n.parentNode;if(!a||a.nodeType!=1||za(n)||V8.test(n.nodeName)||n.contentEditable=="false")return!1;e=Pt(n)+(o<0?0:1),n=a}else if(n.nodeType==1){let a=n.childNodes[e+(o<0?-1:0)];if(a.nodeType==1&&a.contentEditable=="false")if(!((s=a.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=o;else return!1;else n=a,e=o<0?Jn(n):0}else return!1}}function Jn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function U8(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=Jn(n)}else if(n.parentNode&&!za(n))e=Pt(n),n=n.parentNode;else return null}}function _8(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!za(n))e=Pt(n)+1,n=n.parentNode;else return null}}function q8(n,e,t){for(let r=e==0,o=e==Jn(n);r||o;){if(n==t)return!0;let s=Pt(n);if(n=n.parentNode,!n)return!1;r=r&&s==0,o=o&&s==Jn(n)}}function za(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const Nf=function(n){return n.focusNode&&No(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function po(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function P8(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function F8(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(Jn(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(Jn(r.startContainer),r.startOffset)}}}const yr=typeof navigator<"u"?navigator:null,L7=typeof document<"u"?document:null,_i=yr&&yr.userAgent||"",y1=/Edge\/(\d+)/.exec(_i),W3=/MSIE \d/.exec(_i),b1=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(_i),wn=!!(W3||b1||y1),Li=W3?document.documentMode:b1?+b1[1]:y1?+y1[1]:0,or=!wn&&/gecko\/(\d+)/i.test(_i);or&&+(/Firefox\/(\d+)/.exec(_i)||[0,0])[1];const v1=!wn&&/Chrome\/(\d+)/.exec(_i),en=!!v1,e5=v1?+v1[1]:0,cn=!wn&&!!yr&&/Apple Computer/.test(yr.vendor),ql=cn&&(/Mobile\/\w+/.test(_i)||!!yr&&yr.maxTouchPoints>2),Yn=ql||(yr?/Mac/.test(yr.platform):!1),K8=yr?/Win/.test(yr.platform):!1,Kr=/Android \d/.test(_i),Ba=!!L7&&"webkitFontSmoothing"in L7.documentElement.style,$8=Ba?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Z8(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Ir(n,e){return typeof n=="number"?n:n[e]}function G8(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function H7(n,e,t){let r=n.someProp("scrollThreshold")||0,o=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let a=t||n.dom;a;){if(a.nodeType!=1){a=_l(a);continue}let c=a,d=c==s.body,h=d?Z8(s):G8(c),m=0,g=0;if(e.top<h.top+Ir(r,"top")?g=-(h.top-e.top+Ir(o,"top")):e.bottom>h.bottom-Ir(r,"bottom")&&(g=e.bottom-e.top>h.bottom-h.top?e.top+Ir(o,"top")-h.top:e.bottom-h.bottom+Ir(o,"bottom")),e.left<h.left+Ir(r,"left")?m=-(h.left-e.left+Ir(o,"left")):e.right>h.right-Ir(r,"right")&&(m=e.right-h.right+Ir(o,"right")),m||g)if(d)s.defaultView.scrollBy(m,g);else{let v=c.scrollLeft,C=c.scrollTop;g&&(c.scrollTop+=g),m&&(c.scrollLeft+=m);let x=c.scrollLeft-v,M=c.scrollTop-C;e={left:e.left-x,top:e.top-M,right:e.right-x,bottom:e.bottom-M}}let b=d?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(b))break;a=b=="absolute"?a.offsetParent:_l(a)}}function Y8(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,o;for(let s=(e.left+e.right)/2,a=t+1;a<Math.min(innerHeight,e.bottom);a+=5){let c=n.root.elementFromPoint(s,a);if(!c||c==n.dom||!n.dom.contains(c))continue;let d=c.getBoundingClientRect();if(d.top>=t-20){r=c,o=d.top;break}}return{refDOM:r,refTop:o,stack:t5(n.dom)}}function t5(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=_l(r));return e}function J8({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;n5(t,r==0?0:r-e)}function n5(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:o,left:s}=n[t];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Tl=null;function Q8(n){if(n.setActive)return n.setActive();if(Tl)return n.focus(Tl);let e=t5(n);n.focus(Tl==null?{get preventScroll(){return Tl={preventScroll:!0},!0}}:void 0),Tl||(Tl=!1,n5(e,0))}function r5(n,e){let t,r=2e8,o,s=0,a=e.top,c=e.top,d,h;for(let m=n.firstChild,g=0;m;m=m.nextSibling,g++){let b;if(m.nodeType==1)b=m.getClientRects();else if(m.nodeType==3)b=qr(m).getClientRects();else continue;for(let v=0;v<b.length;v++){let C=b[v];if(C.top<=a&&C.bottom>=c){a=Math.max(C.bottom,a),c=Math.min(C.top,c);let x=C.left>e.left?C.left-e.left:C.right<e.left?e.left-C.right:0;if(x<r){t=m,r=x,o=x&&t.nodeType==3?{left:C.right<e.left?C.right:C.left,top:e.top}:e,m.nodeType==1&&x&&(s=g+(e.left>=(C.left+C.right)/2?1:0));continue}}else C.top>e.top&&!d&&C.left<=e.left&&C.right>=e.left&&(d=m,h={left:Math.max(C.left,Math.min(C.right,e.left)),top:C.top});!t&&(e.left>=C.right&&e.top>=C.top||e.left>=C.left&&e.top>=C.bottom)&&(s=g+1)}}return!t&&d&&(t=d,o=h,r=0),t&&t.nodeType==3?X8(t,o):!t||r&&t.nodeType==1?{node:n,offset:s}:r5(t,o)}function X8(n,e){let t=n.nodeValue.length,r=document.createRange();for(let o=0;o<t;o++){r.setEnd(n,o+1),r.setStart(n,o);let s=xi(r,1);if(s.top!=s.bottom&&om(e,s))return{node:n,offset:o+(e.left>=(s.left+s.right)/2?1:0)}}return{node:n,offset:0}}function om(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function W8(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function ex(n,e,t){let{node:r,offset:o}=r5(e,t),s=-1;if(r.nodeType==1&&!r.firstChild){let a=r.getBoundingClientRect();s=a.left!=a.right&&t.left>(a.left+a.right)/2?1:-1}return n.docView.posFromDOM(r,o,s)}function tx(n,e,t,r){let o=-1;for(let s=e,a=!1;s!=n.dom;){let c=n.docView.nearestDesc(s,!0),d;if(!c)return null;if(c.dom.nodeType==1&&(c.node.isBlock&&c.parent||!c.contentDOM)&&((d=c.dom.getBoundingClientRect()).width||d.height)&&(c.node.isBlock&&c.parent&&(!a&&d.left>r.left||d.top>r.top?o=c.posBefore:(!a&&d.right<r.left||d.bottom<r.top)&&(o=c.posAfter),a=!0),!c.contentDOM&&o<0&&!c.node.isText))return(c.node.isBlock?r.top<(d.top+d.bottom)/2:r.left<(d.left+d.right)/2)?c.posBefore:c.posAfter;s=c.dom.parentNode}return o>-1?o:n.docView.posFromDOM(e,t,-1)}function i5(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),s=o;;){let a=n.childNodes[s];if(a.nodeType==1){let c=a.getClientRects();for(let d=0;d<c.length;d++){let h=c[d];if(om(e,h))return i5(a,e,h)}}if((s=(s+1)%r)==o)break}return n}function nx(n,e){let t=n.dom.ownerDocument,r,o=0,s=F8(t,e.left,e.top);s&&({node:r,offset:o}=s);let a=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),c;if(!a||!n.dom.contains(a.nodeType!=1?a.parentNode:a)){let h=n.dom.getBoundingClientRect();if(!om(e,h)||(a=i5(n.dom,e,h),!a))return null}if(cn)for(let h=a;r&&h;h=_l(h))h.draggable&&(r=void 0);if(a=W8(a,e),r){if(or&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let m=r.childNodes[o],g;m.nodeName=="IMG"&&(g=m.getBoundingClientRect()).right<=e.left&&g.bottom>e.top&&o++}let h;Ba&&o&&r.nodeType==1&&(h=r.childNodes[o-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&o--,r==n.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?c=n.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(c=tx(n,r,o,e))}c==null&&(c=ex(n,a,e));let d=n.docView.nearestDesc(a,!0);return{pos:c,inside:d?d.posAtStart-d.border:-1}}function z7(n){return n.top<n.bottom||n.left<n.right}function xi(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(z7(r))return r}return Array.prototype.find.call(t,z7)||n.getBoundingClientRect()}const rx=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function o5(n,e,t){let{node:r,offset:o,atom:s}=n.docView.domFromPos(e,t<0?-1:1),a=Ba||or;if(r.nodeType==3)if(a&&(rx.test(r.nodeValue)||(t<0?!o:o==r.nodeValue.length))){let d=xi(qr(r,o,o),t);if(or&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let h=xi(qr(r,o-1,o-1),-1);if(h.top==d.top){let m=xi(qr(r,o,o+1),-1);if(m.top!=d.top)return Ys(m,m.left<h.left)}}return d}else{let d=o,h=o,m=t<0?1:-1;return t<0&&!o?(h++,m=-1):t>=0&&o==r.nodeValue.length?(d--,m=1):t<0?d--:h++,Ys(xi(qr(r,d,h),m),m<0)}if(!n.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&o&&(t<0||o==Jn(r))){let d=r.childNodes[o-1];if(d.nodeType==1)return kp(d.getBoundingClientRect(),!1)}if(s==null&&o<Jn(r)){let d=r.childNodes[o];if(d.nodeType==1)return kp(d.getBoundingClientRect(),!0)}return kp(r.getBoundingClientRect(),t>=0)}if(s==null&&o&&(t<0||o==Jn(r))){let d=r.childNodes[o-1],h=d.nodeType==3?qr(d,Jn(d)-(a?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(h)return Ys(xi(h,1),!1)}if(s==null&&o<Jn(r)){let d=r.childNodes[o];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let h=d?d.nodeType==3?qr(d,0,a?0:1):d.nodeType==1?d:null:null;if(h)return Ys(xi(h,-1),!0)}return Ys(xi(r.nodeType==3?qr(r):r,-t),t>=0)}function Ys(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function kp(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function l5(n,e,t){let r=n.state,o=n.root.activeElement;r!=e&&n.updateState(e),o!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),o!=n.dom&&o&&o.focus()}}function ix(n,e,t){let r=e.selection,o=t=="up"?r.$from:r.$to;return l5(n,e,()=>{let{node:s}=n.docView.domFromPos(o.pos,t=="up"?-1:1);for(;;){let c=n.docView.nearestDesc(s,!0);if(!c)break;if(c.node.isBlock){s=c.contentDOM||c.dom;break}s=c.dom.parentNode}let a=o5(n,o.pos,1);for(let c=s.firstChild;c;c=c.nextSibling){let d;if(c.nodeType==1)d=c.getClientRects();else if(c.nodeType==3)d=qr(c,0,c.nodeValue.length).getClientRects();else continue;for(let h=0;h<d.length;h++){let m=d[h];if(m.bottom>m.top+1&&(t=="up"?a.top-m.top>(m.bottom-a.top)*2:m.bottom-a.bottom>(a.bottom-m.top)*2))return!1}}return!0})}const ox=/[\u0590-\u08ac]/;function lx(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,s=!o,a=o==r.parent.content.size,c=n.domSelection();return c?!ox.test(r.parent.textContent)||!c.modify?t=="left"||t=="backward"?s:a:l5(n,e,()=>{let{focusNode:d,focusOffset:h,anchorNode:m,anchorOffset:g}=n.domSelectionRange(),b=c.caretBidiLevel;c.modify("move",t,"character");let v=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:C,focusOffset:x}=n.domSelectionRange(),M=C&&!v.contains(C.nodeType==1?C:C.parentNode)||d==C&&h==x;try{c.collapse(m,g),d&&(d!=m||h!=g)&&c.extend&&c.extend(d,h)}catch{}return b!=null&&(c.caretBidiLevel=b),M}):r.pos==r.start()||r.pos==r.end()}let B7=null,j7=null,I7=!1;function sx(n,e,t){return B7==e&&j7==t?I7:(B7=e,j7=t,I7=t=="up"||t=="down"?ix(n,e,t):lx(n,e,t))}const Qn=0,V7=1,go=2,br=3;class ja{constructor(e,t,r,o){this.parent=e,this.children=t,this.dom=r,this.contentDOM=o,this.dirty=Qn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let o=this.children[t];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,a;if(e==this.contentDOM)s=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(a)+a.size:this.posAtStart}else{let s,a;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=t>Pt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!1;break}if(s.previousSibling)break}if(o==null&&t==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!0;break}if(s.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,o=e;o;o=o.parentNode){let s=this.getDesc(o),a;if(s&&(!t||s.node))if(r&&(a=s.nodeDOM)&&!(a.nodeType==1?a.contains(e.nodeType==1?e:e.parentNode):a==e))r=!1;else return s}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let o=e;o;o=o.parentNode){let s=this.getDesc(o);if(s)return s.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let o=this.children[t],s=r+o.size;if(r==e&&s!=r){for(;!o.border&&o.children.length;)for(let a=0;a<o.children.length;a++){let c=o.children[a];if(c.size){o=c;break}}return o}if(e<s)return o.descAt(e-r-o.border);r=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let s=0;r<this.children.length;r++){let a=this.children[r],c=s+a.size;if(c>e||a instanceof a5){o=e-s;break}s=c}if(o)return this.children[r].domFromPos(o-this.children[r].border,t);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof s5&&s.side>=0;r--);if(t<=0){let s,a=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,a=!1);return s&&t&&a&&!s.border&&!s.domAtom?s.domFromPos(s.size,t):{node:this.contentDOM,offset:s?Pt(s.dom)+1:0}}else{let s,a=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,a=!1);return s&&a&&!s.border&&!s.domAtom?s.domFromPos(0,t):{node:this.contentDOM,offset:s?Pt(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,s=-1;for(let a=r,c=0;;c++){let d=this.children[c],h=a+d.size;if(o==-1&&e<=h){let m=a+d.border;if(e>=m&&t<=h-d.border&&d.node&&d.contentDOM&&this.contentDOM.contains(d.contentDOM))return d.parseRange(e,t,m);e=a;for(let g=c;g>0;g--){let b=this.children[g-1];if(b.size&&b.dom.parentNode==this.contentDOM&&!b.emptyChildAt(1)){o=Pt(b.dom)+1;break}e-=b.size}o==-1&&(o=0)}if(o>-1&&(h>t||c==this.children.length-1)){t=h;for(let m=c+1;m<this.children.length;m++){let g=this.children[m];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(-1)){s=Pt(g.dom);break}t+=g.size}s==-1&&(s=this.contentDOM.childNodes.length);break}a=h}return{node:this.contentDOM,from:e,to:t,fromOffset:o,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,o=!1){let s=Math.min(e,t),a=Math.max(e,t);for(let v=0,C=0;v<this.children.length;v++){let x=this.children[v],M=C+x.size;if(s>C&&a<M)return x.setSelection(e-C-x.border,t-C-x.border,r,o);C=M}let c=this.domFromPos(e,e?-1:1),d=t==e?c:this.domFromPos(t,t?-1:1),h=r.root.getSelection(),m=r.domSelectionRange(),g=!1;if((or||cn)&&e==t){let{node:v,offset:C}=c;if(v.nodeType==3){if(g=!!(C&&v.nodeValue[C-1]==`
`),g&&C==v.nodeValue.length)for(let x=v,M;x;x=x.parentNode){if(M=x.nextSibling){M.nodeName=="BR"&&(c=d={node:M.parentNode,offset:Pt(M)+1});break}let k=x.pmViewDesc;if(k&&k.node&&k.node.isBlock)break}}else{let x=v.childNodes[C-1];g=x&&(x.nodeName=="BR"||x.contentEditable=="false")}}if(or&&m.focusNode&&m.focusNode!=d.node&&m.focusNode.nodeType==1){let v=m.focusNode.childNodes[m.focusOffset];v&&v.contentEditable=="false"&&(o=!0)}if(!(o||g&&cn)&&No(c.node,c.offset,m.anchorNode,m.anchorOffset)&&No(d.node,d.offset,m.focusNode,m.focusOffset))return;let b=!1;if((h.extend||e==t)&&!g){h.collapse(c.node,c.offset);try{e!=t&&h.extend(d.node,d.offset),b=!0}catch{}}if(!b){if(e>t){let C=c;c=d,d=C}let v=document.createRange();v.setEnd(d.node,d.offset),v.setStart(c.node,c.offset),h.removeAllRanges(),h.addRange(v)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,o=0;o<this.children.length;o++){let s=this.children[o],a=r+s.size;if(r==a?e<=a&&t>=r:e<a&&t>r){let c=r+s.border,d=a-s.border;if(e>=c&&t<=d){this.dirty=e==r||t==a?go:V7,e==c&&t==d&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=br:s.markDirty(e-c,t-c);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?go:br}r=a}this.dirty=go}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?go:V7;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class s5 extends ja{constructor(e,t,r,o){let s,a=t.type.toDOM;if(typeof a=="function"&&(a=a(r,()=>{if(!s)return o;if(s.parent)return s.parent.posBeforeChild(s)})),!t.type.spec.raw){if(a.nodeType!=1){let c=document.createElement("span");c.appendChild(a),a=c}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return this.dirty==Qn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class ax extends ja{constructor(e,t,r,o){super(e,[],t,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Do extends ja{constructor(e,t,r,o,s){super(e,[],r,o),this.mark=t,this.spec=s}static create(e,t,r,o){let s=o.nodeViews[t.type.name],a=s&&s(t,o,r);return(!a||!a.dom)&&(a=Bo.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new Do(e,t,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&br||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=br&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Qn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Qn}}slice(e,t,r){let o=Do.create(this.parent,this.mark,!0,r),s=this.children,a=this.size;t<a&&(s=x1(s,t,a,r)),e>0&&(s=x1(s,0,e,r));for(let c=0;c<s.length;c++)s[c].parent=o;return o.children=s,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Hi extends ja{constructor(e,t,r,o,s,a,c,d,h){super(e,[],s,a),this.node=t,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=c}static create(e,t,r,o,s,a){let c=s.nodeViews[t.type.name],d,h=c&&c(t,s,()=>{if(!d)return a;if(d.parent)return d.parent.posBeforeChild(d)},r,o),m=h&&h.dom,g=h&&h.contentDOM;if(t.isText){if(!m)m=document.createTextNode(t.text);else if(m.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else m||({dom:m,contentDOM:g}=Bo.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!g&&!t.isText&&m.nodeName!="BR"&&(m.hasAttribute("contenteditable")||(m.contentEditable="false"),t.type.spec.draggable&&(m.draggable=!0));let b=m;return m=f5(m,r,t),h?d=new ux(e,t,r,o,m,g||null,b,h,s,a+1):t.isText?new Df(e,t,r,o,m,b,s):new Hi(e,t,r,o,m,g||null,b,s,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>ee.empty)}return e}matchesNode(e,t,r){return this.dirty==Qn&&e.eq(this.node)&&Hc(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,o=t,s=e.composing?this.localCompositionInfo(e,t):null,a=s&&s.pos>-1?s:null,c=s&&s.pos<0,d=new fx(this,a&&a.node,e);px(this.node,this.innerDeco,(h,m,g)=>{h.spec.marks?d.syncToMarks(h.spec.marks,r,e):h.type.side>=0&&!g&&d.syncToMarks(m==this.node.childCount?Qe.none:this.node.child(m).marks,r,e),d.placeWidget(h,e,o)},(h,m,g,b)=>{d.syncToMarks(h.marks,r,e);let v;d.findNodeMatch(h,m,g,b)||c&&e.state.selection.from>o&&e.state.selection.to<o+h.nodeSize&&(v=d.findIndexWithChild(s.node))>-1&&d.updateNodeAt(h,m,g,v,e)||d.updateNextNode(h,m,g,e,b,o)||d.addNode(h,m,g,e,o),o+=h.nodeSize}),d.syncToMarks([],r,e),this.node.isTextblock&&d.addTextblockHacks(),d.destroyRest(),(d.changed||this.dirty==go)&&(a&&this.protectLocalComposition(e,a),u5(this.contentDOM,this.children,e),ql&&mx(this.dom))}localCompositionInfo(e,t){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof ve)||r<t||o>t+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let a=s.nodeValue,c=gx(this.node.content,a,r-t,o-t);return c<0?null:{node:s,pos:c,text:a}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:o}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let a=new ax(this,s,t,o);e.input.compositionNodes.push(a),this.children=x1(this.children,r,r+o.length,e,a)}update(e,t,r,o){return this.dirty==br||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,o),!0)}updateInner(e,t,r,o){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=Qn}updateOuterDeco(e){if(Hc(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=c5(this.dom,this.nodeDOM,C1(this.outerDeco,this.node,t),C1(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function U7(n,e,t,r,o){f5(r,e,n);let s=new Hi(void 0,n,e,t,r,r,r,o,0);return s.contentDOM&&s.updateChildren(o,0),s}class Df extends Hi{constructor(e,t,r,o,s,a,c){super(e,t,r,o,s,null,a,c,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,o){return this.dirty==br||this.dirty!=Qn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Qn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=Qn,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let o=this.node.cut(e,t),s=document.createTextNode(o.text);return new Df(this.parent,o,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=br)}get domAtom(){return!1}isText(e){return this.node.text==e}}class a5 extends ja{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Qn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class ux extends Hi{constructor(e,t,r,o,s,a,c,d,h,m){super(e,t,r,o,s,a,c,h,m),this.spec=d}update(e,t,r,o){if(this.dirty==br)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,t,r);return s&&this.updateInner(e,t,r,o),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,o){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function u5(n,e,t){let r=n.firstChild,o=!1;for(let s=0;s<e.length;s++){let a=e[s],c=a.dom;if(c.parentNode==n){for(;c!=r;)r=_7(r),o=!0;r=r.nextSibling}else o=!0,n.insertBefore(c,r);if(a instanceof Do){let d=r?r.previousSibling:n.lastChild;u5(a.contentDOM,a.children,t),r=d?d.nextSibling:n.firstChild}}for(;r;)r=_7(r),o=!0;o&&t.trackWrites==n&&(t.trackWrites=null)}const aa=function(n){n&&(this.nodeName=n)};aa.prototype=Object.create(null);const yo=[new aa];function C1(n,e,t){if(n.length==0)return yo;let r=t?yo[0]:new aa,o=[r];for(let s=0;s<n.length;s++){let a=n[s].type.attrs;if(a){a.nodeName&&o.push(r=new aa(a.nodeName));for(let c in a){let d=a[c];d!=null&&(t&&o.length==1&&o.push(r=new aa(e.isInline?"span":"div")),c=="class"?r.class=(r.class?r.class+" ":"")+d:c=="style"?r.style=(r.style?r.style+";":"")+d:c!="nodeName"&&(r[c]=d))}}}return o}function c5(n,e,t,r){if(t==yo&&r==yo)return e;let o=e;for(let s=0;s<r.length;s++){let a=r[s],c=t[s];if(s){let d;c&&c.nodeName==a.nodeName&&o!=n&&(d=o.parentNode)&&d.nodeName.toLowerCase()==a.nodeName||(d=document.createElement(a.nodeName),d.pmIsDeco=!0,d.appendChild(o),c=yo[0]),o=d}cx(o,c||yo[0],a)}return o}function cx(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=t.class?t.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)o.indexOf(r[s])==-1&&n.classList.remove(r[s]);for(let s=0;s<o.length;s++)r.indexOf(o[s])==-1&&n.classList.add(o[s]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)n.style.removeProperty(o[1])}t.style&&(n.style.cssText+=t.style)}}function f5(n,e,t){return c5(n,n,yo,C1(e,t,n.nodeType!=1))}function Hc(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function _7(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class fx{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=dx(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let o=0,s=this.stack.length>>1,a=Math.min(s,e.length);for(;o<a&&(o==s-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<s;)this.destroyRest(),this.top.dirty=Qn,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let c=-1;for(let d=this.index;d<Math.min(this.index+3,this.top.children.length);d++){let h=this.top.children[d];if(h.matchesMark(e[s])&&!this.isLocked(h.dom)){c=d;break}}if(c>-1)c>this.index&&(this.changed=!0,this.destroyBetween(this.index,c)),this.top=this.top.children[this.index];else{let d=Do.create(this.top,e[s],t,r);this.top.children.splice(this.index,0,d),this.top=d,this.changed=!0}this.index=0,s++}}findNodeMatch(e,t,r,o){let s=-1,a;if(o>=this.preMatch.index&&(a=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&a.matchesNode(e,t,r))s=this.top.children.indexOf(a,this.index);else for(let c=this.index,d=Math.min(this.top.children.length,c+5);c<d;c++){let h=this.top.children[c];if(h.matchesNode(e,t,r)&&!this.preMatch.matched.has(h)){s=c;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,t,r,o,s){let a=this.top.children[o];return a.dirty==br&&a.dom==a.contentDOM&&(a.dirty=go),a.update(e,t,r,s)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=t}}updateNextNode(e,t,r,o,s,a){for(let c=this.index;c<this.top.children.length;c++){let d=this.top.children[c];if(d instanceof Hi){let h=this.preMatch.matched.get(d);if(h!=null&&h!=s)return!1;let m=d.dom,g,b=this.isLocked(m)&&!(e.isText&&d.node&&d.node.isText&&d.nodeDOM.nodeValue==e.text&&d.dirty!=br&&Hc(t,d.outerDeco));if(!b&&d.update(e,t,r,o))return this.destroyBetween(this.index,c),d.dom!=m&&(this.changed=!0),this.index++,!0;if(!b&&(g=this.recreateWrapper(d,e,t,r,o,a)))return this.destroyBetween(this.index,c),this.top.children[this.index]=g,g.contentDOM&&(g.dirty=go,g.updateChildren(o,a+1),g.dirty=Qn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,o,s,a){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Hc(r,e.outerDeco)||!o.eq(e.innerDeco))return null;let c=Hi.create(this.top,t,r,o,s,a);if(c.contentDOM){c.children=e.children,e.children=[];for(let d of c.children)d.parent=c}return e.destroy(),c}addNode(e,t,r,o,s){let a=Hi.create(this.top,e,t,r,o,s);a.contentDOM&&a.updateChildren(o,s+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(e,t,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let s=new s5(this.top,e,t,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Do;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Df)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((cn||en)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new a5(this.top,[],r,null);t!=this.top?t.children.push(o):t.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function dx(n,e){let t=e,r=t.children.length,o=n.childCount,s=new Map,a=[];e:for(;o>0;){let c;for(;;)if(r){let h=t.children[r-1];if(h instanceof Do)t=h,r=h.children.length;else{c=h,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let d=c.node;if(d){if(d!=n.child(o-1))break;--o,s.set(c,o),a.push(c)}}return{index:o,matched:s,matches:a.reverse()}}function hx(n,e){return n.type.side-e.type.side}function px(n,e,t,r){let o=e.locals(n),s=0;if(o.length==0){for(let h=0;h<n.childCount;h++){let m=n.child(h);r(m,o,e.forChild(s,m),h),s+=m.nodeSize}return}let a=0,c=[],d=null;for(let h=0;;){let m,g;for(;a<o.length&&o[a].to==s;){let M=o[a++];M.widget&&(m?(g||(g=[m])).push(M):m=M)}if(m)if(g){g.sort(hx);for(let M=0;M<g.length;M++)t(g[M],h,!!d)}else t(m,h,!!d);let b,v;if(d)v=-1,b=d,d=null;else if(h<n.childCount)v=h,b=n.child(h++);else break;for(let M=0;M<c.length;M++)c[M].to<=s&&c.splice(M--,1);for(;a<o.length&&o[a].from<=s&&o[a].to>s;)c.push(o[a++]);let C=s+b.nodeSize;if(b.isText){let M=C;a<o.length&&o[a].from<M&&(M=o[a].from);for(let k=0;k<c.length;k++)c[k].to<M&&(M=c[k].to);M<C&&(d=b.cut(M-s),b=b.cut(0,M-s),C=M,v=-1)}else for(;a<o.length&&o[a].to<C;)a++;let x=b.isInline&&!b.isLeaf?c.filter(M=>!M.inline):c.slice();r(b,x,e.forChild(s,b),v),s=C}}function mx(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function gx(n,e,t,r){for(let o=0,s=0;o<n.childCount&&s<=r;){let a=n.child(o++),c=s;if(s+=a.nodeSize,!a.isText)continue;let d=a.text;for(;o<n.childCount;){let h=n.child(o++);if(s+=h.nodeSize,!h.isText)break;d+=h.text}if(s>=t){if(s>=r&&d.slice(r-e.length-c,r-c)==e)return r-e.length;let h=c<r?d.lastIndexOf(e,r-c-1):-1;if(h>=0&&h+e.length+c>=t)return c+h;if(t==r&&d.length>=r+e.length-c&&d.slice(r-c,r-c+e.length)==e)return r}}return-1}function x1(n,e,t,r,o){let s=[];for(let a=0,c=0;a<n.length;a++){let d=n[a],h=c,m=c+=d.size;h>=t||m<=e?s.push(d):(h<e&&s.push(d.slice(0,e-h,r)),o&&(s.push(o),o=void 0),m>t&&s.push(d.slice(t-h,d.size,r)))}return s}function lm(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let o=n.docView.nearestDesc(t.focusNode),s=o&&o.size==0,a=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(a<0)return null;let c=r.resolve(a),d,h;if(Nf(t)){for(d=a;o&&!o.node;)o=o.parent;let g=o.node;if(o&&g.isAtom&&ce.isSelectable(g)&&o.parent&&!(g.isInline&&q8(t.focusNode,t.focusOffset,o.dom))){let b=o.posBefore;h=new ce(a==b?c:r.resolve(b))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let g=a,b=a;for(let v=0;v<t.rangeCount;v++){let C=t.getRangeAt(v);g=Math.min(g,n.docView.posFromDOM(C.startContainer,C.startOffset,1)),b=Math.max(b,n.docView.posFromDOM(C.endContainer,C.endOffset,-1))}if(g<0)return null;[d,a]=b==n.state.selection.anchor?[b,g]:[g,b],c=r.resolve(a)}else d=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(d<0)return null}let m=r.resolve(d);if(!h){let g=e=="pointer"||n.state.selection.head<c.pos&&!s?1:-1;h=sm(n,m,c,g)}return h}function d5(n){return n.editable?n.hasFocus():p5(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Gr(n,e=!1){let t=n.state.selection;if(h5(n,t),!!d5(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&en){let r=n.domSelectionRange(),o=n.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&No(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)bx(n);else{let{anchor:r,head:o}=t,s,a;q7&&!(t instanceof ve)&&(t.$from.parent.inlineContent||(s=P7(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(a=P7(n,t.to))),n.docView.setSelection(r,o,n,e),q7&&(s&&F7(s),a&&F7(a)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&yx(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const q7=cn||en&&e5<63;function P7(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),o=r<t.childNodes.length?t.childNodes[r]:null,s=r?t.childNodes[r-1]:null;if(cn&&o&&o.contentEditable=="false")return Ap(o);if((!o||o.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(o)return Ap(o);if(s)return Ap(s)}}function Ap(n){return n.contentEditable="true",cn&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function F7(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function yx(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,o=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=o)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!d5(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function bx(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,o=r.nodeName=="IMG";o?t.setStart(r.parentNode,Pt(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!o&&!n.state.selection.visible&&wn&&Li<=11&&(r.disabled=!0,r.disabled=!1)}function h5(n,e){if(e instanceof ce){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(K7(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else K7(n)}function K7(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function sm(n,e,t,r){return n.someProp("createSelectionBetween",o=>o(n,e,t))||ve.between(e,t,r)}function $7(n){return n.editable&&!n.hasFocus()?!1:p5(n)}function p5(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function vx(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return No(e.node,e.offset,t.anchorNode,t.anchorOffset)}function S1(n,e){let{$anchor:t,$head:r}=n.selection,o=e>0?t.max(r):t.min(r),s=o.parent.inlineContent?o.depth?n.doc.resolve(e>0?o.after():o.before()):null:o;return s&&Te.findFrom(s,e)}function Ei(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function Z7(n,e,t){let r=n.state.selection;if(r instanceof ve)if(t.indexOf("s")>-1){let{$head:o}=r,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let a=n.state.doc.resolve(o.pos+s.nodeSize*(e<0?-1:1));return Ei(n,new ve(r.$anchor,a))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let o=S1(n.state,e);return o&&o instanceof ce?Ei(n,o):!1}else if(!(Yn&&t.indexOf("m")>-1)){let o=r.$head,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,a;if(!s||s.isText)return!1;let c=e<0?o.pos-s.nodeSize:o.pos;return s.isAtom||(a=n.docView.descAt(c))&&!a.contentDOM?ce.isSelectable(s)?Ei(n,new ce(e<0?n.state.doc.resolve(o.pos-s.nodeSize):o)):Ba?Ei(n,new ve(n.state.doc.resolve(e<0?c:c+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof ce&&r.node.isInline)return Ei(n,new ve(e>0?r.$to:r.$from));{let o=S1(n.state,e);return o?Ei(n,o):!1}}}function zc(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function ua(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function kl(n,e){return e<0?Cx(n):xx(n)}function Cx(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let o,s,a=!1;for(or&&t.nodeType==1&&r<zc(t)&&ua(t.childNodes[r],-1)&&(a=!0);;)if(r>0){if(t.nodeType!=1)break;{let c=t.childNodes[r-1];if(ua(c,-1))o=t,s=--r;else if(c.nodeType==3)t=c,r=t.nodeValue.length;else break}}else{if(m5(t))break;{let c=t.previousSibling;for(;c&&ua(c,-1);)o=t.parentNode,s=Pt(c),c=c.previousSibling;if(c)t=c,r=zc(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}a?E1(n,t,r):o&&E1(n,o,s)}function xx(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let o=zc(t),s,a;for(;;)if(r<o){if(t.nodeType!=1)break;let c=t.childNodes[r];if(ua(c,1))s=t,a=++r;else break}else{if(m5(t))break;{let c=t.nextSibling;for(;c&&ua(c,1);)s=c.parentNode,a=Pt(c)+1,c=c.nextSibling;if(c)t=c,r=0,o=zc(t);else{if(t=t.parentNode,t==n.dom)break;r=o=0}}}s&&E1(n,s,a)}function m5(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function Sx(n,e){for(;n&&e==n.childNodes.length&&!za(n);)e=Pt(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function Ex(n,e){for(;n&&!e&&!za(n);)e=Pt(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function E1(n,e,t){if(e.nodeType!=3){let s,a;(a=Sx(e,t))?(e=a,t=0):(s=Ex(e,t))&&(e=s,t=s.nodeValue.length)}let r=n.domSelection();if(!r)return;if(Nf(r)){let s=document.createRange();s.setEnd(e,t),s.setStart(e,t),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:o}=n;setTimeout(()=>{n.state==o&&Gr(n)},50)}function G7(n,e){let t=n.state.doc.resolve(e);if(!(en||K8)&&t.parent.inlineContent){let o=n.coordsAtPos(e);if(e>t.start()){let s=n.coordsAtPos(e-1),a=(s.top+s.bottom)/2;if(a>o.top&&a<o.bottom&&Math.abs(s.left-o.left)>1)return s.left<o.left?"ltr":"rtl"}if(e<t.end()){let s=n.coordsAtPos(e+1),a=(s.top+s.bottom)/2;if(a>o.top&&a<o.bottom&&Math.abs(s.left-o.left)>1)return s.left>o.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Y7(n,e,t){let r=n.state.selection;if(r instanceof ve&&!r.empty||t.indexOf("s")>-1||Yn&&t.indexOf("m")>-1)return!1;let{$from:o,$to:s}=r;if(!o.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let a=S1(n.state,e);if(a&&a instanceof ce)return Ei(n,a)}if(!o.parent.inlineContent){let a=e<0?o:s,c=r instanceof Bn?Te.near(a,e):Te.findFrom(a,e);return c?Ei(n,c):!1}return!1}function J7(n,e){if(!(n.state.selection instanceof ve))return!0;let{$head:t,$anchor:r,empty:o}=n.state.selection;if(!t.sameParent(r))return!0;if(!o)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let a=n.state.tr;return e<0?a.delete(t.pos-s.nodeSize,t.pos):a.delete(t.pos,t.pos+s.nodeSize),n.dispatch(a),!0}return!1}function Q7(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function wx(n){if(!cn||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Q7(n,r,"true"),setTimeout(()=>Q7(n,r,"false"),20)}return!1}function Mx(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function Tx(n,e){let t=e.keyCode,r=Mx(e);if(t==8||Yn&&t==72&&r=="c")return J7(n,-1)||kl(n,-1);if(t==46&&!e.shiftKey||Yn&&t==68&&r=="c")return J7(n,1)||kl(n,1);if(t==13||t==27)return!0;if(t==37||Yn&&t==66&&r=="c"){let o=t==37?G7(n,n.state.selection.from)=="ltr"?-1:1:-1;return Z7(n,o,r)||kl(n,o)}else if(t==39||Yn&&t==70&&r=="c"){let o=t==39?G7(n,n.state.selection.from)=="ltr"?1:-1:1;return Z7(n,o,r)||kl(n,o)}else{if(t==38||Yn&&t==80&&r=="c")return Y7(n,-1,r)||kl(n,-1);if(t==40||Yn&&t==78&&r=="c")return wx(n)||Y7(n,1,r)||kl(n,1);if(r==(Yn?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function am(n,e){n.someProp("transformCopied",v=>{e=v(e,n)});let t=[],{content:r,openStart:o,openEnd:s}=e;for(;o>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,s--;let v=r.firstChild;t.push(v.type.name,v.attrs!=v.type.defaultAttrs?v.attrs:null),r=v.content}let a=n.someProp("clipboardSerializer")||Bo.fromSchema(n.state.schema),c=C5(),d=c.createElement("div");d.appendChild(a.serializeFragment(r,{document:c}));let h=d.firstChild,m,g=0;for(;h&&h.nodeType==1&&(m=v5[h.nodeName.toLowerCase()]);){for(let v=m.length-1;v>=0;v--){let C=c.createElement(m[v]);for(;d.firstChild;)C.appendChild(d.firstChild);d.appendChild(C),g++}h=d.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${o} ${s}${g?` -${g}`:""} ${JSON.stringify(t)}`);let b=n.someProp("clipboardTextSerializer",v=>v(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:d,text:b,slice:e}}function um(n,e,t,r,o){let s=o.parent.type.spec.code,a,c;if(!t&&!e)return null;let d=e&&(r||s||!t);if(d){if(n.someProp("transformPastedText",b=>{e=b(e,s||r,n)}),s)return e?new le(ee.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):le.empty;let g=n.someProp("clipboardTextParser",b=>b(e,o,r,n));if(g)c=g;else{let b=o.marks(),{schema:v}=n.state,C=Bo.fromSchema(v);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(x=>{let M=a.appendChild(document.createElement("p"));x&&M.appendChild(C.serializeNode(v.text(x,b)))})}}else n.someProp("transformPastedHTML",g=>{t=g(t,n)}),a=Ox(t),Ba&&Nx(a);let h=a&&a.querySelector("[data-pm-slice]"),m=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(m&&m[3])for(let g=+m[3];g>0;g--){let b=a.firstChild;for(;b&&b.nodeType!=1;)b=b.nextSibling;if(!b)break;a=b}if(c||(c=(n.someProp("clipboardParser")||n.someProp("domParser")||Di.fromSchema(n.state.schema)).parseSlice(a,{preserveWhitespace:!!(d||m),context:o,ruleFromNode(b){return b.nodeName=="BR"&&!b.nextSibling&&b.parentNode&&!kx.test(b.parentNode.nodeName)?{ignore:!0}:null}})),m)c=Dx(X7(c,+m[1],+m[2]),m[4]);else if(c=le.maxOpen(Ax(c.content,o),!0),c.openStart||c.openEnd){let g=0,b=0;for(let v=c.content.firstChild;g<c.openStart&&!v.type.spec.isolating;g++,v=v.firstChild);for(let v=c.content.lastChild;b<c.openEnd&&!v.type.spec.isolating;b++,v=v.lastChild);c=X7(c,g,b)}return n.someProp("transformPasted",g=>{c=g(c,n)}),c}const kx=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Ax(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let o=e.node(t).contentMatchAt(e.index(t)),s,a=[];if(n.forEach(c=>{if(!a)return;let d=o.findWrapping(c.type),h;if(!d)return a=null;if(h=a.length&&s.length&&y5(d,s,c,a[a.length-1],0))a[a.length-1]=h;else{a.length&&(a[a.length-1]=b5(a[a.length-1],s.length));let m=g5(c,d);a.push(m),o=o.matchType(m.type),s=d}}),a)return ee.from(a)}return n}function g5(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,ee.from(n));return n}function y5(n,e,t,r,o){if(o<n.length&&o<e.length&&n[o]==e[o]){let s=y5(n,e,t,r.lastChild,o+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(o==n.length-1?t.type:n[o+1]))return r.copy(r.content.append(ee.from(g5(t,n,o+1))))}}function b5(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,b5(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(ee.empty,!0);return n.copy(t.append(r))}function w1(n,e,t,r,o,s){let a=e<0?n.firstChild:n.lastChild,c=a.content;return n.childCount>1&&(s=0),o<r-1&&(c=w1(c,e,t,r,o+1,s)),o>=t&&(c=e<0?a.contentMatchAt(0).fillBefore(c,s<=o).append(c):c.append(a.contentMatchAt(a.childCount).fillBefore(ee.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,a.copy(c))}function X7(n,e,t){return e<n.openStart&&(n=new le(w1(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new le(w1(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const v5={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let W7=null;function C5(){return W7||(W7=document.implementation.createHTMLDocument("title"))}let Rp=null;function Rx(n){let e=window.trustedTypes;return e?(Rp||(Rp=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),Rp.createHTML(n)):n}function Ox(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=C5().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),o;if((o=r&&v5[r[1].toLowerCase()])&&(n=o.map(s=>"<"+s+">").join("")+n+o.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=Rx(n),o)for(let s=0;s<o.length;s++)t=t.querySelector(o[s])||t;return t}function Nx(n){let e=n.querySelectorAll(en?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function Dx(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:o,openStart:s,openEnd:a}=n;for(let c=r.length-2;c>=0;c-=2){let d=t.nodes[r[c]];if(!d||d.hasRequiredAttrs())break;o=ee.from(d.create(r[c+1],o)),s++,a++}return new le(o,s,a)}const fn={},dn={},Lx={touchstart:!0,touchmove:!0};class Hx{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function zx(n){for(let e in fn){let t=fn[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{jx(n,r)&&!cm(n,r)&&(n.editable||!(r.type in dn))&&t(n,r)},Lx[e]?{passive:!0}:void 0)}cn&&n.dom.addEventListener("input",()=>null),M1(n)}function Oi(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function Bx(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function M1(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>cm(n,r))})}function cm(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function jx(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function Ix(n,e){!cm(n,e)&&fn[e.type]&&(n.editable||!(e.type in dn))&&fn[e.type](n,e)}dn.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!S5(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Kr&&en&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),ql&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",o=>o(n,po(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||Tx(n,t)?t.preventDefault():Oi(n,"key")};dn.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};dn.keypress=(n,e)=>{let t=e;if(S5(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Yn&&t.metaKey)return;if(n.someProp("handleKeyPress",o=>o(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof ve)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(t.charCode),s=()=>n.state.tr.insertText(o).scrollIntoView();!/[\r\n]/.test(o)&&!n.someProp("handleTextInput",a=>a(n,r.$from.pos,r.$to.pos,o,s))&&n.dispatch(s()),t.preventDefault()}};function Lf(n){return{left:n.clientX,top:n.clientY}}function Vx(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function fm(n,e,t,r,o){if(r==-1)return!1;let s=n.state.doc.resolve(r);for(let a=s.depth+1;a>0;a--)if(n.someProp(e,c=>a>s.depth?c(n,t,s.nodeAfter,s.before(a),o,!0):c(n,t,s.node(a),s.before(a),o,!1)))return!0;return!1}function Bl(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function Ux(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&ce.isSelectable(r)?(Bl(n,new ce(t)),!0):!1}function _x(n,e){if(e==-1)return!1;let t=n.state.selection,r,o;t instanceof ce&&(r=t.node);let s=n.state.doc.resolve(e);for(let a=s.depth+1;a>0;a--){let c=a>s.depth?s.nodeAfter:s.node(a);if(ce.isSelectable(c)){r&&t.$from.depth>0&&a>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?o=s.before(t.$from.depth):o=s.before(a);break}}return o!=null?(Bl(n,ce.create(n.state.doc,o)),!0):!1}function qx(n,e,t,r,o){return fm(n,"handleClickOn",e,t,r)||n.someProp("handleClick",s=>s(n,e,r))||(o?_x(n,t):Ux(n,t))}function Px(n,e,t,r){return fm(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",o=>o(n,e,r))}function Fx(n,e,t,r){return fm(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",o=>o(n,e,r))||Kx(n,t,r)}function Kx(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(Bl(n,ve.create(r,0,r.content.size)),!0):!1;let o=r.resolve(e);for(let s=o.depth+1;s>0;s--){let a=s>o.depth?o.nodeAfter:o.node(s),c=o.before(s);if(a.inlineContent)Bl(n,ve.create(r,c+1,c+1+a.content.size));else if(ce.isSelectable(a))Bl(n,ce.create(r,c));else continue;return!0}}function dm(n){return Ea(n)}const x5=Yn?"metaKey":"ctrlKey";fn.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=dm(n),o=Date.now(),s="singleClick";o-n.input.lastClick.time<500&&Vx(t,n.input.lastClick)&&!t[x5]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:o,x:t.clientX,y:t.clientY,type:s,button:t.button};let a=n.posAtCoords(Lf(t));a&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new $x(n,a,t,!!r)):(s=="doubleClick"?Px:Fx)(n,a.pos,a.inside,t)?t.preventDefault():Oi(n,"pointer"))};class $x{constructor(e,t,r,o){this.view=e,this.pos=t,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[x5],this.allowDefault=r.shiftKey;let s,a;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),a=t.inside;else{let m=e.state.doc.resolve(t.pos);s=m.parent,a=m.depth?m.before():0}const c=o?null:r.target,d=c?e.docView.nearestDesc(c,!0):null;this.target=d&&d.dom.nodeType==1?d.dom:null;let{selection:h}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||h instanceof ce&&h.from<=a&&h.to>a)&&(this.mightDrag={node:s,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&or&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Oi(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Gr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Lf(e))),this.updateAllowDefault(e),this.allowDefault||!t?Oi(this.view,"pointer"):qx(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||cn&&this.mightDrag&&!this.mightDrag.node.isAtom||en&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Bl(this.view,Te.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Oi(this.view,"pointer")}move(e){this.updateAllowDefault(e),Oi(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}fn.touchstart=n=>{n.input.lastTouch=Date.now(),dm(n),Oi(n,"pointer")};fn.touchmove=n=>{n.input.lastTouch=Date.now(),Oi(n,"pointer")};fn.contextmenu=n=>dm(n);function S5(n,e){return n.composing?!0:cn&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const Zx=Kr?5e3:-1;dn.compositionstart=dn.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof ve&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),Ea(n,!0),n.markCursor=null;else if(Ea(n,!e.selection.empty),or&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let o=r.focusNode,s=r.focusOffset;o&&o.nodeType==1&&s!=0;){let a=s<0?o.lastChild:o.childNodes[s-1];if(!a)break;if(a.nodeType==3){let c=n.domSelection();c&&c.collapse(a,a.nodeValue.length);break}else o=a,s=-1}}n.input.composing=!0}E5(n,Zx)};dn.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,E5(n,20))};function E5(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Ea(n),e))}function w5(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=Yx());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function Gx(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=U8(e.focusNode,e.focusOffset),r=_8(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let o=r.pmViewDesc,s=n.domObserver.lastChangedTextNode;if(t==s||r==s)return s;if(!o||!o.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let a=t.pmViewDesc;if(!(!a||!a.isText(t.nodeValue)))return r}}return t||r}function Yx(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Ea(n,e=!1){if(!(Kr&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),w5(n),e||n.docView&&n.docView.dirty){let t=lm(n),r=n.state.selection;return t&&!t.eq(r)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function Jx(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const wa=wn&&Li<15||ql&&$8<604;fn.copy=dn.cut=(n,e)=>{let t=e,r=n.state.selection,o=t.type=="cut";if(r.empty)return;let s=wa?null:t.clipboardData,a=r.content(),{dom:c,text:d}=am(n,a);s?(t.preventDefault(),s.clearData(),s.setData("text/html",c.innerHTML),s.setData("text/plain",d)):Jx(n,c),o&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Qx(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function Xx(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?Ma(n,r.value,null,o,e):Ma(n,r.textContent,r.innerHTML,o,e)},50)}function Ma(n,e,t,r,o){let s=um(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",d=>d(n,o,s||le.empty)))return!0;if(!s)return!1;let a=Qx(s),c=a?n.state.tr.replaceSelectionWith(a,r):n.state.tr.replaceSelection(s);return n.dispatch(c.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function M5(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}dn.paste=(n,e)=>{let t=e;if(n.composing&&!Kr)return;let r=wa?null:t.clipboardData,o=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&Ma(n,M5(r),r.getData("text/html"),o,t)?t.preventDefault():Xx(n,t)};class T5{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const Wx=Yn?"altKey":"ctrlKey";function k5(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[Wx]}fn.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let o=n.state.selection,s=o.empty?null:n.posAtCoords(Lf(t)),a;if(!(s&&s.pos>=o.from&&s.pos<=(o instanceof ce?o.to-1:o.to))){if(r&&r.mightDrag)a=ce.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let g=n.docView.nearestDesc(t.target,!0);g&&g.node.type.spec.draggable&&g!=n.docView&&(a=ce.create(n.state.doc,g.posBefore))}}let c=(a||n.state.selection).content(),{dom:d,text:h,slice:m}=am(n,c);(!t.dataTransfer.files.length||!en||e5>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(wa?"Text":"text/html",d.innerHTML),t.dataTransfer.effectAllowed="copyMove",wa||t.dataTransfer.setData("text/plain",h),n.dragging=new T5(m,k5(n,t),a)};fn.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};dn.dragover=dn.dragenter=(n,e)=>e.preventDefault();dn.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let o=n.posAtCoords(Lf(t));if(!o)return;let s=n.state.doc.resolve(o.pos),a=r&&r.slice;a?n.someProp("transformPasted",C=>{a=C(a,n)}):a=um(n,M5(t.dataTransfer),wa?null:t.dataTransfer.getData("text/html"),!1,s);let c=!!(r&&k5(n,t));if(n.someProp("handleDrop",C=>C(n,t,a||le.empty,c))){t.preventDefault();return}if(!a)return;t.preventDefault();let d=a?P3(n.state.doc,s.pos,a):s.pos;d==null&&(d=s.pos);let h=n.state.tr;if(c){let{node:C}=r;C?C.replace(h):h.deleteSelection()}let m=h.mapping.map(d),g=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,b=h.doc;if(g?h.replaceRangeWith(m,m,a.content.firstChild):h.replaceRange(m,m,a),h.doc.eq(b))return;let v=h.doc.resolve(m);if(g&&ce.isSelectable(a.content.firstChild)&&v.nodeAfter&&v.nodeAfter.sameMarkup(a.content.firstChild))h.setSelection(new ce(v));else{let C=h.mapping.map(d);h.mapping.maps[h.mapping.maps.length-1].forEach((x,M,k,O)=>C=O),h.setSelection(sm(n,v,h.doc.resolve(C)))}n.focus(),n.dispatch(h.setMeta("uiEvent","drop"))};fn.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Gr(n)},20))};fn.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};fn.beforeinput=(n,e)=>{if(en&&Kr&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,po(8,"Backspace")))))return;let{$cursor:o}=n.state.selection;o&&o.pos>0&&n.dispatch(n.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let n in dn)fn[n]=dn[n];function Ta(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Bc{constructor(e,t){this.toDOM=e,this.spec=t||Mo,this.side=this.spec.side||0}map(e,t,r,o){let{pos:s,deleted:a}=e.mapResult(t.from+o,this.side<0?-1:1);return a?null:new En(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Bc&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ta(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class zi{constructor(e,t){this.attrs=e,this.spec=t||Mo}map(e,t,r,o){let s=e.map(t.from+o,this.spec.inclusiveStart?-1:1)-r,a=e.map(t.to+o,this.spec.inclusiveEnd?1:-1)-r;return s>=a?null:new En(s,a,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof zi&&Ta(this.attrs,e.attrs)&&Ta(this.spec,e.spec)}static is(e){return e.type instanceof zi}destroy(){}}class hm{constructor(e,t){this.attrs=e,this.spec=t||Mo}map(e,t,r,o){let s=e.mapResult(t.from+o,1);if(s.deleted)return null;let a=e.mapResult(t.to+o,-1);return a.deleted||a.pos<=s.pos?null:new En(s.pos-r,a.pos-r,this)}valid(e,t){let{index:r,offset:o}=e.content.findIndex(t.from),s;return o==t.from&&!(s=e.child(r)).isText&&o+s.nodeSize==t.to}eq(e){return this==e||e instanceof hm&&Ta(this.attrs,e.attrs)&&Ta(this.spec,e.spec)}destroy(){}}class En{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new En(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new En(e,e,new Bc(t,r))}static inline(e,t,r,o){return new En(e,t,new zi(r,o))}static node(e,t,r,o){return new En(e,t,new hm(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof zi}get widget(){return this.type instanceof Bc}}const Nl=[],Mo={};class bt{constructor(e,t){this.local=e.length?e:Nl,this.children=t.length?t:Nl}static create(e,t){return t.length?jc(t,e,0,Mo):Xt}find(e,t,r){let o=[];return this.findInner(e??0,t??1e9,o,0,r),o}findInner(e,t,r,o,s){for(let a=0;a<this.local.length;a++){let c=this.local[a];c.from<=t&&c.to>=e&&(!s||s(c.spec))&&r.push(c.copy(c.from+o,c.to+o))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){let c=this.children[a]+1;this.children[a+2].findInner(e-c,t-c,r,o+c,s)}}map(e,t,r){return this==Xt||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Mo)}mapInner(e,t,r,o,s){let a;for(let c=0;c<this.local.length;c++){let d=this.local[c].map(e,r,o);d&&d.type.valid(t,d)?(a||(a=[])).push(d):s.onRemove&&s.onRemove(this.local[c].spec)}return this.children.length?eS(this.children,a||[],e,t,r,o,s):a?new bt(a.sort(To),Nl):Xt}add(e,t){return t.length?this==Xt?bt.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let o,s=0;e.forEach((c,d)=>{let h=d+r,m;if(m=R5(t,c,h)){for(o||(o=this.children.slice());s<o.length&&o[s]<d;)s+=3;o[s]==d?o[s+2]=o[s+2].addInner(c,m,h+1):o.splice(s,0,d,d+c.nodeSize,jc(m,c,h+1,Mo)),s+=3}});let a=A5(s?O5(t):t,-r);for(let c=0;c<a.length;c++)a[c].type.valid(e,a[c])||a.splice(c--,1);return new bt(a.length?this.local.concat(a).sort(To):this.local,o||this.children)}remove(e){return e.length==0||this==Xt?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,o=this.local;for(let s=0;s<r.length;s+=3){let a,c=r[s]+t,d=r[s+1]+t;for(let m=0,g;m<e.length;m++)(g=e[m])&&g.from>c&&g.to<d&&(e[m]=null,(a||(a=[])).push(g));if(!a)continue;r==this.children&&(r=this.children.slice());let h=r[s+2].removeInner(a,c+1);h!=Xt?r[s+2]=h:(r.splice(s,3),s-=3)}if(o.length){for(let s=0,a;s<e.length;s++)if(a=e[s])for(let c=0;c<o.length;c++)o[c].eq(a,t)&&(o==this.local&&(o=this.local.slice()),o.splice(c--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new bt(o,r):Xt}forChild(e,t){if(this==Xt)return this;if(t.isLeaf)return bt.empty;let r,o;for(let c=0;c<this.children.length;c+=3)if(this.children[c]>=e){this.children[c]==e&&(r=this.children[c+2]);break}let s=e+1,a=s+t.content.size;for(let c=0;c<this.local.length;c++){let d=this.local[c];if(d.from<a&&d.to>s&&d.type instanceof zi){let h=Math.max(s,d.from)-s,m=Math.min(a,d.to)-s;h<m&&(o||(o=[])).push(d.copy(h,m))}}if(o){let c=new bt(o.sort(To),Nl);return r?new Ai([c,r]):c}return r||Xt}eq(e){if(this==e)return!0;if(!(e instanceof bt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return pm(this.localsInner(e))}localsInner(e){if(this==Xt)return Nl;if(e.inlineContent||!this.local.some(zi.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof zi||t.push(this.local[r]);return t}forEachSet(e){e(this)}}bt.empty=new bt([],[]);bt.removeOverlap=pm;const Xt=bt.empty;class Ai{constructor(e){this.members=e}map(e,t){const r=this.members.map(o=>o.map(e,t,Mo));return Ai.from(r)}forChild(e,t){if(t.isLeaf)return bt.empty;let r=[];for(let o=0;o<this.members.length;o++){let s=this.members[o].forChild(e,t);s!=Xt&&(s instanceof Ai?r=r.concat(s.members):r.push(s))}return Ai.from(r)}eq(e){if(!(e instanceof Ai)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let o=0;o<this.members.length;o++){let s=this.members[o].localsInner(e);if(s.length)if(!t)t=s;else{r&&(t=t.slice(),r=!1);for(let a=0;a<s.length;a++)t.push(s[a])}}return t?pm(r?t:t.sort(To)):Nl}static from(e){switch(e.length){case 0:return Xt;case 1:return e[0];default:return new Ai(e.every(t=>t instanceof bt)?e:e.reduce((t,r)=>t.concat(r instanceof bt?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function eS(n,e,t,r,o,s,a){let c=n.slice();for(let h=0,m=s;h<t.maps.length;h++){let g=0;t.maps[h].forEach((b,v,C,x)=>{let M=x-C-(v-b);for(let k=0;k<c.length;k+=3){let O=c[k+1];if(O<0||b>O+m-g)continue;let D=c[k]+m-g;v>=D?c[k+1]=b<=D?-2:-1:b>=m&&M&&(c[k]+=M,c[k+1]+=M)}g+=M}),m=t.maps[h].map(m,-1)}let d=!1;for(let h=0;h<c.length;h+=3)if(c[h+1]<0){if(c[h+1]==-2){d=!0,c[h+1]=-1;continue}let m=t.map(n[h]+s),g=m-o;if(g<0||g>=r.content.size){d=!0;continue}let b=t.map(n[h+1]+s,-1),v=b-o,{index:C,offset:x}=r.content.findIndex(g),M=r.maybeChild(C);if(M&&x==g&&x+M.nodeSize==v){let k=c[h+2].mapInner(t,M,m+1,n[h]+s+1,a);k!=Xt?(c[h]=g,c[h+1]=v,c[h+2]=k):(c[h+1]=-2,d=!0)}else d=!0}if(d){let h=tS(c,n,e,t,o,s,a),m=jc(h,r,0,a);e=m.local;for(let g=0;g<c.length;g+=3)c[g+1]<0&&(c.splice(g,3),g-=3);for(let g=0,b=0;g<m.children.length;g+=3){let v=m.children[g];for(;b<c.length&&c[b]<v;)b+=3;c.splice(b,0,m.children[g],m.children[g+1],m.children[g+2])}}return new bt(e.sort(To),c)}function A5(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let o=n[r];t.push(new En(o.from+e,o.to+e,o.type))}return t}function tS(n,e,t,r,o,s,a){function c(d,h){for(let m=0;m<d.local.length;m++){let g=d.local[m].map(r,o,h);g?t.push(g):a.onRemove&&a.onRemove(d.local[m].spec)}for(let m=0;m<d.children.length;m+=3)c(d.children[m+2],d.children[m]+h+1)}for(let d=0;d<n.length;d+=3)n[d+1]==-1&&c(n[d+2],e[d]+s+1);return t}function R5(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,o=null;for(let s=0,a;s<n.length;s++)(a=n[s])&&a.from>t&&a.to<r&&((o||(o=[])).push(a),n[s]=null);return o}function O5(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function jc(n,e,t,r){let o=[],s=!1;e.forEach((c,d)=>{let h=R5(n,c,d+t);if(h){s=!0;let m=jc(h,c,t+d+1,r);m!=Xt&&o.push(d,d+c.nodeSize,m)}});let a=A5(s?O5(n):n,-t).sort(To);for(let c=0;c<a.length;c++)a[c].type.valid(e,a[c])||(r.onRemove&&r.onRemove(a[c].spec),a.splice(c--,1));return a.length||o.length?new bt(a,o):Xt}function To(n,e){return n.from-e.from||n.to-e.to}function pm(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let o=t+1;o<e.length;o++){let s=e[o];if(s.from==r.from){s.to!=r.to&&(e==n&&(e=n.slice()),e[o]=s.copy(s.from,r.to),e4(e,o+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,s.from),e4(e,o,r.copy(s.from,r.to)));break}}}return e}function e4(n,e,t){for(;e<n.length&&To(t,n[e])>0;)e++;n.splice(e,0,t)}function Op(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=Xt&&e.push(r)}),n.cursorWrapper&&e.push(bt.create(n.state.doc,[n.cursorWrapper.deco])),Ai.from(e)}const nS={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},rS=wn&&Li<=11;class iS{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class oS{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new iS,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);wn&&Li<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),rS&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,nS)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if($7(this.view)){if(this.suppressingSelectionUpdates)return Gr(this.view);if(wn&&Li<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&No(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let s=e.focusNode;s;s=_l(s))t.add(s);for(let s=e.anchorNode;s;s=_l(s))if(t.has(s)){r=s;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&$7(e)&&!this.ignoreSelectionChange(r),s=-1,a=-1,c=!1,d=[];if(e.editable)for(let m=0;m<t.length;m++){let g=this.registerMutation(t[m],d);g&&(s=s<0?g.from:Math.min(g.from,s),a=a<0?g.to:Math.max(g.to,a),g.typeOver&&(c=!0))}if(or&&d.length){let m=d.filter(g=>g.nodeName=="BR");if(m.length==2){let[g,b]=m;g.parentNode&&g.parentNode.parentNode==b.parentNode?b.remove():g.remove()}else{let{focusNode:g}=this.currentSelection;for(let b of m){let v=b.parentNode;v&&v.nodeName=="LI"&&(!g||aS(e,g)!=v)&&b.remove()}}}let h=null;s<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Nf(r)&&(h=lm(e))&&h.eq(Te.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Gr(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||o)&&(s>-1&&(e.docView.markDirty(s,a),lS(e)),this.handleDOMChange(s,a,c,d),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Gr(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let m=0;m<e.addedNodes.length;m++){let g=e.addedNodes[m];t.push(g),g.nodeType==3&&(this.lastChangedTextNode=g)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,s=e.nextSibling;if(wn&&Li<=11&&e.addedNodes.length)for(let m=0;m<e.addedNodes.length;m++){let{previousSibling:g,nextSibling:b}=e.addedNodes[m];(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(o=g),(!b||Array.prototype.indexOf.call(e.addedNodes,b)<0)&&(s=b)}let a=o&&o.parentNode==e.target?Pt(o)+1:0,c=r.localPosFromDOM(e.target,a,-1),d=s&&s.parentNode==e.target?Pt(s):e.target.childNodes.length,h=r.localPosFromDOM(e.target,d,1);return{from:c,to:h}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let t4=new WeakMap,n4=!1;function lS(n){if(!t4.has(n)&&(t4.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=or,n4)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),n4=!0}}function r4(n,e){let t=e.startContainer,r=e.startOffset,o=e.endContainer,s=e.endOffset,a=n.domAtPos(n.state.selection.anchor);return No(a.node,a.offset,o,s)&&([t,r,o,s]=[o,s,t,r]),{anchorNode:t,anchorOffset:r,focusNode:o,focusOffset:s}}function sS(n,e){if(e.getComposedRanges){let o=e.getComposedRanges(n.root)[0];if(o)return r4(n,o)}let t;function r(o){o.preventDefault(),o.stopImmediatePropagation(),t=o.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?r4(n,t):null}function aS(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function uS(n,e,t){let{node:r,fromOffset:o,toOffset:s,from:a,to:c}=n.docView.parseRange(e,t),d=n.domSelectionRange(),h,m=d.anchorNode;if(m&&n.dom.contains(m.nodeType==1?m:m.parentNode)&&(h=[{node:m,offset:d.anchorOffset}],Nf(d)||h.push({node:d.focusNode,offset:d.focusOffset})),en&&n.input.lastKeyCode===8)for(let M=s;M>o;M--){let k=r.childNodes[M-1],O=k.pmViewDesc;if(k.nodeName=="BR"&&!O){s=M;break}if(!O||O.size)break}let g=n.state.doc,b=n.someProp("domParser")||Di.fromSchema(n.state.schema),v=g.resolve(a),C=null,x=b.parse(r,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:o,to:s,preserveWhitespace:v.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:cS,context:v});if(h&&h[0].pos!=null){let M=h[0].pos,k=h[1]&&h[1].pos;k==null&&(k=M),C={anchor:M+a,head:k+a}}return{doc:x,sel:C,from:a,to:c}}function cS(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(cn&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||cn&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const fS=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function dS(n,e,t,r,o){let s=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let X=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,se=lm(n,X);if(se&&!n.state.selection.eq(se)){if(en&&Kr&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",me=>me(n,po(13,"Enter"))))return;let ne=n.state.tr.setSelection(se);X=="pointer"?ne.setMeta("pointer",!0):X=="key"&&ne.scrollIntoView(),s&&ne.setMeta("composition",s),n.dispatch(ne)}return}let a=n.state.doc.resolve(e),c=a.sharedDepth(t);e=a.before(c+1),t=n.state.doc.resolve(t).after(c+1);let d=n.state.selection,h=uS(n,e,t),m=n.state.doc,g=m.slice(h.from,h.to),b,v;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(b=n.state.selection.to,v="end"):(b=n.state.selection.from,v="start"),n.input.lastKeyCode=null;let C=mS(g.content,h.doc.content,h.from,b,v);if(C&&n.input.domChangeCount++,(ql&&n.input.lastIOSEnter>Date.now()-225||Kr)&&o.some(X=>X.nodeType==1&&!fS.test(X.nodeName))&&(!C||C.endA>=C.endB)&&n.someProp("handleKeyDown",X=>X(n,po(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!C)if(r&&d instanceof ve&&!d.empty&&d.$head.sameParent(d.$anchor)&&!n.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))C={start:d.from,endA:d.to,endB:d.to};else{if(h.sel){let X=i4(n,n.state.doc,h.sel);if(X&&!X.eq(n.state.selection)){let se=n.state.tr.setSelection(X);s&&se.setMeta("composition",s),n.dispatch(se)}}return}n.state.selection.from<n.state.selection.to&&C.start==C.endB&&n.state.selection instanceof ve&&(C.start>n.state.selection.from&&C.start<=n.state.selection.from+2&&n.state.selection.from>=h.from?C.start=n.state.selection.from:C.endA<n.state.selection.to&&C.endA>=n.state.selection.to-2&&n.state.selection.to<=h.to&&(C.endB+=n.state.selection.to-C.endA,C.endA=n.state.selection.to)),wn&&Li<=11&&C.endB==C.start+1&&C.endA==C.start&&C.start>h.from&&h.doc.textBetween(C.start-h.from-1,C.start-h.from+1)=="  "&&(C.start--,C.endA--,C.endB--);let x=h.doc.resolveNoCache(C.start-h.from),M=h.doc.resolveNoCache(C.endB-h.from),k=m.resolve(C.start),O=x.sameParent(M)&&x.parent.inlineContent&&k.end()>=C.endA,D;if((ql&&n.input.lastIOSEnter>Date.now()-225&&(!O||o.some(X=>X.nodeName=="DIV"||X.nodeName=="P"))||!O&&x.pos<h.doc.content.size&&(!x.sameParent(M)||!x.parent.inlineContent)&&!/\S/.test(h.doc.textBetween(x.pos,M.pos,"",""))&&(D=Te.findFrom(h.doc.resolve(x.pos+1),1,!0))&&D.head>x.pos)&&n.someProp("handleKeyDown",X=>X(n,po(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>C.start&&pS(m,C.start,C.endA,x,M)&&n.someProp("handleKeyDown",X=>X(n,po(8,"Backspace")))){Kr&&en&&n.domObserver.suppressSelectionUpdates();return}en&&C.endB==C.start&&(n.input.lastChromeDelete=Date.now()),Kr&&!O&&x.start()!=M.start()&&M.parentOffset==0&&x.depth==M.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==C.endA&&(C.endB-=2,M=h.doc.resolveNoCache(C.endB-h.from),setTimeout(()=>{n.someProp("handleKeyDown",function(X){return X(n,po(13,"Enter"))})},20));let P=C.start,I=C.endA,Q=X=>{let se=X||n.state.tr.replace(P,I,h.doc.slice(C.start-h.from,C.endB-h.from));if(h.sel){let ne=i4(n,se.doc,h.sel);ne&&!(en&&n.composing&&ne.empty&&(C.start!=C.endB||n.input.lastChromeDelete<Date.now()-100)&&(ne.head==P||ne.head==se.mapping.map(I)-1)||wn&&ne.empty&&ne.head==P)&&se.setSelection(ne)}return s&&se.setMeta("composition",s),se.scrollIntoView()},te;if(O){if(x.pos==M.pos){wn&&Li<=11&&x.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Gr(n),20));let X=Q(n.state.tr.delete(P,I)),se=m.resolve(C.start).marksAcross(m.resolve(C.endA));se&&X.ensureMarks(se),n.dispatch(X)}else if(C.endA==C.endB&&(te=hS(x.parent.content.cut(x.parentOffset,M.parentOffset),k.parent.content.cut(k.parentOffset,C.endA-k.start())))){let X=Q(n.state.tr);te.type=="add"?X.addMark(P,I,te.mark):X.removeMark(P,I,te.mark),n.dispatch(X)}else if(x.parent.child(x.index()).isText&&x.index()==M.index()-(M.textOffset?0:1)){let X=x.parent.textBetween(x.parentOffset,M.parentOffset),se=()=>Q(n.state.tr.insertText(X,P,I));n.someProp("handleTextInput",ne=>ne(n,P,I,X,se))||n.dispatch(se())}}else n.dispatch(Q())}function i4(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:sm(n,e.resolve(t.anchor),e.resolve(t.head))}function hS(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,o=t,s=r,a,c,d;for(let m=0;m<r.length;m++)o=r[m].removeFromSet(o);for(let m=0;m<t.length;m++)s=t[m].removeFromSet(s);if(o.length==1&&s.length==0)c=o[0],a="add",d=m=>m.mark(c.addToSet(m.marks));else if(o.length==0&&s.length==1)c=s[0],a="remove",d=m=>m.mark(c.removeFromSet(m.marks));else return null;let h=[];for(let m=0;m<e.childCount;m++)h.push(d(e.child(m)));if(ee.from(h).eq(n))return{mark:c,type:a}}function pS(n,e,t,r,o){if(t-e<=o.pos-r.pos||Np(r,!0,!1)<o.pos)return!1;let s=n.resolve(e);if(!r.parent.isTextblock){let c=s.nodeAfter;return c!=null&&t==e+c.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let a=n.resolve(Np(s,!0,!0));return!a.parent.isTextblock||a.pos>t||Np(a,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function Np(n,e,t){let r=n.depth,o=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,o++,e=!1;if(t){let s=n.node(r).maybeChild(n.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,o++}return o}function mS(n,e,t,r,o){let s=n.findDiffStart(e,t);if(s==null)return null;let{a,b:c}=n.findDiffEnd(e,t+n.size,t+e.size);if(o=="end"){let d=Math.max(0,s-Math.min(a,c));r-=a+d-s}if(a<s&&n.size<e.size){let d=r<=s&&r>=a?s-r:0;s-=d,s&&s<e.size&&o4(e.textBetween(s-1,s+1))&&(s+=d?1:-1),c=s+(c-a),a=s}else if(c<s){let d=r<=s&&r>=c?s-r:0;s-=d,s&&s<n.size&&o4(n.textBetween(s-1,s+1))&&(s+=d?1:-1),a=s+(a-c),c=s}return{start:s,endA:a,endB:c}}function o4(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}const gS=um,yS=Ea;class mm{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Hx,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(c4),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=a4(this),s4(this),this.nodeViews=u4(this),this.docView=U7(this.state.doc,l4(this),Op(this),this.dom,this),this.domObserver=new oS(this,(r,o,s,a)=>dS(this,r,o,s,a)),this.domObserver.start(),zx(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&M1(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(c4),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let o=this.state,s=!1,a=!1;e.storedMarks&&this.composing&&(w5(this),a=!0),this.state=e;let c=o.plugins!=e.plugins||this._props.plugins!=t.plugins;if(c||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let v=u4(this);vS(v,this.nodeViews)&&(this.nodeViews=v,s=!0)}(c||t.handleDOMEvents!=this._props.handleDOMEvents)&&M1(this),this.editable=a4(this),s4(this);let d=Op(this),h=l4(this),m=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",g=s||!this.docView.matchesNode(e.doc,h,d);(g||!e.selection.eq(o.selection))&&(a=!0);let b=m=="preserve"&&a&&this.dom.style.overflowAnchor==null&&Y8(this);if(a){this.domObserver.stop();let v=g&&(wn||en)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&bS(o.selection,e.selection);if(g){let C=en?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Gx(this)),(s||!this.docView.update(e.doc,h,d,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=U7(e.doc,h,d,this.dom,this)),C&&!this.trackWrites&&(v=!0)}v||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&vx(this))?Gr(this,v):(h5(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),m=="reset"?this.dom.scrollTop=0:m=="to selection"?this.scrollToSelection():b&&J8(b)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof ce){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&H7(this,t.getBoundingClientRect(),e)}else H7(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let s=r.from+(this.state.doc.content.size-t.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(o=s)}this.dragging=new T5(e.slice,e.move,o<0?void 0:ce.create(this.state.doc,o))}someProp(e,t){let r=this._props&&this._props[e],o;if(r!=null&&(o=t?t(r):r))return o;for(let a=0;a<this.directPlugins.length;a++){let c=this.directPlugins[a].props[e];if(c!=null&&(o=t?t(c):c))return o}let s=this.state.plugins;if(s)for(let a=0;a<s.length;a++){let c=s[a].props[e];if(c!=null&&(o=t?t(c):c))return o}}hasFocus(){if(wn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Q8(this.dom),Gr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return nx(this,e)}coordsAtPos(e,t=1){return o5(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let o=this.docView.posFromDOM(e,t,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,t){return sx(this,t||this.state,e)}pasteHTML(e,t){return Ma(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Ma(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return am(this,e)}destroy(){this.docView&&(Bx(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Op(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,I8())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Ix(this,e)}domSelectionRange(){let e=this.domSelection();return e?cn&&this.root.nodeType===11&&P8(this.dom.ownerDocument)==this.dom&&sS(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}mm.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function l4(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[En.node(0,n.state.doc.content.size,e)]}function s4(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:En.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function a4(n){return!n.someProp("editable",e=>e(n.state)===!1)}function bS(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function u4(n){let e=Object.create(null);function t(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function vS(n,e){let t=0,r=0;for(let o in n){if(n[o]!=e[o])return!0;t++}for(let o in e)r++;return t!=r}function c4(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}const CS=Object.freeze(Object.defineProperty({__proto__:null,Decoration:En,DecorationSet:bt,EditorView:mm,__endComposition:yS,__parseFromClipboard:gS},Symbol.toStringTag,{value:"Module"}));var ji={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ic={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},xS=typeof navigator<"u"&&/Mac/.test(navigator.platform),SS=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ft=0;Ft<10;Ft++)ji[48+Ft]=ji[96+Ft]=String(Ft);for(var Ft=1;Ft<=24;Ft++)ji[Ft+111]="F"+Ft;for(var Ft=65;Ft<=90;Ft++)ji[Ft]=String.fromCharCode(Ft+32),Ic[Ft]=String.fromCharCode(Ft);for(var Dp in ji)Ic.hasOwnProperty(Dp)||(Ic[Dp]=ji[Dp]);function ES(n){var e=xS&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||SS&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Ic:ji)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const wS=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),MS=typeof navigator<"u"&&/Win/.test(navigator.platform);function TS(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,o,s,a;for(let c=0;c<e.length-1;c++){let d=e[c];if(/^(cmd|meta|m)$/i.test(d))a=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))o=!0;else if(/^s(hift)?$/i.test(d))s=!0;else if(/^mod$/i.test(d))wS?a=!0:o=!0;else throw new Error("Unrecognized modifier name: "+d)}return r&&(t="Alt-"+t),o&&(t="Ctrl-"+t),a&&(t="Meta-"+t),s&&(t="Shift-"+t),t}function kS(n){let e=Object.create(null);for(let t in n)e[TS(t)]=n[t];return e}function Lp(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function AS(n){return new pt({props:{handleKeyDown:N5(n)}})}function N5(n){let e=kS(n);return function(t,r){let o=ES(r),s,a=e[Lp(o,r)];if(a&&a(t.state,t.dispatch,t))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let c=e[Lp(o,r,!1)];if(c&&c(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(MS&&r.ctrlKey&&r.altKey)&&(s=ji[r.keyCode])&&s!=o){let c=e[Lp(s,r)];if(c&&c(t.state,t.dispatch,t))return!0}}return!1}}const gm=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function D5(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const L5=(n,e,t)=>{let r=D5(n,t);if(!r)return!1;let o=ym(r);if(!o){let a=r.blockRange(),c=a&&Gl(a);return c==null?!1:(e&&e(n.tr.lift(a,c).scrollIntoView()),!0)}let s=o.nodeBefore;if(q5(n,o,e,-1))return!0;if(r.parent.content.size==0&&(Pl(s,"end")||ce.isSelectable(s)))for(let a=r.depth;;a--){let c=Rf(n.doc,r.before(a),r.after(a),le.empty);if(c&&c.slice.size<c.to-c.from){if(e){let d=n.tr.step(c);d.setSelection(Pl(s,"end")?Te.findFrom(d.doc.resolve(d.mapping.map(o.pos,-1)),-1):ce.create(d.doc,o.pos-s.nodeSize)),e(d.scrollIntoView())}return!0}if(a==1||r.node(a-1).childCount>1)break}return s.isAtom&&o.depth==r.depth-1?(e&&e(n.tr.delete(o.pos-s.nodeSize,o.pos).scrollIntoView()),!0):!1},RS=(n,e,t)=>{let r=D5(n,t);if(!r)return!1;let o=ym(r);return o?H5(n,o,e):!1},OS=(n,e,t)=>{let r=B5(n,t);if(!r)return!1;let o=bm(r);return o?H5(n,o,e):!1};function H5(n,e,t){let r=e.nodeBefore,o=r,s=e.pos-1;for(;!o.isTextblock;s--){if(o.type.spec.isolating)return!1;let m=o.lastChild;if(!m)return!1;o=m}let a=e.nodeAfter,c=a,d=e.pos+1;for(;!c.isTextblock;d++){if(c.type.spec.isolating)return!1;let m=c.firstChild;if(!m)return!1;c=m}let h=Rf(n.doc,s,d,le.empty);if(!h||h.from!=s||h instanceof ir&&h.slice.size>=d-s)return!1;if(t){let m=n.tr.step(h);m.setSelection(ve.create(m.doc,s)),t(m.scrollIntoView())}return!0}function Pl(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const z5=(n,e,t)=>{let{$head:r,empty:o}=n.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;s=ym(r)}let a=s&&s.nodeBefore;return!a||!ce.isSelectable(a)?!1:(e&&e(n.tr.setSelection(ce.create(n.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function ym(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function B5(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const j5=(n,e,t)=>{let r=B5(n,t);if(!r)return!1;let o=bm(r);if(!o)return!1;let s=o.nodeAfter;if(q5(n,o,e,1))return!0;if(r.parent.content.size==0&&(Pl(s,"start")||ce.isSelectable(s))){let a=Rf(n.doc,r.before(),r.after(),le.empty);if(a&&a.slice.size<a.to-a.from){if(e){let c=n.tr.step(a);c.setSelection(Pl(s,"start")?Te.findFrom(c.doc.resolve(c.mapping.map(o.pos)),1):ce.create(c.doc,c.mapping.map(o.pos))),e(c.scrollIntoView())}return!0}}return s.isAtom&&o.depth==r.depth-1?(e&&e(n.tr.delete(o.pos,o.pos+s.nodeSize).scrollIntoView()),!0):!1},I5=(n,e,t)=>{let{$head:r,empty:o}=n.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;s=bm(r)}let a=s&&s.nodeAfter;return!a||!ce.isSelectable(a)?!1:(e&&e(n.tr.setSelection(ce.create(n.doc,s.pos)).scrollIntoView()),!0)};function bm(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const NS=(n,e)=>{let t=n.selection,r=t instanceof ce,o;if(r){if(t.node.isTextblock||!Ui(n.doc,t.from))return!1;o=t.from}else if(o=Af(n.doc,t.from,-1),o==null)return!1;if(e){let s=n.tr.join(o);r&&s.setSelection(ce.create(s.doc,o-n.doc.resolve(o).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},DS=(n,e)=>{let t=n.selection,r;if(t instanceof ce){if(t.node.isTextblock||!Ui(n.doc,t.to))return!1;r=t.to}else if(r=Af(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},LS=(n,e)=>{let{$from:t,$to:r}=n.selection,o=t.blockRange(r),s=o&&Gl(o);return s==null?!1:(e&&e(n.tr.lift(o,s).scrollIntoView()),!0)},V5=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function vm(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const HS=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let o=t.node(-1),s=t.indexAfter(-1),a=vm(o.contentMatchAt(s));if(!a||!o.canReplaceWith(s,s,a))return!1;if(e){let c=t.after(),d=n.tr.replaceWith(c,c,a.createAndFill());d.setSelection(Te.near(d.doc.resolve(c),1)),e(d.scrollIntoView())}return!0},U5=(n,e)=>{let t=n.selection,{$from:r,$to:o}=t;if(t instanceof Bn||r.parent.inlineContent||o.parent.inlineContent)return!1;let s=vm(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let a=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,c=n.tr.insert(a,s.createAndFill());c.setSelection(ve.create(c.doc,a+1)),e(c.scrollIntoView())}return!0},_5=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let s=t.before();if(Zr(n.doc,s))return e&&e(n.tr.split(s).scrollIntoView()),!0}let r=t.blockRange(),o=r&&Gl(r);return o==null?!1:(e&&e(n.tr.lift(r,o).scrollIntoView()),!0)};function zS(n){return(e,t)=>{let{$from:r,$to:o}=e.selection;if(e.selection instanceof ce&&e.selection.node.isBlock)return!r.parentOffset||!Zr(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],a,c,d=!1,h=!1;for(let v=r.depth;;v--)if(r.node(v).isBlock){d=r.end(v)==r.pos+(r.depth-v),h=r.start(v)==r.pos-(r.depth-v),c=vm(r.node(v-1).contentMatchAt(r.indexAfter(v-1))),s.unshift(d&&c?{type:c}:null),a=v;break}else{if(v==1)return!1;s.unshift(null)}let m=e.tr;(e.selection instanceof ve||e.selection instanceof Bn)&&m.deleteSelection();let g=m.mapping.map(r.pos),b=Zr(m.doc,g,s.length,s);if(b||(s[0]=c?{type:c}:null,b=Zr(m.doc,g,s.length,s)),!b)return!1;if(m.split(g,s.length,s),!d&&h&&r.node(a).type!=c){let v=m.mapping.map(r.before(a)),C=m.doc.resolve(v);c&&r.node(a-1).canReplaceWith(C.index(),C.index()+1,c)&&m.setNodeMarkup(m.mapping.map(r.before(a)),c)}return t&&t(m.scrollIntoView()),!0}}const BS=zS(),jS=(n,e)=>{let{$from:t,to:r}=n.selection,o,s=t.sharedDepth(r);return s==0?!1:(o=t.before(s),e&&e(n.tr.setSelection(ce.create(n.doc,o))),!0)};function IS(n,e,t){let r=e.nodeBefore,o=e.nodeAfter,s=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(o.isTextblock||Ui(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function q5(n,e,t,r){let o=e.nodeBefore,s=e.nodeAfter,a,c,d=o.type.spec.isolating||s.type.spec.isolating;if(!d&&IS(n,e,t))return!0;let h=!d&&e.parent.canReplace(e.index(),e.index()+1);if(h&&(a=(c=o.contentMatchAt(o.childCount)).findWrapping(s.type))&&c.matchType(a[0]||s.type).validEnd){if(t){let v=e.pos+s.nodeSize,C=ee.empty;for(let k=a.length-1;k>=0;k--)C=ee.from(a[k].create(null,C));C=ee.from(o.copy(C));let x=n.tr.step(new Tn(e.pos-1,v,e.pos,v,new le(C,1,0),a.length,!0)),M=x.doc.resolve(v+2*a.length);M.nodeAfter&&M.nodeAfter.type==o.type&&Ui(x.doc,M.pos)&&x.join(M.pos),t(x.scrollIntoView())}return!0}let m=s.type.spec.isolating||r>0&&d?null:Te.findFrom(e,1),g=m&&m.$from.blockRange(m.$to),b=g&&Gl(g);if(b!=null&&b>=e.depth)return t&&t(n.tr.lift(g,b).scrollIntoView()),!0;if(h&&Pl(s,"start",!0)&&Pl(o,"end")){let v=o,C=[];for(;C.push(v),!v.isTextblock;)v=v.lastChild;let x=s,M=1;for(;!x.isTextblock;x=x.firstChild)M++;if(v.canReplace(v.childCount,v.childCount,x.content)){if(t){let k=ee.empty;for(let D=C.length-1;D>=0;D--)k=ee.from(C[D].copy(k));let O=n.tr.step(new Tn(e.pos-C.length,e.pos+s.nodeSize,e.pos+M,e.pos+s.nodeSize-M,new le(k,C.length,0),0,!0));t(O.scrollIntoView())}return!0}}return!1}function P5(n){return function(e,t){let r=e.selection,o=n<0?r.$from:r.$to,s=o.depth;for(;o.node(s).isInline;){if(!s)return!1;s--}return o.node(s).isTextblock?(t&&t(e.tr.setSelection(ve.create(e.doc,n<0?o.start(s):o.end(s)))),!0):!1}}const VS=P5(-1),US=P5(1);function _S(n,e=null){return function(t,r){let{$from:o,$to:s}=t.selection,a=o.blockRange(s),c=a&&rm(a,n,e);return c?(r&&r(t.tr.wrap(a,c).scrollIntoView()),!0):!1}}function f4(n,e=null){return function(t,r){let o=!1;for(let s=0;s<t.selection.ranges.length&&!o;s++){let{$from:{pos:a},$to:{pos:c}}=t.selection.ranges[s];t.doc.nodesBetween(a,c,(d,h)=>{if(o)return!1;if(!(!d.isTextblock||d.hasMarkup(n,e)))if(d.type==n)o=!0;else{let m=t.doc.resolve(h),g=m.index();o=m.parent.canReplaceWith(g,g+1,n)}})}if(!o)return!1;if(r){let s=t.tr;for(let a=0;a<t.selection.ranges.length;a++){let{$from:{pos:c},$to:{pos:d}}=t.selection.ranges[a];s.setBlockType(c,d,n,e)}r(s.scrollIntoView())}return!0}}function Cm(...n){return function(e,t,r){for(let o=0;o<n.length;o++)if(n[o](e,t,r))return!0;return!1}}Cm(gm,L5,z5);Cm(gm,j5,I5);Cm(V5,U5,_5,BS);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function qS(n,e=null){return function(t,r){let{$from:o,$to:s}=t.selection,a=o.blockRange(s);if(!a)return!1;let c=r?t.tr:null;return PS(c,a,n,e)?(r&&r(c.scrollIntoView()),!0):!1}}function PS(n,e,t,r=null){let o=!1,s=e,a=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let d=a.resolve(e.start-2);s=new Nc(d,d,e.depth),e.endIndex<e.parent.childCount&&(e=new Nc(e.$from,a.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let c=rm(s,t,r,e);return c?(n&&FS(n,e,c,o,t),!0):!1}function FS(n,e,t,r,o){let s=ee.empty;for(let m=t.length-1;m>=0;m--)s=ee.from(t[m].type.create(t[m].attrs,s));n.step(new Tn(e.start-(r?2:0),e.end,e.start,e.end,new le(s,0,0),t.length,!0));let a=0;for(let m=0;m<t.length;m++)t[m].type==o&&(a=m+1);let c=t.length-a,d=e.start+t.length-(r?2:0),h=e.parent;for(let m=e.startIndex,g=e.endIndex,b=!0;m<g;m++,b=!1)!b&&Zr(n.doc,d,c)&&(n.split(d,c),d+=2*c),d+=h.child(m).nodeSize;return n}function KS(n){return function(e,t){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,a=>a.childCount>0&&a.firstChild.type==n);return s?t?r.node(s.depth-1).type==n?$S(e,t,n,s):ZS(e,t,s):!0:!1}}function $S(n,e,t,r){let o=n.tr,s=r.end,a=r.$to.end(r.depth);s<a&&(o.step(new Tn(s-1,a,s,a,new le(ee.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new Nc(o.doc.resolve(r.$from.pos),o.doc.resolve(a),r.depth));const c=Gl(r);if(c==null)return!1;o.lift(r,c);let d=o.doc.resolve(o.mapping.map(s,-1)-1);return Ui(o.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&o.join(d.pos),e(o.scrollIntoView()),!0}function ZS(n,e,t){let r=n.tr,o=t.parent;for(let v=t.end,C=t.endIndex-1,x=t.startIndex;C>x;C--)v-=o.child(C).nodeSize,r.delete(v-1,v+1);let s=r.doc.resolve(t.start),a=s.nodeAfter;if(r.mapping.map(t.end)!=t.start+s.nodeAfter.nodeSize)return!1;let c=t.startIndex==0,d=t.endIndex==o.childCount,h=s.node(-1),m=s.index(-1);if(!h.canReplace(m+(c?0:1),m+1,a.content.append(d?ee.empty:ee.from(o))))return!1;let g=s.pos,b=g+a.nodeSize;return r.step(new Tn(g-(c?1:0),b+(d?1:0),g+1,b-1,new le((c?ee.empty:ee.from(o.copy(ee.empty))).append(d?ee.empty:ee.from(o.copy(ee.empty))),c?0:1,d?0:1),c?0:1)),e(r.scrollIntoView()),!0}function GS(n){return function(e,t){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,h=>h.childCount>0&&h.firstChild.type==n);if(!s)return!1;let a=s.startIndex;if(a==0)return!1;let c=s.parent,d=c.child(a-1);if(d.type!=n)return!1;if(t){let h=d.lastChild&&d.lastChild.type==c.type,m=ee.from(h?n.create():null),g=new le(ee.from(n.create(null,ee.from(c.type.create(null,m)))),h?3:1,0),b=s.start,v=s.end;t(e.tr.step(new Tn(b-(h?3:1),v,b,v,g,1,!0)).scrollIntoView())}return!0}}function Hf(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:o}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return o},get tr(){return r=t.selection,o=t.doc,s=t.storedMarks,t}}}class zf{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:o}=t,{tr:s}=r,a=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([c,d])=>[c,(...m)=>{const g=d(...m)(a);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(s),g}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:o,state:s}=this,{view:a}=o,c=[],d=!!e,h=e||s.tr,m=()=>(!d&&t&&!h.getMeta("preventDispatch")&&!this.hasCustomState&&a.dispatch(h),c.every(b=>b===!0)),g={...Object.fromEntries(Object.entries(r).map(([b,v])=>[b,(...x)=>{const M=this.buildProps(h,t),k=v(...x)(M);return c.push(k),g}])),run:m};return g}createCan(e){const{rawCommands:t,state:r}=this,o=!1,s=e||r.tr,a=this.buildProps(s,o);return{...Object.fromEntries(Object.entries(t).map(([d,h])=>[d,(...m)=>h(...m)({...a,dispatch:void 0})])),chain:()=>this.createChain(s,o)}}buildProps(e,t=!0){const{rawCommands:r,editor:o,state:s}=this,{view:a}=o,c={tr:e,editor:o,view:a,state:Hf({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([d,h])=>[d,(...m)=>h(...m)(c)]))}};return c}}class YS{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(o=>o.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(o=>o!==t):delete this.callbacks[e]),this}once(e,t){const r=(...o)=>{this.off(e,r),t.apply(this,o)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function ue(n,e,t){return n.config[e]===void 0&&n.parent?ue(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?ue(n.parent,e,t):null}):n.config[e]}function Bf(n){const e=n.filter(o=>o.type==="extension"),t=n.filter(o=>o.type==="node"),r=n.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function F5(n){const e=[],{nodeExtensions:t,markExtensions:r}=Bf(n),o=[...t,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(a=>{const c={name:a.name,options:a.options,storage:a.storage,extensions:o},d=ue(a,"addGlobalAttributes",c);if(!d)return;d().forEach(m=>{m.types.forEach(g=>{Object.entries(m.attributes).forEach(([b,v])=>{e.push({type:g,name:b,attribute:{...s,...v}})})})})}),o.forEach(a=>{const c={name:a.name,options:a.options,storage:a.storage},d=ue(a,"addAttributes",c);if(!d)return;const h=d();Object.entries(h).forEach(([m,g])=>{const b={...s,...g};typeof b?.default=="function"&&(b.default=b.default()),b?.isRequired&&b?.default===void 0&&delete b.default,e.push({type:a.name,name:m,attribute:b})})}),e}function At(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function rt(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([o,s])=>{if(!r[o]){r[o]=s;return}if(o==="class"){const c=s?String(s).split(" "):[],d=r[o]?r[o].split(" "):[],h=c.filter(m=>!d.includes(m));r[o]=[...d,...h].join(" ")}else if(o==="style"){const c=s?s.split(";").map(m=>m.trim()).filter(Boolean):[],d=r[o]?r[o].split(";").map(m=>m.trim()).filter(Boolean):[],h=new Map;d.forEach(m=>{const[g,b]=m.split(":").map(v=>v.trim());h.set(g,b)}),c.forEach(m=>{const[g,b]=m.split(":").map(v=>v.trim());h.set(g,b)}),r[o]=Array.from(h.entries()).map(([m,g])=>`${m}: ${g}`).join("; ")}else r[o]=s}),r},{})}function Vc(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>rt(t,r),{})}function K5(n){return typeof n=="function"}function Re(n,e=void 0,...t){return K5(n)?e?n.bind(e)(...t):n(...t):n}function JS(n={}){return Object.keys(n).length===0&&n.constructor===Object}function QS(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function d4(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const o=e.reduce((s,a)=>{const c=a.attribute.parseHTML?a.attribute.parseHTML(t):QS(t.getAttribute(a.name));return c==null?s:{...s,[a.name]:c}},{});return{...r,...o}}}}function h4(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&JS(t)?!1:t!=null))}function XS(n,e){var t;const r=F5(n),{nodeExtensions:o,markExtensions:s}=Bf(n),a=(t=o.find(h=>ue(h,"topNode")))===null||t===void 0?void 0:t.name,c=Object.fromEntries(o.map(h=>{const m=r.filter(k=>k.type===h.name),g={name:h.name,options:h.options,storage:h.storage,editor:e},b=n.reduce((k,O)=>{const D=ue(O,"extendNodeSchema",g);return{...k,...D?D(h):{}}},{}),v=h4({...b,content:Re(ue(h,"content",g)),marks:Re(ue(h,"marks",g)),group:Re(ue(h,"group",g)),inline:Re(ue(h,"inline",g)),atom:Re(ue(h,"atom",g)),selectable:Re(ue(h,"selectable",g)),draggable:Re(ue(h,"draggable",g)),code:Re(ue(h,"code",g)),whitespace:Re(ue(h,"whitespace",g)),linebreakReplacement:Re(ue(h,"linebreakReplacement",g)),defining:Re(ue(h,"defining",g)),isolating:Re(ue(h,"isolating",g)),attrs:Object.fromEntries(m.map(k=>{var O;return[k.name,{default:(O=k?.attribute)===null||O===void 0?void 0:O.default}]}))}),C=Re(ue(h,"parseHTML",g));C&&(v.parseDOM=C.map(k=>d4(k,m)));const x=ue(h,"renderHTML",g);x&&(v.toDOM=k=>x({node:k,HTMLAttributes:Vc(k,m)}));const M=ue(h,"renderText",g);return M&&(v.toText=M),[h.name,v]})),d=Object.fromEntries(s.map(h=>{const m=r.filter(M=>M.type===h.name),g={name:h.name,options:h.options,storage:h.storage,editor:e},b=n.reduce((M,k)=>{const O=ue(k,"extendMarkSchema",g);return{...M,...O?O(h):{}}},{}),v=h4({...b,inclusive:Re(ue(h,"inclusive",g)),excludes:Re(ue(h,"excludes",g)),group:Re(ue(h,"group",g)),spanning:Re(ue(h,"spanning",g)),code:Re(ue(h,"code",g)),attrs:Object.fromEntries(m.map(M=>{var k;return[M.name,{default:(k=M?.attribute)===null||k===void 0?void 0:k.default}]}))}),C=Re(ue(h,"parseHTML",g));C&&(v.parseDOM=C.map(M=>d4(M,m)));const x=ue(h,"renderHTML",g);return x&&(v.toDOM=M=>x({mark:M,HTMLAttributes:Vc(M,m)})),[h.name,v]}));return new D3({topNode:a,nodes:c,marks:d})}function Hp(n,e){return e.nodes[n]||e.marks[n]||null}function p4(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function xm(n,e){const t=Bo.fromSchema(e).serializeFragment(n),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(t),o.innerHTML}const WS=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(o,s,a,c)=>{var d,h;const m=((h=(d=o.type.spec).toText)===null||h===void 0?void 0:h.call(d,{node:o,pos:s,parent:a,index:c}))||o.textContent||"%leaf%";t+=o.isAtom&&!o.isText?m:m.slice(0,Math.max(0,r-s))}),t};function Sm(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class Ia{constructor(e){this.find=e.find,this.handler=e.handler}}const eE=(n,e)=>{if(Sm(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function oc(n){var e;const{editor:t,from:r,to:o,text:s,rules:a,plugin:c}=n,{view:d}=t;if(d.composing)return!1;const h=d.state.doc.resolve(r);if(h.parent.type.spec.code||!((e=h.nodeBefore||h.nodeAfter)===null||e===void 0)&&e.marks.find(b=>b.type.spec.code))return!1;let m=!1;const g=WS(h)+s;return a.forEach(b=>{if(m)return;const v=eE(g,b.find);if(!v)return;const C=d.state.tr,x=Hf({state:d.state,transaction:C}),M={from:r-(v[0].length-s.length),to:o},{commands:k,chain:O,can:D}=new zf({editor:t,state:x});b.handler({state:x,range:M,match:v,commands:k,chain:O,can:D})===null||!C.steps.length||(C.setMeta(c,{transform:C,from:r,to:o,text:s}),d.dispatch(C),m=!0)}),m}function tE(n){const{editor:e,rules:t}=n,r=new pt({state:{init(){return null},apply(o,s,a){const c=o.getMeta(r);if(c)return c;const d=o.getMeta("applyInputRules");return!!d&&setTimeout(()=>{let{text:m}=d;typeof m=="string"?m=m:m=xm(ee.from(m),a.schema);const{from:g}=d,b=g+m.length;oc({editor:e,from:g,to:b,text:m,rules:t,plugin:r})}),o.selectionSet||o.docChanged?null:s}},props:{handleTextInput(o,s,a,c){return oc({editor:e,from:s,to:a,text:c,rules:t,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:s}=o.state.selection;s&&oc({editor:e,from:s.pos,to:s.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(o,s){if(s.key!=="Enter")return!1;const{$cursor:a}=o.state.selection;return a?oc({editor:e,from:a.pos,to:a.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function nE(n){return Object.prototype.toString.call(n).slice(8,-1)}function lc(n){return nE(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function jf(n,e){const t={...n};return lc(n)&&lc(e)&&Object.keys(e).forEach(r=>{lc(e[r])&&lc(n[r])?t[r]=jf(n[r],e[r]):t[r]=e[r]}),t}class jn{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Re(ue(this,"addOptions",{name:this.name}))),this.storage=Re(ue(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new jn(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>jf(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new jn(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Re(ue(t,"addOptions",{name:t.name})),t.storage=Re(ue(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const a=o.marks();if(!!!a.find(h=>h?.type.name===t.name))return!1;const d=a.find(h=>h?.type.name===t.name);return d&&r.removeStoredMark(d),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}}function rE(n){return typeof n=="number"}class iE{constructor(e){this.find=e.find,this.handler=e.handler}}const oE=(n,e,t)=>{if(Sm(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(o=>{const s=[o.text];return s.index=o.index,s.input=n,s.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(o.replaceWith)),s}):[]};function lE(n){const{editor:e,state:t,from:r,to:o,rule:s,pasteEvent:a,dropEvent:c}=n,{commands:d,chain:h,can:m}=new zf({editor:e,state:t}),g=[];return t.doc.nodesBetween(r,o,(v,C)=>{if(!v.isTextblock||v.type.spec.code)return;const x=Math.max(r,C),M=Math.min(o,C+v.content.size),k=v.textBetween(x-C,M-C,void 0,"￼");oE(k,s.find,a).forEach(D=>{if(D.index===void 0)return;const P=x+D.index+1,I=P+D[0].length,Q={from:t.tr.mapping.map(P),to:t.tr.mapping.map(I)},te=s.handler({state:t,range:Q,match:D,commands:d,chain:h,can:m,pasteEvent:a,dropEvent:c});g.push(te)})}),g.every(v=>v!==null)}let sc=null;const sE=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function aE(n){const{editor:e,rules:t}=n;let r=null,o=!1,s=!1,a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,c;try{c=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{c=null}const d=({state:m,from:g,to:b,rule:v,pasteEvt:C})=>{const x=m.tr,M=Hf({state:m,transaction:x});if(!(!lE({editor:e,state:M,from:Math.max(g-1,0),to:b.b-1,rule:v,pasteEvent:C,dropEvent:c})||!x.steps.length)){try{c=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{c=null}return a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,x}};return t.map(m=>new pt({view(g){const b=C=>{var x;r=!((x=g.dom.parentElement)===null||x===void 0)&&x.contains(C.target)?g.dom.parentElement:null,r&&(sc=e)},v=()=>{sc&&(sc=null)};return window.addEventListener("dragstart",b),window.addEventListener("dragend",v),{destroy(){window.removeEventListener("dragstart",b),window.removeEventListener("dragend",v)}}},props:{handleDOMEvents:{drop:(g,b)=>{if(s=r===g.dom.parentElement,c=b,!s){const v=sc;v&&setTimeout(()=>{const C=v.state.selection;C&&v.commands.deleteRange({from:C.from,to:C.to})},10)}return!1},paste:(g,b)=>{var v;const C=(v=b.clipboardData)===null||v===void 0?void 0:v.getData("text/html");return a=b,o=!!C?.includes("data-pm-slice"),!1}}},appendTransaction:(g,b,v)=>{const C=g[0],x=C.getMeta("uiEvent")==="paste"&&!o,M=C.getMeta("uiEvent")==="drop"&&!s,k=C.getMeta("applyPasteRules"),O=!!k;if(!x&&!M&&!O)return;if(O){let{text:I}=k;typeof I=="string"?I=I:I=xm(ee.from(I),v.schema);const{from:Q}=k,te=Q+I.length,X=sE(I);return d({rule:m,state:v,from:Q,to:{b:te},pasteEvt:X})}const D=b.doc.content.findDiffStart(v.doc.content),P=b.doc.content.findDiffEnd(v.doc.content);if(!(!rE(D)||!P||D===P.b))return d({rule:m,state:v,from:D,to:P,pasteEvt:a})}}))}function uE(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}class Hl{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Hl.resolve(e),this.schema=XS(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Hl.sort(Hl.flatten(e)),r=uE(t.map(o=>o.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},o=ue(t,"addExtensions",r);return o?[t,...this.flatten(o())]:t}).flat(10)}static sort(e){return e.sort((r,o)=>{const s=ue(r,"priority")||100,a=ue(o,"priority")||100;return s>a?-1:s<a?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Hp(t.name,this.schema)},o=ue(t,"addCommands",r);return o?{...e,...o()}:e},{})}get plugins(){const{editor:e}=this,t=Hl.sort([...this.extensions].reverse()),r=[],o=[],s=t.map(a=>{const c={name:a.name,options:a.options,storage:a.storage,editor:e,type:Hp(a.name,this.schema)},d=[],h=ue(a,"addKeyboardShortcuts",c);let m={};if(a.type==="mark"&&ue(a,"exitable",c)&&(m.ArrowRight=()=>jn.handleExit({editor:e,mark:a})),h){const x=Object.fromEntries(Object.entries(h()).map(([M,k])=>[M,()=>k({editor:e})]));m={...m,...x}}const g=AS(m);d.push(g);const b=ue(a,"addInputRules",c);p4(a,e.options.enableInputRules)&&b&&r.push(...b());const v=ue(a,"addPasteRules",c);p4(a,e.options.enablePasteRules)&&v&&o.push(...v());const C=ue(a,"addProseMirrorPlugins",c);if(C){const x=C();d.push(...x)}return d}).flat();return[tE({editor:e,rules:r}),...aE({editor:e,rules:o}),...s]}get attributes(){return F5(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Bf(this.extensions);return Object.fromEntries(t.filter(r=>!!ue(r,"addNodeView")).map(r=>{const o=this.attributes.filter(d=>d.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:At(r.name,this.schema)},a=ue(r,"addNodeView",s);if(!a)return[];const c=(d,h,m,g,b)=>{const v=Vc(d,o);return a()({node:d,view:h,getPos:m,decorations:g,innerDecorations:b,editor:e,extension:r,HTMLAttributes:v})};return[r.name,c]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Hp(e.name,this.schema)};e.type==="mark"&&(!((t=Re(ue(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const o=ue(e,"onBeforeCreate",r),s=ue(e,"onCreate",r),a=ue(e,"onUpdate",r),c=ue(e,"onSelectionUpdate",r),d=ue(e,"onTransaction",r),h=ue(e,"onFocus",r),m=ue(e,"onBlur",r),g=ue(e,"onDestroy",r);o&&this.editor.on("beforeCreate",o),s&&this.editor.on("create",s),a&&this.editor.on("update",a),c&&this.editor.on("selectionUpdate",c),d&&this.editor.on("transaction",d),h&&this.editor.on("focus",h),m&&this.editor.on("blur",m),g&&this.editor.on("destroy",g)})}}class xt{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Re(ue(this,"addOptions",{name:this.name}))),this.storage=Re(ue(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new xt(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>jf(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new xt({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Re(ue(t,"addOptions",{name:t.name})),t.storage=Re(ue(t,"addStorage",{name:t.name,options:t.options})),t}}function $5(n,e,t){const{from:r,to:o}=e,{blockSeparator:s=`

`,textSerializers:a={}}=t||{};let c="";return n.nodesBetween(r,o,(d,h,m,g)=>{var b;d.isBlock&&h>r&&(c+=s);const v=a?.[d.type.name];if(v)return m&&(c+=v({node:d,pos:h,parent:m,index:g,range:e})),!1;d.isText&&(c+=(b=d?.text)===null||b===void 0?void 0:b.slice(Math.max(r,h)-h,o-h))}),c}function Z5(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const cE=xt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new pt({key:new $t("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:o}=e,{ranges:s}=o,a=Math.min(...s.map(m=>m.$from.pos)),c=Math.max(...s.map(m=>m.$to.pos)),d=Z5(t);return $5(r,{from:a,to:c},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),fE=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window?.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),dE=(n=!1)=>({commands:e})=>e.setContent("",n),hE=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:o}=r;return t&&o.forEach(({$from:s,$to:a})=>{n.doc.nodesBetween(s.pos,a.pos,(c,d)=>{if(c.type.isText)return;const{doc:h,mapping:m}=e,g=h.resolve(m.map(d)),b=h.resolve(m.map(d+c.nodeSize)),v=g.blockRange(b);if(!v)return;const C=Gl(v);if(c.type.isTextblock){const{defaultType:x}=g.parent.contentMatchAt(g.index());e.setNodeMarkup(v.start,x)}(C||C===0)&&e.lift(v,C)})}),!0},pE=n=>e=>n(e),mE=()=>({state:n,dispatch:e})=>U5(n,e),gE=(n,e)=>({editor:t,tr:r})=>{const{state:o}=t,s=o.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const a=r.mapping.map(e);return r.insert(a,s.content),r.setSelection(new ve(r.doc.resolve(a-1))),!0},yE=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const o=n.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===r.type){if(e){const c=o.before(s),d=o.after(s);n.delete(c,d).scrollIntoView()}return!0}return!1},bE=n=>({tr:e,state:t,dispatch:r})=>{const o=At(n,t.schema),s=e.selection.$anchor;for(let a=s.depth;a>0;a-=1)if(s.node(a).type===o){if(r){const d=s.before(a),h=s.after(a);e.delete(d,h).scrollIntoView()}return!0}return!1},vE=n=>({tr:e,dispatch:t})=>{const{from:r,to:o}=n;return t&&e.delete(r,o),!0},CE=()=>({state:n,dispatch:e})=>gm(n,e),xE=()=>({commands:n})=>n.keyboardShortcut("Enter"),SE=()=>({state:n,dispatch:e})=>HS(n,e);function Uc(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>t.strict?e[o]===n[o]:Sm(e[o])?e[o].test(n[o]):e[o]===n[o]):!0}function G5(n,e,t={}){return n.find(r=>r.type===e&&Uc(Object.fromEntries(Object.keys(t).map(o=>[o,r.attrs[o]])),t))}function m4(n,e,t={}){return!!G5(n,e,t)}function If(n,e,t){var r;if(!n||!e)return;let o=n.parent.childAfter(n.parentOffset);if((!o.node||!o.node.marks.some(m=>m.type===e))&&(o=n.parent.childBefore(n.parentOffset)),!o.node||!o.node.marks.some(m=>m.type===e)||(t=t||((r=o.node.marks[0])===null||r===void 0?void 0:r.attrs),!G5([...o.node.marks],e,t)))return;let a=o.index,c=n.start()+o.offset,d=a+1,h=c+o.node.nodeSize;for(;a>0&&m4([...n.parent.child(a-1).marks],e,t);)a-=1,c-=n.parent.child(a).nodeSize;for(;d<n.parent.childCount&&m4([...n.parent.child(d).marks],e,t);)h+=n.parent.child(d).nodeSize,d+=1;return{from:c,to:h}}function qi(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const EE=(n,e={})=>({tr:t,state:r,dispatch:o})=>{const s=qi(n,r.schema),{doc:a,selection:c}=t,{$from:d,from:h,to:m}=c;if(o){const g=If(d,s,e);if(g&&g.from<=h&&g.to>=m){const b=ve.create(a,g.from,g.to);t.setSelection(b)}}return!0},wE=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function Y5(n){return n instanceof ve}function bo(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function J5(n,e=null){if(!e)return null;const t=Te.atStart(n),r=Te.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const o=t.from,s=r.to;return e==="all"?ve.create(n,bo(0,o,s),bo(n.content.size,o,s)):ve.create(n,bo(e,o,s),bo(e,o,s))}function Q5(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Vf(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const ME=(n=null,e={})=>({editor:t,view:r,tr:o,dispatch:s})=>{e={scrollIntoView:!0,...e};const a=()=>{(Vf()||Q5())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e?.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!Y5(t.state.selection))return a(),!0;const c=J5(o.doc,n)||t.state.selection,d=t.state.selection.eq(c);return s&&(d||o.setSelection(c),d&&o.storedMarks&&o.setStoredMarks(o.storedMarks),a()),!0},TE=(n,e)=>t=>n.every((r,o)=>e(r,{...t,index:o})),kE=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),X5=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&X5(r)}return n};function ac(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return X5(t)}function ka(n,e,t){if(n instanceof Ni||n instanceof ee)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,o=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return ee.fromArray(n.map(c=>e.nodeFromJSON(c)));const a=e.nodeFromJSON(n);return t.errorOnInvalidContent&&a.check(),a}catch(s){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",s),ka("",e,t)}if(o){if(t.errorOnInvalidContent){let a=!1,c="";const d=new D3({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(a=!0,c=typeof h=="string"?h:h.outerHTML,null)}]}})});if(t.slice?Di.fromSchema(d).parseSlice(ac(n),t.parseOptions):Di.fromSchema(d).parse(ac(n),t.parseOptions),t.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${c}`)})}const s=Di.fromSchema(e);return t.slice?s.parseSlice(ac(n),t.parseOptions).content:s.parse(ac(n),t.parseOptions)}return ka("",e,t)}function AE(n,e,t){const r=n.steps.length-1;if(r<e)return;const o=n.steps[r];if(!(o instanceof ir||o instanceof Tn))return;const s=n.mapping.maps[r];let a=0;s.forEach((c,d,h,m)=>{a===0&&(a=m)}),n.setSelection(Te.near(n.doc.resolve(a),t))}const RE=n=>!("type"in n),OE=(n,e,t)=>({tr:r,dispatch:o,editor:s})=>{var a;if(o){t={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let c;const d=M=>{s.emit("contentError",{editor:s,error:M,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},h={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{ka(e,s.schema,{parseOptions:h,errorOnInvalidContent:!0})}catch(M){d(M)}try{c=ka(e,s.schema,{parseOptions:h,errorOnInvalidContent:(a=t.errorOnInvalidContent)!==null&&a!==void 0?a:s.options.enableContentCheck})}catch(M){return d(M),!1}let{from:m,to:g}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},b=!0,v=!0;if((RE(c)?c:[c]).forEach(M=>{M.check(),b=b?M.isText&&M.marks.length===0:!1,v=v?M.isBlock:!1}),m===g&&v){const{parent:M}=r.doc.resolve(m);M.isTextblock&&!M.type.spec.code&&!M.childCount&&(m-=1,g+=1)}let x;if(b){if(Array.isArray(e))x=e.map(M=>M.text||"").join("");else if(e instanceof ee){let M="";e.forEach(k=>{k.text&&(M+=k.text)}),x=M}else typeof e=="object"&&e&&e.text?x=e.text:x=e;r.insertText(x,m,g)}else x=c,r.replaceWith(m,g,x);t.updateSelection&&AE(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:m,text:x}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:m,text:x})}return!0},NE=()=>({state:n,dispatch:e})=>NS(n,e),DE=()=>({state:n,dispatch:e})=>DS(n,e),LE=()=>({state:n,dispatch:e})=>L5(n,e),HE=()=>({state:n,dispatch:e})=>j5(n,e),zE=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Af(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},BE=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Af(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},jE=()=>({state:n,dispatch:e})=>RS(n,e),IE=()=>({state:n,dispatch:e})=>OS(n,e);function W5(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function VE(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,o,s,a;for(let c=0;c<e.length-1;c+=1){const d=e[c];if(/^(cmd|meta|m)$/i.test(d))a=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))o=!0;else if(/^s(hift)?$/i.test(d))s=!0;else if(/^mod$/i.test(d))Vf()||W5()?a=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return r&&(t=`Alt-${t}`),o&&(t=`Ctrl-${t}`),a&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const UE=n=>({editor:e,view:t,tr:r,dispatch:o})=>{const s=VE(n).split(/-(?!$)/),a=s.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),c=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),d=e.captureTransaction(()=>{t.someProp("handleKeyDown",h=>h(t,c))});return d?.steps.forEach(h=>{const m=h.map(r.mapping);m&&o&&r.maybeStep(m)}),!0};function Aa(n,e,t={}){const{from:r,to:o,empty:s}=n.selection,a=e?At(e,n.schema):null,c=[];n.doc.nodesBetween(r,o,(g,b)=>{if(g.isText)return;const v=Math.max(r,b),C=Math.min(o,b+g.nodeSize);c.push({node:g,from:v,to:C})});const d=o-r,h=c.filter(g=>a?a.name===g.node.type.name:!0).filter(g=>Uc(g.node.attrs,t,{strict:!1}));return s?!!h.length:h.reduce((g,b)=>g+b.to-b.from,0)>=d}const _E=(n,e={})=>({state:t,dispatch:r})=>{const o=At(n,t.schema);return Aa(t,o,e)?LS(t,r):!1},qE=()=>({state:n,dispatch:e})=>_5(n,e),PE=n=>({state:e,dispatch:t})=>{const r=At(n,e.schema);return KS(r)(e,t)},FE=()=>({state:n,dispatch:e})=>V5(n,e);function Uf(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function g4(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,o)=>(t.includes(o)||(r[o]=n[o]),r),{})}const KE=(n,e)=>({tr:t,state:r,dispatch:o})=>{let s=null,a=null;const c=Uf(typeof n=="string"?n:n.name,r.schema);return c?(c==="node"&&(s=At(n,r.schema)),c==="mark"&&(a=qi(n,r.schema)),o&&t.selection.ranges.forEach(d=>{r.doc.nodesBetween(d.$from.pos,d.$to.pos,(h,m)=>{s&&s===h.type&&t.setNodeMarkup(m,void 0,g4(h.attrs,e)),a&&h.marks.length&&h.marks.forEach(g=>{a===g.type&&t.addMark(m,m+h.nodeSize,a.create(g4(g.attrs,e)))})})}),!0):!1},$E=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),ZE=()=>({tr:n,dispatch:e})=>{if(e){const t=new Bn(n.doc);n.setSelection(t)}return!0},GE=()=>({state:n,dispatch:e})=>z5(n,e),YE=()=>({state:n,dispatch:e})=>I5(n,e),JE=()=>({state:n,dispatch:e})=>jS(n,e),QE=()=>({state:n,dispatch:e})=>US(n,e),XE=()=>({state:n,dispatch:e})=>VS(n,e);function T1(n,e,t={},r={}){return ka(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const WE=(n,e=!1,t={},r={})=>({editor:o,tr:s,dispatch:a,commands:c})=>{var d,h;const{doc:m}=s;if(t.preserveWhitespace!=="full"){const g=T1(n,o.schema,t,{errorOnInvalidContent:(d=r.errorOnInvalidContent)!==null&&d!==void 0?d:o.options.enableContentCheck});return a&&s.replaceWith(0,m.content.size,g).setMeta("preventUpdate",!e),!0}return a&&s.setMeta("preventUpdate",!e),c.insertContentAt({from:0,to:m.content.size},n,{parseOptions:t,errorOnInvalidContent:(h=r.errorOnInvalidContent)!==null&&h!==void 0?h:o.options.enableContentCheck})};function eb(n,e){const t=qi(e,n.schema),{from:r,to:o,empty:s}=n.selection,a=[];s?(n.storedMarks&&a.push(...n.storedMarks),a.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,o,d=>{a.push(...d.marks)});const c=a.find(d=>d.type.name===t.name);return c?{...c.attrs}:{}}function ew(n,e){const t=new J3(n);return e.forEach(r=>{r.steps.forEach(o=>{t.step(o)})}),t}function tw(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function nw(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(o,s)=>{t(o)&&r.push({node:o,pos:s})}),r}function rw(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function Em(n){return e=>rw(e.$from,n)}function iw(n,e){const t={from:0,to:n.content.size};return $5(n,t,e)}function ow(n,e){const t=At(e,n.schema),{from:r,to:o}=n.selection,s=[];n.doc.nodesBetween(r,o,c=>{s.push(c)});const a=s.reverse().find(c=>c.type.name===t.name);return a?{...a.attrs}:{}}function tb(n,e){const t=Uf(typeof e=="string"?e:e.name,n.schema);return t==="node"?ow(n,e):t==="mark"?eb(n,e):{}}function lw(n,e=JSON.stringify){const t={};return n.filter(r=>{const o=e(r);return Object.prototype.hasOwnProperty.call(t,o)?!1:t[o]=!0})}function sw(n){const e=lw(n);return e.length===1?e:e.filter((t,r)=>!e.filter((s,a)=>a!==r).some(s=>t.oldRange.from>=s.oldRange.from&&t.oldRange.to<=s.oldRange.to&&t.newRange.from>=s.newRange.from&&t.newRange.to<=s.newRange.to))}function aw(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((o,s)=>{const a=[];if(o.ranges.length)o.forEach((c,d)=>{a.push({from:c,to:d})});else{const{from:c,to:d}=t[s];if(c===void 0||d===void 0)return;a.push({from:c,to:d})}a.forEach(({from:c,to:d})=>{const h=e.slice(s).map(c,-1),m=e.slice(s).map(d),g=e.invert().map(h,-1),b=e.invert().map(m);r.push({oldRange:{from:g,to:b},newRange:{from:h,to:m}})})}),sw(r)}function wm(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(o=>{const s=t.resolve(n),a=If(s,o.type);a&&r.push({mark:o,...a})}):t.nodesBetween(n,e,(o,s)=>{!o||o?.nodeSize===void 0||r.push(...o.marks.map(a=>({from:s,to:s+o.nodeSize,mark:a})))}),r}function Sc(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const o=n.find(s=>s.type===e&&s.name===r);return o?o.attribute.keepOnSplit:!1}))}function k1(n,e,t={}){const{empty:r,ranges:o}=n.selection,s=e?qi(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(g=>s?s.name===g.type.name:!0).find(g=>Uc(g.attrs,t,{strict:!1}));let a=0;const c=[];if(o.forEach(({$from:g,$to:b})=>{const v=g.pos,C=b.pos;n.doc.nodesBetween(v,C,(x,M)=>{if(!x.isText&&!x.marks.length)return;const k=Math.max(v,M),O=Math.min(C,M+x.nodeSize),D=O-k;a+=D,c.push(...x.marks.map(P=>({mark:P,from:k,to:O})))})}),a===0)return!1;const d=c.filter(g=>s?s.name===g.mark.type.name:!0).filter(g=>Uc(g.mark.attrs,t,{strict:!1})).reduce((g,b)=>g+b.to-b.from,0),h=c.filter(g=>s?g.mark.type!==s&&g.mark.type.excludes(s):!0).reduce((g,b)=>g+b.to-b.from,0);return(d>0?d+h:d)>=a}function uw(n,e,t={}){if(!e)return Aa(n,null,t)||k1(n,null,t);const r=Uf(e,n.schema);return r==="node"?Aa(n,e,t):r==="mark"?k1(n,e,t):!1}function y4(n,e){const{nodeExtensions:t}=Bf(e),r=t.find(a=>a.name===n);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},s=Re(ue(r,"group",o));return typeof s!="string"?!1:s.split(" ").includes("list")}function Mm(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!==null&&r!==void 0?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let o=!0;return n.content.forEach(s=>{o!==!1&&(Mm(s,{ignoreWhitespace:t,checkChildren:e})||(o=!1))}),o}return!1}function Wn(n){return n instanceof ce}function cw(n,e,t){var r;const{selection:o}=e;let s=null;if(Y5(o)&&(s=o.$cursor),s){const c=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(c)||!c.some(d=>d.type.excludes(t))}const{ranges:a}=o;return a.some(({$from:c,$to:d})=>{let h=c.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(c.pos,d.pos,(m,g,b)=>{if(h)return!1;if(m.isInline){const v=!b||b.type.allowsMarkType(t),C=!!t.isInSet(m.marks)||!m.marks.some(x=>x.type.excludes(t));h=v&&C}return!h}),h})}const fw=(n,e={})=>({tr:t,state:r,dispatch:o})=>{const{selection:s}=t,{empty:a,ranges:c}=s,d=qi(n,r.schema);if(o)if(a){const h=eb(r,d);t.addStoredMark(d.create({...h,...e}))}else c.forEach(h=>{const m=h.$from.pos,g=h.$to.pos;r.doc.nodesBetween(m,g,(b,v)=>{const C=Math.max(v,m),x=Math.min(v+b.nodeSize,g);b.marks.find(k=>k.type===d)?b.marks.forEach(k=>{d===k.type&&t.addMark(C,x,d.create({...k.attrs,...e}))}):t.addMark(C,x,d.create(e))})});return cw(r,t,d)},dw=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),hw=(n,e={})=>({state:t,dispatch:r,chain:o})=>{const s=At(n,t.schema);let a;return t.selection.$anchor.sameParent(t.selection.$head)&&(a=t.selection.$anchor.parent.attrs),s.isTextblock?o().command(({commands:c})=>f4(s,{...a,...e})(t)?!0:c.clearNodes()).command(({state:c})=>f4(s,{...a,...e})(c,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},pw=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,o=bo(n,0,r.content.size),s=ce.create(r,o);e.setSelection(s)}return!0},mw=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:o,to:s}=typeof n=="number"?{from:n,to:n}:n,a=ve.atStart(r).from,c=ve.atEnd(r).to,d=bo(o,a,c),h=bo(s,a,c),m=ve.create(r,d,h);e.setSelection(m)}return!0},gw=n=>({state:e,dispatch:t})=>{const r=At(n,e.schema);return GS(r)(e,t)};function b4(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(o=>e?.includes(o.type.name));n.tr.ensureMarks(r)}}const yw=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:o})=>{const{selection:s,doc:a}=e,{$from:c,$to:d}=s,h=o.extensionManager.attributes,m=Sc(h,c.node().type.name,c.node().attrs);if(s instanceof ce&&s.node.isBlock)return!c.parentOffset||!Zr(a,c.pos)?!1:(r&&(n&&b4(t,o.extensionManager.splittableMarks),e.split(c.pos).scrollIntoView()),!0);if(!c.parent.isBlock)return!1;const g=d.parentOffset===d.parent.content.size,b=c.depth===0?void 0:tw(c.node(-1).contentMatchAt(c.indexAfter(-1)));let v=g&&b?[{type:b,attrs:m}]:void 0,C=Zr(e.doc,e.mapping.map(c.pos),1,v);if(!v&&!C&&Zr(e.doc,e.mapping.map(c.pos),1,b?[{type:b}]:void 0)&&(C=!0,v=b?[{type:b,attrs:m}]:void 0),r){if(C&&(s instanceof ve&&e.deleteSelection(),e.split(e.mapping.map(c.pos),1,v),b&&!g&&!c.parentOffset&&c.parent.type!==b)){const x=e.mapping.map(c.before()),M=e.doc.resolve(x);c.node(-1).canReplaceWith(M.index(),M.index()+1,b)&&e.setNodeMarkup(e.mapping.map(c.before()),b)}n&&b4(t,o.extensionManager.splittableMarks),e.scrollIntoView()}return C},bw=(n,e={})=>({tr:t,state:r,dispatch:o,editor:s})=>{var a;const c=At(n,r.schema),{$from:d,$to:h}=r.selection,m=r.selection.node;if(m&&m.isBlock||d.depth<2||!d.sameParent(h))return!1;const g=d.node(-1);if(g.type!==c)return!1;const b=s.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==c||d.index(-2)!==d.node(-2).childCount-1)return!1;if(o){let k=ee.empty;const O=d.index(-1)?1:d.index(-2)?2:3;for(let X=d.depth-O;X>=d.depth-3;X-=1)k=ee.from(d.node(X).copy(k));const D=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,P={...Sc(b,d.node().type.name,d.node().attrs),...e},I=((a=c.contentMatch.defaultType)===null||a===void 0?void 0:a.createAndFill(P))||void 0;k=k.append(ee.from(c.createAndFill(null,I)||void 0));const Q=d.before(d.depth-(O-1));t.replace(Q,d.after(-D),new le(k,4-O,0));let te=-1;t.doc.nodesBetween(Q,t.doc.content.size,(X,se)=>{if(te>-1)return!1;X.isTextblock&&X.content.size===0&&(te=se+1)}),te>-1&&t.setSelection(ve.near(t.doc.resolve(te))),t.scrollIntoView()}return!0}const v=h.pos===d.end()?g.contentMatchAt(0).defaultType:null,C={...Sc(b,g.type.name,g.attrs),...e},x={...Sc(b,d.node().type.name,d.node().attrs),...e};t.delete(d.pos,h.pos);const M=v?[{type:c,attrs:C},{type:v,attrs:x}]:[{type:c,attrs:C}];if(!Zr(t.doc,d.pos,2))return!1;if(o){const{selection:k,storedMarks:O}=r,{splittableMarks:D}=s.extensionManager,P=O||k.$to.parentOffset&&k.$from.marks();if(t.split(d.pos,2,M).scrollIntoView(),!P||!o)return!0;const I=P.filter(Q=>D.includes(Q.type.name));t.ensureMarks(I)}return!0},zp=(n,e)=>{const t=Em(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const o=n.doc.nodeAt(r);return t.node.type===o?.type&&Ui(n.doc,t.pos)&&n.join(t.pos),!0},Bp=(n,e)=>{const t=Em(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const o=n.doc.nodeAt(r);return t.node.type===o?.type&&Ui(n.doc,r)&&n.join(r),!0},vw=(n,e,t,r={})=>({editor:o,tr:s,state:a,dispatch:c,chain:d,commands:h,can:m})=>{const{extensions:g,splittableMarks:b}=o.extensionManager,v=At(n,a.schema),C=At(e,a.schema),{selection:x,storedMarks:M}=a,{$from:k,$to:O}=x,D=k.blockRange(O),P=M||x.$to.parentOffset&&x.$from.marks();if(!D)return!1;const I=Em(Q=>y4(Q.type.name,g))(x);if(D.depth>=1&&I&&D.depth-I.depth<=1){if(I.node.type===v)return h.liftListItem(C);if(y4(I.node.type.name,g)&&v.validContent(I.node.content)&&c)return d().command(()=>(s.setNodeMarkup(I.pos,v),!0)).command(()=>zp(s,v)).command(()=>Bp(s,v)).run()}return!t||!P||!c?d().command(()=>m().wrapInList(v,r)?!0:h.clearNodes()).wrapInList(v,r).command(()=>zp(s,v)).command(()=>Bp(s,v)).run():d().command(()=>{const Q=m().wrapInList(v,r),te=P.filter(X=>b.includes(X.type.name));return s.ensureMarks(te),Q?!0:h.clearNodes()}).wrapInList(v,r).command(()=>zp(s,v)).command(()=>Bp(s,v)).run()},Cw=(n,e={},t={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:s=!1}=t,a=qi(n,r.schema);return k1(r,a,e)?o.unsetMark(a,{extendEmptyMarkRange:s}):o.setMark(a,e)},xw=(n,e,t={})=>({state:r,commands:o})=>{const s=At(n,r.schema),a=At(e,r.schema),c=Aa(r,s,t);let d;return r.selection.$anchor.sameParent(r.selection.$head)&&(d=r.selection.$anchor.parent.attrs),c?o.setNode(a,d):o.setNode(s,{...d,...t})},Sw=(n,e={})=>({state:t,commands:r})=>{const o=At(n,t.schema);return Aa(t,o,e)?r.lift(o):r.wrapIn(o,e)},Ew=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const o=t[r];let s;if(o.spec.isInputRules&&(s=o.getState(n))){if(e){const a=n.tr,c=s.transform;for(let d=c.steps.length-1;d>=0;d-=1)a.step(c.steps[d].invert(c.docs[d]));if(s.text){const d=a.doc.resolve(s.from).marks();a.replaceWith(s.from,s.to,n.schema.text(s.text,d))}else a.delete(s.from,s.to)}return!0}}return!1},ww=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:o}=t;return r||e&&o.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},Mw=(n,e={})=>({tr:t,state:r,dispatch:o})=>{var s;const{extendEmptyMarkRange:a=!1}=e,{selection:c}=t,d=qi(n,r.schema),{$from:h,empty:m,ranges:g}=c;if(!o)return!0;if(m&&a){let{from:b,to:v}=c;const C=(s=h.marks().find(M=>M.type===d))===null||s===void 0?void 0:s.attrs,x=If(h,d,C);x&&(b=x.from,v=x.to),t.removeMark(b,v,d)}else g.forEach(b=>{t.removeMark(b.$from.pos,b.$to.pos,d)});return t.removeStoredMark(d),!0},Tw=(n,e={})=>({tr:t,state:r,dispatch:o})=>{let s=null,a=null;const c=Uf(typeof n=="string"?n:n.name,r.schema);return c?(c==="node"&&(s=At(n,r.schema)),c==="mark"&&(a=qi(n,r.schema)),o&&t.selection.ranges.forEach(d=>{const h=d.$from.pos,m=d.$to.pos;let g,b,v,C;t.selection.empty?r.doc.nodesBetween(h,m,(x,M)=>{s&&s===x.type&&(v=Math.max(M,h),C=Math.min(M+x.nodeSize,m),g=M,b=x)}):r.doc.nodesBetween(h,m,(x,M)=>{M<h&&s&&s===x.type&&(v=Math.max(M,h),C=Math.min(M+x.nodeSize,m),g=M,b=x),M>=h&&M<=m&&(s&&s===x.type&&t.setNodeMarkup(M,void 0,{...x.attrs,...e}),a&&x.marks.length&&x.marks.forEach(k=>{if(a===k.type){const O=Math.max(M,h),D=Math.min(M+x.nodeSize,m);t.addMark(O,D,a.create({...k.attrs,...e}))}}))}),b&&(g!==void 0&&t.setNodeMarkup(g,void 0,{...b.attrs,...e}),a&&b.marks.length&&b.marks.forEach(x=>{a===x.type&&t.addMark(v,C,a.create({...x.attrs,...e}))}))}),!0):!1},kw=(n,e={})=>({state:t,dispatch:r})=>{const o=At(n,t.schema);return _S(o,e)(t,r)},Aw=(n,e={})=>({state:t,dispatch:r})=>{const o=At(n,t.schema);return qS(o,e)(t,r)};var Rw=Object.freeze({__proto__:null,blur:fE,clearContent:dE,clearNodes:hE,command:pE,createParagraphNear:mE,cut:gE,deleteCurrentNode:yE,deleteNode:bE,deleteRange:vE,deleteSelection:CE,enter:xE,exitCode:SE,extendMarkRange:EE,first:wE,focus:ME,forEach:TE,insertContent:kE,insertContentAt:OE,joinBackward:LE,joinDown:DE,joinForward:HE,joinItemBackward:zE,joinItemForward:BE,joinTextblockBackward:jE,joinTextblockForward:IE,joinUp:NE,keyboardShortcut:UE,lift:_E,liftEmptyBlock:qE,liftListItem:PE,newlineInCode:FE,resetAttributes:KE,scrollIntoView:$E,selectAll:ZE,selectNodeBackward:GE,selectNodeForward:YE,selectParentNode:JE,selectTextblockEnd:QE,selectTextblockStart:XE,setContent:WE,setMark:fw,setMeta:dw,setNode:hw,setNodeSelection:pw,setTextSelection:mw,sinkListItem:gw,splitBlock:yw,splitListItem:bw,toggleList:vw,toggleMark:Cw,toggleNode:xw,toggleWrap:Sw,undoInputRule:Ew,unsetAllMarks:ww,unsetMark:Mw,updateAttributes:Tw,wrapIn:kw,wrapInList:Aw});const Ow=xt.create({name:"commands",addCommands(){return{...Rw}}}),Nw=xt.create({name:"drop",addProseMirrorPlugins(){return[new pt({key:new $t("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),Dw=xt.create({name:"editable",addProseMirrorPlugins(){return[new pt({key:new $t("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Lw=new $t("focusEvents"),Hw=xt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new pt({key:Lw,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),zw=xt.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:c})=>{const{selection:d,doc:h}=c,{empty:m,$anchor:g}=d,{pos:b,parent:v}=g,C=g.parent.isTextblock&&b>0?c.doc.resolve(b-1):g,x=C.parent.type.spec.isolating,M=g.pos-g.parentOffset,k=x&&C.parent.childCount===1?M===g.pos:Te.atStart(h).from===b;return!m||!v.type.isTextblock||v.textContent.length||!k||k&&g.parent.type.name==="paragraph"?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Vf()||W5()?s:o},addProseMirrorPlugins(){return[new pt({key:new $t("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(x=>x.getMeta("composition")))return;const r=n.some(x=>x.docChanged)&&!e.doc.eq(t.doc),o=n.some(x=>x.getMeta("preventClearDocument"));if(!r||o)return;const{empty:s,from:a,to:c}=e.selection,d=Te.atStart(e.doc).from,h=Te.atEnd(e.doc).to;if(s||!(a===d&&c===h)||!Mm(t.doc))return;const b=t.tr,v=Hf({state:t,transaction:b}),{commands:C}=new zf({editor:this.editor,state:v});if(C.clearNodes(),!!b.steps.length)return b}})]}}),Bw=xt.create({name:"paste",addProseMirrorPlugins(){return[new pt({key:new $t("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),jw=xt.create({name:"tabindex",addProseMirrorPlugins(){return[new pt({key:new $t("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class mo{get name(){return this.node.type.name}constructor(e,t,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new mo(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new mo(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new mo(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const o=t.isBlock&&!t.isTextblock,s=t.isAtom&&!t.isText,a=this.pos+r+(s?0:1),c=this.resolvedPos.doc.resolve(a);if(!o&&c.depth<=this.depth)return;const d=new mo(c,this.editor,o,o?t:null);o&&(d.actualDepth=this.depth+1),e.push(new mo(c,this.editor,o,o?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===e)if(Object.keys(t).length>0){const s=o.node.attrs,a=Object.keys(t);for(let c=0;c<a.length;c+=1){const d=a[c];if(s[d]!==t[d])break}}else r=o;o=o.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const s=Object.keys(t);return this.children.forEach(a=>{r&&o.length>0||(a.node.type.name===e&&s.every(d=>t[d]===a.node.attrs[d])&&o.push(a),!(r&&o.length>0)&&(o=o.concat(a.querySelectorAll(e,t,r))))}),o}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const Iw=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function Vw(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style",""),o.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(o),o}class Uw extends YS{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:r,moved:o})=>this.options.onDrop(t,r,o)),this.on("paste",({event:t,slice:r})=>this.options.onPaste(t,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Vw(Iw,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=K5(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(s=>{const a=typeof s=="string"?`${s}$`:s.key;r=r.filter(c=>!c.key.startsWith(a))}),t.length===r.length)return;const o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}createExtensionManager(){var e,t;const o=[...this.options.enableCoreExtensions?[Dw,cE.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),Ow,Hw,zw,jw,Nw,Bw].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s?.type));this.extensionManager=new Hl(o,this)}createCommandManager(){this.commandManager=new zf({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=T1(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(a){if(!(a instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(a.message))throw a;this.emit("contentError",{editor:this,error:a,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(c=>c.name!=="collaboration"),this.createExtensionManager()}}),t=T1(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=J5(t,this.options.autofocus);this.view=new mm(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Ll.create({doc:t,selection:r||void 0})});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(a=>{var c;return(c=this.capturedTransaction)===null||c===void 0?void 0:c.step(a)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=e.getMeta("focus"),s=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return tb(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,o=typeof e=="string"?t:e;return uw(this.state,r,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return xm(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return iw(this.state.doc,{blockSeparator:t,textSerializers:{...Z5(this.schema),...r}})}get isEmpty(){return Mm(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new mo(t,this)}get $doc(){return this.$pos(0)}}function Lo(n){return new Ia({find:n.find,handler:({state:e,range:t,match:r})=>{const o=Re(n.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:s}=e,a=r[r.length-1],c=r[0];if(a){const d=c.search(/\S/),h=t.from+c.indexOf(a),m=h+a.length;if(wm(t.from,t.to,e.doc).filter(v=>v.mark.type.excluded.find(x=>x===n.type&&x!==v.mark.type)).filter(v=>v.to>h).length)return null;m<t.to&&s.delete(m,t.to),h>t.from&&s.delete(t.from+d,h);const b=t.from+d+a.length;s.addMark(t.from+d,b,n.type.create(o||{})),s.removeStoredMark(n.type)}}})}function nb(n){return new Ia({find:n.find,handler:({state:e,range:t,match:r})=>{const o=Re(n.getAttributes,void 0,r)||{},{tr:s}=e,a=t.from;let c=t.to;const d=n.type.create(o);if(r[1]){const h=r[0].lastIndexOf(r[1]);let m=a+h;m>c?m=c:c=m+r[1].length;const g=r[0][r[0].length-1];s.insertText(g,a+r[0].length-1),s.replaceWith(m,c,d)}else if(r[0]){const h=n.type.isInline?a:a-1;s.insert(h,n.type.create(o)).delete(s.mapping.map(a),s.mapping.map(c))}s.scrollIntoView()}})}function A1(n){return new Ia({find:n.find,handler:({state:e,range:t,match:r})=>{const o=e.doc.resolve(t.from),s=Re(n.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,s)}})}function mt(n){return new Ia({find:n.find,handler:({state:e,range:t,match:r})=>{let o=n.replace,s=t.from;const a=t.to;if(r[1]){const c=r[0].lastIndexOf(r[1]);o+=r[0].slice(c+r[1].length),s+=c;const d=s-a;d>0&&(o=r[0].slice(c-d,c)+o,s=a)}e.tr.insertText(o,s,a)}})}function Fl(n){return new Ia({find:n.find,handler:({state:e,range:t,match:r,chain:o})=>{const s=Re(n.getAttributes,void 0,r)||{},a=e.tr.delete(t.from,t.to),d=a.doc.resolve(t.from).blockRange(),h=d&&rm(d,n.type,s);if(!h)return null;if(a.wrap(d,h),n.keepMarks&&n.editor){const{selection:g,storedMarks:b}=e,{splittableMarks:v}=n.editor.extensionManager,C=b||g.$to.parentOffset&&g.$from.marks();if(C){const x=C.filter(M=>v.includes(M.type.name));a.ensureMarks(x)}}if(n.keepAttributes){const g=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";o().updateAttributes(g,s).run()}const m=a.doc.resolve(t.from-1).nodeBefore;m&&m.type===n.type&&Ui(a.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,m))&&a.join(t.from-1)}})}let nn=class R1{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Re(ue(this,"addOptions",{name:this.name}))),this.storage=Re(ue(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new R1(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>jf(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new R1(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Re(ue(t,"addOptions",{name:t.name})),t.storage=Re(ue(t,"addStorage",{name:t.name,options:t.options})),t}};class _w{constructor(e,t,r){this.isDragging=!1,this.component=e,this.editor=t.editor,this.options={stopEvent:null,ignoreMutation:null,...r},this.extension=t.extension,this.node=t.node,this.decorations=t.decorations,this.innerDecorations=t.innerDecorations,this.view=t.view,this.HTMLAttributes=t.HTMLAttributes,this.getPos=t.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var t,r,o,s,a,c,d;const{view:h}=this.editor,m=e.target,g=m.nodeType===3?(t=m.parentElement)===null||t===void 0?void 0:t.closest("[data-drag-handle]"):m.closest("[data-drag-handle]");if(!this.dom||!((r=this.contentDOM)===null||r===void 0)&&r.contains(m)||!g)return;let b=0,v=0;if(this.dom!==g){const O=this.dom.getBoundingClientRect(),D=g.getBoundingClientRect(),P=(o=e.offsetX)!==null&&o!==void 0?o:(s=e.nativeEvent)===null||s===void 0?void 0:s.offsetX,I=(a=e.offsetY)!==null&&a!==void 0?a:(c=e.nativeEvent)===null||c===void 0?void 0:c.offsetY;b=D.x-O.x+P,v=D.y-O.y+I}const C=this.dom.cloneNode(!0);(d=e.dataTransfer)===null||d===void 0||d.setDragImage(C,b,v);const x=this.getPos();if(typeof x!="number")return;const M=ce.create(h.state.doc,x),k=h.state.tr.setSelection(M);h.dispatch(k)}stopEvent(e){var t;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const r=e.target;if(!(this.dom.contains(r)&&!(!((t=this.contentDOM)===null||t===void 0)&&t.contains(r))))return!1;const s=e.type.startsWith("drag"),a=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!a&&!s)return!0;const{isEditable:d}=this.editor,{isDragging:h}=this,m=!!this.node.type.spec.draggable,g=ce.isSelectable(this.node),b=e.type==="copy",v=e.type==="paste",C=e.type==="cut",x=e.type==="mousedown";if(!m&&g&&s&&e.target===this.dom&&e.preventDefault(),m&&s&&!h&&e.target===this.dom)return e.preventDefault(),!1;if(m&&d&&!h&&x){const M=r.closest("[data-drag-handle]");M&&(this.dom===M||this.dom.contains(M))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(h||a||b||v||C||x&&g)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&(Vf()||Q5())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(r=>r.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:t})=>{const r=this.getPos();return typeof r!="number"?!1:(t.setNodeMarkup(r,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){const e=this.getPos();if(typeof e!="number")return;const t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}}function Ii(n){return new iE({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:o})=>{const s=Re(n.getAttributes,void 0,r,o);if(s===!1||s===null)return null;const{tr:a}=e,c=r[r.length-1],d=r[0];let h=t.to;if(c){const m=d.search(/\S/),g=t.from+d.indexOf(c),b=g+c.length;if(wm(t.from,t.to,e.doc).filter(C=>C.mark.type.excluded.find(M=>M===n.type&&M!==C.mark.type)).filter(C=>C.to>g).length)return null;b<t.to&&a.delete(b,t.to),g>t.from&&a.delete(t.from+m,g),h=t.from+m+c.length,a.addMark(t.from+m,h,n.type.create(s||{})),a.removeStoredMark(n.type)}}})}var _f=g3();const qw=p3(_f);function Pw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var rb={exports:{}},jp={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v4;function Fw(){if(v4)return jp;v4=1;var n=Ht;function e(g,b){return g===b&&(g!==0||1/g===1/b)||g!==g&&b!==b}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,o=n.useEffect,s=n.useLayoutEffect,a=n.useDebugValue;function c(g,b){var v=b(),C=r({inst:{value:v,getSnapshot:b}}),x=C[0].inst,M=C[1];return s(function(){x.value=v,x.getSnapshot=b,d(x)&&M({inst:x})},[g,v,b]),o(function(){return d(x)&&M({inst:x}),g(function(){d(x)&&M({inst:x})})},[g]),a(v),v}function d(g){var b=g.getSnapshot;g=g.value;try{var v=b();return!t(g,v)}catch{return!0}}function h(g,b){return b()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:c;return jp.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,jp}rb.exports=Fw();var Tm=rb.exports;const Kw=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},$w=({contentComponent:n})=>{const e=Tm.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return Ht.createElement(Ht.Fragment,null,Object.values(e))};function Zw(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:qw.createPortal(r.reactElement,r.element,t)},n.forEach(o=>o())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(o=>o())}}}class Gw extends Ht.Component{constructor(e){var t;super(e),this.editorContentRef=Ht.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=Zw(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...r}=this.props;return Ht.createElement(Ht.Fragment,null,Ht.createElement("div",{ref:Kw(t,this.editorContentRef),...r}),e?.contentComponent&&Ht.createElement($w,{contentComponent:e.contentComponent}))}}const Yw=w.forwardRef((n,e)=>{const t=Ht.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return Ht.createElement(Gw,{key:t,innerRef:e,...n})}),Jw=Ht.memo(Yw);var Qw=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,o,s;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(o=r;o--!==0;)if(!n(e[o],t[o]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;for(o of e.entries())if(!n(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(o=r;o--!==0;)if(e[o]!==t[o])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[o]))return!1;for(o=r;o--!==0;){var a=s[o];if(!(a==="_owner"&&e.$$typeof)&&!n(e[a],t[a]))return!1}return!0}return e!==e&&t!==t},Xw=Pw(Qw),ib={exports:{}},Ip={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C4;function Ww(){if(C4)return Ip;C4=1;var n=Ht,e=Tm;function t(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var r=typeof Object.is=="function"?Object.is:t,o=e.useSyncExternalStore,s=n.useRef,a=n.useEffect,c=n.useMemo,d=n.useDebugValue;return Ip.useSyncExternalStoreWithSelector=function(h,m,g,b,v){var C=s(null);if(C.current===null){var x={hasValue:!1,value:null};C.current=x}else x=C.current;C=c(function(){function k(Q){if(!O){if(O=!0,D=Q,Q=b(Q),v!==void 0&&x.hasValue){var te=x.value;if(v(te,Q))return P=te}return P=Q}if(te=P,r(D,Q))return te;var X=b(Q);return v!==void 0&&v(te,X)?te:(D=Q,P=X)}var O=!1,D,P,I=g===void 0?null:g;return[function(){return k(m())},I===null?void 0:function(){return k(I())}]},[m,g,b,v]);var M=o(h,C[0],C[1]);return a(function(){x.hasValue=!0,x.value=M},[M]),d(M),M},Ip}ib.exports=Ww();var eM=ib.exports;const tM=typeof window<"u"?w.useLayoutEffect:w.useEffect;class nM{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(o=>o())},r=this.editor;return r.on("transaction",t),()=>{r.off("transaction",t)}}}}function rM(n){var e;const[t]=w.useState(()=>new nM(n.editor)),r=eM.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!==null&&e!==void 0?e:Xw);return tM(()=>t.watch(n.editor),[n.editor,t]),w.useDebugValue(r),r}const iM=!1,O1=typeof window>"u",oM=O1||!!(typeof window<"u"&&window.next);class km{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?O1||oM?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var o,s;return(s=(o=this.options.current).onBeforeCreate)===null||s===void 0?void 0:s.call(o,...r)},onBlur:(...r)=>{var o,s;return(s=(o=this.options.current).onBlur)===null||s===void 0?void 0:s.call(o,...r)},onCreate:(...r)=>{var o,s;return(s=(o=this.options.current).onCreate)===null||s===void 0?void 0:s.call(o,...r)},onDestroy:(...r)=>{var o,s;return(s=(o=this.options.current).onDestroy)===null||s===void 0?void 0:s.call(o,...r)},onFocus:(...r)=>{var o,s;return(s=(o=this.options.current).onFocus)===null||s===void 0?void 0:s.call(o,...r)},onSelectionUpdate:(...r)=>{var o,s;return(s=(o=this.options.current).onSelectionUpdate)===null||s===void 0?void 0:s.call(o,...r)},onTransaction:(...r)=>{var o,s;return(s=(o=this.options.current).onTransaction)===null||s===void 0?void 0:s.call(o,...r)},onUpdate:(...r)=>{var o,s;return(s=(o=this.options.current).onUpdate)===null||s===void 0?void 0:s.call(o,...r)},onContentError:(...r)=>{var o,s;return(s=(o=this.options.current).onContentError)===null||s===void 0?void 0:s.call(o,...r)},onDrop:(...r)=>{var o,s;return(s=(o=this.options.current).onDrop)===null||s===void 0?void 0:s.call(o,...r)},onPaste:(...r)=>{var o,s;return(s=(o=this.options.current).onPaste)===null||s===void 0?void 0:s.call(o,...r)}};return new Uw(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((o,s)=>{var a;return o===((a=t.extensions)===null||a===void 0?void 0:a[s])}):e[r]===t[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?km.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,o)=>r===e[o]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function lM(n={},e=[]){const t=w.useRef(n);t.current=n;const[r]=w.useState(()=>new km(t)),o=Tm.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return w.useDebugValue(o),w.useEffect(r.onRender(e)),rM({editor:o,selector:({transactionNumber:s})=>n.shouldRerenderOnTransaction===!1?null:n.immediatelyRender&&s===0?0:s+1}),o}const Am=w.createContext({editor:null});Am.Consumer;const sM=()=>w.useContext(Am),ob=w.createContext({onDragStart:void 0}),aM=()=>w.useContext(ob),lb=Ht.forwardRef((n,e)=>{const{onDragStart:t}=aM(),r=n.as||"div";return Ht.createElement(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});function uM(n){return!!(typeof n=="function"&&n.prototype&&n.prototype.isReactComponent)}function cM(n){var e;return typeof n=="object"&&((e=n.$$typeof)===null||e===void 0?void 0:e.toString())==="Symbol(react.forward_ref)"}function fM(){try{if(w.version)return parseInt(w.version.split(".")[0],10)>=19}catch{}return!1}class dM{constructor(e,{editor:t,props:r={},as:o="div",className:s=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=e,this.editor=t,this.props=r,this.element=document.createElement(o),this.element.classList.add("react-renderer"),s&&this.element.classList.add(...s.split(" ")),this.editor.isInitialized?_f.flushSync(()=>{this.render()}):this.render()}render(){var e;const t=this.component,r=this.props,o=this.editor,s=fM(),a=uM(t),c=cM(t),d={...r};d.ref||(s?d.ref=h=>{this.ref=h}:(a||c)&&(d.ref=h=>{this.ref=h})),this.reactElement=Ht.createElement(t,{...d}),(e=o?.contentComponent)===null||e===void 0||e.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e;const t=this.editor;(e=t?.contentComponent)===null||e===void 0||e.removeRenderer(this.id)}updateAttributes(e){Object.keys(e).forEach(t=>{this.element.setAttribute(t,e[t])})}}class hM extends _w{mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(h={})=>this.updateAttributes(h),deleteNode:()=>this.deleteNode(),ref:w.createRef()};if(!this.component.displayName){const h=m=>m.charAt(0).toUpperCase()+m.substring(1);this.component.displayName=h(this.extension.name)}const o={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:h=>{h&&this.contentDOMElement&&h.firstChild!==this.contentDOMElement&&h.appendChild(this.contentDOMElement)}},s=this.component,a=w.memo(h=>Ht.createElement(ob.Provider,{value:o},w.createElement(s,h)));a.displayName="ReactNodeView",this.node.isLeaf?this.contentDOMElement=null:this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.style.whiteSpace="inherit");let c=this.node.isInline?"span":"div";this.options.as&&(c=this.options.as);const{className:d=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new dM(a,{editor:this.editor,props:e,as:c,className:`node-${this.node.type.name} ${d}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!(!((e=this.renderer.element.firstElementChild)===null||e===void 0)&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:e,to:t}=this.editor.state.selection,r=this.getPos();if(typeof r=="number")if(e<=r&&t>=r+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(e,t,r){const o=s=>{this.renderer.updateProps(s),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const s=this.node,a=this.decorations,c=this.innerDecorations;return this.node=e,this.decorations=t,this.innerDecorations=r,this.options.update({oldNode:s,oldDecorations:a,newNode:e,newDecorations:t,oldInnerDecorations:c,innerDecorations:r,updateProps:()=>o({node:e,decorations:t,innerDecorations:r})})}return e===this.node&&this.decorations===t&&this.innerDecorations===r||(this.node=e,this.decorations=t,this.innerDecorations=r,o({node:e,decorations:t,innerDecorations:r})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let e={};if(typeof this.options.attrs=="function"){const t=this.editor.extensionManager.attributes,r=Vc(this.node,t);e=this.options.attrs({node:this.node,HTMLAttributes:r})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}}function sb(n,e){return t=>t.editor.contentComponent?new hM(n,t,e):{}}const pM=/^\s*>\s$/,mM=nn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",rt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Fl({find:pM,type:this.type})]}}),gM=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,yM=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,bM=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,vM=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,CM=jn.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",rt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Lo({find:gM,type:this.type}),Lo({find:bM,type:this.type})]},addPasteRules(){return[Ii({find:yM,type:this.type}),Ii({find:vM,type:this.type})]}}),xM="listItem",x4="textStyle",S4=/^\s*([-+*])\s$/,SM=nn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",rt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(xM,this.editor.getAttributes(x4)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=Fl({find:S4,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Fl({find:S4,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(x4),editor:this.editor})),[n]}}),EM=/(^|[^`])`([^`]+)`(?!`)/,wM=/(^|[^`])`([^`]+)`(?!`)/g,MM=jn.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",rt(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Lo({find:EM,type:this.type})]},addPasteRules(){return[Ii({find:wM,type:this.type})]}}),TM=/^```([a-z]+)?[\s\n]$/,kM=/^~~~([a-z]+)?[\s\n]$/,AM=nn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,s=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(a=>a.startsWith(t)).map(a=>a.replace(t,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",rt(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:o}=t;if(!o||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,a=r.parent.textContent.endsWith(`

`);return!s||!a?!1:n.chain().command(({tr:c})=>(c.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:o,empty:s}=t;if(!s||o.parent.type!==this.type||!(o.parentOffset===o.parent.nodeSize-2))return!1;const c=o.after();return c===void 0?!1:r.nodeAt(c)?n.commands.command(({tr:h})=>(h.setSelection(Te.near(r.resolve(c))),!0)):n.commands.exitCode()}}},addInputRules(){return[A1({find:TM,type:this.type,getAttributes:n=>({language:n[1]})}),A1({find:kM,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new pt({key:new $t("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,s=o?.mode;if(!t||!s)return!1;const{tr:a,schema:c}=n.state,d=c.text(t.replace(/\r\n?/g,`
`));return a.replaceSelectionWith(this.type.create({language:s},d)),a.selection.$from.parent.type!==this.type&&a.setSelection(ve.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),n.dispatch(a),!0}}})]}}),RM=nn.create({name:"doc",topNode:!0,content:"block+"});function OM(n={}){return new pt({view(e){return new NM(e,n)}})}class NM{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let s=a=>{this[o](a)};return e.dom.addEventListener(o,s),{name:o,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,o=this.editorView.dom,s=o.getBoundingClientRect(),a=s.width/o.offsetWidth,c=s.height/o.offsetHeight;if(t){let g=e.nodeBefore,b=e.nodeAfter;if(g||b){let v=this.editorView.nodeDOM(this.cursorPos-(g?g.nodeSize:0));if(v){let C=v.getBoundingClientRect(),x=g?C.bottom:C.top;g&&b&&(x=(x+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let M=this.width/2*c;r={left:C.left,right:C.right,top:x-M,bottom:x+M}}}}if(!r){let g=this.editorView.coordsAtPos(this.cursorPos),b=this.width/2*a;r={left:g.left-b,right:g.left+b,top:g.top,bottom:g.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let h,m;if(!d||d==document.body&&getComputedStyle(d).position=="static")h=-pageXOffset,m=-pageYOffset;else{let g=d.getBoundingClientRect(),b=g.width/d.offsetWidth,v=g.height/d.offsetHeight;h=g.left-d.scrollLeft*b,m=g.top-d.scrollTop*v}this.element.style.left=(r.left-h)/a+"px",this.element.style.top=(r.top-m)/c+"px",this.element.style.width=(r.right-r.left)/a+"px",this.element.style.height=(r.bottom-r.top)/c+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),o=r&&r.type.spec.disableDropCursor,s=typeof o=="function"?o(this.editorView,t,e):o;if(t&&!s){let a=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let c=P3(this.editorView.state.doc,a,this.editorView.dragging.slice);c!=null&&(a=c)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const DM=xt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[OM(this.options)]}});class ht extends Te{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return ht.valid(r)?new ht(r):Te.near(r)}content(){return le.empty}eq(e){return e instanceof ht&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ht(e.resolve(t.pos))}getBookmark(){return new Rm(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!LM(e)||!HM(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let o=t.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&ht.valid(e))return e;let o=e.pos,s=null;for(let a=e.depth;;a--){let c=e.node(a);if(t>0?e.indexAfter(a)<c.childCount:e.index(a)>0){s=c.child(t>0?e.indexAfter(a):e.index(a)-1);break}else if(a==0)return null;o+=t;let d=e.doc.resolve(o);if(ht.valid(d))return d}for(;;){let a=t>0?s.firstChild:s.lastChild;if(!a){if(s.isAtom&&!s.isText&&!ce.isSelectable(s)){e=e.doc.resolve(o+s.nodeSize*t),r=!1;continue e}break}s=a,o+=t;let c=e.doc.resolve(o);if(ht.valid(c))return c}return null}}}ht.prototype.visible=!1;ht.findFrom=ht.findGapCursorFrom;Te.jsonID("gapcursor",ht);class Rm{constructor(e){this.pos=e}map(e){return new Rm(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return ht.valid(t)?new ht(t):Te.near(t)}}function LM(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(t-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function HM(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(t);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function zM(){return new pt({props:{decorations:VM,createSelectionBetween(n,e,t){return e.pos==t.pos&&ht.valid(t)?new ht(t):null},handleClick:jM,handleKeyDown:BM,handleDOMEvents:{beforeinput:IM}}})}const BM=N5({ArrowLeft:uc("horiz",-1),ArrowRight:uc("horiz",1),ArrowUp:uc("vert",-1),ArrowDown:uc("vert",1)});function uc(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,s){let a=r.selection,c=e>0?a.$to:a.$from,d=a.empty;if(a instanceof ve){if(!s.endOfTextblock(t)||c.depth==0)return!1;d=!1,c=r.doc.resolve(e>0?c.after():c.before())}let h=ht.findGapCursorFrom(c,e,d);return h?(o&&o(r.tr.setSelection(new ht(h))),!0):!1}}function jM(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!ht.valid(r))return!1;let o=n.posAtCoords({left:t.clientX,top:t.clientY});return o&&o.inside>-1&&ce.isSelectable(n.state.doc.nodeAt(o.inside))?!1:(n.dispatch(n.state.tr.setSelection(new ht(r))),!0)}function IM(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof ht))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let o=ee.empty;for(let a=r.length-1;a>=0;a--)o=ee.from(r[a].createAndFill(null,o));let s=n.state.tr.replace(t.pos,t.pos,new le(o,0,0));return s.setSelection(ve.near(s.doc.resolve(t.pos+1))),n.dispatch(s),!1}function VM(n){if(!(n.selection instanceof ht))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",bt.create(n.doc,[En.widget(n.selection.head,e,{key:"gapcursor"})])}const UM=xt.create({name:"gapCursor",addProseMirrorPlugins(){return[zM()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=Re(ue(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),_M=nn.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",rt(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:o,storedMarks:s}=t;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:a}=this.options,{splittableMarks:c}=r.extensionManager,d=s||o.$to.parentOffset&&o.$from.marks();return e().insertContent({type:this.name}).command(({tr:h,dispatch:m})=>{if(m&&d&&a){const g=d.filter(b=>c.includes(b.type.name));h.ensureMarks(g)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),qM=nn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,rt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>A1({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var _c=200,zt=function(){};zt.prototype.append=function(e){return e.length?(e=zt.from(e),!this.length&&e||e.length<_c&&this.leafAppend(e)||this.length<_c&&e.leafPrepend(this)||this.appendInner(e)):this};zt.prototype.prepend=function(e){return e.length?zt.from(e).append(this):this};zt.prototype.appendInner=function(e){return new PM(this,e)};zt.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?zt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};zt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};zt.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};zt.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(s,a){return o.push(e(s,a))},t,r),o};zt.from=function(e){return e instanceof zt?e:e&&e.length?new ab(e):zt.empty};var ab=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,s){return o==0&&s==this.length?this:new e(this.values.slice(o,s))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,s,a,c){for(var d=s;d<a;d++)if(o(this.values[d],c+d)===!1)return!1},e.prototype.forEachInvertedInner=function(o,s,a,c){for(var d=s-1;d>=a;d--)if(o(this.values[d],c+d)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=_c)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=_c)return new e(o.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(zt);zt.empty=new ab([]);var PM=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,s,a){var c=this.left.length;if(o<c&&this.left.forEachInner(r,o,Math.min(s,c),a)===!1||s>c&&this.right.forEachInner(r,Math.max(o-c,0),Math.min(this.length,s)-c,a+c)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,s,a){var c=this.left.length;if(o>c&&this.right.forEachInvertedInner(r,o-c,Math.max(s,c)-c,a+c)===!1||s<c&&this.left.forEachInvertedInner(r,Math.min(o,c),s,a)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var s=this.left.length;return o<=s?this.left.slice(r,o):r>=s?this.right.slice(r-s,o-s):this.left.slice(r,s).append(this.right.slice(0,o-s))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(zt);const FM=500;class rr{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,s;t&&(o=this.remapping(r,this.items.length),s=o.maps.length);let a=e.tr,c,d,h=[],m=[];return this.items.forEach((g,b)=>{if(!g.step){o||(o=this.remapping(r,b+1),s=o.maps.length),s--,m.push(g);return}if(o){m.push(new dr(g.map));let v=g.step.map(o.slice(s)),C;v&&a.maybeStep(v).doc&&(C=a.mapping.maps[a.mapping.maps.length-1],h.push(new dr(C,void 0,void 0,h.length+m.length))),s--,C&&o.appendMap(C,s)}else a.maybeStep(g.step);if(g.selection)return c=o?g.selection.map(o.slice(s)):g.selection,d=new rr(this.items.slice(0,r).append(m.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:a,selection:c}}addTransform(e,t,r,o){let s=[],a=this.eventCount,c=this.items,d=!o&&c.length?c.get(c.length-1):null;for(let m=0;m<e.steps.length;m++){let g=e.steps[m].invert(e.docs[m]),b=new dr(e.mapping.maps[m],g,t),v;(v=d&&d.merge(b))&&(b=v,m?s.pop():c=c.slice(0,c.length-1)),s.push(b),t&&(a++,t=void 0),o||(d=b)}let h=a-r.depth;return h>$M&&(c=KM(c,h),a-=h),new rr(c.append(s),a)}remapping(e,t){let r=new Sa;return this.items.forEach((o,s)=>{let a=o.mirrorOffset!=null&&s-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,a)},e,t),r}addMaps(e){return this.eventCount==0?this:new rr(this.items.append(e.map(t=>new dr(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-t),s=e.mapping,a=e.steps.length,c=this.eventCount;this.items.forEach(b=>{b.selection&&c--},o);let d=t;this.items.forEach(b=>{let v=s.getMirror(--d);if(v==null)return;a=Math.min(a,v);let C=s.maps[v];if(b.step){let x=e.steps[v].invert(e.docs[v]),M=b.selection&&b.selection.map(s.slice(d+1,v));M&&c++,r.push(new dr(C,x,M))}else r.push(new dr(C))},o);let h=[];for(let b=t;b<a;b++)h.push(new dr(s.maps[b]));let m=this.items.slice(0,o).append(h).append(r),g=new rr(m,c);return g.emptyItemCount()>FM&&(g=g.compress(this.items.length-r.length)),g}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,o=[],s=0;return this.items.forEach((a,c)=>{if(c>=e)o.push(a),a.selection&&s++;else if(a.step){let d=a.step.map(t.slice(r)),h=d&&d.getMap();if(r--,h&&t.appendMap(h,r),d){let m=a.selection&&a.selection.map(t.slice(r));m&&s++;let g=new dr(h.invert(),d,m),b,v=o.length-1;(b=o.length&&o[v].merge(g))?o[v]=b:o.push(g)}}else a.map&&r--},this.items.length,0),new rr(zt.from(o.reverse()),s)}}rr.empty=new rr(zt.empty,0);function KM(n,e){let t;return n.forEach((r,o)=>{if(r.selection&&e--==0)return t=o,!1}),n.slice(t)}class dr{constructor(e,t,r,o){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new dr(t.getMap().invert(),t,this.selection)}}}class wi{constructor(e,t,r,o,s){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=o,this.prevComposition=s}}const $M=20;function ZM(n,e,t,r){let o=t.getMeta(ko),s;if(o)return o.historyState;t.getMeta(JM)&&(n=new wi(n.done,n.undone,null,0,-1));let a=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(a&&a.getMeta(ko))return a.getMeta(ko).redo?new wi(n.done.addTransform(t,void 0,r,Ec(e)),n.undone,E4(t.mapping.maps),n.prevTime,n.prevComposition):new wi(n.done,n.undone.addTransform(t,void 0,r,Ec(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let c=t.getMeta("composition"),d=n.prevTime==0||!a&&n.prevComposition!=c&&(n.prevTime<(t.time||0)-r.newGroupDelay||!GM(t,n.prevRanges)),h=a?Vp(n.prevRanges,t.mapping):E4(t.mapping.maps);return new wi(n.done.addTransform(t,d?e.selection.getBookmark():void 0,r,Ec(e)),rr.empty,h,t.time,c??n.prevComposition)}else return(s=t.getMeta("rebased"))?new wi(n.done.rebased(t,s),n.undone.rebased(t,s),Vp(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new wi(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),Vp(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function GM(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,o)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&o>=e[s]&&(t=!0)}),t}function E4(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,o,s,a)=>e.push(s,a));return e}function Vp(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let o=e.map(n[r],1),s=e.map(n[r+1],-1);o<=s&&t.push(o,s)}return t}function YM(n,e,t){let r=Ec(e),o=ko.get(e).spec.config,s=(t?n.undone:n.done).popEvent(e,r);if(!s)return null;let a=s.selection.resolve(s.transform.doc),c=(t?n.done:n.undone).addTransform(s.transform,e.selection.getBookmark(),o,r),d=new wi(t?c:s.remaining,t?s.remaining:c,null,0,-1);return s.transform.setSelection(a).setMeta(ko,{redo:t,historyState:d})}let Up=!1,w4=null;function Ec(n){let e=n.plugins;if(w4!=e){Up=!1,w4=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Up=!0;break}}return Up}const ko=new $t("history"),JM=new $t("closeHistory");function QM(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new pt({key:ko,state:{init(){return new wi(rr.empty,rr.empty,null,0,-1)},apply(e,t,r){return ZM(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,o=r=="historyUndo"?cb:r=="historyRedo"?fb:null;return o?(t.preventDefault(),o(e.state,e.dispatch)):!1}}}})}function ub(n,e){return(t,r)=>{let o=ko.getState(t);if(!o||(n?o.undone:o.done).eventCount==0)return!1;if(r){let s=YM(o,t,n);s&&r(e?s.scrollIntoView():s)}return!0}}const cb=ub(!1,!0),fb=ub(!0,!0),XM=xt.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>cb(n,e),redo:()=>({state:n,dispatch:e})=>fb(n,e)}},addProseMirrorPlugins(){return[QM(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),WM=nn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",rt(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{selection:t}=e,{$from:r,$to:o}=t,s=n();return r.parentOffset===0?s.insertContentAt({from:Math.max(r.pos-1,0),to:o.pos},{type:this.name}):Wn(t)?s.insertContentAt(o.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:a,dispatch:c})=>{var d;if(c){const{$to:h}=a.selection,m=h.end();if(h.nodeAfter)h.nodeAfter.isTextblock?a.setSelection(ve.create(a.doc,h.pos+1)):h.nodeAfter.isBlock?a.setSelection(ce.create(a.doc,h.pos)):a.setSelection(ve.create(a.doc,h.pos));else{const g=(d=h.parent.type.contentMatch.defaultType)===null||d===void 0?void 0:d.create();g&&(a.insert(m,g),a.setSelection(ve.create(a.doc,m+1)))}a.scrollIntoView()}return!0}).run()}}},addInputRules(){return[nb({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),eT=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,tT=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,nT=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,rT=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,iT=jn.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",rt(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Lo({find:eT,type:this.type}),Lo({find:nT,type:this.type})]},addPasteRules(){return[Ii({find:tT,type:this.type}),Ii({find:rT,type:this.type})]}}),oT=nn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",rt(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),lT="listItem",M4="textStyle",T4=/^(\d+)\.\s$/,sT=nn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",rt(this.options.HTMLAttributes,t),0]:["ol",rt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(lT,this.editor.getAttributes(M4)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=Fl({find:T4,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Fl({find:T4,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(M4)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),aT=nn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",rt(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),uT=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,cT=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,fT=jn.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",rt(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Lo({find:uT,type:this.type})]},addPasteRules(){return[Ii({find:cT,type:this.type})]}}),dT=nn.create({name:"text",group:"inline"}),hT=xt.create({name:"starterKit",addExtensions(){const n=[];return this.options.bold!==!1&&n.push(CM.configure(this.options.bold)),this.options.blockquote!==!1&&n.push(mM.configure(this.options.blockquote)),this.options.bulletList!==!1&&n.push(SM.configure(this.options.bulletList)),this.options.code!==!1&&n.push(MM.configure(this.options.code)),this.options.codeBlock!==!1&&n.push(AM.configure(this.options.codeBlock)),this.options.document!==!1&&n.push(RM.configure(this.options.document)),this.options.dropcursor!==!1&&n.push(DM.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&n.push(UM.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&n.push(_M.configure(this.options.hardBreak)),this.options.heading!==!1&&n.push(qM.configure(this.options.heading)),this.options.history!==!1&&n.push(XM.configure(this.options.history)),this.options.horizontalRule!==!1&&n.push(WM.configure(this.options.horizontalRule)),this.options.italic!==!1&&n.push(iT.configure(this.options.italic)),this.options.listItem!==!1&&n.push(oT.configure(this.options.listItem)),this.options.orderedList!==!1&&n.push(sT.configure(this.options.orderedList)),this.options.paragraph!==!1&&n.push(aT.configure(this.options.paragraph)),this.options.strike!==!1&&n.push(fT.configure(this.options.strike)),this.options.text!==!1&&n.push(dT.configure(this.options.text)),n}}),pT=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,mT=nn.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:n}){return["img",rt(this.options.HTMLAttributes,n)]},addCommands(){return{setImage:n=>({commands:e})=>e.insertContent({type:this.name,attrs:n})}},addInputRules(){return[nb({find:pT,type:this.type,getAttributes:n=>{const[,,e,t,r]=n;return{src:t,alt:e,title:r}}})]}}),gT=/^\s*(\[([( |x])?\])\s$/,yT=nn.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList"}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:n=>{const e=n.getAttribute("data-checked");return e===""||e==="true"},renderHTML:n=>({"data-checked":n.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:n,HTMLAttributes:e}){return["li",rt(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:n.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const n={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...n,Tab:()=>this.editor.commands.sinkListItem(this.name)}:n},addNodeView(){return({node:n,HTMLAttributes:e,getPos:t,editor:r})=>{const o=document.createElement("li"),s=document.createElement("label"),a=document.createElement("span"),c=document.createElement("input"),d=document.createElement("div");return s.contentEditable="false",c.type="checkbox",c.addEventListener("mousedown",h=>h.preventDefault()),c.addEventListener("change",h=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){c.checked=!c.checked;return}const{checked:m}=h.target;r.isEditable&&typeof t=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:g})=>{const b=t();if(typeof b!="number")return!1;const v=g.doc.nodeAt(b);return g.setNodeMarkup(b,void 0,{...v?.attrs,checked:m}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(n,m)||(c.checked=!c.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([h,m])=>{o.setAttribute(h,m)}),o.dataset.checked=n.attrs.checked,c.checked=n.attrs.checked,s.append(c,a),o.append(s,d),Object.entries(e).forEach(([h,m])=>{o.setAttribute(h,m)}),{dom:o,contentDOM:d,update:h=>h.type!==this.type?!1:(o.dataset.checked=h.attrs.checked,c.checked=h.attrs.checked,!0)}}},addInputRules(){return[Fl({find:gT,type:this.type,getAttributes:n=>({checked:n[n.length-1]==="x"})})]}}),bT=nn.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:n}){return["ul",rt(this.options.HTMLAttributes,n,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:n})=>n.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}}),vT=xt.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:n=>{const e=n.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:n=>n.textAlign?{style:`text-align: ${n.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:n=>({commands:e})=>this.options.alignments.includes(n)?this.options.types.map(t=>e.updateAttributes(t,{textAlign:n})).every(t=>t):!1,unsetTextAlign:()=>({commands:n})=>this.options.types.map(e=>n.resetAttributes(e,"textAlign")).every(e=>e),toggleTextAlign:n=>({editor:e,commands:t})=>this.options.alignments.includes(n)?e.isActive({textAlign:n})?t.unsetTextAlign():t.setTextAlign(n):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),CT=n=>mt({find:/--$/,replace:n??"—"}),xT=n=>mt({find:/\.\.\.$/,replace:n??"…"}),ST=n=>mt({find:/(?:^|[\s{[(<'"\u2018\u201C])(")$/,replace:n??"“"}),ET=n=>mt({find:/"$/,replace:n??"”"}),wT=n=>mt({find:/(?:^|[\s{[(<'"\u2018\u201C])(')$/,replace:n??"‘"}),MT=n=>mt({find:/'$/,replace:n??"’"}),TT=n=>mt({find:/<-$/,replace:n??"←"}),kT=n=>mt({find:/->$/,replace:n??"→"}),AT=n=>mt({find:/\(c\)$/,replace:n??"©"}),RT=n=>mt({find:/\(tm\)$/,replace:n??"™"}),OT=n=>mt({find:/\(sm\)$/,replace:n??"℠"}),NT=n=>mt({find:/\(r\)$/,replace:n??"®"}),DT=n=>mt({find:/(?:^|\s)(1\/2)\s$/,replace:n??"½"}),LT=n=>mt({find:/\+\/-$/,replace:n??"±"}),HT=n=>mt({find:/!=$/,replace:n??"≠"}),zT=n=>mt({find:/<<$/,replace:n??"«"}),BT=n=>mt({find:/>>$/,replace:n??"»"}),jT=n=>mt({find:/\d+\s?([*x])\s?\d+$/,replace:n??"×"}),IT=n=>mt({find:/\^2$/,replace:n??"²"}),VT=n=>mt({find:/\^3$/,replace:n??"³"}),UT=n=>mt({find:/(?:^|\s)(1\/4)\s$/,replace:n??"¼"}),_T=n=>mt({find:/(?:^|\s)(3\/4)\s$/,replace:n??"¾"}),qT=xt.create({name:"typography",addOptions(){return{closeDoubleQuote:"”",closeSingleQuote:"’",copyright:"©",ellipsis:"…",emDash:"—",laquo:"«",leftArrow:"←",multiplication:"×",notEqual:"≠",oneHalf:"½",oneQuarter:"¼",openDoubleQuote:"“",openSingleQuote:"‘",plusMinus:"±",raquo:"»",registeredTrademark:"®",rightArrow:"→",servicemark:"℠",superscriptThree:"³",superscriptTwo:"²",threeQuarters:"¾",trademark:"™"}},addInputRules(){const n=[];return this.options.emDash!==!1&&n.push(CT(this.options.emDash)),this.options.ellipsis!==!1&&n.push(xT(this.options.ellipsis)),this.options.openDoubleQuote!==!1&&n.push(ST(this.options.openDoubleQuote)),this.options.closeDoubleQuote!==!1&&n.push(ET(this.options.closeDoubleQuote)),this.options.openSingleQuote!==!1&&n.push(wT(this.options.openSingleQuote)),this.options.closeSingleQuote!==!1&&n.push(MT(this.options.closeSingleQuote)),this.options.leftArrow!==!1&&n.push(TT(this.options.leftArrow)),this.options.rightArrow!==!1&&n.push(kT(this.options.rightArrow)),this.options.copyright!==!1&&n.push(AT(this.options.copyright)),this.options.trademark!==!1&&n.push(RT(this.options.trademark)),this.options.servicemark!==!1&&n.push(OT(this.options.servicemark)),this.options.registeredTrademark!==!1&&n.push(NT(this.options.registeredTrademark)),this.options.oneHalf!==!1&&n.push(DT(this.options.oneHalf)),this.options.plusMinus!==!1&&n.push(LT(this.options.plusMinus)),this.options.notEqual!==!1&&n.push(HT(this.options.notEqual)),this.options.laquo!==!1&&n.push(zT(this.options.laquo)),this.options.raquo!==!1&&n.push(BT(this.options.raquo)),this.options.multiplication!==!1&&n.push(jT(this.options.multiplication)),this.options.superscriptTwo!==!1&&n.push(IT(this.options.superscriptTwo)),this.options.superscriptThree!==!1&&n.push(VT(this.options.superscriptThree)),this.options.oneQuarter!==!1&&n.push(UT(this.options.oneQuarter)),this.options.threeQuarters!==!1&&n.push(_T(this.options.threeQuarters)),n}}),PT=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,FT=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,KT=jn.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:n=>n.getAttribute("data-color")||n.style.backgroundColor,renderHTML:n=>n.color?{"data-color":n.color,style:`background-color: ${n.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:n}){return["mark",rt(this.options.HTMLAttributes,n),0]},addCommands(){return{setHighlight:n=>({commands:e})=>e.setMark(this.name,n),toggleHighlight:n=>({commands:e})=>e.toggleMark(this.name,n),unsetHighlight:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Lo({find:PT,type:this.type})]},addPasteRules(){return[Ii({find:FT,type:this.type})]}}),$T=jn.create({name:"subscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sub"},{style:"vertical-align",getAttrs(n){return n!=="sub"?!1:null}}]},renderHTML({HTMLAttributes:n}){return["sub",rt(this.options.HTMLAttributes,n),0]},addCommands(){return{setSubscript:()=>({commands:n})=>n.setMark(this.name),toggleSubscript:()=>({commands:n})=>n.toggleMark(this.name),unsetSubscript:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-,":()=>this.editor.commands.toggleSubscript()}}}),ZT=jn.create({name:"superscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sup"},{style:"vertical-align",getAttrs(n){return n!=="super"?!1:null}}]},renderHTML({HTMLAttributes:n}){return["sup",rt(this.options.HTMLAttributes,n),0]},addCommands(){return{setSuperscript:()=>({commands:n})=>n.setMark(this.name),toggleSuperscript:()=>({commands:n})=>n.toggleMark(this.name),unsetSuperscript:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-.":()=>this.editor.commands.toggleSuperscript()}}}),GT=jn.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",rt(this.options.HTMLAttributes,n),0]},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),YT="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",JT="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",Kl=(n,e)=>{for(const t in e)n[t]=e[t];return n},N1="numeric",D1="ascii",L1="alpha",ca="asciinumeric",ia="alphanumeric",H1="domain",db="emoji",QT="scheme",XT="slashscheme",_p="whitespace";function WT(n,e){return n in e||(e[n]=[]),e[n]}function vo(n,e,t){e[N1]&&(e[ca]=!0,e[ia]=!0),e[D1]&&(e[ca]=!0,e[L1]=!0),e[ca]&&(e[ia]=!0),e[L1]&&(e[ia]=!0),e[ia]&&(e[H1]=!0),e[db]&&(e[H1]=!0);for(const r in e){const o=WT(r,t);o.indexOf(n)<0&&o.push(n)}}function ek(n,e){const t={};for(const r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function xn(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}xn.groups={};xn.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){const o=e.jr[r][0],s=e.jr[r][1];if(s&&o.test(n))return s}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let o=0;o<n.length;o++)this.tt(n[o],e,t,r)},tr(n,e,t,r){r=r||xn.groups;let o;return e&&e.j?o=e:(o=new xn(e),t&&r&&vo(e,t,r)),this.jr.push([n,o]),o},ts(n,e,t,r){let o=this;const s=n.length;if(!s)return o;for(let a=0;a<s-1;a++)o=o.tt(n[a]);return o.tt(n[s-1],e,t,r)},tt(n,e,t,r){r=r||xn.groups;const o=this;if(e&&e.j)return o.j[n]=e,e;const s=e;let a,c=o.go(n);if(c?(a=new xn,Kl(a.j,c.j),a.jr.push.apply(a.jr,c.jr),a.jd=c.jd,a.t=c.t):a=new xn,s){if(r)if(a.t&&typeof a.t=="string"){const d=Kl(ek(a.t,r),t);vo(s,d,r)}else t&&vo(s,t,r);a.t=s}return o.j[n]=a,a}};const ke=(n,e,t,r,o)=>n.ta(e,t,r,o),dt=(n,e,t,r,o)=>n.tr(e,t,r,o),k4=(n,e,t,r,o)=>n.ts(e,t,r,o),W=(n,e,t,r,o)=>n.tt(e,t,r,o),_r="WORD",z1="UWORD",hb="ASCIINUMERICAL",pb="ALPHANUMERICAL",Ra="LOCALHOST",B1="TLD",j1="UTLD",wc="SCHEME",Dl="SLASH_SCHEME",Om="NUM",I1="WS",Nm="NL",fa="OPENBRACE",da="CLOSEBRACE",qc="OPENBRACKET",Pc="CLOSEBRACKET",Fc="OPENPAREN",Kc="CLOSEPAREN",$c="OPENANGLEBRACKET",Zc="CLOSEANGLEBRACKET",Gc="FULLWIDTHLEFTPAREN",Yc="FULLWIDTHRIGHTPAREN",Jc="LEFTCORNERBRACKET",Qc="RIGHTCORNERBRACKET",Xc="LEFTWHITECORNERBRACKET",Wc="RIGHTWHITECORNERBRACKET",ef="FULLWIDTHLESSTHAN",tf="FULLWIDTHGREATERTHAN",nf="AMPERSAND",rf="APOSTROPHE",of="ASTERISK",Mi="AT",lf="BACKSLASH",sf="BACKTICK",af="CARET",Ri="COLON",Dm="COMMA",uf="DOLLAR",hr="DOT",cf="EQUALS",Lm="EXCLAMATION",Gn="HYPHEN",ha="PERCENT",ff="PIPE",df="PLUS",hf="POUND",pa="QUERY",Hm="QUOTE",mb="FULLWIDTHMIDDLEDOT",zm="SEMI",pr="SLASH",ma="TILDE",pf="UNDERSCORE",gb="EMOJI",mf="SYM";var yb=Object.freeze({__proto__:null,ALPHANUMERICAL:pb,AMPERSAND:nf,APOSTROPHE:rf,ASCIINUMERICAL:hb,ASTERISK:of,AT:Mi,BACKSLASH:lf,BACKTICK:sf,CARET:af,CLOSEANGLEBRACKET:Zc,CLOSEBRACE:da,CLOSEBRACKET:Pc,CLOSEPAREN:Kc,COLON:Ri,COMMA:Dm,DOLLAR:uf,DOT:hr,EMOJI:gb,EQUALS:cf,EXCLAMATION:Lm,FULLWIDTHGREATERTHAN:tf,FULLWIDTHLEFTPAREN:Gc,FULLWIDTHLESSTHAN:ef,FULLWIDTHMIDDLEDOT:mb,FULLWIDTHRIGHTPAREN:Yc,HYPHEN:Gn,LEFTCORNERBRACKET:Jc,LEFTWHITECORNERBRACKET:Xc,LOCALHOST:Ra,NL:Nm,NUM:Om,OPENANGLEBRACKET:$c,OPENBRACE:fa,OPENBRACKET:qc,OPENPAREN:Fc,PERCENT:ha,PIPE:ff,PLUS:df,POUND:hf,QUERY:pa,QUOTE:Hm,RIGHTCORNERBRACKET:Qc,RIGHTWHITECORNERBRACKET:Wc,SCHEME:wc,SEMI:zm,SLASH:pr,SLASH_SCHEME:Dl,SYM:mf,TILDE:ma,TLD:B1,UNDERSCORE:pf,UTLD:j1,UWORD:z1,WORD:_r,WS:I1});const Vr=/[a-z]/,Js=/\p{L}/u,qp=/\p{Emoji}/u,Ur=/\d/,Pp=/\s/,A4="\r",Fp=`
`,tk="️",nk="‍",Kp="￼";let cc=null,fc=null;function rk(n=[]){const e={};xn.groups=e;const t=new xn;cc==null&&(cc=R4(YT)),fc==null&&(fc=R4(JT)),W(t,"'",rf),W(t,"{",fa),W(t,"}",da),W(t,"[",qc),W(t,"]",Pc),W(t,"(",Fc),W(t,")",Kc),W(t,"<",$c),W(t,">",Zc),W(t,"（",Gc),W(t,"）",Yc),W(t,"「",Jc),W(t,"」",Qc),W(t,"『",Xc),W(t,"』",Wc),W(t,"＜",ef),W(t,"＞",tf),W(t,"&",nf),W(t,"*",of),W(t,"@",Mi),W(t,"`",sf),W(t,"^",af),W(t,":",Ri),W(t,",",Dm),W(t,"$",uf),W(t,".",hr),W(t,"=",cf),W(t,"!",Lm),W(t,"-",Gn),W(t,"%",ha),W(t,"|",ff),W(t,"+",df),W(t,"#",hf),W(t,"?",pa),W(t,'"',Hm),W(t,"/",pr),W(t,";",zm),W(t,"~",ma),W(t,"_",pf),W(t,"\\",lf),W(t,"・",mb);const r=dt(t,Ur,Om,{[N1]:!0});dt(r,Ur,r);const o=dt(r,Vr,hb,{[ca]:!0}),s=dt(r,Js,pb,{[ia]:!0}),a=dt(t,Vr,_r,{[D1]:!0});dt(a,Ur,o),dt(a,Vr,a),dt(o,Ur,o),dt(o,Vr,o);const c=dt(t,Js,z1,{[L1]:!0});dt(c,Vr),dt(c,Ur,s),dt(c,Js,c),dt(s,Ur,s),dt(s,Vr),dt(s,Js,s);const d=W(t,Fp,Nm,{[_p]:!0}),h=W(t,A4,I1,{[_p]:!0}),m=dt(t,Pp,I1,{[_p]:!0});W(t,Kp,m),W(h,Fp,d),W(h,Kp,m),dt(h,Pp,m),W(m,A4),W(m,Fp),dt(m,Pp,m),W(m,Kp,m);const g=dt(t,qp,gb,{[db]:!0});W(g,"#"),dt(g,qp,g),W(g,tk,g);const b=W(g,nk);W(b,"#"),dt(b,qp,g);const v=[[Vr,a],[Ur,o]],C=[[Vr,null],[Js,c],[Ur,s]];for(let x=0;x<cc.length;x++)Ci(t,cc[x],B1,_r,v);for(let x=0;x<fc.length;x++)Ci(t,fc[x],j1,z1,C);vo(B1,{tld:!0,ascii:!0},e),vo(j1,{utld:!0,alpha:!0},e),Ci(t,"file",wc,_r,v),Ci(t,"mailto",wc,_r,v),Ci(t,"http",Dl,_r,v),Ci(t,"https",Dl,_r,v),Ci(t,"ftp",Dl,_r,v),Ci(t,"ftps",Dl,_r,v),vo(wc,{scheme:!0,ascii:!0},e),vo(Dl,{slashscheme:!0,ascii:!0},e),n=n.sort((x,M)=>x[0]>M[0]?1:-1);for(let x=0;x<n.length;x++){const M=n[x][0],O=n[x][1]?{[QT]:!0}:{[XT]:!0};M.indexOf("-")>=0?O[H1]=!0:Vr.test(M)?Ur.test(M)?O[ca]=!0:O[D1]=!0:O[N1]=!0,k4(t,M,M,O)}return k4(t,"localhost",Ra,{ascii:!0}),t.jd=new xn(mf),{start:t,tokens:Kl({groups:e},yb)}}function bb(n,e){const t=ik(e.replace(/[A-Z]/g,c=>c.toLowerCase())),r=t.length,o=[];let s=0,a=0;for(;a<r;){let c=n,d=null,h=0,m=null,g=-1,b=-1;for(;a<r&&(d=c.go(t[a]));)c=d,c.accepts()?(g=0,b=0,m=c):g>=0&&(g+=t[a].length,b++),h+=t[a].length,s+=t[a].length,a++;s-=g,a-=b,h-=g,o.push({t:m.t,v:e.slice(s-h,s),s:s-h,e:s})}return o}function ik(n){const e=[],t=n.length;let r=0;for(;r<t;){let o=n.charCodeAt(r),s,a=o<55296||o>56319||r+1===t||(s=n.charCodeAt(r+1))<56320||s>57343?n[r]:n.slice(r,r+2);e.push(a),r+=a.length}return e}function Ci(n,e,t,r,o){let s;const a=e.length;for(let c=0;c<a-1;c++){const d=e[c];n.j[d]?s=n.j[d]:(s=new xn(r),s.jr=o.slice(),n.j[d]=s),n=s}return s=new xn(t),s.jr=o.slice(),n.j[e[a-1]]=s,s}function R4(n){const e=[],t=[];let r=0,o="0123456789";for(;r<n.length;){let s=0;for(;o.indexOf(n[r+s])>=0;)s++;if(s>0){e.push(t.join(""));for(let a=parseInt(n.substring(r,r+s),10);a>0;a--)t.pop();r+=s}else t.push(n[r]),r++}return e}const Oa={defaultProtocol:"http",events:null,format:O4,formatHref:O4,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Bm(n,e=null){let t=Kl({},Oa);n&&(t=Kl(t,n instanceof Bm?n.o:n));const r=t.ignoreTags,o=[];for(let s=0;s<r.length;s++)o.push(r[s].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=o}Bm.prototype={o:Oa,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const r=e!=null;let o=this.o[n];return o&&(typeof o=="object"?(o=t.t in o?o[t.t]:Oa[n],typeof o=="function"&&r&&(o=o(e,t))):typeof o=="function"&&r&&(o=o(e,t.t,t)),o)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function O4(n){return n}function vb(n,e){this.t="token",this.v=n,this.tk=e}vb.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"…":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=Oa.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),o=n.get("tagName",t,e),s=this.toFormattedString(n),a={},c=n.get("className",t,e),d=n.get("target",t,e),h=n.get("rel",t,e),m=n.getObj("attributes",t,e),g=n.getObj("events",t,e);return a.href=r,c&&(a.class=c),d&&(a.target=d),h&&(a.rel=h),m&&Kl(a,m),{tagName:o,attributes:a,content:s,eventListeners:g}}};function qf(n,e){class t extends vb{constructor(o,s){super(o,s),this.t=n}}for(const r in e)t.prototype[r]=e[r];return t.t=n,t}const N4=qf("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),D4=qf("text"),ok=qf("nl"),dc=qf("url",{isLink:!0,toHref(n=Oa.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==Ra&&n[1].t===Ri}}),Zn=n=>new xn(n);function lk({groups:n}){const e=n.domain.concat([nf,of,Mi,lf,sf,af,uf,cf,Gn,Om,ha,ff,df,hf,pr,mf,ma,pf]),t=[rf,Ri,Dm,hr,Lm,ha,pa,Hm,zm,$c,Zc,fa,da,Pc,qc,Fc,Kc,Gc,Yc,Jc,Qc,Xc,Wc,ef,tf],r=[nf,rf,of,lf,sf,af,uf,cf,Gn,fa,da,ha,ff,df,hf,pa,pr,mf,ma,pf],o=Zn(),s=W(o,ma);ke(s,r,s),ke(s,n.domain,s);const a=Zn(),c=Zn(),d=Zn();ke(o,n.domain,a),ke(o,n.scheme,c),ke(o,n.slashscheme,d),ke(a,r,s),ke(a,n.domain,a);const h=W(a,Mi);W(s,Mi,h),W(c,Mi,h),W(d,Mi,h);const m=W(s,hr);ke(m,r,s),ke(m,n.domain,s);const g=Zn();ke(h,n.domain,g),ke(g,n.domain,g);const b=W(g,hr);ke(b,n.domain,g);const v=Zn(N4);ke(b,n.tld,v),ke(b,n.utld,v),W(h,Ra,v);const C=W(g,Gn);W(C,Gn,C),ke(C,n.domain,g),ke(v,n.domain,g),W(v,hr,b),W(v,Gn,C);const x=W(v,Ri);ke(x,n.numeric,N4);const M=W(a,Gn),k=W(a,hr);W(M,Gn,M),ke(M,n.domain,a),ke(k,r,s),ke(k,n.domain,a);const O=Zn(dc);ke(k,n.tld,O),ke(k,n.utld,O),ke(O,n.domain,a),ke(O,r,s),W(O,hr,k),W(O,Gn,M),W(O,Mi,h);const D=W(O,Ri),P=Zn(dc);ke(D,n.numeric,P);const I=Zn(dc),Q=Zn();ke(I,e,I),ke(I,t,Q),ke(Q,e,I),ke(Q,t,Q),W(O,pr,I),W(P,pr,I);const te=W(c,Ri),X=W(d,Ri),se=W(X,pr),ne=W(se,pr);ke(c,n.domain,a),W(c,hr,k),W(c,Gn,M),ke(d,n.domain,a),W(d,hr,k),W(d,Gn,M),ke(te,n.domain,I),W(te,pr,I),W(te,pa,I),ke(ne,n.domain,I),ke(ne,e,I),W(ne,pr,I);const me=[[fa,da],[qc,Pc],[Fc,Kc],[$c,Zc],[Gc,Yc],[Jc,Qc],[Xc,Wc],[ef,tf]];for(let he=0;he<me.length;he++){const[xe,re]=me[he],$=W(I,xe);W(Q,xe,$),W($,re,I);const H=Zn(dc);ke($,e,H);const _=Zn();ke($,t),ke(H,e,H),ke(H,t,_),ke(_,e,H),ke(_,t,_),W(H,re,I),W(_,re,I)}return W(o,Ra,O),W(o,Nm,ok),{start:o,tokens:yb}}function sk(n,e,t){let r=t.length,o=0,s=[],a=[];for(;o<r;){let c=n,d=null,h=null,m=0,g=null,b=-1;for(;o<r&&!(d=c.go(t[o].t));)a.push(t[o++]);for(;o<r&&(h=d||c.go(t[o].t));)d=null,c=h,c.accepts()?(b=0,g=c):b>=0&&b++,o++,m++;if(b<0)o-=m,o<r&&(a.push(t[o]),o++);else{a.length>0&&(s.push($p(D4,e,a)),a=[]),o-=b,m-=b;const v=g.t,C=t.slice(o-m,o);s.push($p(v,e,C))}}return a.length>0&&s.push($p(D4,e,a)),s}function $p(n,e,t){const r=t[0].s,o=t[t.length-1].e,s=e.slice(r,o);return new n(s,t)}const ak=typeof console<"u"&&console&&console.warn||(()=>{}),uk="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",it={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function ck(){return xn.groups={},it.scanner=null,it.parser=null,it.tokenQueue=[],it.pluginQueue=[],it.customSchemes=[],it.initialized=!1,it}function L4(n,e=!1){if(it.initialized&&ak(`linkifyjs: already initialized - will not register custom scheme "${n}" ${uk}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);it.customSchemes.push([n,e])}function fk(){it.scanner=rk(it.customSchemes);for(let n=0;n<it.tokenQueue.length;n++)it.tokenQueue[n][1]({scanner:it.scanner});it.parser=lk(it.scanner.tokens);for(let n=0;n<it.pluginQueue.length;n++)it.pluginQueue[n][1]({scanner:it.scanner,parser:it.parser});return it.initialized=!0,it}function jm(n){return it.initialized||fk(),sk(it.parser.start,n,bb(it.scanner.start,n))}jm.scan=bb;function Cb(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const r=new Bm(t),o=jm(n),s=[];for(let a=0;a<o.length;a++){const c=o[a];c.isLink&&(!e||c.t===e)&&r.check(c)&&s.push(c.toFormattedObject(r))}return s}function dk(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function hk(n){return new pt({key:new $t("autolink"),appendTransaction:(e,t,r)=>{const o=e.some(h=>h.docChanged)&&!t.doc.eq(r.doc),s=e.some(h=>h.getMeta("preventAutolink"));if(!o||s)return;const{tr:a}=r,c=ew(t.doc,[...e]);if(aw(c).forEach(({newRange:h})=>{const m=nw(r.doc,h,v=>v.isTextblock);let g,b;if(m.length>1?(g=m[0],b=r.doc.textBetween(g.pos,g.pos+g.node.nodeSize,void 0," ")):m.length&&r.doc.textBetween(h.from,h.to," "," ").endsWith(" ")&&(g=m[0],b=r.doc.textBetween(g.pos,h.to,void 0," ")),g&&b){const v=b.split(" ").filter(k=>k!=="");if(v.length<=0)return!1;const C=v[v.length-1],x=g.pos+b.lastIndexOf(C);if(!C)return!1;const M=jm(C).map(k=>k.toObject(n.defaultProtocol));if(!dk(M))return!1;M.filter(k=>k.isLink).map(k=>({...k,from:x+k.start+1,to:x+k.end+1})).filter(k=>r.schema.marks.code?!r.doc.rangeHasMark(k.from,k.to,r.schema.marks.code):!0).filter(k=>n.validate(k.value)).filter(k=>n.shouldAutoLink(k.value)).forEach(k=>{wm(k.from,k.to,r.doc).some(O=>O.mark.type===n.type)||a.addMark(k.from,k.to,n.type.create({href:k.href}))})}}),!!a.steps.length)return a}})}function pk(n){return new pt({key:new $t("handleClickLink"),props:{handleClick:(e,t,r)=>{var o,s;if(r.button!==0||!e.editable)return!1;let a=r.target;const c=[];for(;a.nodeName!=="DIV";)c.push(a),a=a.parentNode;if(!c.find(b=>b.nodeName==="A"))return!1;const d=tb(e.state,n.type.name),h=r.target,m=(o=h?.href)!==null&&o!==void 0?o:d.href,g=(s=h?.target)!==null&&s!==void 0?s:d.target;return h&&m?(window.open(m,g),!0):!1}}})}function mk(n){return new pt({key:new $t("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{state:o}=e,{selection:s}=o,{empty:a}=s;if(a)return!1;let c="";r.content.forEach(h=>{c+=h.textContent});const d=Cb(c,{defaultProtocol:n.defaultProtocol}).find(h=>h.isLink&&h.value===c);return!c||!d?!1:n.editor.commands.setMark(n.type,{href:d.href})}}})}const gk=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function uo(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const o=typeof r=="string"?r:r.scheme;o&&t.push(o)}),!n||n.replace(gk,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const yk=jn.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){L4(n);return}L4(n.scheme,n.optionalSlashes)})},onDestroy(){ck()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!uo(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!uo(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!uo(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",rt(this.options.HTMLAttributes,n),0]:["a",rt(this.options.HTMLAttributes,{...n,href:""}),0]},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!uo(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!uo(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Ii({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:r}=this.options,o=Cb(n).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:a=>!!uo(a,t),protocols:t,defaultProtocol:r}));o.length&&o.forEach(s=>e.push({text:s.value,data:{href:s.href},index:s.start}))}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(hk({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:o=>!!uo(o,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&n.push(pk({type:this.type})),this.options.linkOnPaste&&n.push(mk({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),n}}),bk=yk.extend({inclusive:!1,parseHTML(){return[{tag:'a[href]:not([data-type="button"]):not([href *= "javascript:" i])'}]},addProseMirrorPlugins(){const{editor:n}=this;return[...this.parent?.()||[],new pt({props:{handleKeyDown:(e,t)=>{const{selection:r}=n.state;return t.key==="Escape"&&r.empty!==!0&&n.commands.focus(r.to,{scrollIntoView:!1}),!1},handleClick(e,t){const{schema:r,doc:o,tr:s}=e.state;let a;if(r.marks.link&&(a=If(o.resolve(t),r.marks.link)),!a)return;const{from:c,to:d}=a,h=Math.min(c,d),m=Math.max(c,d);if(t<h||t>m)return;const g=o.resolve(h),b=o.resolve(m),v=s.setSelection(new ve(g,b));e.dispatch(v)}}})]}}),vk=xt.create({name:"selection",addProseMirrorPlugins(){const{editor:n}=this;return[new pt({key:new $t("selection"),props:{decorations(e){return e.selection.empty||n.isFocused===!0||!n.isEditable||Wn(e.selection)?null:bt.create(e.doc,[En.inline(e.selection.from,e.selection.to,{class:"selection"})])}}})]}});function H4({types:n,node:e}){return e?Array.isArray(n)?n.includes(e.type):e.type===n:!1}const Ck=xt.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:["paragraph"]}},addProseMirrorPlugins(){const n=new $t(this.name),e=Object.entries(this.editor.schema.nodes).map(([,t])=>t).filter(t=>this.options.notAfter.includes(t.name));return[new pt({key:n,appendTransaction:(t,r,o)=>{const{doc:s,tr:a,schema:c}=o,d=n.getState(o),h=s.content.size,m=c.nodes[this.options.node];return d&&m?a.insert(h,m.create()):null},state:{init:(t,r)=>{const o=r.tr.doc.lastChild;return!H4({node:o,types:e})},apply:(t,r)=>{if(!t.docChanged)return r;const o=t.doc.lastChild;return!H4({node:o,types:e})}}})]}});function Pf(){return typeof window<"u"}function Pi(n){return xb(n)?(n.nodeName||"").toLowerCase():"#document"}function Mn(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function vr(n){var e;return(e=(xb(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function xb(n){return Pf()?n instanceof Node||n instanceof Mn(n).Node:!1}function nt(n){return Pf()?n instanceof Element||n instanceof Mn(n).Element:!1}function vt(n){return Pf()?n instanceof HTMLElement||n instanceof Mn(n).HTMLElement:!1}function V1(n){return!Pf()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Mn(n).ShadowRoot}function Va(n){const{overflow:e,overflowX:t,overflowY:r,display:o}=Xn(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(o)}function xk(n){return["table","td","th"].includes(Pi(n))}function Ff(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function Im(n){const e=Kf(),t=nt(n)?Xn(n):n;return["transform","translate","scale","rotate","perspective"].some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function Sk(n){let e=Jr(n);for(;vt(e)&&!Yr(e);){if(Im(e))return e;if(Ff(e))return null;e=Jr(e)}return null}function Kf(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Yr(n){return["html","body","#document"].includes(Pi(n))}function Xn(n){return Mn(n).getComputedStyle(n)}function $f(n){return nt(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Jr(n){if(Pi(n)==="html")return n;const e=n.assignedSlot||n.parentNode||V1(n)&&n.host||vr(n);return V1(e)?e.host:e}function Sb(n){const e=Jr(n);return Yr(e)?n.ownerDocument?n.ownerDocument.body:n.body:vt(e)&&Va(e)?e:Sb(e)}function Bi(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const o=Sb(n),s=o===((r=n.ownerDocument)==null?void 0:r.body),a=Mn(o);if(s){const c=U1(a);return e.concat(a,a.visualViewport||[],Va(o)?o:[],c&&t?Bi(c):[])}return e.concat(o,Bi(o,[],t))}function U1(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}const gf=Math.min,Ao=Math.max,yf=Math.round,zl=Math.floor,gr=n=>({x:n,y:n}),Ek={left:"right",right:"left",bottom:"top",top:"bottom"},wk={start:"end",end:"start"};function z4(n,e,t){return Ao(n,gf(e,t))}function $l(n,e){return typeof n=="function"?n(e):n}function Vi(n){return n.split("-")[0]}function Zf(n){return n.split("-")[1]}function Vm(n){return n==="x"?"y":"x"}function Eb(n){return n==="y"?"height":"width"}function $r(n){return["top","bottom"].includes(Vi(n))?"y":"x"}function wb(n){return Vm($r(n))}function Mk(n,e,t){t===void 0&&(t=!1);const r=Zf(n),o=wb(n),s=Eb(o);let a=o==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=bf(a)),[a,bf(a)]}function Tk(n){const e=bf(n);return[_1(n),e,_1(e)]}function _1(n){return n.replace(/start|end/g,e=>wk[e])}function kk(n,e,t){const r=["left","right"],o=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(n){case"top":case"bottom":return t?e?o:r:e?r:o;case"left":case"right":return e?s:a;default:return[]}}function Ak(n,e,t,r){const o=Zf(n);let s=kk(Vi(n),t==="start",r);return o&&(s=s.map(a=>a+"-"+o),e&&(s=s.concat(s.map(_1)))),s}function bf(n){return n.replace(/left|right|bottom|top/g,e=>Ek[e])}function Rk(n){return{top:0,right:0,bottom:0,left:0,...n}}function Ok(n){return typeof n!="number"?Rk(n):{top:n,right:n,bottom:n,left:n}}function vf(n){const{x:e,y:t,width:r,height:o}=n;return{width:r,height:o,top:t,left:e,right:e+r,bottom:t+o,x:e,y:t}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Nk=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Cf=Nk.join(","),Mb=typeof Element>"u",Zl=Mb?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,xf=!Mb&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n?.ownerDocument},Sf=function n(e,t){var r;t===void 0&&(t=!0);var o=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=o===""||o==="true",a=s||t&&e&&n(e.parentNode);return a},Dk=function(e){var t,r=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return r===""||r==="true"},Tb=function(e,t,r){if(Sf(e))return[];var o=Array.prototype.slice.apply(e.querySelectorAll(Cf));return t&&Zl.call(e,Cf)&&o.unshift(e),o=o.filter(r),o},kb=function n(e,t,r){for(var o=[],s=Array.from(e);s.length;){var a=s.shift();if(!Sf(a,!1))if(a.tagName==="SLOT"){var c=a.assignedElements(),d=c.length?c:a.children,h=n(d,!0,r);r.flatten?o.push.apply(o,h):o.push({scopeParent:a,candidates:h})}else{var m=Zl.call(a,Cf);m&&r.filter(a)&&(t||!e.includes(a))&&o.push(a);var g=a.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(a),b=!Sf(g,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(a));if(g&&b){var v=n(g===!0?a.children:g.children,!0,r);r.flatten?o.push.apply(o,v):o.push({scopeParent:a,candidates:v})}else s.unshift.apply(s,a.children)}}return o},Ab=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Rb=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||Dk(e))&&!Ab(e)?0:e.tabIndex},Lk=function(e,t){var r=Rb(e);return r<0&&t&&!Ab(e)?0:r},Hk=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},Ob=function(e){return e.tagName==="INPUT"},zk=function(e){return Ob(e)&&e.type==="hidden"},Bk=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return t},jk=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]},Ik=function(e){if(!e.name)return!0;var t=e.form||xf(e),r=function(c){return t.querySelectorAll('input[type="radio"][name="'+c+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(e.name));else try{o=r(e.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var s=jk(o,e.form);return!s||s===e},Vk=function(e){return Ob(e)&&e.type==="radio"},Uk=function(e){return Vk(e)&&!Ik(e)},_k=function(e){var t,r=e&&xf(e),o=(t=r)===null||t===void 0?void 0:t.host,s=!1;if(r&&r!==e){var a,c,d;for(s=!!((a=o)!==null&&a!==void 0&&(c=a.ownerDocument)!==null&&c!==void 0&&c.contains(o)||e!=null&&(d=e.ownerDocument)!==null&&d!==void 0&&d.contains(e));!s&&o;){var h,m,g;r=xf(o),o=(h=r)===null||h===void 0?void 0:h.host,s=!!((m=o)!==null&&m!==void 0&&(g=m.ownerDocument)!==null&&g!==void 0&&g.contains(o))}}return s},B4=function(e){var t=e.getBoundingClientRect(),r=t.width,o=t.height;return r===0&&o===0},qk=function(e,t){var r=t.displayCheck,o=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=Zl.call(e,"details>summary:first-of-type"),a=s?e.parentElement:e;if(Zl.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof o=="function"){for(var c=e;e;){var d=e.parentElement,h=xf(e);if(d&&!d.shadowRoot&&o(d)===!0)return B4(e);e.assignedSlot?e=e.assignedSlot:!d&&h!==e.ownerDocument?e=h.host:e=d}e=c}if(_k(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return B4(e);return!1},Pk=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var r=0;r<t.children.length;r++){var o=t.children.item(r);if(o.tagName==="LEGEND")return Zl.call(t,"fieldset[disabled] *")?!0:!o.contains(e)}return!0}t=t.parentElement}return!1},q1=function(e,t){return!(t.disabled||Sf(t)||zk(t)||qk(t,e)||Bk(t)||Pk(t))},P1=function(e,t){return!(Uk(t)||Rb(t)<0||!q1(e,t))},Fk=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},Kk=function n(e){var t=[],r=[];return e.forEach(function(o,s){var a=!!o.scopeParent,c=a?o.scopeParent:o,d=Lk(c,a),h=a?n(o.candidates):c;d===0?a?t.push.apply(t,h):t.push(c):r.push({documentOrder:s,tabIndex:d,item:o,isScope:a,content:h})}),r.sort(Hk).reduce(function(o,s){return s.isScope?o.push.apply(o,s.content):o.push(s.content),o},[]).concat(t)},Gf=function(e,t){t=t||{};var r;return t.getShadowRoot?r=kb([e],t.includeContainer,{filter:P1.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:Fk}):r=Tb(e,t.includeContainer,P1.bind(null,t)),Kk(r)},$k=function(e,t){t=t||{};var r;return t.getShadowRoot?r=kb([e],t.includeContainer,{filter:q1.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):r=Tb(e,t.includeContainer,q1.bind(null,t)),r},Nb=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Zl.call(e,Cf)===!1?!1:P1(t,e)};function Db(){const n=navigator.userAgentData;return n!=null&&n.platform?n.platform:navigator.platform}function Lb(){const n=navigator.userAgentData;return n&&Array.isArray(n.brands)?n.brands.map(e=>{let{brand:t,version:r}=e;return t+"/"+r}).join(" "):navigator.userAgent}function Hb(){return/apple/i.test(navigator.vendor)}function F1(){const n=/android/i;return n.test(Db())||n.test(Lb())}function Zk(){return Db().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function zb(){return Lb().includes("jsdom/")}const j4="data-floating-ui-focusable",Gk="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])",Zp="ArrowLeft",Gp="ArrowRight",Yk="ArrowUp",Jk="ArrowDown";function mr(n){let e=n.activeElement;for(;((t=e)==null||(t=t.shadowRoot)==null?void 0:t.activeElement)!=null;){var t;e=e.shadowRoot.activeElement}return e}function _t(n,e){if(!n||!e)return!1;const t=e.getRootNode==null?void 0:e.getRootNode();if(n.contains(e))return!0;if(t&&V1(t)){let r=e;for(;r;){if(n===r)return!0;r=r.parentNode||r.host}}return!1}function Fr(n){return"composedPath"in n?n.composedPath()[0]:n.target}function Yp(n,e){if(e==null)return!1;if("composedPath"in n)return n.composedPath().includes(e);const t=n;return t.target!=null&&e.contains(t.target)}function Qk(n){return n.matches("html,body")}function Kt(n){return n?.ownerDocument||document}function Um(n){return vt(n)&&n.matches(Gk)}function K1(n){return n?n.getAttribute("role")==="combobox"&&Um(n):!1}function Xk(n){if(!n||zb())return!0;try{return n.matches(":focus-visible")}catch{return!0}}function Ef(n){return n?n.hasAttribute(j4)?n:n.querySelector("["+j4+"]")||n:null}function jl(n,e){let t=n.filter(o=>{var s;return o.parentId===e&&((s=o.context)==null?void 0:s.open)}),r=t;for(;r.length;)r=n.filter(o=>{var s;return(s=r)==null?void 0:s.some(a=>{var c;return o.parentId===a.id&&((c=o.context)==null?void 0:c.open)})}),t=t.concat(r);return t}function Wk(n,e){let t,r=-1;function o(s,a){a>r&&(t=s,r=a),jl(n,s).forEach(d=>{o(d.id,a+1)})}return o(e,0),n.find(s=>s.id===t)}function I4(n,e){var t;let r=[],o=(t=n.find(s=>s.id===e))==null?void 0:t.parentId;for(;o;){const s=n.find(a=>a.id===o);o=s?.parentId,s&&(r=r.concat(s))}return r}function qt(n){n.preventDefault(),n.stopPropagation()}function eA(n){return"nativeEvent"in n}function Bb(n){return n.mozInputSource===0&&n.isTrusted?!0:F1()&&n.pointerType?n.type==="click"&&n.buttons===1:n.detail===0&&!n.pointerType}function jb(n){return zb()?!1:!F1()&&n.width===0&&n.height===0||F1()&&n.width===1&&n.height===1&&n.pressure===0&&n.detail===0&&n.pointerType==="mouse"||n.width<1&&n.height<1&&n.pressure===0&&n.detail===0&&n.pointerType==="touch"}function Na(n,e){const t=["mouse","pen"];return e||t.push("",void 0),t.includes(n)}var tA=typeof document<"u",nA=function(){},tt=tA?w.useLayoutEffect:nA;const rA={...m3};function Sn(n){const e=w.useRef(n);return tt(()=>{e.current=n}),e}const iA=rA.useInsertionEffect,oA=iA||(n=>n());function Ct(n){const e=w.useRef(()=>{});return oA(()=>{e.current=n}),w.useCallback(function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}function hc(n,e,t){return Math.floor(n/e)!==t}function ga(n,e){return e<0||e>=n.current.length}function Jp(n,e){return Wt(n,{disabledIndices:e})}function V4(n,e){return Wt(n,{decrement:!0,startingIndex:n.current.length,disabledIndices:e})}function Wt(n,e){let{startingIndex:t=-1,decrement:r=!1,disabledIndices:o,amount:s=1}=e===void 0?{}:e,a=t;do a+=r?-s:s;while(a>=0&&a<=n.current.length-1&&Mc(n,a,o));return a}function lA(n,e){let{event:t,orientation:r,loop:o,rtl:s,cols:a,disabledIndices:c,minIndex:d,maxIndex:h,prevIndex:m,stopEvent:g=!1}=e,b=m;if(t.key===Yk){if(g&&qt(t),m===-1)b=h;else if(b=Wt(n,{startingIndex:b,amount:a,decrement:!0,disabledIndices:c}),o&&(m-a<d||b<0)){const v=m%a,C=h%a,x=h-(C-v);C===v?b=h:b=C>v?x:x-a}ga(n,b)&&(b=m)}if(t.key===Jk&&(g&&qt(t),m===-1?b=d:(b=Wt(n,{startingIndex:m,amount:a,disabledIndices:c}),o&&m+a>h&&(b=Wt(n,{startingIndex:m%a-a,amount:a,disabledIndices:c}))),ga(n,b)&&(b=m)),r==="both"){const v=zl(m/a);t.key===(s?Zp:Gp)&&(g&&qt(t),m%a!==a-1?(b=Wt(n,{startingIndex:m,disabledIndices:c}),o&&hc(b,a,v)&&(b=Wt(n,{startingIndex:m-m%a-1,disabledIndices:c}))):o&&(b=Wt(n,{startingIndex:m-m%a-1,disabledIndices:c})),hc(b,a,v)&&(b=m)),t.key===(s?Gp:Zp)&&(g&&qt(t),m%a!==0?(b=Wt(n,{startingIndex:m,decrement:!0,disabledIndices:c}),o&&hc(b,a,v)&&(b=Wt(n,{startingIndex:m+(a-m%a),decrement:!0,disabledIndices:c}))):o&&(b=Wt(n,{startingIndex:m+(a-m%a),decrement:!0,disabledIndices:c})),hc(b,a,v)&&(b=m));const C=zl(h/a)===v;ga(n,b)&&(o&&C?b=t.key===(s?Gp:Zp)?h:Wt(n,{startingIndex:m-m%a-1,disabledIndices:c}):b=m)}return b}function sA(n,e,t){const r=[];let o=0;return n.forEach((s,a)=>{let{width:c,height:d}=s,h=!1;for(t&&(o=0);!h;){const m=[];for(let g=0;g<c;g++)for(let b=0;b<d;b++)m.push(o+g+b*e);o%e+c<=e&&m.every(g=>r[g]==null)?(m.forEach(g=>{r[g]=a}),h=!0):o++}}),[...r]}function aA(n,e,t,r,o){if(n===-1)return-1;const s=t.indexOf(n),a=e[n];switch(o){case"tl":return s;case"tr":return a?s+a.width-1:s;case"bl":return a?s+(a.height-1)*r:s;case"br":return t.lastIndexOf(n)}}function uA(n,e){return e.flatMap((t,r)=>n.includes(t)?[r]:[])}function Mc(n,e,t){if(typeof t=="function")return t(e);if(t)return t.includes(e);const r=n.current[e];return r==null||r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true"}const Ua=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function Ib(n,e){const t=Gf(n,Ua()),r=t.length;if(r===0)return;const o=mr(Kt(n)),s=t.indexOf(o),a=s===-1?e===1?0:r-1:s+e;return t[a]}function Vb(n){return Ib(Kt(n).body,1)||n}function Ub(n){return Ib(Kt(n).body,-1)||n}function ya(n,e){const t=e||n.currentTarget,r=n.relatedTarget;return!r||!_t(t,r)}function cA(n){Gf(n,Ua()).forEach(t=>{t.dataset.tabindex=t.getAttribute("tabindex")||"",t.setAttribute("tabindex","-1")})}function U4(n){n.querySelectorAll("[data-tabindex]").forEach(t=>{const r=t.dataset.tabindex;delete t.dataset.tabindex,r?t.setAttribute("tabindex",r):t.removeAttribute("tabindex")})}function _4(n,e,t){let{reference:r,floating:o}=n;const s=$r(e),a=wb(e),c=Eb(a),d=Vi(e),h=s==="y",m=r.x+r.width/2-o.width/2,g=r.y+r.height/2-o.height/2,b=r[c]/2-o[c]/2;let v;switch(d){case"top":v={x:m,y:r.y-o.height};break;case"bottom":v={x:m,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:g};break;case"left":v={x:r.x-o.width,y:g};break;default:v={x:r.x,y:r.y}}switch(Zf(e)){case"start":v[a]-=b*(t&&h?-1:1);break;case"end":v[a]+=b*(t&&h?-1:1);break}return v}const fA=async(n,e,t)=>{const{placement:r="bottom",strategy:o="absolute",middleware:s=[],platform:a}=t,c=s.filter(Boolean),d=await(a.isRTL==null?void 0:a.isRTL(e));let h=await a.getElementRects({reference:n,floating:e,strategy:o}),{x:m,y:g}=_4(h,r,d),b=r,v={},C=0;for(let x=0;x<c.length;x++){const{name:M,fn:k}=c[x],{x:O,y:D,data:P,reset:I}=await k({x:m,y:g,initialPlacement:r,placement:b,strategy:o,middlewareData:v,rects:h,platform:a,elements:{reference:n,floating:e}});m=O??m,g=D??g,v={...v,[M]:{...v[M],...P}},I&&C<=50&&(C++,typeof I=="object"&&(I.placement&&(b=I.placement),I.rects&&(h=I.rects===!0?await a.getElementRects({reference:n,floating:e,strategy:o}):I.rects),{x:m,y:g}=_4(h,b,d)),x=-1)}return{x:m,y:g,placement:b,strategy:o,middlewareData:v}};async function _b(n,e){var t;e===void 0&&(e={});const{x:r,y:o,platform:s,rects:a,elements:c,strategy:d}=n,{boundary:h="clippingAncestors",rootBoundary:m="viewport",elementContext:g="floating",altBoundary:b=!1,padding:v=0}=$l(e,n),C=Ok(v),M=c[b?g==="floating"?"reference":"floating":g],k=vf(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(M)))==null||t?M:M.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(c.floating)),boundary:h,rootBoundary:m,strategy:d})),O=g==="floating"?{x:r,y:o,width:a.floating.width,height:a.floating.height}:a.reference,D=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c.floating)),P=await(s.isElement==null?void 0:s.isElement(D))?await(s.getScale==null?void 0:s.getScale(D))||{x:1,y:1}:{x:1,y:1},I=vf(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:O,offsetParent:D,strategy:d}):O);return{top:(k.top-I.top+C.top)/P.y,bottom:(I.bottom-k.bottom+C.bottom)/P.y,left:(k.left-I.left+C.left)/P.x,right:(I.right-k.right+C.right)/P.x}}const dA=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:o,middlewareData:s,rects:a,initialPlacement:c,platform:d,elements:h}=e,{mainAxis:m=!0,crossAxis:g=!0,fallbackPlacements:b,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:x=!0,...M}=$l(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const k=Vi(o),O=$r(c),D=Vi(c)===c,P=await(d.isRTL==null?void 0:d.isRTL(h.floating)),I=b||(D||!x?[bf(c)]:Tk(c)),Q=C!=="none";!b&&Q&&I.push(...Ak(c,x,C,P));const te=[c,...I],X=await _b(e,M),se=[];let ne=((r=s.flip)==null?void 0:r.overflows)||[];if(m&&se.push(X[k]),g){const re=Mk(o,a,P);se.push(X[re[0]],X[re[1]])}if(ne=[...ne,{placement:o,overflows:se}],!se.every(re=>re<=0)){var me,he;const re=(((me=s.flip)==null?void 0:me.index)||0)+1,$=te[re];if($&&(!(g==="alignment"?O!==$r($):!1)||ne.every(z=>z.overflows[0]>0&&$r(z.placement)===O)))return{data:{index:re,overflows:ne},reset:{placement:$}};let H=(he=ne.filter(_=>_.overflows[0]<=0).sort((_,z)=>_.overflows[1]-z.overflows[1])[0])==null?void 0:he.placement;if(!H)switch(v){case"bestFit":{var xe;const _=(xe=ne.filter(z=>{if(Q){const Y=$r(z.placement);return Y===O||Y==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(Y=>Y>0).reduce((Y,A)=>Y+A,0)]).sort((z,Y)=>z[1]-Y[1])[0])==null?void 0:xe[0];_&&(H=_);break}case"initialPlacement":H=c;break}if(o!==H)return{reset:{placement:H}}}return{}}}};async function hA(n,e){const{placement:t,platform:r,elements:o}=n,s=await(r.isRTL==null?void 0:r.isRTL(o.floating)),a=Vi(t),c=Zf(t),d=$r(t)==="y",h=["left","top"].includes(a)?-1:1,m=s&&d?-1:1,g=$l(e,n);let{mainAxis:b,crossAxis:v,alignmentAxis:C}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return c&&typeof C=="number"&&(v=c==="end"?C*-1:C),d?{x:v*m,y:b*h}:{x:b*h,y:v*m}}const pA=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:o,y:s,placement:a,middlewareData:c}=e,d=await hA(e,n);return a===((t=c.offset)==null?void 0:t.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:o+d.x,y:s+d.y,data:{...d,placement:a}}}}},mA=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:o}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:c={fn:M=>{let{x:k,y:O}=M;return{x:k,y:O}}},...d}=$l(n,e),h={x:t,y:r},m=await _b(e,d),g=$r(Vi(o)),b=Vm(g);let v=h[b],C=h[g];if(s){const M=b==="y"?"top":"left",k=b==="y"?"bottom":"right",O=v+m[M],D=v-m[k];v=z4(O,v,D)}if(a){const M=g==="y"?"top":"left",k=g==="y"?"bottom":"right",O=C+m[M],D=C-m[k];C=z4(O,C,D)}const x=c.fn({...e,[b]:v,[g]:C});return{...x,data:{x:x.x-t,y:x.y-r,enabled:{[b]:s,[g]:a}}}}}},gA=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:o,rects:s,middlewareData:a}=e,{offset:c=0,mainAxis:d=!0,crossAxis:h=!0}=$l(n,e),m={x:t,y:r},g=$r(o),b=Vm(g);let v=m[b],C=m[g];const x=$l(c,e),M=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(d){const D=b==="y"?"height":"width",P=s.reference[b]-s.floating[D]+M.mainAxis,I=s.reference[b]+s.reference[D]-M.mainAxis;v<P?v=P:v>I&&(v=I)}if(h){var k,O;const D=b==="y"?"width":"height",P=["top","left"].includes(Vi(o)),I=s.reference[g]-s.floating[D]+(P&&((k=a.offset)==null?void 0:k[g])||0)+(P?0:M.crossAxis),Q=s.reference[g]+s.reference[D]+(P?0:((O=a.offset)==null?void 0:O[g])||0)-(P?M.crossAxis:0);C<I?C=I:C>Q&&(C=Q)}return{[b]:v,[g]:C}}}};function qb(n){const e=Xn(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const o=vt(n),s=o?n.offsetWidth:t,a=o?n.offsetHeight:r,c=yf(t)!==s||yf(r)!==a;return c&&(t=s,r=a),{width:t,height:r,$:c}}function _m(n){return nt(n)?n:n.contextElement}function Il(n){const e=_m(n);if(!vt(e))return gr(1);const t=e.getBoundingClientRect(),{width:r,height:o,$:s}=qb(e);let a=(s?yf(t.width):t.width)/r,c=(s?yf(t.height):t.height)/o;return(!a||!Number.isFinite(a))&&(a=1),(!c||!Number.isFinite(c))&&(c=1),{x:a,y:c}}const yA=gr(0);function Pb(n){const e=Mn(n);return!Kf()||!e.visualViewport?yA:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function bA(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Mn(n)?!1:e}function Ho(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const o=n.getBoundingClientRect(),s=_m(n);let a=gr(1);e&&(r?nt(r)&&(a=Il(r)):a=Il(n));const c=bA(s,t,r)?Pb(s):gr(0);let d=(o.left+c.x)/a.x,h=(o.top+c.y)/a.y,m=o.width/a.x,g=o.height/a.y;if(s){const b=Mn(s),v=r&&nt(r)?Mn(r):r;let C=b,x=U1(C);for(;x&&r&&v!==C;){const M=Il(x),k=x.getBoundingClientRect(),O=Xn(x),D=k.left+(x.clientLeft+parseFloat(O.paddingLeft))*M.x,P=k.top+(x.clientTop+parseFloat(O.paddingTop))*M.y;d*=M.x,h*=M.y,m*=M.x,g*=M.y,d+=D,h+=P,C=Mn(x),x=U1(C)}}return vf({width:m,height:g,x:d,y:h})}function qm(n,e){const t=$f(n).scrollLeft;return e?e.left+t:Ho(vr(n)).left+t}function Fb(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),o=r.left+e.scrollLeft-(t?0:qm(n,r)),s=r.top+e.scrollTop;return{x:o,y:s}}function vA(n){let{elements:e,rect:t,offsetParent:r,strategy:o}=n;const s=o==="fixed",a=vr(r),c=e?Ff(e.floating):!1;if(r===a||c&&s)return t;let d={scrollLeft:0,scrollTop:0},h=gr(1);const m=gr(0),g=vt(r);if((g||!g&&!s)&&((Pi(r)!=="body"||Va(a))&&(d=$f(r)),vt(r))){const v=Ho(r);h=Il(r),m.x=v.x+r.clientLeft,m.y=v.y+r.clientTop}const b=a&&!g&&!s?Fb(a,d,!0):gr(0);return{width:t.width*h.x,height:t.height*h.y,x:t.x*h.x-d.scrollLeft*h.x+m.x+b.x,y:t.y*h.y-d.scrollTop*h.y+m.y+b.y}}function CA(n){return Array.from(n.getClientRects())}function xA(n){const e=vr(n),t=$f(n),r=n.ownerDocument.body,o=Ao(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Ao(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-t.scrollLeft+qm(n);const c=-t.scrollTop;return Xn(r).direction==="rtl"&&(a+=Ao(e.clientWidth,r.clientWidth)-o),{width:o,height:s,x:a,y:c}}function SA(n,e){const t=Mn(n),r=vr(n),o=t.visualViewport;let s=r.clientWidth,a=r.clientHeight,c=0,d=0;if(o){s=o.width,a=o.height;const h=Kf();(!h||h&&e==="fixed")&&(c=o.offsetLeft,d=o.offsetTop)}return{width:s,height:a,x:c,y:d}}function EA(n,e){const t=Ho(n,!0,e==="fixed"),r=t.top+n.clientTop,o=t.left+n.clientLeft,s=vt(n)?Il(n):gr(1),a=n.clientWidth*s.x,c=n.clientHeight*s.y,d=o*s.x,h=r*s.y;return{width:a,height:c,x:d,y:h}}function q4(n,e,t){let r;if(e==="viewport")r=SA(n,t);else if(e==="document")r=xA(vr(n));else if(nt(e))r=EA(e,t);else{const o=Pb(n);r={x:e.x-o.x,y:e.y-o.y,width:e.width,height:e.height}}return vf(r)}function Kb(n,e){const t=Jr(n);return t===e||!nt(t)||Yr(t)?!1:Xn(t).position==="fixed"||Kb(t,e)}function wA(n,e){const t=e.get(n);if(t)return t;let r=Bi(n,[],!1).filter(c=>nt(c)&&Pi(c)!=="body"),o=null;const s=Xn(n).position==="fixed";let a=s?Jr(n):n;for(;nt(a)&&!Yr(a);){const c=Xn(a),d=Im(a);!d&&c.position==="fixed"&&(o=null),(s?!d&&!o:!d&&c.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||Va(a)&&!d&&Kb(n,a))?r=r.filter(m=>m!==a):o=c,a=Jr(a)}return e.set(n,r),r}function MA(n){let{element:e,boundary:t,rootBoundary:r,strategy:o}=n;const a=[...t==="clippingAncestors"?Ff(e)?[]:wA(e,this._c):[].concat(t),r],c=a[0],d=a.reduce((h,m)=>{const g=q4(e,m,o);return h.top=Ao(g.top,h.top),h.right=gf(g.right,h.right),h.bottom=gf(g.bottom,h.bottom),h.left=Ao(g.left,h.left),h},q4(e,c,o));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function TA(n){const{width:e,height:t}=qb(n);return{width:e,height:t}}function kA(n,e,t){const r=vt(e),o=vr(e),s=t==="fixed",a=Ho(n,!0,s,e);let c={scrollLeft:0,scrollTop:0};const d=gr(0);function h(){d.x=qm(o)}if(r||!r&&!s)if((Pi(e)!=="body"||Va(o))&&(c=$f(e)),r){const v=Ho(e,!0,s,e);d.x=v.x+e.clientLeft,d.y=v.y+e.clientTop}else o&&h();s&&!r&&o&&h();const m=o&&!r&&!s?Fb(o,c):gr(0),g=a.left+c.scrollLeft-d.x-m.x,b=a.top+c.scrollTop-d.y-m.y;return{x:g,y:b,width:a.width,height:a.height}}function Qp(n){return Xn(n).position==="static"}function P4(n,e){if(!vt(n)||Xn(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return vr(n)===t&&(t=t.ownerDocument.body),t}function $b(n,e){const t=Mn(n);if(Ff(n))return t;if(!vt(n)){let o=Jr(n);for(;o&&!Yr(o);){if(nt(o)&&!Qp(o))return o;o=Jr(o)}return t}let r=P4(n,e);for(;r&&xk(r)&&Qp(r);)r=P4(r,e);return r&&Yr(r)&&Qp(r)&&!Im(r)?t:r||Sk(n)||t}const AA=async function(n){const e=this.getOffsetParent||$b,t=this.getDimensions,r=await t(n.floating);return{reference:kA(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function RA(n){return Xn(n).direction==="rtl"}const OA={convertOffsetParentRelativeRectToViewportRelativeRect:vA,getDocumentElement:vr,getClippingRect:MA,getOffsetParent:$b,getElementRects:AA,getClientRects:CA,getDimensions:TA,getScale:Il,isElement:nt,isRTL:RA};function Zb(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function NA(n,e){let t=null,r;const o=vr(n);function s(){var c;clearTimeout(r),(c=t)==null||c.disconnect(),t=null}function a(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),s();const h=n.getBoundingClientRect(),{left:m,top:g,width:b,height:v}=h;if(c||e(),!b||!v)return;const C=zl(g),x=zl(o.clientWidth-(m+b)),M=zl(o.clientHeight-(g+v)),k=zl(m),D={rootMargin:-C+"px "+-x+"px "+-M+"px "+-k+"px",threshold:Ao(0,gf(1,d))||1};let P=!0;function I(Q){const te=Q[0].intersectionRatio;if(te!==d){if(!P)return a();te?a(!1,te):r=setTimeout(()=>{a(!1,1e-7)},1e3)}te===1&&!Zb(h,n.getBoundingClientRect())&&a(),P=!1}try{t=new IntersectionObserver(I,{...D,root:o.ownerDocument})}catch{t=new IntersectionObserver(I,D)}t.observe(n)}return a(!0),s}function Pm(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,h=_m(n),m=o||s?[...h?Bi(h):[],...Bi(e)]:[];m.forEach(k=>{o&&k.addEventListener("scroll",t,{passive:!0}),s&&k.addEventListener("resize",t)});const g=h&&c?NA(h,t):null;let b=-1,v=null;a&&(v=new ResizeObserver(k=>{let[O]=k;O&&O.target===h&&v&&(v.unobserve(e),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var D;(D=v)==null||D.observe(e)})),t()}),h&&!d&&v.observe(h),v.observe(e));let C,x=d?Ho(n):null;d&&M();function M(){const k=Ho(n);x&&!Zb(x,k)&&t(),x=k,C=requestAnimationFrame(M)}return t(),()=>{var k;m.forEach(O=>{o&&O.removeEventListener("scroll",t),s&&O.removeEventListener("resize",t)}),g?.(),(k=v)==null||k.disconnect(),v=null,d&&cancelAnimationFrame(C)}}const DA=pA,LA=mA,HA=dA,zA=gA,BA=(n,e,t)=>{const r=new Map,o={platform:OA,...t},s={...o.platform,_c:r};return fA(n,e,{...o,platform:s})};var jA=typeof document<"u",IA=function(){},Tc=jA?w.useLayoutEffect:IA;function wf(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,o;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!wf(n[r],e[r]))return!1;return!0}if(o=Object.keys(n),t=o.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,o[r]))return!1;for(r=t;r--!==0;){const s=o[r];if(!(s==="_owner"&&n.$$typeof)&&!wf(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function Gb(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function F4(n,e){const t=Gb(n);return Math.round(e*t)/t}function Xp(n){const e=w.useRef(n);return Tc(()=>{e.current=n}),e}function VA(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:o,elements:{reference:s,floating:a}={},transform:c=!0,whileElementsMounted:d,open:h}=n,[m,g]=w.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[b,v]=w.useState(r);wf(b,r)||v(r);const[C,x]=w.useState(null),[M,k]=w.useState(null),O=w.useCallback(z=>{z!==Q.current&&(Q.current=z,x(z))},[]),D=w.useCallback(z=>{z!==te.current&&(te.current=z,k(z))},[]),P=s||C,I=a||M,Q=w.useRef(null),te=w.useRef(null),X=w.useRef(m),se=d!=null,ne=Xp(d),me=Xp(o),he=Xp(h),xe=w.useCallback(()=>{if(!Q.current||!te.current)return;const z={placement:e,strategy:t,middleware:b};me.current&&(z.platform=me.current),BA(Q.current,te.current,z).then(Y=>{const A={...Y,isPositioned:he.current!==!1};re.current&&!wf(X.current,A)&&(X.current=A,_f.flushSync(()=>{g(A)}))})},[b,e,t,me,he]);Tc(()=>{h===!1&&X.current.isPositioned&&(X.current.isPositioned=!1,g(z=>({...z,isPositioned:!1})))},[h]);const re=w.useRef(!1);Tc(()=>(re.current=!0,()=>{re.current=!1}),[]),Tc(()=>{if(P&&(Q.current=P),I&&(te.current=I),P&&I){if(ne.current)return ne.current(P,I,xe);xe()}},[P,I,xe,ne,se]);const $=w.useMemo(()=>({reference:Q,floating:te,setReference:O,setFloating:D}),[O,D]),H=w.useMemo(()=>({reference:P,floating:I}),[P,I]),_=w.useMemo(()=>{const z={position:t,left:0,top:0};if(!H.floating)return z;const Y=F4(H.floating,m.x),A=F4(H.floating,m.y);return c?{...z,transform:"translate("+Y+"px, "+A+"px)",...Gb(H.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:Y,top:A}},[t,c,H.floating,m.x,m.y]);return w.useMemo(()=>({...m,update:xe,refs:$,elements:H,floatingStyles:_}),[m,xe,$,H,_])}const Fm=(n,e)=>({...DA(n),options:[n,e]}),Km=(n,e)=>({...LA(n),options:[n,e]}),UA=(n,e)=>({...zA(n),options:[n,e]}),$m=(n,e)=>({...HA(n),options:[n,e]});function jo(n){const e=w.useRef(void 0),t=w.useCallback(r=>{const o=n.map(s=>{if(s!=null){if(typeof s=="function"){const a=s,c=a(r);return typeof c=="function"?c:()=>{a(null)}}return s.current=r,()=>{s.current=null}}});return()=>{o.forEach(s=>s?.())}},n);return w.useMemo(()=>n.every(r=>r==null)?null:r=>{e.current&&(e.current(),e.current=void 0),r!=null&&(e.current=t(r))},n)}function _A(n,e){const t=n.compareDocumentPosition(e);return t&Node.DOCUMENT_POSITION_FOLLOWING||t&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:t&Node.DOCUMENT_POSITION_PRECEDING||t&Node.DOCUMENT_POSITION_CONTAINS?1:0}const Yb=w.createContext({register:()=>{},unregister:()=>{},map:new Map,elementsRef:{current:[]}});function qA(n){const{children:e,elementsRef:t,labelsRef:r}=n,[o,s]=w.useState(()=>new Set),a=w.useCallback(h=>{s(m=>new Set(m).add(h))},[]),c=w.useCallback(h=>{s(m=>{const g=new Set(m);return g.delete(h),g})},[]),d=w.useMemo(()=>{const h=new Map;return Array.from(o.keys()).sort(_A).forEach((g,b)=>{h.set(g,b)}),h},[o]);return S.jsx(Yb.Provider,{value:w.useMemo(()=>({register:a,unregister:c,map:d,elementsRef:t,labelsRef:r}),[a,c,d,t,r]),children:e})}function PA(n){n===void 0&&(n={});const{label:e}=n,{register:t,unregister:r,map:o,elementsRef:s,labelsRef:a}=w.useContext(Yb),[c,d]=w.useState(null),h=w.useRef(null),m=w.useCallback(g=>{if(h.current=g,c!==null&&(s.current[c]=g,a)){var b;const v=e!==void 0;a.current[c]=v?e:(b=g?.textContent)!=null?b:null}},[c,s,a,e]);return tt(()=>{const g=h.current;if(g)return t(g),()=>{r(g)}},[t,r]),tt(()=>{const g=h.current?o.get(h.current):null;g!=null&&d(g)},[o]),w.useMemo(()=>({ref:m,index:c??-1}),[c,m])}const FA="data-floating-ui-focusable",K4="active",$4="selected",_a="ArrowLeft",qa="ArrowRight",Jb="ArrowUp",Yf="ArrowDown",KA={...m3};let Z4=!1,$A=0;const G4=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+$A++;function ZA(){const[n,e]=w.useState(()=>Z4?G4():void 0);return tt(()=>{n==null&&e(G4())},[]),w.useEffect(()=>{Z4=!0},[]),n}const GA=KA.useId,Zm=GA||ZA;function YA(){const n=new Map;return{emit(e,t){var r;(r=n.get(e))==null||r.forEach(o=>o(t))},on(e,t){n.has(e)||n.set(e,new Set),n.get(e).add(t)},off(e,t){var r;(r=n.get(e))==null||r.delete(t)}}}const JA=w.createContext(null),QA=w.createContext(null),Jf=()=>{var n;return((n=w.useContext(JA))==null?void 0:n.id)||null},Pa=()=>w.useContext(QA);function zo(n){return"data-floating-ui-"+n}function an(n){n.current!==-1&&(clearTimeout(n.current),n.current=-1)}const Y4=zo("safe-polygon");function Wp(n,e,t){if(t&&!Na(t))return 0;if(typeof n=="number")return n;if(typeof n=="function"){const r=n();return typeof r=="number"?r:r?.[e]}return n?.[e]}function e1(n){return typeof n=="function"?n():n}function XA(n,e){e===void 0&&(e={});const{open:t,onOpenChange:r,dataRef:o,events:s,elements:a}=n,{enabled:c=!0,delay:d=0,handleClose:h=null,mouseOnly:m=!1,restMs:g=0,move:b=!0}=e,v=Pa(),C=Jf(),x=Sn(h),M=Sn(d),k=Sn(t),O=Sn(g),D=w.useRef(),P=w.useRef(-1),I=w.useRef(),Q=w.useRef(-1),te=w.useRef(!0),X=w.useRef(!1),se=w.useRef(()=>{}),ne=w.useRef(!1),me=Ct(()=>{var _;const z=(_=o.current.openEvent)==null?void 0:_.type;return z?.includes("mouse")&&z!=="mousedown"});w.useEffect(()=>{if(!c)return;function _(z){let{open:Y}=z;Y||(an(P),an(Q),te.current=!0,ne.current=!1)}return s.on("openchange",_),()=>{s.off("openchange",_)}},[c,s]),w.useEffect(()=>{if(!c||!x.current||!t)return;function _(Y){me()&&r(!1,Y,"hover")}const z=Kt(a.floating).documentElement;return z.addEventListener("mouseleave",_),()=>{z.removeEventListener("mouseleave",_)}},[a.floating,t,r,c,x,me]);const he=w.useCallback(function(_,z,Y){z===void 0&&(z=!0),Y===void 0&&(Y="hover");const A=Wp(M.current,"close",D.current);A&&!I.current?(an(P),P.current=window.setTimeout(()=>r(!1,_,Y),A)):z&&(an(P),r(!1,_,Y))},[M,r]),xe=Ct(()=>{se.current(),I.current=void 0}),re=Ct(()=>{if(X.current){const _=Kt(a.floating).body;_.style.pointerEvents="",_.removeAttribute(Y4),X.current=!1}}),$=Ct(()=>o.current.openEvent?["click","mousedown"].includes(o.current.openEvent.type):!1);w.useEffect(()=>{if(!c)return;function _(q){if(an(P),te.current=!1,m&&!Na(D.current)||e1(O.current)>0&&!Wp(M.current,"open"))return;const J=Wp(M.current,"open",D.current);J?P.current=window.setTimeout(()=>{k.current||r(!0,q,"hover")},J):t||r(!0,q,"hover")}function z(q){if($()){re();return}se.current();const J=Kt(a.floating);if(an(Q),ne.current=!1,x.current&&o.current.floatingContext){t||an(P),I.current=x.current({...o.current.floatingContext,tree:v,x:q.clientX,y:q.clientY,onClose(){re(),xe(),$()||he(q,!0,"safe-polygon")}});const Ce=I.current;J.addEventListener("mousemove",Ce),se.current=()=>{J.removeEventListener("mousemove",Ce)};return}(D.current==="touch"?!_t(a.floating,q.relatedTarget):!0)&&he(q)}function Y(q){$()||o.current.floatingContext&&(x.current==null||x.current({...o.current.floatingContext,tree:v,x:q.clientX,y:q.clientY,onClose(){re(),xe(),$()||he(q)}})(q))}function A(){an(P)}function F(q){$()||he(q,!1)}if(nt(a.domReference)){const q=a.domReference,J=a.floating;return t&&q.addEventListener("mouseleave",Y),b&&q.addEventListener("mousemove",_,{once:!0}),q.addEventListener("mouseenter",_),q.addEventListener("mouseleave",z),J&&(J.addEventListener("mouseleave",Y),J.addEventListener("mouseenter",A),J.addEventListener("mouseleave",F)),()=>{t&&q.removeEventListener("mouseleave",Y),b&&q.removeEventListener("mousemove",_),q.removeEventListener("mouseenter",_),q.removeEventListener("mouseleave",z),J&&(J.removeEventListener("mouseleave",Y),J.removeEventListener("mouseenter",A),J.removeEventListener("mouseleave",F))}}},[a,c,n,m,b,he,xe,re,r,t,k,v,M,x,o,$,O]),tt(()=>{var _;if(c&&t&&(_=x.current)!=null&&(_=_.__options)!=null&&_.blockPointerEvents&&me()){X.current=!0;const Y=a.floating;if(nt(a.domReference)&&Y){var z;const A=Kt(a.floating).body;A.setAttribute(Y4,"");const F=a.domReference,q=v==null||(z=v.nodesRef.current.find(J=>J.id===C))==null||(z=z.context)==null?void 0:z.elements.floating;return q&&(q.style.pointerEvents=""),A.style.pointerEvents="none",F.style.pointerEvents="auto",Y.style.pointerEvents="auto",()=>{A.style.pointerEvents="",F.style.pointerEvents="",Y.style.pointerEvents=""}}}},[c,t,C,a,v,x,me]),tt(()=>{t||(D.current=void 0,ne.current=!1,xe(),re())},[t,xe,re]),w.useEffect(()=>()=>{xe(),an(P),an(Q),re()},[c,a.domReference,xe,re]);const H=w.useMemo(()=>{function _(z){D.current=z.pointerType}return{onPointerDown:_,onPointerEnter:_,onMouseMove(z){const{nativeEvent:Y}=z;function A(){!te.current&&!k.current&&r(!0,Y,"hover")}m&&!Na(D.current)||t||e1(O.current)===0||ne.current&&z.movementX**2+z.movementY**2<2||(an(Q),D.current==="touch"?A():(ne.current=!0,Q.current=window.setTimeout(A,e1(O.current))))}}},[m,r,t,k,O]);return w.useMemo(()=>c?{reference:H}:{},[c,H])}const J4=()=>{},WA=w.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:J4,setState:J4,isInstantPhase:!1});function eR(n){const{children:e,delay:t,timeoutMs:r=0}=n,[o,s]=w.useReducer((d,h)=>({...d,...h}),{delay:t,timeoutMs:r,initialDelay:t,currentId:null,isInstantPhase:!1}),a=w.useRef(null),c=w.useCallback(d=>{s({currentId:d})},[]);return tt(()=>{o.currentId?a.current===null?a.current=o.currentId:o.isInstantPhase||s({isInstantPhase:!0}):(o.isInstantPhase&&s({isInstantPhase:!1}),a.current=null)},[o.currentId,o.isInstantPhase]),S.jsx(WA.Provider,{value:w.useMemo(()=>({...o,setState:s,setCurrentId:c}),[o,c]),children:e})}let Q4=0;function fo(n,e){e===void 0&&(e={});const{preventScroll:t=!1,cancelPrevious:r=!0,sync:o=!1}=e;r&&cancelAnimationFrame(Q4);const s=()=>n?.focus({preventScroll:t});o?s():Q4=requestAnimationFrame(s)}function tR(n){return n?.ownerDocument||document}const Vl={inert:new WeakMap,"aria-hidden":new WeakMap,none:new WeakMap};function X4(n){return n==="inert"?Vl.inert:n==="aria-hidden"?Vl["aria-hidden"]:Vl.none}let pc=new WeakSet,mc={},t1=0;const nR=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,Qb=n=>n&&(n.host||Qb(n.parentNode)),rR=(n,e)=>e.map(t=>{if(n.contains(t))return t;const r=Qb(t);return n.contains(r)?r:null}).filter(t=>t!=null);function iR(n,e,t,r){const o="data-floating-ui-inert",s=r?"inert":t?"aria-hidden":null,a=rR(e,n),c=new Set,d=new Set(a),h=[];mc[o]||(mc[o]=new WeakMap);const m=mc[o];a.forEach(g),b(e),c.clear();function g(v){!v||c.has(v)||(c.add(v),v.parentNode&&g(v.parentNode))}function b(v){!v||d.has(v)||[].forEach.call(v.children,C=>{if(Pi(C)!=="script")if(c.has(C))b(C);else{const x=s?C.getAttribute(s):null,M=x!==null&&x!=="false",k=X4(s),O=(k.get(C)||0)+1,D=(m.get(C)||0)+1;k.set(C,O),m.set(C,D),h.push(C),O===1&&M&&pc.add(C),D===1&&C.setAttribute(o,""),!M&&s&&C.setAttribute(s,s==="inert"?"":"true")}})}return t1++,()=>{h.forEach(v=>{const C=X4(s),M=(C.get(v)||0)-1,k=(m.get(v)||0)-1;C.set(v,M),m.set(v,k),M||(!pc.has(v)&&s&&v.removeAttribute(s),pc.delete(v)),k||v.removeAttribute(o)}),t1--,t1||(Vl.inert=new WeakMap,Vl["aria-hidden"]=new WeakMap,Vl.none=new WeakMap,pc=new WeakSet,mc={})}}function W4(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=tR(n[0]).body;return iR(n.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,t)}const Qf={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},Mf=w.forwardRef(function(e,t){const[r,o]=w.useState();tt(()=>{Hb()&&o("button")},[]);const s={ref:t,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[zo("focus-guard")]:"",style:Qf};return S.jsx("span",{...e,...s})}),Xb=w.createContext(null),e3=zo("portal");function oR(n){n===void 0&&(n={});const{id:e,root:t}=n,r=Zm(),o=Wb(),[s,a]=w.useState(null),c=w.useRef(null);return tt(()=>()=>{s?.remove(),queueMicrotask(()=>{c.current=null})},[s]),tt(()=>{if(!r||c.current)return;const d=e?document.getElementById(e):null;if(!d)return;const h=document.createElement("div");h.id=r,h.setAttribute(e3,""),d.appendChild(h),c.current=h,a(h)},[e,r]),tt(()=>{if(t===null||!r||c.current)return;let d=t||o?.portalNode;d&&!nt(d)&&(d=d.current),d=d||document.body;let h=null;e&&(h=document.createElement("div"),h.id=e,d.appendChild(h));const m=document.createElement("div");m.id=r,m.setAttribute(e3,""),d=h||d,d.appendChild(m),c.current=m,a(m)},[e,t,r,o]),s}function Gm(n){const{children:e,id:t,root:r,preserveTabOrder:o=!0}=n,s=oR({id:t,root:r}),[a,c]=w.useState(null),d=w.useRef(null),h=w.useRef(null),m=w.useRef(null),g=w.useRef(null),b=a?.modal,v=a?.open,C=!!a&&!a.modal&&a.open&&o&&!!(r||s);return w.useEffect(()=>{if(!s||!o||b)return;function x(M){s&&ya(M)&&(M.type==="focusin"?U4:cA)(s)}return s.addEventListener("focusin",x,!0),s.addEventListener("focusout",x,!0),()=>{s.removeEventListener("focusin",x,!0),s.removeEventListener("focusout",x,!0)}},[s,o,b]),w.useEffect(()=>{s&&(v||U4(s))},[v,s]),S.jsxs(Xb.Provider,{value:w.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:d,afterOutsideRef:h,beforeInsideRef:m,afterInsideRef:g,portalNode:s,setFocusManagerState:c}),[o,s]),children:[C&&s&&S.jsx(Mf,{"data-type":"outside",ref:d,onFocus:x=>{if(ya(x,s)){var M;(M=m.current)==null||M.focus()}else{const k=a?a.domReference:null,O=Ub(k);O?.focus()}}}),C&&s&&S.jsx("span",{"aria-owns":s.id,style:Qf}),s&&_f.createPortal(e,s),C&&s&&S.jsx(Mf,{"data-type":"outside",ref:h,onFocus:x=>{if(ya(x,s)){var M;(M=g.current)==null||M.focus()}else{const k=a?a.domReference:null,O=Vb(k);O?.focus(),a?.closeOnFocusOut&&a?.onOpenChange(!1,x.nativeEvent,"focus-out")}}})]})}const Wb=()=>w.useContext(Xb);function t3(n){return w.useMemo(()=>e=>{n.forEach(t=>{t&&(t.current=e)})},n)}const lR=20;let ho=[];function sR(n){ho=ho.filter(e=>e.isConnected),n&&Pi(n)!=="body"&&(ho.push(n),ho.length>lR&&(ho=ho.slice(-20)))}function n3(){return ho.slice().reverse().find(n=>n.isConnected)}function aR(n){const e=Ua();return Nb(n,e)?n:Gf(n,e)[0]||n}function r3(n,e){var t;if(!e.current.includes("floating")&&!((t=n.getAttribute("role"))!=null&&t.includes("dialog")))return;const r=Ua(),s=$k(n,r).filter(c=>{const d=c.getAttribute("data-tabindex")||"";return Nb(c,r)||c.hasAttribute("data-tabindex")&&!d.startsWith("-")}),a=n.getAttribute("tabindex");e.current.includes("floating")||s.length===0?a!=="0"&&n.setAttribute("tabindex","0"):(a!=="-1"||n.hasAttribute("data-tabindex")&&n.getAttribute("data-tabindex")!=="-1")&&(n.setAttribute("tabindex","-1"),n.setAttribute("data-tabindex","-1"))}const uR=w.forwardRef(function(e,t){return S.jsx("button",{...e,type:"button",ref:t,tabIndex:-1,style:Qf})});function e9(n){const{context:e,children:t,disabled:r=!1,order:o=["content"],guards:s=!0,initialFocus:a=0,returnFocus:c=!0,restoreFocus:d=!1,modal:h=!0,visuallyHiddenDismiss:m=!1,closeOnFocusOut:g=!0,outsideElementsInert:b=!1,getInsideElements:v=()=>[]}=n,{open:C,onOpenChange:x,events:M,dataRef:k,elements:{domReference:O,floating:D}}=e,P=Ct(()=>{var Se;return(Se=k.current.floatingContext)==null?void 0:Se.nodeId}),I=Ct(v),Q=typeof a=="number"&&a<0,te=K1(O)&&Q,X=nR(),se=X?s:!0,ne=!se||X&&b,me=Sn(o),he=Sn(a),xe=Sn(c),re=Pa(),$=Wb(),H=w.useRef(null),_=w.useRef(null),z=w.useRef(!1),Y=w.useRef(!1),A=w.useRef(-1),F=$!=null,q=Ef(D),J=Ct(function(Se){return Se===void 0&&(Se=q),Se?Gf(Se,Ua()):[]}),ie=Ct(Se=>{const Ne=J(Se);return me.current.map(Ee=>O&&Ee==="reference"?O:q&&Ee==="floating"?q:Ne).filter(Boolean).flat()});w.useEffect(()=>{if(r||!h)return;function Se(Ee){if(Ee.key==="Tab"){_t(q,mr(Kt(q)))&&J().length===0&&!te&&qt(Ee);const we=ie(),ut=Fr(Ee);me.current[0]==="reference"&&ut===O&&(qt(Ee),Ee.shiftKey?fo(we[we.length-1]):fo(we[1])),me.current[1]==="floating"&&ut===q&&Ee.shiftKey&&(qt(Ee),fo(we[0]))}}const Ne=Kt(q);return Ne.addEventListener("keydown",Se),()=>{Ne.removeEventListener("keydown",Se)}},[r,O,q,h,me,te,J,ie]),w.useEffect(()=>{if(r||!D)return;function Se(Ne){const Ee=Fr(Ne),ut=J().indexOf(Ee);ut!==-1&&(A.current=ut)}return D.addEventListener("focusin",Se),()=>{D.removeEventListener("focusin",Se)}},[r,D,J]),w.useEffect(()=>{if(r||!g)return;function Se(){Y.current=!0,setTimeout(()=>{Y.current=!1})}function Ne(Ee){const we=Ee.relatedTarget,ut=Ee.currentTarget,lt=Fr(Ee);queueMicrotask(()=>{const Xe=P(),Bt=!(_t(O,we)||_t(D,we)||_t(we,D)||_t($?.portalNode,we)||we!=null&&we.hasAttribute(zo("focus-guard"))||re&&(jl(re.nodesRef.current,Xe).find(Ue=>{var Ye,Gt;return _t((Ye=Ue.context)==null?void 0:Ye.elements.floating,we)||_t((Gt=Ue.context)==null?void 0:Gt.elements.domReference,we)})||I4(re.nodesRef.current,Xe).find(Ue=>{var Ye,Gt,de;return[(Ye=Ue.context)==null?void 0:Ye.elements.floating,Ef((Gt=Ue.context)==null?void 0:Gt.elements.floating)].includes(we)||((de=Ue.context)==null?void 0:de.elements.domReference)===we})));if(ut===O&&q&&r3(q,me),d&&ut!==O&&!(lt!=null&&lt.isConnected)&&mr(Kt(q))===Kt(q).body){vt(q)&&q.focus();const Ue=A.current,Ye=J(),Gt=Ye[Ue]||Ye[Ye.length-1]||q;vt(Gt)&&Gt.focus()}if(k.current.insideReactTree){k.current.insideReactTree=!1;return}(te||!h)&&we&&Bt&&!Y.current&&we!==n3()&&(z.current=!0,x(!1,Ee,"focus-out"))})}if(D&&vt(O))return O.addEventListener("focusout",Ne),O.addEventListener("pointerdown",Se),D.addEventListener("focusout",Ne),()=>{O.removeEventListener("focusout",Ne),O.removeEventListener("pointerdown",Se),D.removeEventListener("focusout",Ne)}},[r,O,D,q,h,re,$,x,g,d,J,te,P,me,k]);const Ce=w.useRef(null),oe=w.useRef(null),qe=t3([Ce,$?.beforeInsideRef]),He=t3([oe,$?.afterInsideRef]);w.useEffect(()=>{var Se,Ne;if(r||!D)return;const Ee=Array.from(($==null||(Se=$.portalNode)==null?void 0:Se.querySelectorAll("["+zo("portal")+"]"))||[]),we=re?I4(re.nodesRef.current,P()):[],ut=re&&!h?we.map(Ue=>{var Ye;return(Ye=Ue.context)==null?void 0:Ye.elements.floating}):[],lt=(Ne=we.find(Ue=>{var Ye;return K1(((Ye=Ue.context)==null?void 0:Ye.elements.domReference)||null)}))==null||(Ne=Ne.context)==null?void 0:Ne.elements.domReference,Xe=[D,lt,...Ee,...ut,...I(),H.current,_.current,Ce.current,oe.current,$?.beforeOutsideRef.current,$?.afterOutsideRef.current,me.current.includes("reference")||te?O:null].filter(Ue=>Ue!=null),Bt=h||te?W4(Xe,!ne,ne):W4(Xe);return()=>{Bt()}},[r,O,D,h,me,$,te,se,ne,re,P,I]),tt(()=>{if(r||!vt(q))return;const Se=Kt(q),Ne=mr(Se);queueMicrotask(()=>{const Ee=ie(q),we=he.current,ut=(typeof we=="number"?Ee[we]:we.current)||q,lt=_t(q,Ne);!Q&&!lt&&C&&fo(ut,{preventScroll:ut===q})})},[r,C,q,Q,ie,he]),tt(()=>{if(r||!q)return;const Se=Kt(q),Ne=mr(Se);sR(Ne);function Ee(lt){let{reason:Xe,event:Bt,nested:Ue}=lt;if(["hover","safe-polygon"].includes(Xe)&&Bt.type==="mouseleave"&&(z.current=!0),Xe==="outside-press")if(Ue)z.current=!1;else if(Bb(Bt)||jb(Bt))z.current=!1;else{let Ye=!1;document.createElement("div").focus({get preventScroll(){return Ye=!0,!1}}),Ye?z.current=!1:z.current=!0}}M.on("openchange",Ee);const we=Se.createElement("span");we.setAttribute("tabindex","-1"),we.setAttribute("aria-hidden","true"),Object.assign(we.style,Qf),F&&O&&O.insertAdjacentElement("afterend",we);function ut(){if(typeof xe.current=="boolean"){const lt=O||n3();return lt&&lt.isConnected?lt:we}return xe.current.current||we}return()=>{M.off("openchange",Ee);const lt=mr(Se),Xe=_t(D,lt)||re&&jl(re.nodesRef.current,P()).some(Ue=>{var Ye;return _t((Ye=Ue.context)==null?void 0:Ye.elements.floating,lt)}),Bt=ut();queueMicrotask(()=>{const Ue=aR(Bt);xe.current&&!z.current&&vt(Ue)&&(!(Ue!==lt&&lt!==Se.body)||Xe)&&Ue.focus({preventScroll:!0}),we.remove()})}},[r,D,q,xe,k,M,re,F,O,P]),w.useEffect(()=>{queueMicrotask(()=>{z.current=!1})},[r]),tt(()=>{if(!r&&$)return $.setFocusManagerState({modal:h,closeOnFocusOut:g,open:C,onOpenChange:x,domReference:O}),()=>{$.setFocusManagerState(null)}},[r,$,h,C,x,g,O]),tt(()=>{r||q&&r3(q,me)},[r,q,me]);function Zt(Se){return r||!m||!h?null:S.jsx(uR,{ref:Se==="start"?H:_,onClick:Ne=>x(!1,Ne.nativeEvent),children:typeof m=="string"?m:"Dismiss"})}const kn=!r&&se&&(h?!te:!0)&&(F||h);return S.jsxs(S.Fragment,{children:[kn&&S.jsx(Mf,{"data-type":"inside",ref:qe,onFocus:Se=>{if(h){const Ee=ie();fo(o[0]==="reference"?Ee[0]:Ee[Ee.length-1])}else if($!=null&&$.preserveTabOrder&&$.portalNode)if(z.current=!1,ya(Se,$.portalNode)){const Ee=Vb(O);Ee?.focus()}else{var Ne;(Ne=$.beforeOutsideRef.current)==null||Ne.focus()}}}),!te&&Zt("start"),t,Zt("end"),kn&&S.jsx(Mf,{"data-type":"inside",ref:He,onFocus:Se=>{if(h)fo(ie()[0]);else if($!=null&&$.preserveTabOrder&&$.portalNode)if(g&&(z.current=!0),ya(Se,$.portalNode)){const Ee=Ub(O);Ee?.focus()}else{var Ne;(Ne=$.afterOutsideRef.current)==null||Ne.focus()}}})]})}function i3(n){return vt(n.target)&&n.target.tagName==="BUTTON"}function cR(n){return vt(n.target)&&n.target.tagName==="A"}function o3(n){return Um(n)}function t9(n,e){e===void 0&&(e={});const{open:t,onOpenChange:r,dataRef:o,elements:{domReference:s}}=n,{enabled:a=!0,event:c="click",toggle:d=!0,ignoreMouse:h=!1,keyboardHandlers:m=!0,stickIfOpen:g=!0}=e,b=w.useRef(),v=w.useRef(!1),C=w.useMemo(()=>({onPointerDown(x){b.current=x.pointerType},onMouseDown(x){const M=b.current;x.button===0&&c!=="click"&&(Na(M,!0)&&h||(t&&d&&(!(o.current.openEvent&&g)||o.current.openEvent.type==="mousedown")?r(!1,x.nativeEvent,"click"):(x.preventDefault(),r(!0,x.nativeEvent,"click"))))},onClick(x){const M=b.current;if(c==="mousedown"&&b.current){b.current=void 0;return}Na(M,!0)&&h||(t&&d&&(!(o.current.openEvent&&g)||o.current.openEvent.type==="click")?r(!1,x.nativeEvent,"click"):r(!0,x.nativeEvent,"click"))},onKeyDown(x){b.current=void 0,!(x.defaultPrevented||!m||i3(x))&&(x.key===" "&&!o3(s)&&(x.preventDefault(),v.current=!0),!cR(x)&&x.key==="Enter"&&r(!(t&&d),x.nativeEvent,"click"))},onKeyUp(x){x.defaultPrevented||!m||i3(x)||o3(s)||x.key===" "&&v.current&&(v.current=!1,r(!(t&&d),x.nativeEvent,"click"))}}),[o,s,c,h,m,r,t,g,d]);return w.useMemo(()=>a?{reference:C}:{},[a,C])}const fR={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},dR={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},l3=n=>{var e,t;return{escapeKey:typeof n=="boolean"?n:(e=n?.escapeKey)!=null?e:!1,outsidePress:typeof n=="boolean"?n:(t=n?.outsidePress)!=null?t:!0}};function Ym(n,e){e===void 0&&(e={});const{open:t,onOpenChange:r,elements:o,dataRef:s}=n,{enabled:a=!0,escapeKey:c=!0,outsidePress:d=!0,outsidePressEvent:h="pointerdown",referencePress:m=!1,referencePressEvent:g="pointerdown",ancestorScroll:b=!1,bubbles:v,capture:C}=e,x=Pa(),M=Ct(typeof d=="function"?d:()=>!1),k=typeof d=="function"?M:d,O=w.useRef(!1),{escapeKey:D,outsidePress:P}=l3(v),{escapeKey:I,outsidePress:Q}=l3(C),te=w.useRef(!1),X=w.useRef(-1),se=Ct($=>{var H;if(!t||!a||!c||$.key!=="Escape"||te.current)return;const _=(H=s.current.floatingContext)==null?void 0:H.nodeId,z=x?jl(x.nodesRef.current,_):[];if(!D&&($.stopPropagation(),z.length>0)){let Y=!0;if(z.forEach(A=>{var F;if((F=A.context)!=null&&F.open&&!A.context.dataRef.current.__escapeKeyBubbles){Y=!1;return}}),!Y)return}r(!1,eA($)?$.nativeEvent:$,"escape-key")}),ne=Ct($=>{var H;const _=()=>{var z;se($),(z=Fr($))==null||z.removeEventListener("keydown",_)};(H=Fr($))==null||H.addEventListener("keydown",_)}),me=Ct($=>{var H;const _=s.current.insideReactTree;s.current.insideReactTree=!1;const z=O.current;if(O.current=!1,h==="click"&&z||_||typeof k=="function"&&!k($))return;const Y=Fr($),A="["+zo("inert")+"]",F=Kt(o.floating).querySelectorAll(A);let q=nt(Y)?Y:null;for(;q&&!Yr(q);){const oe=Jr(q);if(Yr(oe)||!nt(oe))break;q=oe}if(F.length&&nt(Y)&&!Qk(Y)&&!_t(Y,o.floating)&&Array.from(F).every(oe=>!_t(q,oe)))return;if(vt(Y)&&re){const oe=Yr(Y),qe=Xn(Y),He=/auto|scroll/,Zt=oe||He.test(qe.overflowX),kn=oe||He.test(qe.overflowY),Se=Zt&&Y.clientWidth>0&&Y.scrollWidth>Y.clientWidth,Ne=kn&&Y.clientHeight>0&&Y.scrollHeight>Y.clientHeight,Ee=qe.direction==="rtl",we=Ne&&(Ee?$.offsetX<=Y.offsetWidth-Y.clientWidth:$.offsetX>Y.clientWidth),ut=Se&&$.offsetY>Y.clientHeight;if(we||ut)return}const J=(H=s.current.floatingContext)==null?void 0:H.nodeId,ie=x&&jl(x.nodesRef.current,J).some(oe=>{var qe;return Yp($,(qe=oe.context)==null?void 0:qe.elements.floating)});if(Yp($,o.floating)||Yp($,o.domReference)||ie)return;const Ce=x?jl(x.nodesRef.current,J):[];if(Ce.length>0){let oe=!0;if(Ce.forEach(qe=>{var He;if((He=qe.context)!=null&&He.open&&!qe.context.dataRef.current.__outsidePressBubbles){oe=!1;return}}),!oe)return}r(!1,$,"outside-press")}),he=Ct($=>{var H;const _=()=>{var z;me($),(z=Fr($))==null||z.removeEventListener(h,_)};(H=Fr($))==null||H.addEventListener(h,_)});w.useEffect(()=>{if(!t||!a)return;s.current.__escapeKeyBubbles=D,s.current.__outsidePressBubbles=P;let $=-1;function H(F){r(!1,F,"ancestor-scroll")}function _(){window.clearTimeout($),te.current=!0}function z(){$=window.setTimeout(()=>{te.current=!1},Kf()?5:0)}const Y=Kt(o.floating);c&&(Y.addEventListener("keydown",I?ne:se,I),Y.addEventListener("compositionstart",_),Y.addEventListener("compositionend",z)),k&&Y.addEventListener(h,Q?he:me,Q);let A=[];return b&&(nt(o.domReference)&&(A=Bi(o.domReference)),nt(o.floating)&&(A=A.concat(Bi(o.floating))),!nt(o.reference)&&o.reference&&o.reference.contextElement&&(A=A.concat(Bi(o.reference.contextElement)))),A=A.filter(F=>{var q;return F!==((q=Y.defaultView)==null?void 0:q.visualViewport)}),A.forEach(F=>{F.addEventListener("scroll",H,{passive:!0})}),()=>{c&&(Y.removeEventListener("keydown",I?ne:se,I),Y.removeEventListener("compositionstart",_),Y.removeEventListener("compositionend",z)),k&&Y.removeEventListener(h,Q?he:me,Q),A.forEach(F=>{F.removeEventListener("scroll",H)}),window.clearTimeout($)}},[s,o,c,k,h,t,r,b,a,D,P,se,I,ne,me,Q,he]),w.useEffect(()=>{s.current.insideReactTree=!1},[s,k,h]);const xe=w.useMemo(()=>({onKeyDown:se,...m&&{[fR[g]]:$=>{r(!1,$.nativeEvent,"reference-press")},...g!=="click"&&{onClick($){r(!1,$.nativeEvent,"reference-press")}}}}),[se,r,m,g]),re=w.useMemo(()=>({onKeyDown:se,onMouseDown(){O.current=!0},onMouseUp(){O.current=!0},[dR[h]]:()=>{s.current.insideReactTree=!0},onBlurCapture(){x||(an(X),s.current.insideReactTree=!0,X.current=window.setTimeout(()=>{s.current.insideReactTree=!1}))}}),[se,h,s,x]);return w.useMemo(()=>a?{reference:xe,floating:re}:{},[a,xe,re])}function hR(n){const{open:e=!1,onOpenChange:t,elements:r}=n,o=Zm(),s=w.useRef({}),[a]=w.useState(()=>YA()),c=Jf()!=null,[d,h]=w.useState(r.reference),m=Ct((v,C,x)=>{s.current.openEvent=v?C:void 0,a.emit("openchange",{open:v,event:C,reason:x,nested:c}),t?.(v,C,x)}),g=w.useMemo(()=>({setPositionReference:h}),[]),b=w.useMemo(()=>({reference:d||r.reference||null,floating:r.floating||null,domReference:r.reference}),[d,r.reference,r.floating]);return w.useMemo(()=>({dataRef:s,open:e,onOpenChange:m,elements:b,events:a,floatingId:o,refs:g}),[e,m,b,a,o,g])}function Jm(n){n===void 0&&(n={});const{nodeId:e}=n,t=hR({...n,elements:{reference:null,floating:null,...n.elements}}),r=n.rootContext||t,o=r.elements,[s,a]=w.useState(null),[c,d]=w.useState(null),m=o?.domReference||s,g=w.useRef(null),b=Pa();tt(()=>{m&&(g.current=m)},[m]);const v=VA({...n,elements:{...o,...c&&{reference:c}}}),C=w.useCallback(D=>{const P=nt(D)?{getBoundingClientRect:()=>D.getBoundingClientRect(),getClientRects:()=>D.getClientRects(),contextElement:D}:D;d(P),v.refs.setReference(P)},[v.refs]),x=w.useCallback(D=>{(nt(D)||D===null)&&(g.current=D,a(D)),(nt(v.refs.reference.current)||v.refs.reference.current===null||D!==null&&!nt(D))&&v.refs.setReference(D)},[v.refs]),M=w.useMemo(()=>({...v.refs,setReference:x,setPositionReference:C,domReference:g}),[v.refs,x,C]),k=w.useMemo(()=>({...v.elements,domReference:m}),[v.elements,m]),O=w.useMemo(()=>({...v,...r,refs:M,elements:k,nodeId:e}),[v,M,k,e,r]);return tt(()=>{r.dataRef.current.floatingContext=O;const D=b?.nodesRef.current.find(P=>P.id===e);D&&(D.context=O)}),w.useMemo(()=>({...v,context:O,refs:M,elements:k}),[v,M,k,O])}function n1(){return Zk()&&Hb()}function pR(n,e){e===void 0&&(e={});const{open:t,onOpenChange:r,events:o,dataRef:s,elements:a}=n,{enabled:c=!0,visibleOnly:d=!0}=e,h=w.useRef(!1),m=w.useRef(-1),g=w.useRef(!0);w.useEffect(()=>{if(!c)return;const v=Mn(a.domReference);function C(){!t&&vt(a.domReference)&&a.domReference===mr(Kt(a.domReference))&&(h.current=!0)}function x(){g.current=!0}function M(){g.current=!1}return v.addEventListener("blur",C),n1()&&(v.addEventListener("keydown",x,!0),v.addEventListener("pointerdown",M,!0)),()=>{v.removeEventListener("blur",C),n1()&&(v.removeEventListener("keydown",x,!0),v.removeEventListener("pointerdown",M,!0))}},[a.domReference,t,c]),w.useEffect(()=>{if(!c)return;function v(C){let{reason:x}=C;(x==="reference-press"||x==="escape-key")&&(h.current=!0)}return o.on("openchange",v),()=>{o.off("openchange",v)}},[o,c]),w.useEffect(()=>()=>{an(m)},[]);const b=w.useMemo(()=>({onMouseLeave(){h.current=!1},onFocus(v){if(h.current)return;const C=Fr(v.nativeEvent);if(d&&nt(C)){if(n1()&&!v.relatedTarget){if(!g.current&&!Um(C))return}else if(!Xk(C))return}r(!0,v.nativeEvent,"focus")},onBlur(v){h.current=!1;const C=v.relatedTarget,x=v.nativeEvent,M=nt(C)&&C.hasAttribute(zo("focus-guard"))&&C.getAttribute("data-type")==="outside";m.current=window.setTimeout(()=>{var k;const O=mr(a.domReference?a.domReference.ownerDocument:document);!C&&O===a.domReference||_t((k=s.current.floatingContext)==null?void 0:k.refs.floating.current,O)||_t(a.domReference,O)||M||r(!1,x,"focus")})}}),[s,a.domReference,r,d]);return w.useMemo(()=>c?{reference:b}:{},[c,b])}function r1(n,e,t){const r=new Map,o=t==="item";let s=n;if(o&&n){const{[K4]:a,[$4]:c,...d}=n;s=d}return{...t==="floating"&&{tabIndex:-1,[FA]:""},...s,...e.map(a=>{const c=a?a[t]:null;return typeof c=="function"?n?c(n):null:c}).concat(n).reduce((a,c)=>(c&&Object.entries(c).forEach(d=>{let[h,m]=d;if(!(o&&[K4,$4].includes(h)))if(h.indexOf("on")===0){if(r.has(h)||r.set(h,[]),typeof m=="function"){var g;(g=r.get(h))==null||g.push(m),a[h]=function(){for(var b,v=arguments.length,C=new Array(v),x=0;x<v;x++)C[x]=arguments[x];return(b=r.get(h))==null?void 0:b.map(M=>M(...C)).find(M=>M!==void 0)}}}else a[h]=m}),a),{})}}function Qm(n){n===void 0&&(n=[]);const e=n.map(c=>c?.reference),t=n.map(c=>c?.floating),r=n.map(c=>c?.item),o=w.useCallback(c=>r1(c,n,"reference"),e),s=w.useCallback(c=>r1(c,n,"floating"),t),a=w.useCallback(c=>r1(c,n,"item"),r);return w.useMemo(()=>({getReferenceProps:o,getFloatingProps:s,getItemProps:a}),[o,s,a])}const mR="Escape";function Xf(n,e,t){switch(n){case"vertical":return e;case"horizontal":return t;default:return e||t}}function gc(n,e){return Xf(e,n===Jb||n===Yf,n===_a||n===qa)}function i1(n,e,t){return Xf(e,n===Yf,t?n===_a:n===qa)||n==="Enter"||n===" "||n===""}function s3(n,e,t){return Xf(e,t?n===_a:n===qa,n===Yf)}function a3(n,e,t,r){const o=t?n===qa:n===_a,s=n===Jb;return e==="both"||e==="horizontal"&&r&&r>1?n===mR:Xf(e,o,s)}function gR(n,e){const{open:t,onOpenChange:r,elements:o,floatingId:s}=n,{listRef:a,activeIndex:c,onNavigate:d=()=>{},enabled:h=!0,selectedIndex:m=null,allowEscape:g=!1,loop:b=!1,nested:v=!1,rtl:C=!1,virtual:x=!1,focusItemOnOpen:M="auto",focusItemOnHover:k=!0,openOnArrowKeyDown:O=!0,disabledIndices:D=void 0,orientation:P="vertical",parentOrientation:I,cols:Q=1,scrollItemIntoView:te=!0,virtualItemRef:X,itemSizes:se,dense:ne=!1}=e,me=Ef(o.floating),he=Sn(me),xe=Jf(),re=Pa();tt(()=>{n.dataRef.current.orientation=P},[n,P]);const $=Ct(()=>{d(z.current===-1?null:z.current)}),H=K1(o.domReference),_=w.useRef(M),z=w.useRef(m??-1),Y=w.useRef(null),A=w.useRef(!0),F=w.useRef($),q=w.useRef(!!o.floating),J=w.useRef(t),ie=w.useRef(!1),Ce=w.useRef(!1),oe=Sn(D),qe=Sn(t),He=Sn(te),Zt=Sn(m),[kn,Se]=w.useState(),[Ne,Ee]=w.useState(),we=Ct(()=>{function de(_e){if(x){var ze;(ze=_e.id)!=null&&ze.endsWith("-fui-option")&&(_e.id=s+"-"+Math.random().toString(16).slice(2,10)),Se(_e.id),re?.events.emit("virtualfocus",_e),X&&(X.current=_e)}else fo(_e,{sync:ie.current,preventScroll:!0})}const Ie=a.current[z.current],ge=Ce.current;Ie&&de(Ie),(ie.current?_e=>_e():requestAnimationFrame)(()=>{const _e=a.current[z.current]||Ie;if(!_e)return;Ie||de(_e);const ze=He.current;ze&&lt&&(ge||!A.current)&&(_e.scrollIntoView==null||_e.scrollIntoView(typeof ze=="boolean"?{block:"nearest",inline:"nearest"}:ze))})});tt(()=>{h&&(t&&o.floating?_.current&&m!=null&&(Ce.current=!0,z.current=m,$()):q.current&&(z.current=-1,F.current()))},[h,t,o.floating,m,$]),tt(()=>{if(h&&t&&o.floating)if(c==null){if(ie.current=!1,Zt.current!=null)return;if(q.current&&(z.current=-1,we()),(!J.current||!q.current)&&_.current&&(Y.current!=null||_.current===!0&&Y.current==null)){let de=0;const Ie=()=>{a.current[0]==null?(de<2&&(de?requestAnimationFrame:queueMicrotask)(Ie),de++):(z.current=Y.current==null||i1(Y.current,P,C)||v?Jp(a,oe.current):V4(a,oe.current),Y.current=null,$())};Ie()}}else ga(a,c)||(z.current=c,we(),Ce.current=!1)},[h,t,o.floating,c,Zt,v,a,P,C,$,we,oe]),tt(()=>{var de;if(!h||o.floating||!re||x||!q.current)return;const Ie=re.nodesRef.current,ge=(de=Ie.find(ze=>ze.id===xe))==null||(de=de.context)==null?void 0:de.elements.floating,We=mr(Kt(o.floating)),_e=Ie.some(ze=>ze.context&&_t(ze.context.elements.floating,We));ge&&!_e&&A.current&&ge.focus({preventScroll:!0})},[h,o.floating,re,xe,x]),tt(()=>{if(!h||!re||!x||xe)return;function de(Ie){Ee(Ie.id),X&&(X.current=Ie)}return re.events.on("virtualfocus",de),()=>{re.events.off("virtualfocus",de)}},[h,re,x,xe,X]),tt(()=>{F.current=$,J.current=t,q.current=!!o.floating}),tt(()=>{t||(Y.current=null,_.current=M)},[t,M]);const ut=c!=null,lt=w.useMemo(()=>{function de(ge){if(!qe.current)return;const We=a.current.indexOf(ge);We!==-1&&z.current!==We&&(z.current=We,$())}return{onFocus(ge){let{currentTarget:We}=ge;ie.current=!0,de(We)},onClick:ge=>{let{currentTarget:We}=ge;return We.focus({preventScroll:!0})},...k&&{onMouseMove(ge){let{currentTarget:We}=ge;ie.current=!0,Ce.current=!1,de(We)},onPointerLeave(ge){let{pointerType:We}=ge;if(!(!A.current||We==="touch")&&(ie.current=!0,z.current=-1,$(),!x)){var _e;(_e=he.current)==null||_e.focus({preventScroll:!0})}}}}},[qe,he,k,a,$,x]),Xe=w.useCallback(()=>{var de;return I??(re==null||(de=re.nodesRef.current.find(Ie=>Ie.id===xe))==null||(de=de.context)==null||(de=de.dataRef)==null?void 0:de.current.orientation)},[xe,re,I]),Bt=Ct(de=>{if(A.current=!1,ie.current=!0,de.which===229||!qe.current&&de.currentTarget===he.current)return;if(v&&a3(de.key,P,C,Q)){gc(de.key,Xe())||qt(de),r(!1,de.nativeEvent,"list-navigation"),vt(o.domReference)&&(x?re?.events.emit("virtualfocus",o.domReference):o.domReference.focus());return}const Ie=z.current,ge=Jp(a,D),We=V4(a,D);if(H||(de.key==="Home"&&(qt(de),z.current=ge,$()),de.key==="End"&&(qt(de),z.current=We,$())),Q>1){const _e=se||Array.from({length:a.current.length},()=>({width:1,height:1})),ze=sA(_e,Q,ne),hn=ze.findIndex(pn=>pn!=null&&!Mc(a,pn,D)),Rt=ze.reduce((pn,Cr,xr)=>Cr!=null&&!Mc(a,Cr,D)?xr:pn,-1),Fi=ze[lA({current:ze.map(pn=>pn!=null?a.current[pn]:null)},{event:de,orientation:P,loop:b,rtl:C,cols:Q,disabledIndices:uA([...(typeof D!="function"?D:null)||a.current.map((pn,Cr)=>Mc(a,Cr,D)?Cr:void 0),void 0],ze),minIndex:hn,maxIndex:Rt,prevIndex:aA(z.current>We?ge:z.current,_e,ze,Q,de.key===Yf?"bl":de.key===(C?_a:qa)?"tr":"tl"),stopEvent:!0})];if(Fi!=null&&(z.current=Fi,$()),P==="both")return}if(gc(de.key,P)){if(qt(de),t&&!x&&mr(de.currentTarget.ownerDocument)===de.currentTarget){z.current=i1(de.key,P,C)?ge:We,$();return}i1(de.key,P,C)?b?z.current=Ie>=We?g&&Ie!==a.current.length?-1:ge:Wt(a,{startingIndex:Ie,disabledIndices:D}):z.current=Math.min(We,Wt(a,{startingIndex:Ie,disabledIndices:D})):b?z.current=Ie<=ge?g&&Ie!==-1?a.current.length:We:Wt(a,{startingIndex:Ie,decrement:!0,disabledIndices:D}):z.current=Math.max(ge,Wt(a,{startingIndex:Ie,decrement:!0,disabledIndices:D})),ga(a,z.current)&&(z.current=-1),$()}}),Ue=w.useMemo(()=>x&&t&&ut&&{"aria-activedescendant":Ne||kn},[x,t,ut,Ne,kn]),Ye=w.useMemo(()=>({"aria-orientation":P==="both"?void 0:P,...H?{}:Ue,onKeyDown:Bt,onPointerMove(){A.current=!0}}),[Ue,Bt,P,H]),Gt=w.useMemo(()=>{function de(ge){M==="auto"&&Bb(ge.nativeEvent)&&(_.current=!0)}function Ie(ge){_.current=M,M==="auto"&&jb(ge.nativeEvent)&&(_.current=!0)}return{...Ue,onKeyDown(ge){A.current=!1;const We=ge.key.startsWith("Arrow"),_e=["Home","End"].includes(ge.key),ze=We||_e,hn=s3(ge.key,P,C),Rt=a3(ge.key,P,C,Q),Fi=s3(ge.key,Xe(),C),pn=gc(ge.key,P),Cr=(v?Fi:pn)||ge.key==="Enter"||ge.key.trim()==="";if(x&&t){const Sr=re?.nodesRef.current.find(Vo=>Vo.parentId==null),mn=re&&Sr?Wk(re.nodesRef.current,Sr.id):null;if(ze&&mn&&X){const Vo=new KeyboardEvent("keydown",{key:ge.key,bubbles:!0});if(hn||Rt){var xr,Ki;const Ka=((xr=mn.context)==null?void 0:xr.elements.domReference)===ge.currentTarget,Jl=Rt&&!Ka?(Ki=mn.context)==null?void 0:Ki.elements.domReference:hn?a.current.find(Uo=>Uo?.id===kn):null;Jl&&(qt(ge),Jl.dispatchEvent(Vo),Ee(void 0))}if((pn||_e)&&mn.context&&mn.context.open&&mn.parentId&&ge.currentTarget!==mn.context.elements.domReference){var lr;qt(ge),(lr=mn.context.elements.domReference)==null||lr.dispatchEvent(Vo);return}}return Bt(ge)}if(!(!t&&!O&&We)){if(Cr){const Sr=gc(ge.key,Xe());Y.current=v&&Sr?null:ge.key}if(v){Fi&&(qt(ge),t?(z.current=Jp(a,oe.current),$()):r(!0,ge.nativeEvent,"list-navigation"));return}pn&&(m!=null&&(z.current=m),qt(ge),!t&&O?r(!0,ge.nativeEvent,"list-navigation"):Bt(ge),t&&$())}},onFocus(){t&&!x&&(z.current=-1,$())},onPointerDown:Ie,onPointerEnter:Ie,onMouseDown:de,onClick:de}},[kn,Ue,Q,Bt,oe,M,a,v,$,r,t,O,P,Xe,C,m,re,x,X]);return w.useMemo(()=>h?{reference:Gt,floating:Ye,item:lt}:{},[h,Gt,Ye,lt])}const yR=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Xm(n,e){var t,r;e===void 0&&(e={});const{open:o,elements:s,floatingId:a}=n,{enabled:c=!0,role:d="dialog"}=e,h=Zm(),m=((t=s.domReference)==null?void 0:t.id)||h,g=w.useMemo(()=>{var O;return((O=Ef(s.floating))==null?void 0:O.id)||a},[s.floating,a]),b=(r=yR.get(d))!=null?r:d,C=Jf()!=null,x=w.useMemo(()=>b==="tooltip"||d==="label"?{["aria-"+(d==="label"?"labelledby":"describedby")]:o?g:void 0}:{"aria-expanded":o?"true":"false","aria-haspopup":b==="alertdialog"?"dialog":b,"aria-controls":o?g:void 0,...b==="listbox"&&{role:"combobox"},...b==="menu"&&{id:m},...b==="menu"&&C&&{role:"menuitem"},...d==="select"&&{"aria-autocomplete":"none"},...d==="combobox"&&{"aria-autocomplete":"list"}},[b,g,C,o,m,d]),M=w.useMemo(()=>{const O={id:g,...b&&{role:b}};return b==="tooltip"||d==="label"?O:{...O,...b==="menu"&&{"aria-labelledby":m}}},[b,g,m,d]),k=w.useCallback(O=>{let{active:D,selected:P}=O;const I={role:"option",...D&&{id:g+"-fui-option"}};switch(d){case"select":return{...I,"aria-selected":D&&P};case"combobox":return{...I,"aria-selected":P}}return{}},[g,d]);return w.useMemo(()=>c?{reference:x,floating:M,item:k}:{},[c,x,M,k])}function bR(n,e){var t;const{open:r,dataRef:o}=n,{listRef:s,activeIndex:a,onMatch:c,onTypingChange:d,enabled:h=!0,findMatch:m=null,resetMs:g=750,ignoreKeys:b=[],selectedIndex:v=null}=e,C=w.useRef(-1),x=w.useRef(""),M=w.useRef((t=v??a)!=null?t:-1),k=w.useRef(null),O=Ct(c),D=Ct(d),P=Sn(m),I=Sn(b);tt(()=>{r&&(an(C),k.current=null,x.current="")},[r]),tt(()=>{if(r&&x.current===""){var ne;M.current=(ne=v??a)!=null?ne:-1}},[r,v,a]);const Q=Ct(ne=>{ne?o.current.typing||(o.current.typing=ne,D(ne)):o.current.typing&&(o.current.typing=ne,D(ne))}),te=Ct(ne=>{function me(H,_,z){const Y=P.current?P.current(_,z):_.find(A=>A?.toLocaleLowerCase().indexOf(z.toLocaleLowerCase())===0);return Y?H.indexOf(Y):-1}const he=s.current;if(x.current.length>0&&x.current[0]!==" "&&(me(he,he,x.current)===-1?Q(!1):ne.key===" "&&qt(ne)),he==null||I.current.includes(ne.key)||ne.key.length!==1||ne.ctrlKey||ne.metaKey||ne.altKey)return;r&&ne.key!==" "&&(qt(ne),Q(!0)),he.every(H=>{var _,z;return H?((_=H[0])==null?void 0:_.toLocaleLowerCase())!==((z=H[1])==null?void 0:z.toLocaleLowerCase()):!0})&&x.current===ne.key&&(x.current="",M.current=k.current),x.current+=ne.key,an(C),C.current=window.setTimeout(()=>{x.current="",M.current=k.current,Q(!1)},g);const re=M.current,$=me(he,[...he.slice((re||0)+1),...he.slice(0,(re||0)+1)],x.current);$!==-1?(O($),k.current=$):ne.key!==" "&&(x.current="",Q(!1))}),X=w.useMemo(()=>({onKeyDown:te}),[te]),se=w.useMemo(()=>({onKeyDown:te,onKeyUp(ne){ne.key===" "&&Q(!1)}}),[te,Q]);return w.useMemo(()=>h?{reference:X,floating:se}:{},[h,X,se])}function vR({initialOpen:n=!1,placement:e="top",open:t,onOpenChange:r,delay:o=600,closeDelay:s=0}={}){const[a,c]=w.useState(n),d=t??a,h=r??c,m=Jm({placement:e,open:d,onOpenChange:h,whileElementsMounted:Pm,middleware:[Fm(4),$m({crossAxis:e.includes("-"),fallbackAxisSideDirection:"start",padding:4}),Km({padding:4})]}),g=m.context,b=XA(g,{mouseOnly:!0,move:!1,restMs:o,enabled:t==null,delay:{close:s}}),v=pR(g,{enabled:t==null}),C=Ym(g),x=Xm(g,{role:"tooltip"}),M=Qm([b,v,C,x]);return w.useMemo(()=>({open:d,setOpen:h,...M,...m}),[d,h,M,m])}const $1=w.createContext(null);function n9(){const n=w.useContext($1);if(n==null)throw new Error("Tooltip components must be wrapped in <TooltipProvider />");return n}function r9({children:n,...e}){const t=vR(e);return e.useDelayGroup?S.jsx(eR,{delay:{open:e.delay??0,close:e.closeDelay??0},timeoutMs:e.timeout,children:S.jsx($1.Provider,{value:t,children:n})}):S.jsx($1.Provider,{value:t,children:n})}const i9=w.forwardRef(function({children:e,asChild:t=!1,...r},o){const s=n9(),a=w.isValidElement(e)?parseInt(w.version,10)>=19?e.props.ref:e.ref:void 0,c=jo([s.refs.setReference,o,a]);if(t&&w.isValidElement(e)){const d={"data-tooltip-state":s.open?"open":"closed"};return w.cloneElement(e,s.getReferenceProps({ref:c,...r,...typeof e.props=="object"?e.props:{},...d}))}return S.jsx("button",{ref:c,"data-tooltip-state":s.open?"open":"closed",...s.getReferenceProps(r),children:e})}),o9=w.forwardRef(function({style:e,children:t,portal:r=!0,portalProps:o={},...s},a){const c=n9(),d=jo([c.refs.setFloating,a]);if(!c.open)return null;const h=S.jsx("div",{ref:d,style:{...c.floatingStyles,...e},...c.getFloatingProps(s),className:"tiptap-tooltip",children:t});return r?S.jsx(Gm,{...o,children:h}):h});r9.displayName="Tooltip";i9.displayName="TooltipTrigger";o9.displayName="TooltipContent";const CR={ctrl:"⌘",alt:"⌥",shift:"⇧"},xR=(n,e)=>{if(e){const t=n.toLowerCase();return CR[t]||n.toUpperCase()}return n.charAt(0).toUpperCase()+n.slice(1)},SR=(n,e)=>n?n.split("-").map(t=>t.trim()).map(t=>xR(t,e)):[],ER=({shortcuts:n})=>n.length===0?null:S.jsx("div",{children:n.map((e,t)=>S.jsxs(w.Fragment,{children:[t>0&&S.jsx("kbd",{children:"+"}),S.jsx("kbd",{children:e})]},t))}),Ge=w.forwardRef(({className:n="",children:e,tooltip:t,showTooltip:r=!0,shortcutKeys:o,"aria-label":s,...a},c)=>{const d=w.useMemo(()=>typeof navigator<"u"&&navigator.platform.toLowerCase().includes("mac"),[]),h=w.useMemo(()=>SR(o,d),[o,d]);return!t||!r?S.jsx("button",{className:`tiptap-button ${n}`.trim(),ref:c,"aria-label":s,...a,children:e}):S.jsxs(r9,{delay:200,children:[S.jsx(i9,{className:`tiptap-button ${n}`.trim(),ref:c,"aria-label":s,...a,children:e}),S.jsxs(o9,{children:[t,S.jsx(ER,{shortcuts:h})]})]})});Ge.displayName="Button";const Z1=w.forwardRef(({orientation:n="horizontal",size:e,className:t="",style:r={},...o},s)=>{const a={...r,...n==="horizontal"&&!e&&{flex:1},...e&&{width:n==="vertical"?"1px":e,height:n==="horizontal"?"1px":e}};return S.jsx("div",{ref:s,...o,className:t,style:a})});Z1.displayName="Spacer";const Io=w.forwardRef(({decorative:n,orientation:e="vertical",className:t="",...r},o)=>{const a=n?{role:"none"}:{"aria-orientation":e==="vertical"?e:void 0,role:"separator"};return S.jsx("div",{className:`tiptap-separator ${t}`.trim(),"data-orientation":e,...a,...r,ref:o})});Io.displayName="Separator";const Wm=n=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})},e0=(n,e)=>{w.useEffect(()=>{const t=n.current;if(!t)return;let r=!0;r&&requestAnimationFrame(e);const o=new MutationObserver(()=>{r&&requestAnimationFrame(e)});return o.observe(t,{childList:!0,subtree:!0,attributes:!0}),()=>{r=!1,o.disconnect()}},[n,e])},wR=n=>{w.useEffect(()=>{const e=n.current;if(!e)return;const t=()=>Array.from(e.querySelectorAll('button:not([disabled]), [role="button"]:not([disabled]), [tabindex="0"]:not([disabled])')),r=(d,h,m)=>{d.preventDefault();let g=h;g>=m.length?g=0:g<0&&(g=m.length-1),m[g]?.focus()},o=d=>{const h=t();if(!h.length)return;const m=document.activeElement,g=h.indexOf(m);if(!e.contains(m))return;const v={ArrowRight:()=>r(d,g+1,h),ArrowDown:()=>r(d,g+1,h),ArrowLeft:()=>r(d,g-1,h),ArrowUp:()=>r(d,g-1,h),Home:()=>r(d,0,h),End:()=>r(d,h.length-1,h)}[d.key];v&&v()},s=d=>{const h=d.target;e.contains(h)&&h.setAttribute("data-focus-visible","true")},a=d=>{const h=d.target;e.contains(h)&&h.removeAttribute("data-focus-visible")};return e.addEventListener("keydown",o),e.addEventListener("focus",s,!0),e.addEventListener("blur",a,!0),t().forEach(d=>{d.addEventListener("focus",s),d.addEventListener("blur",a)}),()=>{e.removeEventListener("keydown",o),e.removeEventListener("focus",s,!0),e.removeEventListener("blur",a,!0),t().forEach(h=>{h.removeEventListener("focus",s),h.removeEventListener("blur",a)})}},[n])},MR=n=>{const[e,t]=w.useState(!0),r=w.useRef(!1);w.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[]);const o=w.useCallback(()=>{if(!r.current)return;const s=n.current;if(!s)return;const a=Array.from(s.children).some(c=>c instanceof HTMLElement&&c.getAttribute("role")==="group"?c.children.length>0:!1);t(a)},[n]);return e0(n,o),e},TR=n=>{const[e,t]=w.useState(!0),r=w.useRef(!1);w.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[]);const o=w.useCallback(()=>{if(!r.current)return;const s=n.current;if(!s)return;const a=Array.from(s.children).some(c=>c instanceof HTMLElement);t(a)},[n]);return e0(n,o),e},kR=n=>{const[e,t]=w.useState(!0),r=w.useRef(!1);w.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[]);const o=w.useCallback(()=>{if(!r.current)return;const s=n.current;if(!s)return;const a=s.previousElementSibling,c=s.nextElementSibling;if(!a||!c){t(!1);return}const d=a.getAttribute("role")==="group"&&c.getAttribute("role")==="group",h=a.children.length>0&&c.children.length>0;t(d&&h)},[n]);return e0(n,o),e},l9=w.forwardRef(({children:n,className:e,variant:t="fixed",...r},o)=>{const s=w.useRef(null),a=MR(s);return wR(s),a?S.jsx("div",{ref:Wm([s,o]),role:"toolbar","aria-label":"toolbar","data-variant":t,className:`tiptap-toolbar ${e||""}`,...r,children:n}):null});l9.displayName="Toolbar";const Pr=w.forwardRef(({children:n,className:e,...t},r)=>{const o=w.useRef(null);return TR(o)?S.jsx("div",{ref:Wm([o,r]),role:"group",className:`tiptap-toolbar-group ${e||""}`,...t,children:n}):null});Pr.displayName="ToolbarGroup";const Ti=w.forwardRef(({...n},e)=>{const t=w.useRef(null);return kR(t)?S.jsx(Io,{ref:Wm([t,e]),orientation:"vertical",decorative:!0,...n}):null});Ti.displayName="ToolbarSeparator";const s9=w.memo(({className:n,...e})=>S.jsx("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{d:"M18.7071 6.70711C19.0976 6.31658 19.0976 5.68342 18.7071 5.29289C18.3166 4.90237 17.6834 4.90237 17.2929 5.29289L12 10.5858L6.70711 5.29289C6.31658 4.90237 5.68342 4.90237 5.29289 5.29289C4.90237 5.68342 4.90237 6.31658 5.29289 6.70711L10.5858 12L5.29289 17.2929C4.90237 17.6834 4.90237 18.3166 5.29289 18.7071C5.68342 19.0976 6.31658 19.0976 6.70711 18.7071L12 13.4142L17.2929 18.7071C17.6834 19.0976 18.3166 19.0976 18.7071 18.7071C19.0976 18.3166 19.0976 17.6834 18.7071 17.2929L13.4142 12L18.7071 6.70711Z",fill:"currentColor"})}));s9.displayName="CloseIcon";function AR(n){const[e,t]=w.useState(null),r=async a=>{if(a.size>n.maxSize){const h=new Error(`File size exceeds maximum allowed (${n.maxSize/1024/1024}MB)`);return n.onError?.(h),null}const c=new AbortController,d={id:crypto.randomUUID(),file:a,progress:0,status:"uploading",abortController:c};t(d);try{if(!n.upload)throw new Error("Upload function is not defined");const h=await n.upload(a,m=>{t(g=>g?{...g,progress:m.progress}:null)},c.signal);if(!h)throw new Error("Upload failed: No URL returned");return c.signal.aborted?null:(t(m=>m?{...m,status:"success",url:h,progress:100}:null),n.onSuccess?.(h),h)}catch(h){return c.signal.aborted||(t(m=>m?{...m,status:"error",progress:0}:null),n.onError?.(h instanceof Error?h:new Error("Upload failed"))),null}};return{fileItem:e,uploadFiles:async a=>{if(!a||a.length===0)return n.onError?.(new Error("No files to upload")),null;if(n.limit&&a.length>n.limit)return n.onError?.(new Error(`Maximum ${n.limit} file${n.limit===1?"":"s"} allowed`)),null;const c=a[0];return c?r(c):(n.onError?.(new Error("File is undefined")),null)},clearFileItem:()=>{e&&(e.abortController&&e.abortController.abort(),e.url&&URL.revokeObjectURL(e.url),t(null))}}}const a9=()=>S.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",className:"tiptap-image-upload-icon",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("path",{d:"M11.1953 4.41771C10.3478 4.08499 9.43578 3.94949 8.5282 4.02147C7.62062 4.09345 6.74133 4.37102 5.95691 4.83316C5.1725 5.2953 4.50354 5.92989 4.00071 6.68886C3.49788 7.44783 3.17436 8.31128 3.05465 9.2138C2.93495 10.1163 3.0222 11.0343 3.3098 11.8981C3.5974 12.7619 4.07781 13.5489 4.71463 14.1995C5.10094 14.5942 5.09414 15.2274 4.69945 15.6137C4.30476 16 3.67163 15.9932 3.28532 15.5985C2.43622 14.731 1.79568 13.6816 1.41221 12.5299C1.02875 11.3781 0.91241 10.1542 1.07201 8.95084C1.23162 7.74748 1.66298 6.59621 2.33343 5.58425C3.00387 4.57229 3.89581 3.72617 4.9417 3.10998C5.98758 2.4938 7.15998 2.1237 8.37008 2.02773C9.58018 1.93176 10.7963 2.11243 11.9262 2.55605C13.0561 2.99968 14.0703 3.69462 14.8919 4.58825C15.5423 5.29573 16.0585 6.11304 16.4177 7.00002H17.4999C18.6799 6.99991 19.8288 7.37933 20.7766 8.08222C21.7245 8.78515 22.4212 9.7743 22.7637 10.9036C23.1062 12.0328 23.0765 13.2423 22.6788 14.3534C22.2812 15.4644 21.5367 16.4181 20.5554 17.0736C20.0962 17.3803 19.4752 17.2567 19.1684 16.7975C18.8617 16.3382 18.9853 15.7172 19.4445 15.4105C20.069 14.9934 20.5427 14.3865 20.7958 13.6794C21.0488 12.9724 21.0678 12.2027 20.8498 11.4841C20.6318 10.7655 20.1885 10.136 19.5853 9.6887C18.9821 9.24138 18.251 8.99993 17.5001 9.00002H15.71C15.2679 9.00002 14.8783 8.70973 14.7518 8.28611C14.4913 7.41374 14.0357 6.61208 13.4195 5.94186C12.8034 5.27164 12.0427 4.75043 11.1953 4.41771Z",fill:"currentColor"}),S.jsx("path",{d:"M11 14.4142V21C11 21.5523 11.4477 22 12 22C12.5523 22 13 21.5523 13 21V14.4142L15.2929 16.7071C15.6834 17.0976 16.3166 17.0976 16.7071 16.7071C17.0976 16.3166 17.0976 15.6834 16.7071 15.2929L12.7078 11.2936C12.7054 11.2912 12.703 11.2888 12.7005 11.2864C12.5208 11.1099 12.2746 11.0008 12.003 11L12 11L11.997 11C11.8625 11.0004 11.7343 11.0273 11.6172 11.0759C11.502 11.1236 11.3938 11.1937 11.2995 11.2864C11.297 11.2888 11.2946 11.2912 11.2922 11.2936L7.29289 15.2929C6.90237 15.6834 6.90237 16.3166 7.29289 16.7071C7.68342 17.0976 8.31658 17.0976 8.70711 16.7071L11 14.4142Z",fill:"currentColor"})]}),RR=()=>S.jsx("svg",{width:"43",height:"57",viewBox:"0 0 43 57",fill:"currentColor",className:"tiptap-image-upload-dropzone-rect-primary",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M0.75 10.75C0.75 5.64137 4.89137 1.5 10 1.5H32.3431C33.2051 1.5 34.0317 1.84241 34.6412 2.4519L40.2981 8.10876C40.9076 8.71825 41.25 9.5449 41.25 10.4069V46.75C41.25 51.8586 37.1086 56 32 56H10C4.89137 56 0.75 51.8586 0.75 46.75V10.75Z",fill:"currentColor",fillOpacity:"0.11",stroke:"currentColor",strokeWidth:"1.5"})}),OR=()=>S.jsx("svg",{width:"10",height:"10",className:"tiptap-image-upload-dropzone-rect-secondary",viewBox:"0 0 10 10",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M0 0.75H0.343146C1.40401 0.75 2.42143 1.17143 3.17157 1.92157L8.82843 7.57843C9.57857 8.32857 10 9.34599 10 10.4069V10.75H4C1.79086 10.75 0 8.95914 0 6.75V0.75Z",fill:"currentColor"})}),NR=({onFile:n,children:e})=>{const[t,r]=w.useState(!1),o=c=>{r(!1),c.preventDefault(),c.stopPropagation();const d=Array.from(c.dataTransfer.files);n(d)},s=c=>{c.preventDefault(),r(!0)},a=c=>{c.preventDefault(),r(!1)};return S.jsx("div",{className:`tiptap-image-upload-dragger ${t?"tiptap-image-upload-dragger-active":""}`,onDrop:o,onDragOver:s,onDragLeave:a,children:e})},DR=({file:n,progress:e,status:t,onRemove:r})=>{const o=s=>{if(s===0)return"0 Bytes";const a=1024,c=["Bytes","KB","MB","GB"],d=Math.floor(Math.log(s)/Math.log(a));return`${parseFloat((s/Math.pow(a,d)).toFixed(2))} ${c[d]}`};return S.jsxs("div",{className:"tiptap-image-upload-preview",children:[t==="uploading"&&S.jsx("div",{className:"tiptap-image-upload-progress",style:{width:`${e}%`}}),S.jsxs("div",{className:"tiptap-image-upload-preview-content",children:[S.jsxs("div",{className:"tiptap-image-upload-file-info",children:[S.jsx("div",{className:"tiptap-image-upload-file-icon",children:S.jsx(a9,{})}),S.jsxs("div",{className:"tiptap-image-upload-details",children:[S.jsx("span",{className:"tiptap-image-upload-text",children:n.name}),S.jsx("span",{className:"tiptap-image-upload-subtext",children:o(n.size)})]})]}),S.jsxs("div",{className:"tiptap-image-upload-actions",children:[t==="uploading"&&S.jsxs("span",{className:"tiptap-image-upload-progress-text",children:[e,"%"]}),S.jsx("button",{className:"tiptap-image-upload-close-btn",onClick:s=>{s.stopPropagation(),r()},children:S.jsx(s9,{})})]})]})]})},LR=({maxSize:n})=>S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"tiptap-image-upload-dropzone",children:[S.jsx(RR,{}),S.jsx(OR,{}),S.jsx("div",{className:"tiptap-image-upload-icon-container",children:S.jsx(a9,{})})]}),S.jsxs("div",{className:"tiptap-image-upload-content",children:[S.jsxs("span",{className:"tiptap-image-upload-text",children:[S.jsx("em",{children:"Click to upload"})," or drag and drop"]}),S.jsxs("span",{className:"tiptap-image-upload-subtext",children:["Maximum file size ",n/1024/1024,"MB."]})]})]}),HR=n=>{const{accept:e,limit:t,maxSize:r}=n.node.attrs,o=w.useRef(null),s=n.extension,a={maxSize:r,limit:t,accept:e,upload:s.options.upload,onSuccess:s.options.onSuccess,onError:s.options.onError},{fileItem:c,uploadFiles:d,clearFileItem:h}=AR(a),m=v=>{const C=v.target.files;if(!C||C.length===0){s.options.onError?.(new Error("No file selected"));return}g(Array.from(C))},g=async v=>{const C=await d(v);if(C){const x=n.getPos(),M=v[0]?.name.replace(/\.[^/.]+$/,"")||"unknown";n.editor.chain().focus().deleteRange({from:x,to:x+1}).insertContentAt(x,[{type:"image",attrs:{src:C,alt:M,title:M}}]).run()}},b=()=>{o.current&&!c&&(o.current.value="",o.current.click())};return S.jsxs(lb,{className:"tiptap-image-upload",tabIndex:0,onClick:b,children:[!c&&S.jsx(NR,{onFile:g,children:S.jsx(LR,{maxSize:r})}),c&&S.jsx(DR,{file:c.file,progress:c.progress,status:c.status,onRemove:h}),S.jsx("input",{ref:o,name:"file",accept:e,type:"file",onChange:m,onClick:v=>v.stopPropagation()})]})},zR=nn.create({name:"imageUpload",group:"block",draggable:!0,selectable:!0,atom:!0,addOptions(){return{accept:"image/*",limit:1,maxSize:0,upload:void 0,onError:void 0,onSuccess:void 0}},addAttributes(){return{accept:{default:this.options.accept},limit:{default:this.options.limit},maxSize:{default:this.options.maxSize}}},parseHTML(){return[{tag:'div[data-type="image-upload"]'}]},renderHTML({HTMLAttributes:n}){return["div",rt({"data-type":"image-upload"},n)]},addNodeView(){return sb(HR)},addCommands(){return{setImageUploadNode:(n={})=>({commands:e})=>e.insertContent({type:this.name,attrs:n})}},addKeyboardShortcuts(){return{Enter:({editor:n})=>{const{selection:e}=n.state,{nodeAfter:t}=e.$from;if(t&&t.type.name==="imageUpload"&&n.isActive("imageUpload")){const r=n.view.nodeDOM(e.$from.pos);if(r&&r instanceof HTMLElement){const o=r.firstChild;if(o&&o instanceof HTMLElement)return o.click(),!0}}return!1}}}}),u9=w.createContext(null);function c9(){const n=w.useContext(u9);if(!n)throw new Error("Popover components must be wrapped in <Popover />");return n}function BR({initialOpen:n=!1,modal:e,open:t,onOpenChange:r,side:o="bottom",align:s="center",sideOffset:a=4,alignOffset:c=0}={}){const[d,h]=w.useState(n),[m,g]=w.useState(),[b,v]=w.useState(),[C,x]=w.useState(`${o}-${s}`),[M,k]=w.useState({sideOffset:a,alignOffset:c}),O=t??d,D=r??h,P=w.useMemo(()=>[Fm({mainAxis:M.sideOffset,crossAxis:M.alignOffset}),$m({fallbackAxisSideDirection:"end",crossAxis:!1}),Km({limiter:UA({offset:M.sideOffset})})],[M.sideOffset,M.alignOffset]),I=Jm({placement:C,open:O,onOpenChange:D,whileElementsMounted:Pm,middleware:P}),Q=Qm([t9(I.context),Ym(I.context),Xm(I.context)]),te=w.useCallback((X,se,ne,me)=>{x(`${X}-${se}`),(ne!==void 0||me!==void 0)&&k({sideOffset:ne??M.sideOffset,alignOffset:me??M.alignOffset})},[M.sideOffset,M.alignOffset]);return w.useMemo(()=>({open:O,setOpen:D,...Q,...I,modal:e,labelId:m,descriptionId:b,setLabelId:g,setDescriptionId:v,updatePosition:te}),[O,D,Q,I,e,m,b,te])}function t0({children:n,modal:e=!1,...t}){const r=BR({modal:e,...t});return S.jsx(u9.Provider,{value:r,children:n})}const Wf=w.forwardRef(function({children:e,asChild:t=!1,...r},o){const s=c9(),a=w.isValidElement(e)?parseInt(w.version,10)>=19?e.props.ref:e.ref:void 0,c=jo([s.refs.setReference,o,a]);return t&&w.isValidElement(e)?w.cloneElement(e,s.getReferenceProps({ref:c,...r,...e.props,"data-state":s.open?"open":"closed"})):S.jsx("button",{ref:c,"data-state":s.open?"open":"closed",...s.getReferenceProps(r),children:e})}),ed=w.forwardRef(function({className:e,side:t="bottom",align:r="center",sideOffset:o,alignOffset:s,style:a,portal:c=!0,portalProps:d={},asChild:h=!1,children:m,...g},b){const v=c9(),C=w.isValidElement(m)?parseInt(w.version,10)>=19?m.props.ref:m.ref:void 0,x=jo([v.refs.setFloating,b,C]);if(w.useEffect(()=>{v.updatePosition(t,r,o,s)},[v,t,r,o,s]),!v.context.open)return null;const M={ref:x,style:{position:v.strategy,top:v.y??0,left:v.x??0,...a},"aria-labelledby":v.labelId,"aria-describedby":v.descriptionId,className:`tiptap-popover ${e||""}`,"data-side":t,"data-align":r,"data-state":v.context.open?"open":"closed",...v.getFloatingProps(g)},k=h&&w.isValidElement(m)?w.cloneElement(m,{...M,...m.props}):S.jsx("div",{...M,children:m}),O=S.jsx(e9,{context:v.context,modal:v.modal,children:k});return c?S.jsx(Gm,{...d,children:O}):O});Wf.displayName="PopoverTrigger";ed.displayName="PopoverContent";const Fa=w.memo(({className:n,...e})=>S.jsxs("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.8159 21H11.1841C10.9072 21 10.6478 20.8616 10.4969 20.6343C10.346 20.407 10.3244 20.1188 10.4394 19.8708L10.8045 19.0156C11.0696 18.4636 11.0186 17.8184 10.6683 17.3164C10.3181 16.8145 9.72183 16.5364 9.09901 16.5734C8.476 16.6104 7.91775 16.9571 7.63604 17.4938L7.36396 18.0062C7.24896 18.2542 6.98962 18.4221 6.70219 18.4518C6.41477 18.4815 6.12535 18.3695 5.94721 18.1514L4.84869 16.8486C4.67054 16.6305 4.62917 16.3367 4.73916 16.0797C4.84915 15.8227 5.09135 15.6422 5.36827 15.6062L6.24173 15.4938C6.86455 15.4071 7.40265 14.9929 7.68436 14.4062C7.96608 13.8196 7.94604 13.1304 7.63604 12.5562C7.32604 11.9821 6.76392 11.6105 6.14099 11.5734C5.518 11.5364 4.91871 11.8428 4.63604 12.3438L4.30396 12.9062C4.18896 13.1542 3.92962 13.3221 3.64219 13.3518C3.35477 13.3815 3.06535 13.2695 2.88721 13.0514L1.94869 11.8486C1.77054 11.6305 1.72917 11.3367 1.83916 11.0797C1.94915 10.8227 2.19135 10.6422 2.46827 10.6062L3.34173 10.4938C3.96455 10.4071 4.50265 9.99294 4.78436 9.40625C5.06608 8.81956 5.04604 8.13044 4.73604 7.55625C4.42604 6.98206 3.86392 6.61044 3.24099 6.57344C2.618 6.53644 2.01871 6.84279 1.73604 7.34375L1.46396 7.85625C1.34896 8.10425 1.08962 8.27213 0.802186 8.30181C0.514754 8.33148 0.225332 8.21948 0.0471854 8.00135L-0.85134 6.69865C-1.02949 6.48052 -1.07086 6.18669 -1.03916 5.92972C-1.00747 5.67274 -0.826704 5.49213 -0.549206 5.45622L0.324236 5.34375C0.947054 5.257 1.48516 4.84283 1.76687 4.25614C2.04858 3.66945 2.02854 2.98033 1.71854 2.40614C1.40854 1.83195 0.846424 1.46033 0.223493 1.42333C-0.399496 1.38633 -0.998788 1.69268 -1.28146 2.19364L-1.5533 2.70614C-1.6683 2.95414 -1.92764 3.122 -2.21507 3.15168C-2.5025 3.18135 -2.79192 3.06935 -2.97006 2.85122L-3.86858 1.54849C-4.04673 1.33036 -4.0881 1.03653 -4.0564 0.779558C-4.02471 0.522582 -3.84931 0.341969 -3.57182 0.305993L-2.69838 0.193524C-2.07556 0.106778 -1.53746 -0.307387 -1.25574 -0.894082C-0.974032 -1.48078 -0.994072 -2.1699 -1.30407 -2.74408C-1.61407 -3.31827 -2.17619 -3.68989 -2.79912 -3.72689C-3.42211 -3.76389 -4.0214 -3.45754 -4.30407 -2.95658L-4.57595 -2.44408C-4.69095 -2.19608 -4.95029 -2.0282 -5.23772 -1.99852C-5.52515 -1.96885 -5.81457 -2.08085 -5.99272 -2.29898L-6.89124 -3.60171C-7.06939 -3.81984 -7.11076 -4.11366 -7.07906 -4.37064C-7.04737 -4.62762 -6.87197 -4.80823 -6.59448 -4.84421L-5.72104 -4.95668C-5.09822 -5.04343 -4.56012 -5.4576 -4.2784 -6.04429C-3.99669 -6.63098 -4.01673 -7.3201 -4.32673 -7.89429C-4.63673 -8.46848 -5.19885 -8.8401 -5.82178 -8.8771C-6.44477 -8.9141 -7.04406 -8.60775 -7.32673 -8.10679L-7.59861 -7.59429C-7.71361 -7.34629 -7.97295 -7.17841 -8.26038 -7.14873C-8.54781 -7.11906 -8.83723 -7.23106 -9.01538 -7.44919L-9.9139 -8.75192C-10.091 -8.97005 -10.1324 -9.26388 -10.1007 -9.52085C-10.069 -9.77783 -9.89363 -9.95844 -9.61614 -9.99442L-8.7427 -10.1069C-8.11988 -10.1936 -7.58178 -10.6078 -7.30006 -11.1945C-7.01835 -11.7812 -7.03839 -12.4703 -7.34839 -13.0445C-7.65839 -13.6187 -8.22051 -13.9903 -8.84344 -14.0273C-9.46643 -14.0643 -10.0657 -13.758 -10.3484 -13.2571L-10.6203 -12.7446C-10.7353 -12.4966 -10.9946 -12.3287 -11.282 -12.299C-11.5695 -12.2693 -11.8589 -12.3813 -12.037 -12.5995L-12.9356 -13.9022C-13.1137 -14.1203 -13.1551 -14.4142 -13.1234 -14.6711C-13.0917 -14.9281 -12.9163 -15.1087 -12.6388 -15.1447L-11.7654 -15.2572C-11.1425 -15.3439 -10.6044 -15.7581 -10.3227 -16.3448C-10.041 -16.9315 -10.061 -17.6206 -10.371 -18.1948C-10.681 -18.769 -11.2432 -19.1406 -11.8661 -19.1776C-12.4891 -19.2146 -13.0884 -18.9083 -13.371 -18.4073L-13.6429 -17.8948C-13.7579 -17.6468 -14.0173 -17.4789 -14.3047 -17.4492C-14.5921 -17.4195 -14.8815 -17.5315 -15.0597 -17.7497L-15.9582 -19.0524C-16.1363 -19.2705 -16.1777 -19.5644 -16.146 -19.8213C-16.1143 -20.0783 -15.9389 -20.2589 -15.6614 -20.2949L-14.788 -20.4074C-14.1651 -20.4941 -13.627 -20.9083 -13.3453 -21.495C-13.0636 -22.0817 -13.0836 -22.7708 -13.3936 -23.345C-13.7036 -23.9192 -14.2657 -24.2908 -14.8887 -24.3278C-15.5117 -24.3648 -16.111 -24.0585 -16.3936 -23.5575L-16.6655 -23.045C-16.7805 -22.797 -17.0398 -22.6291 -17.3273 -22.5994C-17.6147 -22.5697 -17.9041 -22.6817 -18.0823 -22.8999L-18.9808 -24.2026C-19.1589 -24.4207 -19.2003 -24.7145 -19.1686 -24.9715C-19.1369 -25.2285 -18.9615 -25.4091 -18.684 -25.4451L-17.8106 -25.5576C-17.1877 -25.6443 -16.6496 -26.0585 -16.3679 -26.6452C-16.0862 -27.2319 -16.1062 -27.921 -16.4162 -28.4952C-16.7262 -29.0694 -17.2883 -29.441 -17.9113 -29.478C-18.5343 -29.515 -19.1336 -29.2087 -19.4162 -28.7077L-19.6881 -28.1952C-19.8031 -27.9472 -20.0624 -27.7793 -20.3499 -27.7496C-20.6373 -27.7199 -20.9267 -27.8319 -21.1049 -28.0501L-22.0034 -29.3528C-22.1815 -29.5709 -22.2229 -29.8647 -22.1912 -30.1217C-22.1595 -30.3787 -21.9841 -30.5593 -21.7066 -30.5953L-20.8332 -30.7078Z",fill:"currentColor"}),S.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"currentColor"})]}));Fa.displayName="SettingsIcon";const f9=w.memo(({className:n,...e})=>S.jsx("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.7071 6.29289C21.0976 6.68342 21.0976 7.31658 20.7071 7.70711L10.7071 17.7071C10.3166 18.0976 9.68342 18.0976 9.29289 17.7071L4.29289 12.7071C3.90237 12.3166 3.90237 11.6834 4.29289 11.2929C4.68342 10.9024 5.31658 10.9024 5.70711 11.2929L10 15.5858L19.2929 6.29289C19.6834 5.90237 20.3166 5.90237 20.7071 6.29289Z",fill:"currentColor"})}));f9.displayName="CheckIcon";const d9=w.memo(({className:n,...e})=>S.jsx("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.7071 5.29289C19.0976 5.68342 19.0976 6.31658 18.7071 6.70711L13.4142 12L18.7071 17.2929C19.0976 17.6834 19.0976 18.3166 18.7071 18.7071C18.3166 19.0976 17.6834 19.0976 17.2929 18.7071L12 13.4142L6.70711 18.7071C6.31658 19.0976 5.68342 19.0976 5.29289 18.7071C4.90237 18.3166 4.90237 17.6834 5.29289 17.2929L10.5858 12L5.29289 6.70711C4.90237 6.31658 4.90237 5.68342 5.29289 5.29289C5.68342 4.90237 6.31658 4.90237 6.70711 5.29289L12 10.5858L17.2929 5.29289C17.6834 4.90237 18.3166 4.90237 18.7071 5.29289Z",fill:"currentColor"})}));d9.displayName="XIcon";const jR=({attributes:n,onSave:e,onCancel:t})=>{const[r,o]=w.useState(n.title||""),[s,a]=w.useState(n.content||""),[c,d]=w.useState(n.blockType||""),[h,m]=w.useState(n.apiUrl||"/api/folio-blocks");w.useEffect(()=>{o(n.title||""),a(n.content||""),d(n.blockType||""),m(n.apiUrl||"/api/folio-blocks")},[n]);const g=()=>{e({title:r.trim(),content:s.trim(),blockType:c.trim(),apiUrl:h.trim()})},b=C=>{C.key==="Enter"&&(C.metaKey||C.ctrlKey)?(C.preventDefault(),g()):C.key==="Escape"&&(C.preventDefault(),t())},v=r.trim().length>0&&c.trim().length>0;return S.jsxs("div",{className:"folio-tiptap-block-dialog-content",children:[S.jsx("div",{className:"folio-tiptap-block-dialog-header",children:S.jsx("h3",{className:"folio-tiptap-block-dialog-title",children:"Configure Folio Block"})}),S.jsxs("div",{className:"folio-tiptap-block-dialog-body",children:[S.jsxs("div",{className:"folio-tiptap-block-dialog-field",children:[S.jsx("label",{htmlFor:"folio-block-title",className:"folio-tiptap-block-dialog-label",children:"Title *"}),S.jsx("input",{id:"folio-block-title",type:"text",placeholder:"Enter block title...",value:r,onChange:C=>o(C.target.value),onKeyDown:b,className:"tiptap-input",autoFocus:!0})]}),S.jsxs("div",{className:"folio-tiptap-block-dialog-field",children:[S.jsx("label",{htmlFor:"folio-block-type",className:"folio-tiptap-block-dialog-label",children:"Block Type *"}),S.jsxs("select",{id:"folio-block-type",value:c,onChange:C=>d(C.target.value),onKeyDown:b,className:"tiptap-input",children:[S.jsx("option",{value:"",children:"Select block type..."}),S.jsx("option",{value:"hero",children:"Hero Section"}),S.jsx("option",{value:"gallery",children:"Image Gallery"}),S.jsx("option",{value:"testimonial",children:"Testimonial"}),S.jsx("option",{value:"cta",children:"Call to Action"}),S.jsx("option",{value:"feature",children:"Feature Block"}),S.jsx("option",{value:"custom",children:"Custom Block"})]})]}),S.jsxs("div",{className:"folio-tiptap-block-dialog-field",children:[S.jsx("label",{htmlFor:"folio-block-content",className:"folio-tiptap-block-dialog-label",children:"Content"}),S.jsx("textarea",{id:"folio-block-content",placeholder:"Enter block content or configuration...",value:s,onChange:C=>a(C.target.value),onKeyDown:b,className:"tiptap-input folio-tiptap-block-dialog-textarea",rows:4})]}),S.jsxs("div",{className:"folio-tiptap-block-dialog-field",children:[S.jsx("label",{htmlFor:"folio-block-api-url",className:"folio-tiptap-block-dialog-label",children:"API URL"}),S.jsx("input",{id:"folio-block-api-url",type:"url",placeholder:"/api/folio-blocks",value:h,onChange:C=>m(C.target.value),onKeyDown:b,className:"tiptap-input"})]})]}),S.jsx(Io,{}),S.jsx("div",{className:"folio-tiptap-block-dialog-footer",children:S.jsxs("div",{className:"tiptap-button-group","data-orientation":"horizontal",children:[S.jsxs(Ge,{type:"button",onClick:t,"data-style":"ghost",title:"Cancel",children:[S.jsx(d9,{className:"tiptap-button-icon"}),"Cancel"]}),S.jsxs(Ge,{type:"button",onClick:g,disabled:!v,"data-style":"primary",title:"Save block (Ctrl/Cmd + Enter)",children:[S.jsx(f9,{className:"tiptap-button-icon"}),"Save Block"]})]})})]})},IR=({isOpen:n,onOpenChange:e,attributes:t,onSave:r,onCancel:o,children:s})=>{const a=d=>{r(d),e(!1)},c=()=>{o(),e(!1)};return S.jsxs(t0,{open:n,onOpenChange:e,children:[S.jsx(Wf,{asChild:!0,children:s||S.jsx(Ge,{"data-style":"ghost",title:"Configure Folio Block",children:S.jsx(Fa,{className:"tiptap-button-icon"})})}),S.jsx(ed,{side:"top",align:"start",sideOffset:8,className:"folio-tiptap-block-dialog-popover",children:S.jsx(jR,{attributes:t,onSave:a,onCancel:c})})]})},n0=w.memo(({className:n,...e})=>S.jsxs("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 3C3.44772 3 3 3.44772 3 4V8C3 8.55228 3.44772 9 4 9H8C8.55228 9 9 8.55228 9 8V4C9 3.44772 8.55228 3 8 3H4ZM5 5V7H7V5H5Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 3C15.4477 3 15 3.44772 15 4V8C15 8.55228 15.4477 9 16 9H20C20.5523 9 21 8.55228 21 8V4C21 3.44772 20.5523 3 20 3H16ZM17 5V7H19V5H17Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 15C3.44772 15 3 15.4477 3 16V20C3 20.5523 3.44772 21 4 21H8C8.55228 21 9 20.5523 9 20V16C9 15.4477 8.55228 15 8 15H4ZM5 17V19H7V17H5Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 15C15.4477 15 15 15.4477 15 16V20C15 20.5523 15.4477 21 16 21H20C20.5523 21 21 20.5523 21 20V16C21 15.4477 20.5523 15 20 15H16ZM17 17V19H19V17H17Z",fill:"currentColor"})]}));n0.displayName="BlocksIcon";const h9=w.memo(({className:n,...e})=>S.jsxs("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C12.5523 2 13 2.44772 13 3V6C13 6.55228 12.5523 7 12 7C11.4477 7 11 6.55228 11 6V3C11 2.44772 11.4477 2 12 2Z",fill:"currentColor",opacity:"0.2"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.9497 4.22183C17.3402 4.61236 17.3402 5.24552 16.9497 5.63604L14.8284 7.75736C14.4379 8.14789 13.8047 8.14789 13.4142 7.75736C13.0237 7.36684 13.0237 6.73367 13.4142 6.34315L15.5355 4.22183C15.926 3.8313 16.5592 3.8313 16.9497 4.22183Z",fill:"currentColor",opacity:"0.3"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22 12C22 12.5523 21.5523 13 21 13H18C17.4477 13 17 12.5523 17 12C17 11.4477 17.4477 11 18 11H21C21.5523 11 22 11.4477 22 12Z",fill:"currentColor",opacity:"0.4"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.7782 16.9497C20.1687 16.5592 20.1687 15.926 19.7782 15.5355L17.6569 13.4142C17.2663 13.0237 16.6332 13.0237 16.2426 13.4142C15.8521 13.8047 15.8521 14.4379 16.2426 14.8284L18.364 16.9497C18.7545 17.3402 19.3876 17.3402 19.7782 16.9497Z",fill:"currentColor",opacity:"0.5"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 17C12.5523 17 13 17.4477 13 18V21C13 21.5523 12.5523 22 12 22C11.4477 22 11 21.5523 11 21V18C11 17.4477 11.4477 17 12 17Z",fill:"currentColor",opacity:"0.6"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.05025 19.7782C7.44078 20.1687 7.44078 20.8019 7.05025 21.1924C6.65973 21.5829 6.02656 21.5829 5.63604 21.1924L3.51472 19.0711C3.12419 18.6805 3.12419 18.0474 3.51472 17.6569C3.90524 17.2663 4.53841 17.2663 4.92893 17.6569L7.05025 19.7782Z",fill:"currentColor",opacity:"0.7"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 12C7 12.5523 6.55228 13 6 13H3C2.44772 13 2 12.5523 2 12C2 11.4477 2.44772 11 3 11H6C6.55228 11 7 11.4477 7 12Z",fill:"currentColor",opacity:"0.8"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.22183 7.05025C4.61236 7.44078 5.24552 7.44078 5.63604 7.05025L7.75736 4.92893C8.14789 4.53841 8.14789 3.90524 7.75736 3.51472C7.36684 3.12419 6.73367 3.12419 6.34315 3.51472L4.22183 5.63604C3.8313 6.02656 3.8313 6.65973 4.22183 7.05025Z",fill:"currentColor",opacity:"0.9"})]}));h9.displayName="LoaderIcon";const p9=w.memo(({className:n,...e})=>S.jsxs("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2ZM4 12C4 7.58172 7.58172 4 12 4C16.4183 4 20 7.58172 20 12C20 16.4183 16.4183 20 12 20C7.58172 20 4 16.4183 4 12Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 7C12.5523 7 13 7.44772 13 8V12C13 12.5523 12.5523 13 12 13C11.4477 13 11 12.5523 11 12V8C11 7.44772 11.4477 7 12 7Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 15C12.5523 15 13 15.4477 13 16C13 16.5523 12.5523 17 12 17C11.4477 17 11 16.5523 11 16C11 15.4477 11.4477 15 12 15Z",fill:"currentColor"})]}));p9.displayName="AlertCircleIcon";const VR=async n=>{await new Promise(s=>setTimeout(s,1e3));const{title:e,content:t,blockType:r}=n;if(!r)throw new Error("Block type is required");let o="";switch(r){case"hero":o=`
        <div class="folio-block folio-block-hero">
          <h1>${e||"Hero Title"}</h1>
          <p>${t||"This is a hero section with compelling content that draws visitors in."}</p>
          <button class="btn btn-primary">Get Started</button>
        </div>
      `;break;case"gallery":o=`
        <div class="folio-block folio-block-gallery">
          <h2>${e||"Image Gallery"}</h2>
          <div class="gallery-grid">
            <div class="gallery-item">📷 Image 1</div>
            <div class="gallery-item">📷 Image 2</div>
            <div class="gallery-item">📷 Image 3</div>
            <div class="gallery-item">📷 Image 4</div>
          </div>
          ${t?`<p>${t}</p>`:""}
        </div>
      `;break;case"testimonial":o=`
        <div class="folio-block folio-block-testimonial">
          <h3>${e||"Customer Testimonial"}</h3>
          <blockquote>
            "${t||"This product has completely transformed our workflow. Highly recommended!"}"
          </blockquote>
          <cite>— Happy Customer</cite>
        </div>
      `;break;case"cta":o=`
        <div class="folio-block folio-block-cta">
          <h2>${e||"Ready to Get Started?"}</h2>
          <p>${t||"Join thousands of satisfied customers today."}</p>
          <div class="cta-buttons">
            <button class="btn btn-primary">Start Free Trial</button>
            <button class="btn btn-secondary">Learn More</button>
          </div>
        </div>
      `;break;case"feature":o=`
        <div class="folio-block folio-block-feature">
          <h3>${e||"Amazing Feature"}</h3>
          <div class="feature-content">
            <div class="feature-icon">⭐</div>
            <div class="feature-text">
              <p>${t||"This feature will help you accomplish your goals more efficiently than ever before."}</p>
            </div>
          </div>
        </div>
      `;break;case"custom":o=`
        <div class="folio-block folio-block-custom">
          <h3>${e||"Custom Block"}</h3>
          <div class="custom-content">
            ${t||"<p>This is a custom block with your own content and styling.</p>"}
          </div>
        </div>
      `;break;default:o=`
        <div class="folio-block folio-block-default">
          <h3>${e||"Folio Block"}</h3>
          <p>${t||"This is a generic Folio block."}</p>
        </div>
      `}return{html:o,success:!0}},UR=(n,e)=>{const[t,r]=w.useState(!1),[o,s]=w.useState(null),[a,c]=w.useState(""),d=w.useCallback(async()=>{if(!(!e||!n.title&&!n.blockType)){r(!0),s(null);try{const h=await VR(n);if(h.success)c(h.html);else throw new Error(h.error||"Failed to load content")}catch(h){const m=h instanceof Error?h.message:"Unknown error occurred";s(m),console.error("Failed to load Folio block content:",h)}finally{r(!1)}}},[n,e]);return w.useEffect(()=>{d()},[d]),{loading:t,error:o,htmlContent:a,reload:d}},u3=({onConfigure:n,attributes:e})=>S.jsx("div",{className:"folio-tiptap-block-placeholder",children:S.jsxs("div",{className:"folio-tiptap-block-placeholder-content",children:[S.jsx("div",{className:"folio-tiptap-block-placeholder-icon",children:S.jsx(n0,{})}),S.jsx("h4",{className:"folio-tiptap-block-placeholder-title",children:e.title||"Folio Block"}),S.jsx("p",{className:"folio-tiptap-block-placeholder-description",children:e.blockType?`Block Type: ${e.blockType}`:"Click to configure this Folio block"}),S.jsxs(Ge,{onClick:n,"data-style":"primary",className:"folio-tiptap-block-configure-btn",children:[S.jsx(Fa,{className:"tiptap-button-icon"}),e.title?"Edit Block":"Configure Block"]})]})}),_R=({htmlContent:n,onEdit:e,attributes:t})=>S.jsxs("div",{className:"folio-tiptap-block-content",children:[S.jsxs("div",{className:"folio-tiptap-block-header",children:[S.jsx("span",{className:"folio-tiptap-block-title",children:t.title||"Folio Block"}),S.jsx(Ge,{onClick:e,"data-style":"ghost",className:"folio-tiptap-block-edit-btn",title:"Edit block",children:S.jsx(Fa,{className:"tiptap-button-icon"})})]}),S.jsx("div",{className:"folio-tiptap-block-rendered-content",dangerouslySetInnerHTML:{__html:n}})]}),qR=()=>S.jsxs("div",{className:"folio-tiptap-block-loading",children:[S.jsx(h9,{className:"folio-tiptap-block-loading-icon"}),S.jsx("span",{className:"folio-tiptap-block-loading-text",children:"Loading block content..."})]}),PR=({error:n,onRetry:e,onConfigure:t})=>S.jsx("div",{className:"folio-tiptap-block-error",children:S.jsxs("div",{className:"folio-tiptap-block-error-content",children:[S.jsx(p9,{className:"folio-tiptap-block-error-icon"}),S.jsx("h4",{className:"folio-tiptap-block-error-title",children:"Failed to load block"}),S.jsx("p",{className:"folio-tiptap-block-error-message",children:n}),S.jsxs("div",{className:"folio-tiptap-block-error-actions",children:[S.jsx(Ge,{onClick:e,"data-style":"ghost",children:"Retry"}),S.jsxs(Ge,{onClick:t,"data-style":"primary",children:[S.jsx(Fa,{className:"tiptap-button-icon"}),"Configure"]})]})]})}),FR=n=>{const{node:e,updateAttributes:t}=n,r=e.attrs,[o,s]=w.useState(!1),a=!r.title&&!r.blockType;w.useEffect(()=>{a&&s(!0)},[a]);const c=r.title||r.blockType,{loading:d,error:h,htmlContent:m,reload:g}=UR(r,!!c),b=M=>{t(M),s(!1)},v=()=>{if(a){const M=n.getPos();n.editor.chain().focus().deleteRange({from:M,to:M+1}).run()}s(!1)},C=()=>{s(!0)},x=()=>c?d?S.jsx(qR,{}):h?S.jsx(PR,{error:h,onRetry:g,onConfigure:C}):m?S.jsx(_R,{htmlContent:m,onEdit:C,attributes:r}):S.jsx(u3,{onConfigure:C,attributes:r}):S.jsx(u3,{onConfigure:C,attributes:r});return S.jsx(lb,{className:"folio-tiptap-block-wrapper",children:S.jsx(IR,{isOpen:o,onOpenChange:s,attributes:r,onSave:b,onCancel:v,children:S.jsx("div",{className:"folio-tiptap-block",children:x()})})})},KR=nn.create({name:"folioTiptapBlock",group:"block",draggable:!0,selectable:!0,atom:!0,addOptions(){return console.log("FolioTiptapBlock extension loading..."),{apiUrl:"/api/folio-blocks",onError:void 0,onSuccess:void 0}},addAttributes(){return{title:{default:"",parseHTML:n=>n.getAttribute("data-title"),renderHTML:n=>n.title?{"data-title":n.title}:{}},content:{default:"",parseHTML:n=>n.getAttribute("data-content"),renderHTML:n=>n.content?{"data-content":n.content}:{}},blockType:{default:"",parseHTML:n=>n.getAttribute("data-block-type"),renderHTML:n=>n.blockType?{"data-block-type":n.blockType}:{}},apiUrl:{default:this.options.apiUrl,parseHTML:n=>n.getAttribute("data-api-url"),renderHTML:n=>n.apiUrl?{"data-api-url":n.apiUrl}:{}},htmlContent:{default:"",parseHTML:n=>n.innerHTML,renderHTML:n=>({})}}},parseHTML(){return[{tag:'div[data-type="folio-tiptap-block"]'}]},renderHTML({HTMLAttributes:n}){return["div",rt({"data-type":"folio-tiptap-block",class:"folio-tiptap-block-wrapper"},n),0]},addNodeView(){return sb(FR)},addCommands(){return console.log("FolioTiptapBlock commands registered"),{setFolioTiptapBlock:(n={})=>({commands:e})=>{console.log("setFolioTiptapBlock command called with attributes:",n);const t=e.insertContent({type:this.name,attrs:{...n,apiUrl:n.apiUrl||this.options.apiUrl}});return console.log("insertContent result:",t),t}}},addKeyboardShortcuts(){return{Enter:({editor:n})=>{const{selection:e}=n.state,{nodeAfter:t}=e.$from;if(t&&t.type.name==="folioTiptapBlock"&&n.isActive("folioTiptapBlock")){const r=n.view.nodeDOM(e.$from.pos);if(r&&r instanceof HTMLElement){const o=r.firstChild;if(o&&o instanceof HTMLElement)return o.click(),!0}}return!1}}}});function rn(n){const{editor:e}=sM();return w.useMemo(()=>n||e,[n,e])}const r0=w.memo(({className:n,...e})=>S.jsx("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.29289 8.29289C5.68342 7.90237 6.31658 7.90237 6.70711 8.29289L12 13.5858L17.2929 8.29289C17.6834 7.90237 18.3166 7.90237 18.7071 8.29289C19.0976 8.68342 19.0976 9.31658 18.7071 9.70711L12.7071 15.7071C12.3166 16.0976 11.6834 16.0976 11.2929 15.7071L5.29289 9.70711C4.90237 9.31658 4.90237 8.68342 5.29289 8.29289Z",fill:"currentColor"})}));r0.displayName="ChevronDownIcon";const G1=w.memo(({className:n,...e})=>S.jsx("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{d:"M6 3C6.55228 3 7 3.44772 7 4V11H17V4C17 3.44772 17.4477 3 18 3C18.5523 3 19 3.44772 19 4V20C19 20.5523 18.5523 21 18 21C17.4477 21 17 20.5523 17 20V13H7V20C7 20.5523 6.55228 21 6 21C5.44772 21 5 20.5523 5 20V4C5 3.44772 5.44772 3 6 3Z",fill:"currentColor"})}));G1.displayName="HeadingIcon";const Y1=5*1024*1024,td=(n,e)=>e?.schema?e.schema.spec.marks.get(n)!==void 0:!1,Yl=(n,e)=>e?.schema?e.schema.spec.nodes.get(n)!==void 0:!1;function $R(n){return!!n&&n.content.size===0}function ZR(n){const{editor:e,node:t,nodePos:r}=n;if(!e||!e.state?.doc)return null;const o=t!=null,s=r!=null;if(!o&&!s)return null;if(s)try{const d=e.state.doc.nodeAt(r);if(d)return{pos:r,node:d}}catch(d){return console.error("Error checking node at position:",d),null}let a=-1,c=null;return e.state.doc.descendants((d,h)=>d===t?(a=h,c=d,!1):!0),a!==-1&&c!==null?{pos:a,node:c}:null}const GR=async(n,e,t)=>{if(!n)throw new Error("No file provided");if(n.size>Y1)throw new Error(`File size exceeds maximum allowed (${Y1/(1024*1024)}MB)`);for(let r=0;r<=100;r+=10){if(t?.aborted)throw new Error("Upload cancelled");await new Promise(o=>setTimeout(o,500)),e?.({progress:r})}return"/images/placeholder-image.png"},m9=w.memo(({className:n,...e})=>S.jsxs("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{d:"M5 6C5 5.44772 4.55228 5 4 5C3.44772 5 3 5.44772 3 6V18C3 18.5523 3.44772 19 4 19C4.55228 19 5 18.5523 5 18V13H11V18C11 18.5523 11.4477 19 12 19C12.5523 19 13 18.5523 13 18V6C13 5.44772 12.5523 5 12 5C11.4477 5 11 5.44772 11 6V11H5V6Z",fill:"currentColor"}),S.jsx("path",{d:"M21.0001 10C21.0001 9.63121 20.7971 9.29235 20.472 9.11833C20.1468 8.94431 19.7523 8.96338 19.4454 9.16795L16.4454 11.168C15.9859 11.4743 15.8617 12.0952 16.1681 12.5547C16.4744 13.0142 17.0953 13.1384 17.5548 12.8321L19.0001 11.8685V18C19.0001 18.5523 19.4478 19 20.0001 19C20.5524 19 21.0001 18.5523 21.0001 18V10Z",fill:"currentColor"})]}));m9.displayName="HeadingOneIcon";const g9=w.memo(({className:n,...e})=>S.jsxs("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{d:"M5 6C5 5.44772 4.55228 5 4 5C3.44772 5 3 5.44772 3 6V18C3 18.5523 3.44772 19 4 19C4.55228 19 5 18.5523 5 18V13H11V18C11 18.5523 11.4477 19 12 19C12.5523 19 13 18.5523 13 18V6C13 5.44772 12.5523 5 12 5C11.4477 5 11 5.44772 11 6V11H5V6Z",fill:"currentColor"}),S.jsx("path",{d:"M22.0001 12C22.0001 10.7611 21.1663 9.79297 20.0663 9.42632C18.9547 9.05578 17.6171 9.28724 16.4001 10.2C15.9582 10.5314 15.8687 11.1582 16.2001 11.6C16.5314 12.0418 17.1582 12.1314 17.6001 11.8C18.383 11.2128 19.0455 11.1942 19.4338 11.3237C19.8339 11.457 20.0001 11.7389 20.0001 12C20.0001 12.4839 19.8554 12.7379 19.6537 12.9481C19.4275 13.1837 19.1378 13.363 18.7055 13.6307C18.6313 13.6767 18.553 13.7252 18.4701 13.777C17.9572 14.0975 17.3128 14.5261 16.8163 15.2087C16.3007 15.9177 16.0001 16.8183 16.0001 18C16.0001 18.5523 16.4478 19 17.0001 19H21.0001C21.5523 19 22.0001 18.5523 22.0001 18C22.0001 17.4477 21.5523 17 21.0001 17H18.131C18.21 16.742 18.3176 16.5448 18.4338 16.385C18.6873 16.0364 19.0429 15.7775 19.5301 15.473C19.5898 15.4357 19.6536 15.3966 19.7205 15.3556C20.139 15.0992 20.6783 14.7687 21.0964 14.3332C21.6447 13.7621 22.0001 13.0161 22.0001 12Z",fill:"currentColor"})]}));g9.displayName="HeadingTwoIcon";const y9=w.memo(({className:n,...e})=>S.jsxs("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{d:"M4 5C4.55228 5 5 5.44772 5 6V11H11V6C11 5.44772 11.4477 5 12 5C12.5523 5 13 5.44772 13 6V18C13 18.5523 12.5523 19 12 19C11.4477 19 11 18.5523 11 18V13H5V18C5 18.5523 4.55228 19 4 19C3.44772 19 3 18.5523 3 18V6C3 5.44772 3.44772 5 4 5Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.4608 11.2169C19.1135 11.0531 18.5876 11.0204 18.0069 11.3619C17.5309 11.642 16.918 11.4831 16.638 11.007C16.358 10.531 16.5169 9.91809 16.9929 9.63807C18.1123 8.97962 19.3364 8.94691 20.314 9.40808C21.2839 9.86558 21.9999 10.818 21.9999 12C21.9999 12.7957 21.6838 13.5587 21.1212 14.1213C20.5586 14.6839 19.7956 15 18.9999 15C18.4476 15 17.9999 14.5523 17.9999 14C17.9999 13.4477 18.4476 13 18.9999 13C19.2651 13 19.5195 12.8947 19.707 12.7071C19.8946 12.5196 19.9999 12.2652 19.9999 12C19.9999 11.6821 19.8159 11.3844 19.4608 11.2169Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.0001 14C18.0001 13.4477 18.4478 13 19.0001 13C19.7957 13 20.5588 13.3161 21.1214 13.8787C21.684 14.4413 22.0001 15.2043 22.0001 16C22.0001 17.2853 21.2767 18.3971 20.1604 18.8994C19.0257 19.41 17.642 19.2315 16.4001 18.3C15.9582 17.9686 15.8687 17.3418 16.2001 16.9C16.5314 16.4582 17.1582 16.3686 17.6001 16.7C18.3581 17.2685 18.9744 17.24 19.3397 17.0756C19.7234 16.9029 20.0001 16.5147 20.0001 16C20.0001 15.7348 19.8947 15.4804 19.7072 15.2929C19.5196 15.1054 19.2653 15 19.0001 15C18.4478 15 18.0001 14.5523 18.0001 14Z",fill:"currentColor"})]}));y9.displayName="HeadingThreeIcon";const b9=w.memo(({className:n,...e})=>S.jsxs("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{d:"M4 5C4.55228 5 5 5.44772 5 6V11H11V6C11 5.44772 11.4477 5 12 5C12.5523 5 13 5.44772 13 6V18C13 18.5523 12.5523 19 12 19C11.4477 19 11 18.5523 11 18V13H5V18C5 18.5523 4.55228 19 4 19C3.44772 19 3 18.5523 3 18V6C3 5.44772 3.44772 5 4 5Z",fill:"currentColor"}),S.jsx("path",{d:"M17 9C17.5523 9 18 9.44772 18 10V13H20V10C20 9.44772 20.4477 9 21 9C21.5523 9 22 9.44772 22 10V18C22 18.5523 21.5523 19 21 19C20.4477 19 20 18.5523 20 18V15H17C16.4477 15 16 14.5523 16 14V10C16 9.44772 16.4477 9 17 9Z",fill:"currentColor"})]}));b9.displayName="HeadingFourIcon";const v9=w.memo(({className:n,...e})=>S.jsxs("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{d:"M5 6C5 5.44772 4.55228 5 4 5C3.44772 5 3 5.44772 3 6V18C3 18.5523 3.44772 19 4 19C4.55228 19 5 18.5523 5 18V13H11V18C11 18.5523 11.4477 19 12 19C12.5523 19 13 18.5523 13 18V6C13 5.44772 12.5523 5 12 5C11.4477 5 11 5.44772 11 6V11H5V6Z",fill:"currentColor"}),S.jsx("path",{d:"M16 10C16 9.44772 16.4477 9 17 9H21C21.5523 9 22 9.44772 22 10C22 10.5523 21.5523 11 21 11H18V12H18.3C20.2754 12 22 13.4739 22 15.5C22 17.5261 20.2754 19 18.3 19C17.6457 19 17.0925 18.8643 16.5528 18.5944C16.0588 18.3474 15.8586 17.7468 16.1055 17.2528C16.3525 16.7588 16.9532 16.5586 17.4472 16.8056C17.7074 16.9357 17.9542 17 18.3 17C19.3246 17 20 16.2739 20 15.5C20 14.7261 19.3246 14 18.3 14H17C16.4477 14 16 13.5523 16 13L16 12.9928V10Z",fill:"currentColor"})]}));v9.displayName="HeadingFiveIcon";const C9=w.memo(({className:n,...e})=>S.jsxs("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{d:"M5 6C5 5.44772 4.55228 5 4 5C3.44772 5 3 5.44772 3 6V18C3 18.5523 3.44772 19 4 19C4.55228 19 5 18.5523 5 18V13H11V18C11 18.5523 11.4477 19 12 19C12.5523 19 13 18.5523 13 18V6C13 5.44772 12.5523 5 12 5C11.4477 5 11 5.44772 11 6V11H5V6Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.7071 9.29289C21.0976 9.68342 21.0976 10.3166 20.7071 10.7071C19.8392 11.575 19.2179 12.2949 18.7889 13.0073C18.8587 13.0025 18.929 13 19 13C20.6569 13 22 14.3431 22 16C22 17.6569 20.6569 19 19 19C17.3431 19 16 17.6569 16 16C16 14.6007 16.2837 13.4368 16.8676 12.3419C17.4384 11.2717 18.2728 10.3129 19.2929 9.29289C19.6834 8.90237 20.3166 8.90237 20.7071 9.29289ZM19 17C18.4477 17 18 16.5523 18 16C18 15.4477 18.4477 15 19 15C19.5523 15 20 15.4477 20 16C20 16.5523 19.5523 17 19 17Z",fill:"currentColor"})]}));C9.displayName="HeadingSixIcon";const x9={1:m9,2:g9,3:y9,4:b9,5:v9,6:C9},YR={1:"Ctrl-Alt-1",2:"Ctrl-Alt-2",3:"Ctrl-Alt-3",4:"Ctrl-Alt-4",5:"Ctrl-Alt-5",6:"Ctrl-Alt-6"};function JR(n,e){if(!n)return!1;try{return n.can().toggleNode("heading","paragraph",{level:e})}catch{return!1}}function QR(n,e){return n?n.isActive("heading",{level:e}):!1}function XR(n,e){n&&(n.isActive("heading",{level:e})?n.chain().focus().setNode("paragraph").run():n.chain().focus().toggleNode("heading","paragraph",{level:e}).run())}function WR(n,e,t=!1){return!!(!n||t||!JR(n,e))}function eO(n){const{editor:e,hideWhenUnavailable:t,headingInSchema:r}=n;return!(!r||!e||t&&Wn(e.state.selection))}function S9(n){return`Heading ${n}`}function tO(n,e,t=!1){const r=Yl("heading",n),o=WR(n,e,t),s=QR(n,e),a=x9[e],c=YR[e],d=S9(e);return{headingInSchema:r,isDisabled:o,isActive:s,Icon:a,shortcutKey:c,formattedName:d}}const E9=w.forwardRef(({editor:n,level:e,text:t,hideWhenUnavailable:r=!1,className:o="",disabled:s,onClick:a,children:c,...d},h)=>{const m=rn(n),{headingInSchema:g,isDisabled:b,isActive:v,Icon:C,shortcutKey:x,formattedName:M}=tO(m,e,s),k=w.useCallback(D=>{a?.(D),!D.defaultPrevented&&!b&&m&&XR(m,e)},[a,b,m,e]);return!w.useMemo(()=>eO({editor:m,hideWhenUnavailable:r,headingInSchema:g}),[m,e,r,g])||!m||!m.isEditable?null:S.jsx(Ge,{type:"button",className:o.trim(),disabled:b,"data-style":"ghost","data-active-state":v?"on":"off","data-disabled":b,role:"button",tabIndex:-1,"aria-label":M,"aria-pressed":v,tooltip:M,shortcutKeys:x,onClick:k,...d,ref:h,children:c||S.jsxs(S.Fragment,{children:[S.jsx(C,{className:"tiptap-button-icon"}),t&&S.jsx("span",{className:"tiptap-button-text",children:t})]})})});E9.displayName="HeadingButton";const w9=w.createContext(null);function i0(){const n=w.useContext(w9);if(!n)throw new Error("DropdownMenu components must be wrapped in <DropdownMenu />");return n}function nO({initialOpen:n=!1,open:e,onOpenChange:t,side:r="bottom",align:o="start"}){const[s,a]=w.useState(n),[c,d]=w.useState(`${r}-${o}`),[h,m]=w.useState(null),g=e??s,b=t??a,v=w.useRef([]),C=w.useRef([]),x=Jm({open:g,onOpenChange:b,placement:c,middleware:[Fm({mainAxis:4}),$m(),Km({padding:4})],whileElementsMounted:Pm}),{context:M}=x,k=Qm([t9(M,{event:"mousedown",toggle:!0,ignoreMouse:!1}),Xm(M,{role:"menu"}),Ym(M,{outsidePress:!0,outsidePressEvent:"mousedown"}),gR(M,{listRef:v,activeIndex:h,onNavigate:m,loop:!0}),bR(M,{listRef:C,onMatch:g?m:void 0,activeIndex:h})]),O=w.useCallback((D,P)=>{d(`${D}-${P}`)},[]);return w.useMemo(()=>({open:g,setOpen:b,activeIndex:h,setActiveIndex:m,elementsRef:v,labelsRef:C,updatePosition:O,...k,...x}),[g,b,h,k,x,O])}function M9({children:n,...e}){const t=nO(e);return S.jsx(w9.Provider,{value:t,children:S.jsx(qA,{elementsRef:t.elementsRef,labelsRef:t.labelsRef,children:n})})}const o0=w.forwardRef(({children:n,asChild:e=!1,...t},r)=>{const o=i0(),s=w.isValidElement(n)?parseInt(w.version,10)>=19?n.props.ref:n.ref:void 0,a=jo([o.refs.setReference,r,s]);if(e&&w.isValidElement(n)){const c={"data-state":o.open?"open":"closed"};return w.cloneElement(n,o.getReferenceProps({ref:a,...t,...typeof n.props=="object"?n.props:{},"aria-expanded":o.open,"aria-haspopup":"menu",...c}))}return S.jsx("button",{ref:a,"aria-expanded":o.open,"aria-haspopup":"menu","data-state":o.open?"open":"closed",...o.getReferenceProps(t),children:n})});o0.displayName="DropdownMenuTrigger";const l0=w.forwardRef(({style:n,className:e,orientation:t="vertical",side:r="bottom",align:o="start",portal:s=!0,portalProps:a={},...c},d)=>{const h=i0(),m=jo([h.refs.setFloating,d]);if(w.useEffect(()=>{h.updatePosition(r,o)},[h,r,o]),!h.open)return null;const g=S.jsx(e9,{context:h.context,modal:!1,initialFocus:0,returnFocus:!0,children:S.jsx("div",{ref:m,className:`tiptap-dropdown-menu ${e||""}`,style:{position:h.strategy,top:h.y??0,left:h.x??0,outline:"none",...n},"aria-orientation":t,"data-orientation":t,"data-state":h.open?"open":"closed","data-side":r,"data-align":o,...h.getFloatingProps(c),children:c.children})});return s?S.jsx(Gm,{...a,children:g}):g});l0.displayName="DropdownMenuContent";const s0=w.forwardRef(({children:n,disabled:e,asChild:t=!1,onSelect:r,className:o,...s},a)=>{const c=i0(),d=PA({label:e?null:n?.toString()}),h=c.activeIndex===d.index,m=w.useCallback(b=>{e||(r?.(),s.onClick?.(b),c.setOpen(!1))},[c,e,r,s]),g={ref:jo([d.ref,a]),role:"menuitem",className:o,tabIndex:h?0:-1,"data-highlighted":h,"aria-disabled":e,...c.getItemProps({...s,onClick:m})};if(t&&w.isValidElement(n)){const b=n.props,v={...g,...typeof n.props=="object"?n.props:{}},C={onClick:x=>{m(x),b.onClick?.(x)}};return w.cloneElement(n,{...v,...C})}return S.jsx("div",{...g,children:n})});s0.displayName="DropdownMenuItem";const a0=w.forwardRef(({children:n,label:e,className:t,...r},o)=>S.jsx("div",{...r,ref:o,role:"group","aria-label":e,className:`tiptap-button-group ${t||""}`,children:n}));a0.displayName="DropdownMenuGroup";const rO=w.forwardRef(({className:n,...e},t)=>S.jsx(Io,{ref:t,className:`tiptap-dropdown-menu-separator ${n||""}`,...e}));rO.displayName=Io.displayName;function iO({editor:n,levels:e=[1,2,3,4,5,6],hideWhenUnavailable:t=!1,onOpenChange:r,...o}){const[s,a]=w.useState(!1),c=rn(n),d=Yl("heading",c),h=w.useCallback(x=>{a(x),r?.(x)},[r]),m=w.useCallback(()=>{if(!c)return S.jsx(G1,{className:"tiptap-button-icon"});const x=e.find(k=>c.isActive("heading",{level:k}));if(!x)return S.jsx(G1,{className:"tiptap-button-icon"});const M=x9[x];return S.jsx(M,{className:"tiptap-button-icon"})},[c,e]),g=w.useCallback(()=>c?e.some(x=>c.can().toggleNode("heading","paragraph",{level:x})):!1,[c,e]),b=!g(),v=c?.isActive("heading")??!1;return!w.useMemo(()=>!(!d||!c||t&&(Wn(c.state.selection)||!g())),[d,c,t,g])||!c||!c.isEditable?null:S.jsxs(M9,{open:s,onOpenChange:h,children:[S.jsx(o0,{asChild:!0,children:S.jsxs(Ge,{type:"button",disabled:b,"data-style":"ghost","data-active-state":v?"on":"off","data-disabled":b,role:"button",tabIndex:-1,"aria-label":"Format text as heading","aria-pressed":v,tooltip:"Heading",...o,children:[m(),S.jsx(r0,{className:"tiptap-button-dropdown-small"})]})}),S.jsx(l0,{children:S.jsx(a0,{children:e.map(x=>S.jsx(s0,{asChild:!0,children:S.jsx(E9,{editor:c,level:x,text:S9(x),tooltip:""})},`heading-${x}`))})})]})}const T9=w.memo(({className:n,...e})=>S.jsx("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 2C20 1.44772 19.5523 1 19 1C18.4477 1 18 1.44772 18 2V4H16C15.4477 4 15 4.44772 15 5C15 5.55228 15.4477 6 16 6H18V8C18 8.55228 18.4477 9 19 9C19.5523 9 20 8.55228 20 8V6H22C22.5523 6 23 5.55228 23 5C23 4.44772 22.5523 4 22 4H20V2ZM5 4C4.73478 4 4.48043 4.10536 4.29289 4.29289C4.10536 4.48043 4 4.73478 4 5V19C4 19.2652 4.10536 19.5196 4.29289 19.7071C4.48043 19.8946 4.73478 20 5 20H5.58579L14.379 11.2068C14.9416 10.6444 15.7045 10.3284 16.5 10.3284C17.2955 10.3284 18.0584 10.6444 18.621 11.2068L20 12.5858V12C20 11.4477 20.4477 11 21 11C21.5523 11 22 11.4477 22 12V14.998C22 14.9994 22 15.0007 22 15.002V19C22 19.7957 21.6839 20.5587 21.1213 21.1213C20.5587 21.6839 19.7957 22 19 22H6.00219C6.00073 22 5.99927 22 5.99781 22H5C4.20435 22 3.44129 21.6839 2.87868 21.1213C2.31607 20.5587 2 19.7957 2 19V5C2 4.20435 2.31607 3.44129 2.87868 2.87868C3.44129 2.31607 4.20435 2 5 2H12C12.5523 2 13 2.44772 13 3C13 3.55228 12.5523 4 12 4H5ZM8.41422 20H19C19.2652 20 19.5196 19.8946 19.7071 19.7071C19.8946 19.5196 20 19.2652 20 19V15.4142L17.207 12.6212C17.0195 12.4338 16.7651 12.3284 16.5 12.3284C16.2349 12.3284 15.9806 12.4337 15.7931 12.6211L8.41422 20ZM6.87868 6.87868C7.44129 6.31607 8.20435 6 9 6C9.79565 6 10.5587 6.31607 11.1213 6.87868C11.6839 7.44129 12 8.20435 12 9C12 9.79565 11.6839 10.5587 11.1213 11.1213C10.5587 11.6839 9.79565 12 9 12C8.20435 12 7.44129 11.6839 6.87868 11.1213C6.31607 10.5587 6 9.79565 6 9C6 8.20435 6.31607 7.44129 6.87868 6.87868ZM9 8C8.73478 8 8.48043 8.10536 8.29289 8.29289C8.10536 8.48043 8 8.73478 8 9C8 9.26522 8.10536 9.51957 8.29289 9.70711C8.48043 9.89464 8.73478 10 9 10C9.26522 10 9.51957 9.89464 9.70711 9.70711C9.89464 9.51957 10 9.26522 10 9C10 8.73478 9.89464 8.48043 9.70711 8.29289C9.51957 8.10536 9.26522 8 9 8Z",fill:"currentColor"})}));T9.displayName="ImagePlusIcon";function oO(n,e){return n?n.isActive(e):!1}function lO(n,e){return n?n.chain().focus().insertContent({type:e}).run():!1}function sO(n,e="imageUpload",t=!1){const r=oO(n,e),o=w.useCallback(()=>t?!1:lO(n,e),[n,e,t]);return{isActive:r,handleInsertImage:o}}const k9=w.forwardRef(({editor:n,extensionName:e="imageUpload",text:t,className:r="",disabled:o,onClick:s,children:a,...c},d)=>{const h=rn(n),{isActive:m,handleInsertImage:g}=sO(h,e,o),b=w.useCallback(v=>{s?.(v),!v.defaultPrevented&&!o&&g()},[s,o,g]);return!h||!h.isEditable?null:S.jsx(Ge,{ref:d,type:"button",className:r.trim(),"data-style":"ghost","data-active-state":m?"on":"off",role:"button",tabIndex:-1,"aria-label":"Add image","aria-pressed":m,tooltip:"Add image",onClick:b,...c,children:a||S.jsxs(S.Fragment,{children:[S.jsx(T9,{className:"tiptap-button-icon"}),t&&S.jsx("span",{className:"tiptap-button-text",children:t})]})})});k9.displayName="ImageUploadButton";function aO(n,e){return n?n.isActive(e):!1}function uO(n,e){if(!n)return console.log("No editor available for insertFolioBlock"),!1;console.log("Inserting FolioTiptapBlock using custom command"),console.log("Available commands:",Object.keys(n.commands));try{const t=n.chain().focus().setFolioTiptapBlock().run();return console.log("setFolioTiptapBlock result:",t),t}catch(t){return console.error("Error inserting FolioTiptapBlock:",t),!1}}function cO(n,e="folioTiptapBlock",t=!1){const r=aO(n,e),o=w.useCallback(()=>t?!1:uO(n),[n,e,t]);return{isActive:r,handleInsertBlock:o}}const A9=w.forwardRef(({editor:n,extensionName:e="folioTiptapBlock",text:t,className:r="",disabled:o,onClick:s,children:a,...c},d)=>{const h=rn(n),{isActive:m,handleInsertBlock:g}=cO(h,e,o),b=w.useCallback(v=>{if(console.log("FolioTiptapBlock button clicked!"),console.log("Editor available:",!!h),console.log("Editor editable:",h?.isEditable),console.log("Disabled:",o),s?.(v),!v.defaultPrevented&&!o){console.log("Attempting to insert FolioTiptapBlock...");const C=g();console.log("Insert result:",C)}},[s,o,g]);return!h||!h.isEditable?null:S.jsx(Ge,{ref:d,type:"button",className:r.trim(),"data-style":"ghost","data-active-state":m?"on":"off",role:"button",tabIndex:-1,"aria-label":"Add Folio Block","aria-pressed":m,tooltip:"Add Folio Block",onClick:b,...c,children:a||S.jsxs(S.Fragment,{children:[S.jsx(n0,{className:"tiptap-button-icon"}),t&&S.jsx("span",{className:"tiptap-button-text",children:t})]})})});A9.displayName="FolioTiptapBlockButton";const nd=w.memo(({className:n,...e})=>S.jsxs("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 6C7 5.44772 7.44772 5 8 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H8C7.44772 7 7 6.55228 7 6Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 12C7 11.4477 7.44772 11 8 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H8C7.44772 13 7 12.5523 7 12Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 18C7 17.4477 7.44772 17 8 17H21C21.5523 17 22 17.4477 22 18C22 18.5523 21.5523 19 21 19H8C7.44772 19 7 18.5523 7 18Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 6C2 5.44772 2.44772 5 3 5H3.01C3.56228 5 4.01 5.44772 4.01 6C4.01 6.55228 3.56228 7 3.01 7H3C2.44772 7 2 6.55228 2 6Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 12C2 11.4477 2.44772 11 3 11H3.01C3.56228 11 4.01 11.4477 4.01 12C4.01 12.5523 3.56228 13 3.01 13H3C2.44772 13 2 12.5523 2 12Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 18C2 17.4477 2.44772 17 3 17H3.01C3.56228 17 4.01 17.4477 4.01 18C4.01 18.5523 3.56228 19 3.01 19H3C2.44772 19 2 18.5523 2 18Z",fill:"currentColor"})]}));nd.displayName="ListIcon";const R9=w.memo(({className:n,...e})=>S.jsxs("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 6C9 5.44772 9.44772 5 10 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H10C9.44772 7 9 6.55228 9 6Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 12C9 11.4477 9.44772 11 10 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H10C9.44772 13 9 12.5523 9 12Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 18C9 17.4477 9.44772 17 10 17H21C21.5523 17 22 17.4477 22 18C22 18.5523 21.5523 19 21 19H10C9.44772 19 9 18.5523 9 18Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 6C3 5.44772 3.44772 5 4 5H5C5.55228 5 6 5.44772 6 6V10C6 10.5523 5.55228 11 5 11C4.44772 11 4 10.5523 4 10V7C3.44772 7 3 6.55228 3 6Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 10C3 9.44772 3.44772 9 4 9H6C6.55228 9 7 9.44772 7 10C7 10.5523 6.55228 11 6 11H4C3.44772 11 3 10.5523 3 10Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.82219 13.0431C6.54543 13.4047 6.99997 14.1319 6.99997 15C6.99997 15.5763 6.71806 16.0426 6.48747 16.35C6.31395 16.5814 6.1052 16.8044 5.91309 17H5.99997C6.55226 17 6.99997 17.4477 6.99997 18C6.99997 18.5523 6.55226 19 5.99997 19H3.99997C3.44769 19 2.99997 18.5523 2.99997 18C2.99997 17.4237 3.28189 16.9575 3.51247 16.65C3.74323 16.3424 4.03626 16.0494 4.26965 15.8161C4.27745 15.8083 4.2852 15.8006 4.29287 15.7929C4.55594 15.5298 4.75095 15.3321 4.88748 15.15C4.96287 15.0495 4.99021 14.9922 4.99911 14.9714C4.99535 14.9112 4.9803 14.882 4.9739 14.8715C4.96613 14.8588 4.95382 14.845 4.92776 14.8319C4.87723 14.8067 4.71156 14.7623 4.44719 14.8944C3.95321 15.1414 3.35254 14.9412 3.10555 14.4472C2.85856 13.9533 3.05878 13.3526 3.55276 13.1056C4.28839 12.7378 5.12272 12.6934 5.82219 13.0431Z",fill:"currentColor"})]}));R9.displayName="ListOrderedIcon";const O9=w.memo(({className:n,...e})=>S.jsxs("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 6C2 4.89543 2.89543 4 4 4H8C9.10457 4 10 4.89543 10 6V10C10 11.1046 9.10457 12 8 12H4C2.89543 12 2 11.1046 2 10V6ZM8 6H4V10H8V6Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.70711 14.2929C10.0976 14.6834 10.0976 15.3166 9.70711 15.7071L5.70711 19.7071C5.31658 20.0976 4.68342 20.0976 4.29289 19.7071L2.29289 17.7071C1.90237 17.3166 1.90237 16.6834 2.29289 16.2929C2.68342 15.9024 3.31658 15.9024 3.70711 16.2929L5 17.5858L8.29289 14.2929C8.68342 13.9024 9.31658 13.9024 9.70711 14.2929Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 6C12 5.44772 12.4477 5 13 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H13C12.4477 7 12 6.55228 12 6Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 12C12 11.4477 12.4477 11 13 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H13C12.4477 13 12 12.5523 12 12Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 18C12 17.4477 12.4477 17 13 17H21C21.5523 17 22 17.4477 22 18C22 18.5523 21.5523 19 21 19H13C12.4477 19 12 18.5523 12 18Z",fill:"currentColor"})]}));O9.displayName="ListTodoIcon";const N9=[{label:"Bullet List",type:"bulletList",icon:nd},{label:"Ordered List",type:"orderedList",icon:R9},{label:"Task List",type:"taskList",icon:O9}],fO={bulletList:"Ctrl-Shift-8",orderedList:"Ctrl-Shift-7",taskList:"Ctrl-Shift-9"};function D9(n,e){if(!n)return!1;switch(e){case"bulletList":return n.can().toggleBulletList();case"orderedList":return n.can().toggleOrderedList();case"taskList":return n.can().toggleList("taskList","taskItem");default:return!1}}function u0(n,e){if(!n)return!1;switch(e){case"bulletList":return n.isActive("bulletList");case"orderedList":return n.isActive("orderedList");case"taskList":return n.isActive("taskList");default:return!1}}function dO(n,e){if(n)switch(e){case"bulletList":n.chain().focus().toggleBulletList().run();break;case"orderedList":n.chain().focus().toggleOrderedList().run();break;case"taskList":n.chain().focus().toggleList("taskList","taskItem").run();break}}function hO(n){return N9.find(e=>e.type===n)}function pO(n){const{editor:e,type:t,hideWhenUnavailable:r,listInSchema:o}=n;return!(!o||!e||r&&(Wn(e.state.selection)||!D9(e,t)))}function mO(n,e){const t=Yl(e,n),r=hO(e),o=u0(n,e),s=fO[e];return{listInSchema:t,listOption:r,isActive:o,shortcutKey:s}}const L9=w.forwardRef(({editor:n,type:e,hideWhenUnavailable:t=!1,className:r="",onClick:o,text:s,children:a,...c},d)=>{const h=rn(n),{listInSchema:m,listOption:g,isActive:b,shortcutKey:v}=mO(h,e),C=g?.icon||nd,x=w.useCallback(k=>{o?.(k),!k.defaultPrevented&&h&&dO(h,e)},[o,h,e]);return!w.useMemo(()=>pO({editor:h,type:e,hideWhenUnavailable:t,listInSchema:m}),[h,e,t,m])||!h||!h.isEditable?null:S.jsx(Ge,{type:"button",className:r.trim(),"data-style":"ghost","data-active-state":b?"on":"off",role:"button",tabIndex:-1,"aria-label":g?.label||e,"aria-pressed":b,tooltip:g?.label||e,shortcutKeys:v,onClick:x,...c,ref:d,children:a||S.jsxs(S.Fragment,{children:[S.jsx(C,{className:"tiptap-button-icon"}),s&&S.jsx("span",{className:"tiptap-button-text",children:s})]})})});L9.displayName="ListButton";function gO(n,e){return n?e.some(t=>D9(n,t)):!1}function yO(n,e){return n?e.some(t=>u0(n,t)):!1}function bO(n){return N9.filter(e=>!e.type||n.includes(e.type))}function vO(n){const{editor:e,hideWhenUnavailable:t,listInSchema:r,canToggleAny:o}=n;return!(!r||!e||t&&(Wn(e.state.selection)||!o))}function CO(n,e){const[t,r]=w.useState(!1),o=e.some(h=>Yl(h,n)),s=w.useMemo(()=>bO(e),[e]),a=gO(n,e),c=yO(n,e),d=w.useCallback((h,m)=>{r(h),m?.(h)},[]);return{isOpen:t,setIsOpen:r,listInSchema:o,filteredLists:s,canToggleAny:a,isAnyActive:c,handleOpenChange:d}}function xO(n,e){return w.useCallback(()=>{const t=e.find(r=>u0(n,r.type));return t?S.jsx(t.icon,{className:"tiptap-button-icon"}):S.jsx(nd,{className:"tiptap-button-icon"})},[n,e])}function SO({editor:n,types:e=["bulletList","orderedList","taskList"],hideWhenUnavailable:t=!1,onOpenChange:r,...o}){const s=rn(n),{isOpen:a,listInSchema:c,filteredLists:d,canToggleAny:h,isAnyActive:m,handleOpenChange:g}=CO(s,e),b=xO(s,d),v=w.useMemo(()=>vO({editor:s,hideWhenUnavailable:t,listInSchema:c,canToggleAny:h}),[s,e,t,c,h]),C=w.useCallback(x=>g(x,r),[g,r]);return!v||!s||!s.isEditable?null:S.jsxs(M9,{open:a,onOpenChange:C,children:[S.jsx(o0,{asChild:!0,children:S.jsxs(Ge,{type:"button","data-style":"ghost","data-active-state":m?"on":"off",role:"button",tabIndex:-1,"aria-label":"List options",tooltip:"List",...o,children:[b(),S.jsx(r0,{className:"tiptap-button-dropdown-small"})]})}),S.jsx(l0,{children:S.jsx(a0,{children:d.map(x=>S.jsx(s0,{asChild:!0,children:S.jsx(L9,{editor:s,type:x.type,text:x.label,hideWhenUnavailable:t,tooltip:""})},x.type))})})]})}const H9=w.memo(({className:n,...e})=>S.jsxs("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 6C8 5.44772 8.44772 5 9 5H16C16.5523 5 17 5.44772 17 6C17 6.55228 16.5523 7 16 7H9C8.44772 7 8 6.55228 8 6Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 3C4.55228 3 5 3.44772 5 4L5 20C5 20.5523 4.55229 21 4 21C3.44772 21 3 20.5523 3 20L3 4C3 3.44772 3.44772 3 4 3Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 12C8 11.4477 8.44772 11 9 11H20C20.5523 11 21 11.4477 21 12C21 12.5523 20.5523 13 20 13H9C8.44772 13 8 12.5523 8 12Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 18C8 17.4477 8.44772 17 9 17H16C16.5523 17 17 17.4477 17 18C17 18.5523 16.5523 19 16 19H9C8.44772 19 8 18.5523 8 18Z",fill:"currentColor"})]}));H9.displayName="BlockQuoteIcon";function EO(n){if(!n)return!1;try{return n.can().toggleWrap("blockquote")}catch{return!1}}function wO(n){return n?n.isActive("blockquote"):!1}function MO(n){return n?n.chain().focus().toggleWrap("blockquote").run():!1}function TO(n,e,t=!1){return!!(!n||t||!e)}function kO(n){const{editor:e,hideWhenUnavailable:t,nodeInSchema:r,canToggle:o}=n;return!r||!e||t&&(Wn(e.state.selection)||!o)?!1:!!e?.isEditable}function AO(n,e=!1,t=!1){const r=Yl("blockquote",n),o=EO(n),s=TO(n,o,e),a=wO(n),c=w.useMemo(()=>kO({editor:n,hideWhenUnavailable:t,nodeInSchema:r,canToggle:o}),[n,t,r,o]),d=w.useCallback(()=>!s&&n?MO(n):!1,[n,s]);return{nodeInSchema:r,canToggle:o,isDisabled:s,isActive:a,shouldShow:c,handleToggle:d,shortcutKey:"Ctrl-Shift-b",label:"Blockquote"}}const z9=w.forwardRef(({editor:n,text:e,hideWhenUnavailable:t=!1,className:r="",disabled:o,onClick:s,children:a,...c},d)=>{const h=rn(n),{isDisabled:m,isActive:g,shouldShow:b,handleToggle:v,shortcutKey:C,label:x}=AO(h,o,t),M=w.useCallback(k=>{s?.(k),!k.defaultPrevented&&!m&&v()},[s,m,v]);return!b||!h||!h.isEditable?null:S.jsx(Ge,{type:"button",className:r.trim(),disabled:m,"data-style":"ghost","data-active-state":g?"on":"off","data-disabled":m,role:"button",tabIndex:-1,"aria-label":"blockquote","aria-pressed":g,tooltip:x,shortcutKeys:C,onClick:M,...c,ref:d,children:a||S.jsxs(S.Fragment,{children:[S.jsx(H9,{className:"tiptap-button-icon"}),e&&S.jsx("span",{className:"tiptap-button-text",children:e})]})})});z9.displayName="BlockQuoteButton";const B9=w.memo(({className:n,...e})=>S.jsxs("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.70711 2.29289C7.09763 2.68342 7.09763 3.31658 6.70711 3.70711L4.41421 6L6.70711 8.29289C7.09763 8.68342 7.09763 9.31658 6.70711 9.70711C6.31658 10.0976 5.68342 10.0976 5.29289 9.70711L2.29289 6.70711C1.90237 6.31658 1.90237 5.68342 2.29289 5.29289L5.29289 2.29289C5.68342 1.90237 6.31658 1.90237 6.70711 2.29289Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.2929 2.29289C10.6834 1.90237 11.3166 1.90237 11.7071 2.29289L14.7071 5.29289C15.0976 5.68342 15.0976 6.31658 14.7071 6.70711L11.7071 9.70711C11.3166 10.0976 10.6834 10.0976 10.2929 9.70711C9.90237 9.31658 9.90237 8.68342 10.2929 8.29289L12.5858 6L10.2929 3.70711C9.90237 3.31658 9.90237 2.68342 10.2929 2.29289Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17 4C17 3.44772 17.4477 3 18 3H19C20.6569 3 22 4.34315 22 6V18C22 19.6569 20.6569 21 19 21H5C3.34315 21 2 19.6569 2 18V12C2 11.4477 2.44772 11 3 11C3.55228 11 4 11.4477 4 12V18C4 18.5523 4.44772 19 5 19H19C19.5523 19 20 18.5523 20 18V6C20 5.44772 19.5523 5 19 5H18C17.4477 5 17 4.55228 17 4Z",fill:"currentColor"})]}));B9.displayName="CodeBlockIcon";function RO(n){if(!n)return!1;try{return n.can().toggleNode("codeBlock","paragraph")}catch{return!1}}function OO(n){return n?n.isActive("codeBlock"):!1}function NO(n){return n?n.chain().focus().toggleNode("codeBlock","paragraph").run():!1}function DO(n,e,t=!1){return!!(!n||t||!e)}function LO(n){const{editor:e,hideWhenUnavailable:t,nodeInSchema:r,canToggle:o}=n;return!r||!e||t&&(Wn(e.state.selection)||!o)?!1:!!e?.isEditable}function HO(n,e=!1,t=!1){const r=Yl("codeBlock",n),o=RO(n),s=DO(n,o,e),a=OO(n),c=w.useMemo(()=>LO({editor:n,hideWhenUnavailable:t,nodeInSchema:r,canToggle:o}),[n,t,r,o]),d=w.useCallback(()=>!s&&n?NO(n):!1,[n,s]);return{nodeInSchema:r,canToggle:o,isDisabled:s,isActive:a,shouldShow:c,handleToggle:d,shortcutKey:"Ctrl-Alt-c",label:"Code Block"}}const j9=w.forwardRef(({editor:n,text:e,hideWhenUnavailable:t=!1,className:r="",disabled:o,onClick:s,children:a,...c},d)=>{const h=rn(n),{isDisabled:m,isActive:g,shouldShow:b,handleToggle:v,shortcutKey:C,label:x}=HO(h,o,t),M=w.useCallback(k=>{s?.(k),!k.defaultPrevented&&!m&&v()},[s,m,v]);return!b||!h||!h.isEditable?null:S.jsx(Ge,{type:"button",className:r.trim(),disabled:m,"data-style":"ghost","data-active-state":g?"on":"off","data-disabled":m,role:"button",tabIndex:-1,"aria-label":"codeBlock","aria-pressed":g,tooltip:x,shortcutKeys:C,onClick:M,...c,ref:d,children:a||S.jsxs(S.Fragment,{children:[S.jsx(B9,{className:"tiptap-button-icon"}),e&&S.jsx("span",{className:"tiptap-button-text",children:e})]})})});j9.displayName="CodeBlockButton";function zO({editor:n,containerRef:e,query:t,items:r,onSelect:o,onClose:s,orientation:a="vertical",autoSelectFirstItem:c=!0}){const[d,h]=w.useState(c?0:-1);return w.useEffect(()=>{const m=b=>{if(!r.length)return!1;const v=()=>h(x=>x===-1?0:(x+1)%r.length),C=()=>h(x=>x===-1?r.length-1:(x-1+r.length)%r.length);switch(b.key){case"ArrowUp":return a==="horizontal"?!1:(b.preventDefault(),C(),!0);case"ArrowDown":return a==="horizontal"?!1:(b.preventDefault(),v(),!0);case"ArrowLeft":return a==="vertical"?!1:(b.preventDefault(),C(),!0);case"ArrowRight":return a==="vertical"?!1:(b.preventDefault(),v(),!0);case"Tab":return b.preventDefault(),b.shiftKey?C():v(),!0;case"Home":return b.preventDefault(),h(0),!0;case"End":return b.preventDefault(),h(r.length-1),!0;case"Enter":return b.isComposing?!1:(b.preventDefault(),d!==-1&&r[d]&&o?.(r[d]),!0);case"Escape":return b.preventDefault(),s?.(),!0;default:return!1}};let g=null;if(n?g=n.view.dom:e?.current&&(g=e.current),g)return g.addEventListener("keydown",m,!0),()=>{g?.removeEventListener("keydown",m,!0)}},[n,e,r,d,o,s,a]),w.useEffect(()=>{t&&h(c?0:-1)},[t,c]),{selectedIndex:r.length?d:void 0,setSelectedIndex:h}}const I9=w.memo(({className:n,...e})=>S.jsx("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.43471 4.01458C4.34773 4.06032 4.26607 4.11977 4.19292 4.19292C4.11977 4.26607 4.06032 4.34773 4.01458 4.43471C2.14611 6.40628 1 9.0693 1 12C1 18.0751 5.92487 23 12 23C14.9306 23 17.5936 21.854 19.5651 19.9856C19.6522 19.9398 19.7339 19.8803 19.8071 19.8071C19.8803 19.7339 19.9398 19.6522 19.9856 19.5651C21.854 17.5936 23 14.9306 23 12C23 5.92487 18.0751 1 12 1C9.0693 1 6.40628 2.14611 4.43471 4.01458ZM6.38231 4.9681C7.92199 3.73647 9.87499 3 12 3C16.9706 3 21 7.02944 21 12C21 14.125 20.2635 16.078 19.0319 17.6177L6.38231 4.9681ZM17.6177 19.0319C16.078 20.2635 14.125 21 12 21C7.02944 21 3 16.9706 3 12C3 9.87499 3.73647 7.92199 4.9681 6.38231L17.6177 19.0319Z",fill:"currentColor"})}));I9.displayName="BanIcon";const c0=w.memo(({className:n,...e})=>S.jsx("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.7072 4.70711C15.0977 4.31658 15.0977 3.68342 14.7072 3.29289C14.3167 2.90237 13.6835 2.90237 13.293 3.29289L8.69294 7.89286L8.68594 7.9C8.13626 8.46079 7.82837 9.21474 7.82837 10C7.82837 10.2306 7.85491 10.4584 7.90631 10.6795L2.29289 16.2929C2.10536 16.4804 2 16.7348 2 17V20C2 20.5523 2.44772 21 3 21H12C12.2652 21 12.5196 20.8946 12.7071 20.7071L15.3205 18.0937C15.5416 18.1452 15.7695 18.1717 16.0001 18.1717C16.7853 18.1717 17.5393 17.8639 18.1001 17.3142L22.7072 12.7071C23.0977 12.3166 23.0977 11.6834 22.7072 11.2929C22.3167 10.9024 21.6835 10.9024 21.293 11.2929L16.6971 15.8887C16.5105 16.0702 16.2605 16.1717 16.0001 16.1717C15.7397 16.1717 15.4897 16.0702 15.303 15.8887L10.1113 10.697C9.92992 10.5104 9.82837 10.2604 9.82837 10C9.82837 9.73963 9.92992 9.48958 10.1113 9.30297L14.7072 4.70711ZM13.5858 17L9.00004 12.4142L4 17.4142V19H11.5858L13.5858 17Z",fill:"currentColor"})}));c0.displayName="HighlighterIcon";function f0(n){if(!n)return!1;try{return n.can().setMark("highlight")}catch{return!1}}function BO(n,e){return n?n.isActive("highlight",{color:e}):!1}function jO(n,e,t,r){if(n)try{const o=n.chain().focus();if($R(t))o.toggleMark("highlight",{color:e}).run();else if(r!=null&&r!==-1)o.setNodeSelection(r).toggleMark("highlight",{color:e}).run();else if(t){const s=ZR({editor:n,node:t});s?o.setNodeSelection(s.pos).toggleMark("highlight",{color:e}).run():o.toggleMark("highlight",{color:e}).run()}else o.toggleMark("highlight",{color:e}).run();n.chain().setMeta("hideDragHandle",!0).run()}catch(o){console.error("Failed to apply highlight:",o)}}function IO(n,e=!1){return!n||e?!0:n.isActive("code")||n.isActive("codeBlock")||n.isActive("imageUpload")||!f0(n)}function VO(n,e,t){return!(!t||!n||e&&(Wn(n.state.selection)||!f0(n)))}function UO(n,e,t=!1,r=!1){const o=td("highlight",n),s=IO(n,t),a=BO(n,e),c=w.useMemo(()=>VO(n,r,o),[n,r,o]);return{highlightInSchema:o,isDisabled:s,isActive:a,shouldShow:c}}const V9=w.forwardRef(({editor:n,node:e,nodePos:t,color:r,text:o,hideWhenUnavailable:s=!1,className:a="",disabled:c,onClick:d,onApplied:h,children:m,style:g,...b},v)=>{const C=rn(n),{isDisabled:x,isActive:M,shouldShow:k}=UO(C,r,c,s),O=w.useCallback(P=>{d?.(P),!P.defaultPrevented&&!x&&C&&(jO(C,r,e,t),h?.(r))},[r,C,x,e,t,d,h]),D=w.useMemo(()=>({...g,"--highlight-color":r}),[r,g]);return!k||!C||!C.isEditable?null:S.jsx(Ge,{type:"button",className:a.trim(),disabled:x,"data-style":"ghost","data-active-state":M?"on":"off","data-disabled":x,role:"button",tabIndex:-1,"aria-label":`${r} highlight color`,"aria-pressed":M,onClick:O,style:D,...b,ref:v,children:m||S.jsxs(S.Fragment,{children:[S.jsx("span",{className:"tiptap-button-highlight",style:{"--highlight-color":r}}),o&&S.jsx("span",{className:"tiptap-button-text",children:o})]})})});V9.displayName="ColorHighlightButton";const U9=[{label:"Green",value:"var(--tt-color-highlight-green)",border:"var(--tt-color-highlight-green-contrast)"},{label:"Blue",value:"var(--tt-color-highlight-blue)",border:"var(--tt-color-highlight-blue-contrast)"},{label:"Red",value:"var(--tt-color-highlight-red)",border:"var(--tt-color-highlight-red-contrast)"},{label:"Purple",value:"var(--tt-color-highlight-purple)",border:"var(--tt-color-highlight-purple-contrast)"},{label:"Yellow",value:"var(--tt-color-highlight-yellow)",border:"var(--tt-color-highlight-yellow-contrast)"}],d0=w.forwardRef(({className:n,children:e,...t},r)=>S.jsx(Ge,{type:"button",className:n,"data-style":"ghost","data-appearance":"default",role:"button",tabIndex:-1,"aria-label":"Highlight text",tooltip:"Highlight",ref:r,...t,children:e||S.jsx(c0,{className:"tiptap-button-icon"})}));d0.displayName="ColorHighlightPopoverButton";function _9({editor:n,colors:e=U9,onClose:t}){const r=rn(n),o=w.useRef(null),s=w.useCallback(()=>{r&&(r.chain().focus().unsetMark("highlight").run(),t?.())},[r,t]),a=w.useMemo(()=>[...e,{label:"Remove highlight",value:"none"}],[e]),{selectedIndex:c}=zO({containerRef:o,items:a,orientation:"both",onSelect:d=>{d.value==="none"&&s(),t?.()},onClose:t,autoSelectFirstItem:!1});return S.jsxs("div",{ref:o,className:"tiptap-color-highlight-content",tabIndex:0,children:[S.jsx("div",{className:"tiptap-button-group","data-orientation":"horizontal",children:e.map((d,h)=>S.jsx(V9,{editor:r,color:d.value,"aria-label":`${d.label} highlight color`,tabIndex:h===c?0:-1,"data-highlighted":c===h,onClick:t},d.value))}),S.jsx(Io,{}),S.jsx("div",{className:"tiptap-button-group",children:S.jsx(Ge,{onClick:s,"aria-label":"Remove highlight",tabIndex:c===e.length?0:-1,type:"button",role:"menuitem","data-style":"ghost","data-highlighted":c===e.length,children:S.jsx(I9,{className:"tiptap-button-icon"})})})]})}function _O({editor:n,colors:e=U9,hideWhenUnavailable:t=!1,...r}){const o=rn(n),[s,a]=w.useState(!1),[c,d]=w.useState(!1),h=td("highlight",o);w.useEffect(()=>{if(!o)return;const b=()=>{let v=!1;(!h||!o)&&(v=!0),(o.isActive("code")||o.isActive("codeBlock")||o.isActive("imageUpload"))&&(v=!0),d(v)};return o.on("selectionUpdate",b),o.on("update",b),()=>{o.off("selectionUpdate",b),o.off("update",b)}},[o,h]);const m=o?.isActive("highlight")??!1;return!w.useMemo(()=>!t||!o?!0:!(Wn(o.state.selection)||!f0(o)),[t,o])||!o||!o.isEditable?null:S.jsxs(t0,{open:s,onOpenChange:a,children:[S.jsx(Wf,{asChild:!0,children:S.jsx(d0,{disabled:c,"data-active-state":m?"on":"off","data-disabled":c,"aria-pressed":m,...r})}),S.jsx(ed,{"aria-label":"Highlight colors",children:S.jsx(_9,{editor:o,colors:e,onClose:()=>a(!1)})})]})}const q9=w.memo(({className:n,...e})=>S.jsx("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21 4C21 3.44772 20.5523 3 20 3C19.4477 3 19 3.44772 19 4V11C19 11.7956 18.6839 12.5587 18.1213 13.1213C17.5587 13.6839 16.7956 14 16 14H6.41421L9.70711 10.7071C10.0976 10.3166 10.0976 9.68342 9.70711 9.29289C9.31658 8.90237 8.68342 8.90237 8.29289 9.29289L3.29289 14.2929C2.90237 14.6834 2.90237 15.3166 3.29289 15.7071L8.29289 20.7071C8.68342 21.0976 9.31658 21.0976 9.70711 20.7071C10.0976 20.3166 10.0976 19.6834 9.70711 19.2929L6.41421 16H16C17.3261 16 18.5979 15.4732 19.5355 14.5355C20.4732 13.5979 21 12.3261 21 11V4Z",fill:"currentColor"})}));q9.displayName="CornerDownLeftIcon";const P9=w.memo(({className:n,...e})=>S.jsxs("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{d:"M14 3C14 2.44772 14.4477 2 15 2H21C21.5523 2 22 2.44772 22 3V9C22 9.55228 21.5523 10 21 10C20.4477 10 20 9.55228 20 9V5.41421L10.7071 14.7071C10.3166 15.0976 9.68342 15.0976 9.29289 14.7071C8.90237 14.3166 8.90237 13.6834 9.29289 13.2929L18.5858 4H15C14.4477 4 14 3.55228 14 3Z",fill:"currentColor"}),S.jsx("path",{d:"M4.29289 7.29289C4.48043 7.10536 4.73478 7 5 7H11C11.5523 7 12 6.55228 12 6C12 5.44772 11.5523 5 11 5H5C4.20435 5 3.44129 5.31607 2.87868 5.87868C2.31607 6.44129 2 7.20435 2 8V19C2 19.7957 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H16C16.7957 22 17.5587 21.6839 18.1213 21.1213C18.6839 20.5587 19 19.7957 19 19V13C19 12.4477 18.5523 12 18 12C17.4477 12 17 12.4477 17 13V19C17 19.2652 16.8946 19.5196 16.7071 19.7071C16.5196 19.8946 16.2652 20 16 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V8C4 7.73478 4.10536 7.48043 4.29289 7.29289Z",fill:"currentColor"})]}));P9.displayName="ExternalLinkIcon";const h0=w.memo(({className:n,...e})=>S.jsxs("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{d:"M16.9958 1.06669C15.4226 1.05302 13.907 1.65779 12.7753 2.75074L12.765 2.76086L11.045 4.47086C10.6534 4.86024 10.6515 5.49341 11.0409 5.88507C11.4303 6.27673 12.0634 6.27858 12.4551 5.88919L14.1697 4.18456C14.9236 3.45893 15.9319 3.05752 16.9784 3.06662C18.0272 3.07573 19.0304 3.49641 19.772 4.23804C20.5137 4.97967 20.9344 5.98292 20.9435 7.03171C20.9526 8.07776 20.5515 9.08563 19.8265 9.83941L16.833 12.8329C16.4274 13.2386 15.9393 13.5524 15.4019 13.7529C14.8645 13.9533 14.2903 14.0359 13.7181 13.9949C13.146 13.9539 12.5894 13.7904 12.0861 13.5154C11.5827 13.2404 11.1444 12.8604 10.8008 12.401C10.47 11.9588 9.84333 11.8685 9.40108 12.1993C8.95883 12.5301 8.86849 13.1568 9.1993 13.599C9.71464 14.288 10.3721 14.858 11.1272 15.2705C11.8822 15.683 12.7171 15.9283 13.5753 15.9898C14.4334 16.0513 15.2948 15.9274 16.1009 15.6267C16.907 15.326 17.639 14.8555 18.2473 14.247L21.2472 11.2471L21.2593 11.2347C22.3523 10.1031 22.9571 8.58751 22.9434 7.01433C22.9297 5.44115 22.2987 3.93628 21.1863 2.82383C20.0738 1.71138 18.5689 1.08036 16.9958 1.06669Z",fill:"currentColor"}),S.jsx("path",{d:"M10.4247 8.0102C9.56657 7.94874 8.70522 8.07256 7.89911 8.37326C7.09305 8.67395 6.36096 9.14458 5.75272 9.753L2.75285 12.7529L2.74067 12.7653C1.64772 13.8969 1.04295 15.4125 1.05662 16.9857C1.07029 18.5589 1.70131 20.0637 2.81376 21.1762C3.9262 22.2886 5.43108 22.9196 7.00426 22.9333C8.57744 22.947 10.0931 22.3422 11.2247 21.2493L11.2371 21.2371L12.9471 19.5271C13.3376 19.1366 13.3376 18.5034 12.9471 18.1129C12.5565 17.7223 11.9234 17.7223 11.5328 18.1129L9.82932 19.8164C9.07555 20.5414 8.06768 20.9425 7.02164 20.9334C5.97285 20.9243 4.9696 20.5036 4.22797 19.762C3.48634 19.0203 3.06566 18.0171 3.05655 16.9683C3.04746 15.9222 3.44851 14.9144 4.17355 14.1606L7.16719 11.167C7.5727 10.7613 8.06071 10.4476 8.59811 10.2471C9.13552 10.0467 9.70976 9.96412 10.2819 10.0051C10.854 10.0461 11.4106 10.2096 11.9139 10.4846C12.4173 10.7596 12.8556 11.1397 13.1992 11.599C13.53 12.0412 14.1567 12.1316 14.5989 11.8007C15.0412 11.4699 15.1315 10.8433 14.8007 10.401C14.2854 9.71205 13.6279 9.14198 12.8729 8.72948C12.1178 8.31697 11.2829 8.07166 10.4247 8.0102Z",fill:"currentColor"})]}));h0.displayName="LinkIcon";const F9=w.memo(({className:n,...e})=>S.jsx("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 5V4C7 3.17477 7.40255 2.43324 7.91789 1.91789C8.43324 1.40255 9.17477 1 10 1H14C14.8252 1 15.5668 1.40255 16.0821 1.91789C16.5975 2.43324 17 3.17477 17 4V5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H20V20C20 20.8252 19.5975 21.5668 19.0821 22.0821C18.5668 22.5975 17.8252 23 17 23H7C6.17477 23 5.43324 22.5975 4.91789 22.0821C4.40255 21.5668 4 20.8252 4 20V7H3C2.44772 7 2 6.55228 2 6C2 5.44772 2.44772 5 3 5H7ZM9 4C9 3.82523 9.09745 3.56676 9.33211 3.33211C9.56676 3.09745 9.82523 3 10 3H14C14.1748 3 14.4332 3.09745 14.6679 3.33211C14.9025 3.56676 15 3.82523 15 4V5H9V4ZM6 7V20C6 20.1748 6.09745 20.4332 6.33211 20.6679C6.56676 20.9025 6.82523 21 7 21H17C17.1748 21 17.4332 20.9025 17.6679 20.6679C17.9025 20.4332 18 20.1748 18 20V7H6Z",fill:"currentColor"})}));F9.displayName="TrashIcon";const K9=n=>{const{editor:e,onSetLink:t,onLinkActive:r}=n,[o,s]=w.useState("");w.useEffect(()=>{if(!e)return;const{href:d}=e.getAttributes("link");e.isActive("link")&&!o&&(s(d||""),r?.())},[e,r,o]),w.useEffect(()=>{if(!e)return;const d=()=>{const{href:h}=e.getAttributes("link");s(h||""),e.isActive("link")&&!o&&r?.()};return e.on("selectionUpdate",d),()=>{e.off("selectionUpdate",d)}},[e,r,o]);const a=w.useCallback(()=>{if(!o||!e)return;const{from:d,to:h}=e.state.selection,m=e.state.doc.textBetween(d,h);e.chain().focus().extendMarkRange("link").insertContent({type:"text",text:m||o,marks:[{type:"link",attrs:{href:o}}]}).run(),t?.()},[e,t,o]),c=w.useCallback(()=>{e&&(e.chain().focus().unsetMark("link",{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),s(""))},[e]);return{url:o,setUrl:s,setLink:a,removeLink:c,isActive:e?.isActive("link")||!1}},p0=w.forwardRef(({className:n,children:e,...t},r)=>S.jsx(Ge,{type:"button",className:n,"data-style":"ghost",role:"button",tabIndex:-1,"aria-label":"Link",tooltip:"Link",ref:r,...t,children:e||S.jsx(h0,{className:"tiptap-button-icon"})})),qO=({editor:n})=>{const e=rn(n),t=K9({editor:e});return S.jsx($9,{...t})},$9=({url:n,setUrl:e,setLink:t,removeLink:r,isActive:o})=>{const s=a=>{a.key==="Enter"&&(a.preventDefault(),t())};return S.jsxs(S.Fragment,{children:[S.jsx("input",{type:"url",placeholder:"Paste a link...",value:n,onChange:a=>e(a.target.value),onKeyDown:s,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",className:"tiptap-input tiptap-input-clamp"}),S.jsx("div",{className:"tiptap-button-group","data-orientation":"horizontal",children:S.jsx(Ge,{type:"button",onClick:t,title:"Apply link",disabled:!n&&!o,"data-style":"ghost",children:S.jsx(q9,{className:"tiptap-button-icon"})})}),S.jsx(Io,{}),S.jsxs("div",{className:"tiptap-button-group","data-orientation":"horizontal",children:[S.jsx(Ge,{type:"button",onClick:()=>window.open(n,"_blank"),title:"Open in new window",disabled:!n&&!o,"data-style":"ghost",children:S.jsx(P9,{className:"tiptap-button-icon"})}),S.jsx(Ge,{type:"button",onClick:r,title:"Remove link",disabled:!n&&!o,"data-style":"ghost",children:S.jsx(F9,{className:"tiptap-button-icon"})})]})]})};function PO({editor:n,hideWhenUnavailable:e=!1,onOpenChange:t,autoOpenOnLinkActive:r=!0,...o}){const s=rn(n),a=td("link",s),[c,d]=w.useState(!1),g=K9({editor:s,onSetLink:()=>{d(!1)},onLinkActive:()=>d(r)}),b=w.useMemo(()=>!s||s.isActive("codeBlock")?!0:!s.can().setLink?.({href:""}),[s]),v=w.useMemo(()=>{if(!s)return!1;try{return s.can().setMark("link")}catch{return!1}},[s]),C=s?.isActive("link")??!1,x=w.useCallback(k=>{d(k),t?.(k)},[t]);return!w.useMemo(()=>!(!a||!s||e&&(Wn(s.state.selection)||!v)),[a,e,s,v])||!s||!s.isEditable?null:S.jsxs(t0,{open:c,onOpenChange:x,children:[S.jsx(Wf,{asChild:!0,children:S.jsx(p0,{disabled:b,"data-active-state":C?"on":"off","data-disabled":b,...o})}),S.jsx(ed,{children:S.jsx($9,{...g})})]})}p0.displayName="LinkButton";const Z9=w.memo(({className:n,...e})=>S.jsx("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 2.5C5.17157 2.5 4.5 3.17157 4.5 4V20C4.5 20.8284 5.17157 21.5 6 21.5H15C16.4587 21.5 17.8576 20.9205 18.8891 19.8891C19.9205 18.8576 20.5 17.4587 20.5 16C20.5 14.5413 19.9205 13.1424 18.8891 12.1109C18.6781 11.9 18.4518 11.7079 18.2128 11.5359C19.041 10.5492 19.5 9.29829 19.5 8C19.5 6.54131 18.9205 5.14236 17.8891 4.11091C16.8576 3.07946 15.4587 2.5 14 2.5H6ZM14 10.5C14.663 10.5 15.2989 10.2366 15.7678 9.76777C16.2366 9.29893 16.5 8.66304 16.5 8C16.5 7.33696 16.2366 6.70107 15.7678 6.23223C15.2989 5.76339 14.663 5.5 14 5.5H7.5V10.5H14ZM7.5 18.5V13.5H15C15.663 13.5 16.2989 13.7634 16.7678 14.2322C17.2366 14.7011 17.5 15.337 17.5 16C17.5 16.663 17.2366 17.2989 16.7678 17.7678C16.2989 18.2366 15.663 18.5 15 18.5H7.5Z",fill:"currentColor"})}));Z9.displayName="BoldIcon";const G9=w.memo(({className:n,...e})=>S.jsxs("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{d:"M15.4545 4.2983C15.6192 3.77115 15.3254 3.21028 14.7983 3.04554C14.2712 2.88081 13.7103 3.1746 13.5455 3.70175L8.54554 19.7017C8.38081 20.2289 8.6746 20.7898 9.20175 20.9545C9.72889 21.1192 10.2898 20.8254 10.4545 20.2983L15.4545 4.2983Z",fill:"currentColor"}),S.jsx("path",{d:"M6.70711 7.29289C7.09763 7.68342 7.09763 8.31658 6.70711 8.70711L3.41421 12L6.70711 15.2929C7.09763 15.6834 7.09763 16.3166 6.70711 16.7071C6.31658 17.0976 5.68342 17.0976 5.29289 16.7071L1.29289 12.7071C0.902369 12.3166 0.902369 11.6834 1.29289 11.2929L5.29289 7.29289C5.68342 6.90237 6.31658 6.90237 6.70711 7.29289Z",fill:"currentColor"}),S.jsx("path",{d:"M17.2929 7.29289C17.6834 6.90237 18.3166 6.90237 18.7071 7.29289L22.7071 11.2929C23.0976 11.6834 23.0976 12.3166 22.7071 12.7071L18.7071 16.7071C18.3166 17.0976 17.6834 17.0976 17.2929 16.7071C16.9024 16.3166 16.9024 15.6834 17.2929 15.2929L20.5858 12L17.2929 8.70711C16.9024 8.31658 16.9024 7.68342 17.2929 7.29289Z",fill:"currentColor"})]}));G9.displayName="Code2Icon";const Y9=w.memo(({className:n,...e})=>S.jsx("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{d:"M15.0222 3H19C19.5523 3 20 3.44772 20 4C20 4.55228 19.5523 5 19 5H15.693L10.443 19H14C14.5523 19 15 19.4477 15 20C15 20.5523 14.5523 21 14 21H9.02418C9.00802 21.0004 8.99181 21.0004 8.97557 21H5C4.44772 21 4 20.5523 4 20C4 19.4477 4.44772 19 5 19H8.30704L13.557 5H10C9.44772 5 9 4.55228 9 4C9 3.44772 9.44772 3 10 3H14.9782C14.9928 2.99968 15.0075 2.99967 15.0222 3Z",fill:"currentColor"})}));Y9.displayName="ItalicIcon";const J9=w.memo(({className:n,...e})=>S.jsxs("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{d:"M9.00039 3H16.0001C16.5524 3 17.0001 3.44772 17.0001 4C17.0001 4.55229 16.5524 5 16.0001 5H9.00011C8.68006 4.99983 8.36412 5.07648 8.07983 5.22349C7.79555 5.37051 7.55069 5.5836 7.36585 5.84487C7.181 6.10614 7.06155 6.40796 7.01754 6.72497C6.97352 7.04198 7.00623 7.36492 7.11292 7.66667C7.29701 8.18737 7.02414 8.75872 6.50344 8.94281C5.98274 9.1269 5.4114 8.85403 5.2273 8.33333C5.01393 7.72984 4.94851 7.08396 5.03654 6.44994C5.12456 5.81592 5.36346 5.21229 5.73316 4.68974C6.10285 4.1672 6.59256 3.74101 7.16113 3.44698C7.72955 3.15303 8.36047 2.99975 9.00039 3Z",fill:"currentColor"}),S.jsx("path",{d:"M18 13H20C20.5523 13 21 12.5523 21 12C21 11.4477 20.5523 11 20 11H4C3.44772 11 3 11.4477 3 12C3 12.5523 3.44772 13 4 13H14C14.7956 13 15.5587 13.3161 16.1213 13.8787C16.6839 14.4413 17 15.2044 17 16C17 16.7956 16.6839 17.5587 16.1213 18.1213C15.5587 18.6839 14.7956 19 14 19H6C5.44772 19 5 19.4477 5 20C5 20.5523 5.44772 21 6 21H14C15.3261 21 16.5979 20.4732 17.5355 19.5355C18.4732 18.5979 19 17.3261 19 16C19 14.9119 18.6453 13.8604 18 13Z",fill:"currentColor"})]}));J9.displayName="StrikeIcon";const Q9=w.memo(({className:n,...e})=>S.jsxs("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.29289 7.29289C3.68342 6.90237 4.31658 6.90237 4.70711 7.29289L12.7071 15.2929C13.0976 15.6834 13.0976 16.3166 12.7071 16.7071C12.3166 17.0976 11.6834 17.0976 11.2929 16.7071L3.29289 8.70711C2.90237 8.31658 2.90237 7.68342 3.29289 7.29289Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.7071 7.29289C13.0976 7.68342 13.0976 8.31658 12.7071 8.70711L4.70711 16.7071C4.31658 17.0976 3.68342 17.0976 3.29289 16.7071C2.90237 16.3166 2.90237 15.6834 3.29289 15.2929L11.2929 7.29289C11.6834 6.90237 12.3166 6.90237 12.7071 7.29289Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.4079 14.3995C18.0284 14.0487 18.7506 13.9217 19.4536 14.0397C20.1566 14.1578 20.7977 14.5138 21.2696 15.0481L21.2779 15.0574L21.2778 15.0575C21.7439 15.5988 22 16.2903 22 17C22 18.0823 21.3962 18.8401 20.7744 19.3404C20.194 19.8073 19.4858 20.141 18.9828 20.378C18.9638 20.387 18.9451 20.3958 18.9266 20.4045C18.4473 20.6306 18.2804 20.7817 18.1922 20.918C18.1773 20.9412 18.1619 20.9681 18.1467 21H21C21.5523 21 22 21.4477 22 22C22 22.5523 21.5523 23 21 23H17C16.4477 23 16 22.5523 16 22C16 21.1708 16.1176 20.4431 16.5128 19.832C16.9096 19.2184 17.4928 18.8695 18.0734 18.5956C18.6279 18.334 19.138 18.0901 19.5207 17.7821C19.8838 17.49 20 17.2477 20 17C20 16.7718 19.9176 16.5452 19.7663 16.3672C19.5983 16.1792 19.3712 16.0539 19.1224 16.0121C18.8722 15.9701 18.6152 16.015 18.3942 16.1394C18.1794 16.2628 18.0205 16.4549 17.9422 16.675C17.7572 17.1954 17.1854 17.4673 16.665 17.2822C16.1446 17.0972 15.8728 16.5254 16.0578 16.005C16.2993 15.3259 16.7797 14.7584 17.4039 14.4018L17.4079 14.3995L17.4079 14.3995Z",fill:"currentColor"})]}));Q9.displayName="SubscriptIcon";const X9=w.memo(({className:n,...e})=>S.jsxs("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.7071 7.29289C13.0976 7.68342 13.0976 8.31658 12.7071 8.70711L4.70711 16.7071C4.31658 17.0976 3.68342 17.0976 3.29289 16.7071C2.90237 16.3166 2.90237 15.6834 3.29289 15.2929L11.2929 7.29289C11.6834 6.90237 12.3166 6.90237 12.7071 7.29289Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.29289 7.29289C3.68342 6.90237 4.31658 6.90237 4.70711 7.29289L12.7071 15.2929C13.0976 15.6834 13.0976 16.3166 12.7071 16.7071C12.3166 17.0976 11.6834 17.0976 11.2929 16.7071L3.29289 8.70711C2.90237 8.31658 2.90237 7.68342 3.29289 7.29289Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.405 1.40657C18.0246 1.05456 18.7463 0.92634 19.4492 1.04344C20.1521 1.16054 20.7933 1.51583 21.2652 2.0497L21.2697 2.05469L21.2696 2.05471C21.7431 2.5975 22 3.28922 22 4.00203C22 5.08579 21.3952 5.84326 20.7727 6.34289C20.1966 6.80531 19.4941 7.13675 18.9941 7.37261C18.9714 7.38332 18.9491 7.39383 18.9273 7.40415C18.4487 7.63034 18.2814 7.78152 18.1927 7.91844C18.1778 7.94155 18.1625 7.96834 18.1473 8.00003H21C21.5523 8.00003 22 8.44774 22 9.00003C22 9.55231 21.5523 10 21 10H17C16.4477 10 16 9.55231 16 9.00003C16 8.17007 16.1183 7.44255 16.5138 6.83161C16.9107 6.21854 17.4934 5.86971 18.0728 5.59591C18.6281 5.33347 19.1376 5.09075 19.5208 4.78316C19.8838 4.49179 20 4.25026 20 4.00203C20 3.77192 19.9178 3.54865 19.7646 3.37182C19.5968 3.18324 19.3696 3.05774 19.1205 3.01625C18.8705 2.97459 18.6137 3.02017 18.3933 3.14533C18.1762 3.26898 18.0191 3.45826 17.9406 3.67557C17.7531 4.19504 17.18 4.46414 16.6605 4.27662C16.141 4.0891 15.8719 3.51596 16.0594 2.99649C16.303 2.3219 16.7817 1.76125 17.4045 1.40689L17.405 1.40657Z",fill:"currentColor"})]}));X9.displayName="SuperscriptIcon";const W9=w.memo(({className:n,...e})=>S.jsx("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 4C7 3.44772 6.55228 3 6 3C5.44772 3 5 3.44772 5 4V10C5 11.8565 5.7375 13.637 7.05025 14.9497C8.36301 16.2625 10.1435 17 12 17C13.8565 17 15.637 16.2625 16.9497 14.9497C18.2625 13.637 19 11.8565 19 10V4C19 3.44772 18.5523 3 18 3C17.4477 3 17 3.44772 17 4V10C17 11.3261 16.4732 12.5979 15.5355 13.5355C14.5979 14.4732 13.3261 15 12 15C10.6739 15 9.40215 14.4732 8.46447 13.5355C7.52678 12.5979 7 11.3261 7 10V4ZM4 19C3.44772 19 3 19.4477 3 20C3 20.5523 3.44772 21 4 21H20C20.5523 21 21 20.5523 21 20C21 19.4477 20.5523 19 20 19H4Z",fill:"currentColor"})}));W9.displayName="UnderlineIcon";const FO={bold:Z9,italic:Y9,underline:W9,strike:J9,code:G9,superscript:X9,subscript:Q9},KO={bold:"Ctrl-b",italic:"Ctrl-i",underline:"Ctrl-u",strike:"Ctrl-Shift-s",code:"Ctrl-e",superscript:"Ctrl-.",subscript:"Ctrl-,"};function ev(n,e){if(!n)return!1;try{return n.can().toggleMark(e)}catch{return!1}}function $O(n,e){return n?n.isActive(e):!1}function ZO(n,e){n&&n.chain().focus().toggleMark(e).run()}function GO(n,e,t=!1){return!!(!n||t||n.isActive("codeBlock")||!ev(n,e))}function YO(n){const{editor:e,type:t,hideWhenUnavailable:r,markInSchema:o}=n;return!(!o||!e||r&&(Wn(e.state.selection)||!ev(e,t)))}function JO(n){return n.charAt(0).toUpperCase()+n.slice(1)}function QO(n,e,t=!1){const r=td(e,n),o=GO(n,e,t),s=$O(n,e),a=FO[e],c=KO[e],d=JO(e);return{markInSchema:r,isDisabled:o,isActive:s,Icon:a,shortcutKey:c,formattedName:d}}const Si=w.forwardRef(({editor:n,type:e,text:t,hideWhenUnavailable:r=!1,className:o="",disabled:s,onClick:a,children:c,...d},h)=>{const m=rn(n),{markInSchema:g,isDisabled:b,isActive:v,Icon:C,shortcutKey:x,formattedName:M}=QO(m,e,s),k=w.useCallback(D=>{a?.(D),!D.defaultPrevented&&!b&&m&&ZO(m,e)},[a,b,m,e]);return!w.useMemo(()=>YO({editor:m,type:e,hideWhenUnavailable:r,markInSchema:g}),[m,e,r,g])||!m||!m.isEditable?null:S.jsx(Ge,{type:"button",className:o.trim(),disabled:b,"data-style":"ghost","data-active-state":v?"on":"off","data-disabled":b,role:"button",tabIndex:-1,"aria-label":e,"aria-pressed":v,tooltip:M,shortcutKeys:x,onClick:k,...d,ref:h,children:c||S.jsxs(S.Fragment,{children:[S.jsx(C,{className:"tiptap-button-icon"}),t&&S.jsx("span",{className:"tiptap-button-text",children:t})]})})});Si.displayName="MarkButton";const tv=w.memo(({className:n,...e})=>S.jsxs("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 6C2 5.44772 2.44772 5 3 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H3C2.44772 7 2 6.55228 2 6Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 12C6 11.4477 6.44772 11 7 11H17C17.5523 11 18 11.4477 18 12C18 12.5523 17.5523 13 17 13H7C6.44772 13 6 12.5523 6 12Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 18C4 17.4477 4.44772 17 5 17H19C19.5523 17 20 17.4477 20 18C20 18.5523 19.5523 19 19 19H5C4.44772 19 4 18.5523 4 18Z",fill:"currentColor"})]}));tv.displayName="AlignCenterIcon";const nv=w.memo(({className:n,...e})=>S.jsxs("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 6C2 5.44772 2.44772 5 3 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H3C2.44772 7 2 6.55228 2 6Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 12C2 11.4477 2.44772 11 3 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H3C2.44772 13 2 12.5523 2 12Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 18C2 17.4477 2.44772 17 3 17H21C21.5523 17 22 17.4477 22 18C22 18.5523 21.5523 19 21 19H3C2.44772 19 2 18.5523 2 18Z",fill:"currentColor"})]}));nv.displayName="AlignJustifyIcon";const rv=w.memo(({className:n,...e})=>S.jsxs("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 6C2 5.44772 2.44772 5 3 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H3C2.44772 7 2 6.55228 2 6Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 12C2 11.4477 2.44772 11 3 11H15C15.5523 11 16 11.4477 16 12C16 12.5523 15.5523 13 15 13H3C2.44772 13 2 12.5523 2 12Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 18C2 17.4477 2.44772 17 3 17H17C17.5523 17 18 17.4477 18 18C18 18.5523 17.5523 19 17 19H3C2.44772 19 2 18.5523 2 18Z",fill:"currentColor"})]}));rv.displayName="AlignLeftIcon";const iv=w.memo(({className:n,...e})=>S.jsxs("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 6C2 5.44772 2.44772 5 3 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H3C2.44772 7 2 6.55228 2 6Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 12C8 11.4477 8.44772 11 9 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H9C8.44772 13 8 12.5523 8 12Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 18C6 17.4477 6.44772 17 7 17H21C21.5523 17 22 17.4477 22 18C22 18.5523 21.5523 19 21 19H7C6.44772 19 6 18.5523 6 18Z",fill:"currentColor"})]}));iv.displayName="AlignRightIcon";const XO={left:rv,center:tv,right:iv,justify:nv},WO={left:"Ctrl-Shift-l",center:"Ctrl-Shift-e",right:"Ctrl-Shift-r",justify:"Ctrl-Shift-j"},eN={left:"Align left",center:"Align center",right:"Align right",justify:"Align justify"};function tN(n){return"setTextAlign"in n}function nN(n){if(!n)return!1;const e=n.extensionManager.extensions.some(t=>t.name==="textAlign");return e||console.warn("TextAlign extension is not available. Make sure it is included in your editor configuration."),e}function rN(n,e,t){if(!n||!t)return!1;try{return n.can().setTextAlign(e)}catch{return!1}}function iN(n,e){return n?n.isActive({textAlign:e}):!1}function oN(n,e){if(!n)return!1;const t=n.chain().focus();return tN(t)?t.setTextAlign(e).run():!1}function lN(n,e,t,r=!1){return!!(!n||!e||r||!t)}function sN(n,e,t){return!(!n?.isEditable||t&&!e)}function aN(n,e,t=!1,r=!1){const o=w.useMemo(()=>nN(n),[n]),s=w.useMemo(()=>rN(n,e,o),[n,e,o]),a=lN(n,o,s,t),c=iN(n,e),d=w.useCallback(()=>!o||!n||a?!1:oN(n,e),[o,n,a,e]),h=w.useMemo(()=>sN(n,s,r),[n,s,r]),m=XO[e],g=WO[e],b=eN[e];return{alignAvailable:o,canAlign:s,isDisabled:a,isActive:c,handleAlignment:d,shouldShow:h,Icon:m,shortcutKey:g,label:b}}const oa=w.forwardRef(({editor:n,align:e,text:t,hideWhenUnavailable:r=!1,className:o="",disabled:s,onClick:a,children:c,...d},h)=>{const m=rn(n),{isDisabled:g,isActive:b,handleAlignment:v,shouldShow:C,Icon:x,shortcutKey:M,label:k}=aN(m,e,s,r),O=w.useCallback(D=>{a?.(D),!D.defaultPrevented&&!s&&v()},[a,s,v]);return!C||!m||!m.isEditable?null:S.jsx(Ge,{type:"button",className:o.trim(),disabled:g,"data-style":"ghost","data-active-state":b?"on":"off","data-disabled":g,role:"button",tabIndex:-1,"aria-label":k,"aria-pressed":b,tooltip:k,shortcutKeys:M,onClick:O,...d,ref:h,children:c||S.jsxs(S.Fragment,{children:[S.jsx(x,{className:"tiptap-button-icon"}),t&&S.jsx("span",{className:"tiptap-button-text",children:t})]})})});oa.displayName="TextAlignButton";const ov=w.memo(({className:n,...e})=>S.jsx("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.7071 2.29289C15.3166 1.90237 14.6834 1.90237 14.2929 2.29289C13.9024 2.68342 13.9024 3.31658 14.2929 3.70711L17.5858 7H9.5C7.77609 7 6.12279 7.68482 4.90381 8.90381C3.68482 10.1228 3 11.7761 3 13.5C3 14.3536 3.16813 15.1988 3.49478 15.9874C3.82144 16.7761 4.30023 17.4926 4.90381 18.0962C6.12279 19.3152 7.77609 20 9.5 20H13C13.5523 20 14 19.5523 14 19C14 18.4477 13.5523 18 13 18H9.5C8.30653 18 7.16193 17.5259 6.31802 16.682C5.90016 16.2641 5.56869 15.768 5.34254 15.2221C5.1164 14.6761 5 14.0909 5 13.5C5 12.3065 5.47411 11.1619 6.31802 10.318C7.16193 9.47411 8.30653 9 9.5 9H17.5858L14.2929 12.2929C13.9024 12.6834 13.9024 13.3166 14.2929 13.7071C14.6834 14.0976 15.3166 14.0976 15.7071 13.7071L20.7071 8.70711C21.0976 8.31658 21.0976 7.68342 20.7071 7.29289L15.7071 2.29289Z",fill:"currentColor"})}));ov.displayName="Redo2Icon";const lv=w.memo(({className:n,...e})=>S.jsx("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.70711 3.70711C10.0976 3.31658 10.0976 2.68342 9.70711 2.29289C9.31658 1.90237 8.68342 1.90237 8.29289 2.29289L3.29289 7.29289C2.90237 7.68342 2.90237 8.31658 3.29289 8.70711L8.29289 13.7071C8.68342 14.0976 9.31658 14.0976 9.70711 13.7071C10.0976 13.3166 10.0976 12.6834 9.70711 12.2929L6.41421 9H14.5C15.0909 9 15.6761 9.1164 16.2221 9.34254C16.768 9.56869 17.2641 9.90016 17.682 10.318C18.0998 10.7359 18.4313 11.232 18.6575 11.7779C18.8836 12.3239 19 12.9091 19 13.5C19 14.0909 18.8836 14.6761 18.6575 15.2221C18.4313 15.768 18.0998 16.2641 17.682 16.682C17.2641 17.0998 16.768 17.4313 16.2221 17.6575C15.6761 17.8836 15.0909 18 14.5 18H11C10.4477 18 10 18.4477 10 19C10 19.5523 10.4477 20 11 20H14.5C15.3536 20 16.1988 19.8319 16.9874 19.5052C17.7761 19.1786 18.4926 18.6998 19.0962 18.0962C19.6998 17.4926 20.1786 16.7761 20.5052 15.9874C20.8319 15.1988 21 14.3536 21 13.5C21 12.6464 20.8319 11.8012 20.5052 11.0126C20.1786 10.2239 19.6998 9.50739 19.0962 8.90381C18.4926 8.30022 17.7761 7.82144 16.9874 7.49478C16.1988 7.16813 15.3536 7 14.5 7H6.41421L9.70711 3.70711Z",fill:"currentColor"})}));lv.displayName="Undo2Icon";const uN={undo:lv,redo:ov},cN={undo:"Ctrl-z",redo:"Ctrl-Shift-z"},fN={undo:"Undo",redo:"Redo"};function sv(n,e){return n?e==="undo"?n.can().undo():n.can().redo():!1}function dN(n,e){if(!n)return!1;const t=n.chain().focus();return e==="undo"?t.undo().run():t.redo().run()}function hN(n,e,t=!1){return t?!0:!sv(n,e)}function pN(n,e,t=!1){const r=w.useMemo(()=>sv(n,e),[n,e]),o=hN(n,e,t),s=w.useCallback(()=>{!n||o||dN(n,e)},[n,e,o]),a=uN[e],c=fN[e],d=cN[e];return{canExecute:r,isDisabled:o,handleAction:s,Icon:a,actionLabel:c,shortcutKey:d}}const J1=w.forwardRef(({editor:n,action:e,text:t,className:r="",disabled:o,onClick:s,children:a,...c},d)=>{const h=rn(n),{isDisabled:m,handleAction:g,Icon:b,actionLabel:v,shortcutKey:C}=pN(h,e,o),x=w.useCallback(M=>{s?.(M),!M.defaultPrevented&&!o&&g()},[s,o,g]);return!h||!h.isEditable?null:S.jsx(Ge,{ref:d,type:"button",className:r.trim(),disabled:m,"data-style":"ghost","data-disabled":m,role:"button",tabIndex:-1,"aria-label":v,tooltip:v,shortcutKeys:C,onClick:x,...c,children:a||S.jsxs(S.Fragment,{children:[S.jsx(b,{className:"tiptap-button-icon"}),t&&S.jsx("span",{className:"tiptap-button-text",children:t})]})})});J1.displayName="UndoRedoButton";const av=w.memo(({className:n,...e})=>S.jsx("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{d:"M12.7071 5.70711C13.0976 5.31658 13.0976 4.68342 12.7071 4.29289C12.3166 3.90237 11.6834 3.90237 11.2929 4.29289L4.29289 11.2929C3.90237 11.6834 3.90237 12.3166 4.29289 12.7071L11.2929 19.7071C11.6834 20.0976 12.3166 20.0976 12.7071 19.7071C13.0976 19.3166 13.0976 18.6834 12.7071 18.2929L7.41421 13L19 13C19.5523 13 20 12.5523 20 12C20 11.4477 19.5523 11 19 11L7.41421 11L12.7071 5.70711Z",fill:"currentColor"})}));av.displayName="ArrowLeftIcon";const o1=768;function mN(){const[n,e]=w.useState(void 0);return w.useEffect(()=>{const t=window.matchMedia(`(max-width: ${o1-1}px)`),r=()=>{e(window.innerWidth<o1)};return t.addEventListener("change",r),e(window.innerWidth<o1),()=>t.removeEventListener("change",r)},[]),!!n}function uv(){const[n,e]=w.useState({width:0,height:0,offsetTop:0});return w.useEffect(()=>{t();function t(){if(typeof window>"u")return;const o=window.visualViewport;if(!o)return;const{width:s=0,height:a=0,offsetTop:c=0}=o;e(d=>s===d.width&&a===d.height&&c===d.offsetTop?d:{width:s,height:a,offsetTop:c})}const r=window.visualViewport;return r&&(r.addEventListener("resize",t),r.addEventListener("scroll",t)),()=>{r&&(r.removeEventListener("resize",t),r.removeEventListener("scroll",t))}},[]),n}function gN({editor:n,overlayHeight:e=0,elementRef:t=null}){const{height:r}=uv(),[o,s]=w.useState({x:0,y:0,width:0,height:0}),a=w.useCallback(()=>{const c=t?.current??document.body,{x:d,y:h,width:m,height:g}=c.getBoundingClientRect();s({x:d,y:h,width:m,height:g})},[t]);return w.useEffect(()=>{const c=t?.current??document.body;a();const d=new ResizeObserver(()=>{window.requestAnimationFrame(a)});return d.observe(c),window.addEventListener("scroll",a,{passive:!0}),()=>{d.disconnect(),window.removeEventListener("scroll",a)}},[t,a]),w.useEffect(()=>{(()=>{if(!n)return;const{state:d,view:h}=n;if(!h.hasFocus())return;const{from:m}=d.selection,g=h.coordsAtPos(m);if(r<o.height&&g&&!(r-g.top-e>0)){const v=g.top-r/2;window.scrollTo({top:v,behavior:"smooth"})}})()},[n,e,r,o.height]),o}const cv=w.memo(({className:n,...e})=>S.jsxs("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 11.5955 21.7564 11.2309 21.3827 11.0761C21.009 10.9213 20.5789 11.0069 20.2929 11.2929C19.287 12.2988 17.9226 12.864 16.5 12.864C15.0774 12.864 13.713 12.2988 12.7071 11.2929C11.7012 10.287 11.136 8.92261 11.136 7.5C11.136 6.07739 11.7012 4.71304 12.7071 3.70711C12.9931 3.42111 13.0787 2.99099 12.9239 2.61732C12.7691 2.24364 12.4045 2 12 2ZM7.55544 5.34824C8.27036 4.87055 9.05353 4.51389 9.87357 4.28778C9.39271 5.27979 9.13604 6.37666 9.13604 7.5C9.13604 9.45304 9.91189 11.3261 11.2929 12.7071C12.6739 14.0881 14.547 14.864 16.5 14.864C17.6233 14.864 18.7202 14.6073 19.7122 14.1264C19.4861 14.9465 19.1295 15.7296 18.6518 16.4446C17.7727 17.7602 16.5233 18.7855 15.0615 19.391C13.5997 19.9965 11.9911 20.155 10.4393 19.8463C8.88743 19.5376 7.46197 18.7757 6.34315 17.6569C5.22433 16.538 4.4624 15.1126 4.15372 13.5607C3.84504 12.0089 4.00347 10.4003 4.60897 8.93853C5.21447 7.47672 6.23985 6.22729 7.55544 5.34824Z",fill:"currentColor"}),S.jsx("path",{d:"M19 2C19.5523 2 20 2.44772 20 3V4H21C21.5523 4 22 4.44772 22 5C22 5.55228 21.5523 6 21 6H20V7C20 7.55228 19.5523 8 19 8C18.4477 8 18 7.55228 18 7V6H17C16.4477 6 16 5.55228 16 5C16 4.44772 16.4477 4 17 4H18V3C18 2.44772 18.4477 2 19 2Z",fill:"currentColor"})]}));cv.displayName="MoonStarIcon";const fv=w.memo(({className:n,...e})=>S.jsxs("svg",{width:"24",height:"24",className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{d:"M12 1C12.5523 1 13 1.44772 13 2V4C13 4.55228 12.5523 5 12 5C11.4477 5 11 4.55228 11 4V2C11 1.44772 11.4477 1 12 1Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12ZM12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9Z",fill:"currentColor"}),S.jsx("path",{d:"M13 20C13 19.4477 12.5523 19 12 19C11.4477 19 11 19.4477 11 20V22C11 22.5523 11.4477 23 12 23C12.5523 23 13 22.5523 13 22V20Z",fill:"currentColor"}),S.jsx("path",{d:"M4.22282 4.22289C4.61335 3.83236 5.24651 3.83236 5.63704 4.22289L7.04704 5.63289C7.43756 6.02341 7.43756 6.65658 7.04704 7.0471C6.65651 7.43762 6.02335 7.43762 5.63283 7.0471L4.22282 5.6371C3.8323 5.24658 3.8323 4.61341 4.22282 4.22289Z",fill:"currentColor"}),S.jsx("path",{d:"M18.367 16.9529C17.9765 16.5623 17.3433 16.5623 16.9528 16.9529C16.5623 17.3434 16.5623 17.9766 16.9528 18.3671L18.3628 19.7771C18.7533 20.1676 19.3865 20.1676 19.777 19.7771C20.1675 19.3866 20.1675 18.7534 19.777 18.3629L18.367 16.9529Z",fill:"currentColor"}),S.jsx("path",{d:"M1 12C1 11.4477 1.44772 11 2 11H4C4.55228 11 5 11.4477 5 12C5 12.5523 4.55228 13 4 13H2C1.44772 13 1 12.5523 1 12Z",fill:"currentColor"}),S.jsx("path",{d:"M20 11C19.4477 11 19 11.4477 19 12C19 12.5523 19.4477 13 20 13H22C22.5523 13 23 12.5523 23 12C23 11.4477 22.5523 11 22 11H20Z",fill:"currentColor"}),S.jsx("path",{d:"M7.04704 16.9529C7.43756 17.3434 7.43756 17.9766 7.04704 18.3671L5.63704 19.7771C5.24651 20.1676 4.61335 20.1676 4.22282 19.7771C3.8323 19.3866 3.8323 18.7534 4.22283 18.3629L5.63283 16.9529C6.02335 16.5623 6.65651 16.5623 7.04704 16.9529Z",fill:"currentColor"}),S.jsx("path",{d:"M19.777 5.6371C20.1675 5.24657 20.1675 4.61341 19.777 4.22289C19.3865 3.83236 18.7533 3.83236 18.3628 4.22289L16.9528 5.63289C16.5623 6.02341 16.5623 6.65658 16.9528 7.0471C17.3433 7.43762 17.9765 7.43762 18.367 7.0471L19.777 5.6371Z",fill:"currentColor"})]}));fv.displayName="SunIcon";function yN(){const[n,e]=w.useState(!1);w.useEffect(()=>{const r=window.matchMedia("(prefers-color-scheme: dark)"),o=()=>e(r.matches);return r.addEventListener("change",o),()=>r.removeEventListener("change",o)},[]),w.useEffect(()=>{const r=!!document.querySelector('meta[name="color-scheme"][content="dark"]')||window.matchMedia("(prefers-color-scheme: dark)").matches;e(r)},[]),w.useEffect(()=>{document.documentElement.classList.toggle("dark",n)},[n]);const t=()=>e(r=>!r);return S.jsx(Ge,{onClick:t,"aria-label":`Switch to ${n?"light":"dark"} mode`,"data-style":"ghost",children:n?S.jsx(cv,{className:"tiptap-button-icon"}):S.jsx(fv,{className:"tiptap-button-icon"})})}function bN(){try{return CS}catch{return null}}function vN(n,e){if(n&&typeof n.serializeForClipboard=="function")return n.serializeForClipboard(e);const t=bN();if(t&&typeof t?.__serializeForClipboard=="function")return t.__serializeForClipboard(n,e);throw new Error("No supported clipboard serialization method found.")}function CN(n){const e=n.getBoundingClientRect(),t=n.closest('[role="dialog"]');if(t&&window.getComputedStyle(t).transform!=="none"){const r=t.getBoundingClientRect();return{top:e.top-r.top,left:e.left-r.left,width:e.width}}return{top:e.top,left:e.left,width:e.width}}function c3(n,e){const t=["li","p:not(:first-child)","pre","blockquote","h1","h2","h3","h4","h5","h6",...e.customNodes.map(r=>`[data-type=${r}]`)].join(", ");return document.elementsFromPoint(n.x,n.y).find(r=>r.parentElement?.matches?.(".ProseMirror")||r.matches(t))}function xN(n,e,t){const r=n.getBoundingClientRect();return e.posAtCoords({left:r.left+50+t.dragHandleWidth,top:r.top+1})?.inside}function f3(n,e){const t=e.state.doc.resolve(n);return t.depth>1?t.before(t.depth):n}function SN(n){let e="";function t(c,d){if(d.focus(),!c.dataTransfer)return;const h=c3({x:c.clientX+50+n.dragHandleWidth,y:c.clientY},n);if(!(h instanceof Element))return;let m=xN(h,d,n);if(m==null||m<0)return;m=f3(m,d);const{from:g,to:b}=d.state.selection,v=g-b,C=f3(g,d);let x=!1;const M=d.state.doc.resolve(C);if(M.node().type.name==="doc")x=!0;else{const I=ce.create(d.state.doc,M.before());x=!(m+1>=I.$from.pos&&m<=I.$to.pos)}let k=d.state.selection;if(!x&&v!==0&&!(d.state.selection instanceof ce)){const I=ce.create(d.state.doc,b-1);k=ve.create(d.state.doc,m,I.$to.pos)}else if(k=ce.create(d.state.doc,m),k.node.type.isInline||k.node.type.name==="tableRow"){let I=d.state.doc.resolve(k.from);k=ce.create(d.state.doc,I.before())}d.dispatch(d.state.tr.setSelection(k)),d.state.selection instanceof ce&&d.state.selection.node.type.name==="listItem"&&(e=h.parentElement.tagName);const O=d.state.selection.content(),{dom:D,text:P}=vN(d,O);c.dataTransfer.clearData(),c.dataTransfer.setData("text/html",D.innerHTML),c.dataTransfer.setData("text/plain",P),c.dataTransfer.effectAllowed="copyMove",c.dataTransfer.setDragImage(h,0,0),d.dragging={slice:O,move:c.ctrlKey}}let r=null;function o(){r&&r.classList.add("hide")}function s(){r&&r.classList.remove("hide")}function a(c){if(c.target instanceof Element){const d=c.relatedTarget;if(d?.classList.contains("tiptap")||d?.classList.contains("drag-handle"))return}o()}return new pt({key:new $t(n.pluginKey),view:c=>{const d=n.dragHandleSelector?document.querySelector(n.dragHandleSelector):null;r=d??document.createElement("div"),r.draggable=!0,r.dataset.dragHandle="",r.classList.add("drag-handle");function h(g){t(g,c)}r.addEventListener("dragstart",h);function m(g){o();let b=window.scrollY;g.clientY<n.scrollTreshold?window.scrollTo({top:b-30,behavior:"smooth"}):window.innerHeight-g.clientY<n.scrollTreshold&&window.scrollTo({top:b+30,behavior:"smooth"})}return r.addEventListener("drag",m),o(),d||c?.dom?.parentElement?.appendChild(r),c?.dom?.parentElement?.addEventListener("mouseout",a),{destroy:()=>{d||r?.remove?.(),r?.removeEventListener("drag",m),r?.removeEventListener("dragstart",h),r=null,c?.dom?.parentElement?.removeEventListener("mouseout",a)}}},props:{handleDOMEvents:{mousemove:(c,d)=>{if(!c.editable)return;const h=c3({x:d.clientX+50+n.dragHandleWidth,y:d.clientY},n),m=h?.closest(".not-draggable"),g=n.excludedTags.concat(["ol","ul"]).join(", ");if(!(h instanceof Element)||h.matches(g)||m){o();return}const b=window.getComputedStyle(h),v=parseInt(b.lineHeight,10),C=isNaN(v)?parseInt(b.fontSize)*1.2:v,x=parseInt(b.paddingTop,10),M=CN(h);M.top+=(C-24)/2,M.top+=x,h.matches("ul:not([data-type=taskList]) li, ol li")&&(M.left-=n.dragHandleWidth),M.width=n.dragHandleWidth,r&&(r.style.left=`${M.left-M.width}px`,r.style.top=`${M.top}px`,s())},keydown:()=>{o()},mousewheel:()=>{o()},dragstart:c=>{c.dom.classList.add("dragging")},drop:(c,d)=>{c.dom.classList.remove("dragging"),o();let h=null;const m=c.posAtCoords({left:d.clientX,top:d.clientY});if(!m||(c.state.selection instanceof ce&&(h=c.state.selection.node),!h))return;const b=c.state.doc.resolve(m.pos).parent.type.name==="listItem";if(c.state.selection instanceof ce&&c.state.selection.node.type.name==="listItem"&&!b&&e=="OL"){const v=c.state.schema.nodes.orderedList?.createAndFill(null,h),C=new le(ee.from(v),0,0);c.dragging={slice:C,move:d.ctrlKey}}},dragend:c=>{c.dom.classList.remove("dragging")}}}})}const EN=xt.create({name:"globalDragHandle",addOptions(){return{dragHandleWidth:20,scrollTreshold:100,excludedTags:[],customNodes:[]}},addProseMirrorPlugins(){return[SN({pluginKey:"globalDragHandle",dragHandleWidth:this.options.dragHandleWidth,scrollTreshold:this.options.scrollTreshold,dragHandleSelector:this.options.dragHandleSelector,excludedTags:this.options.excludedTags,customNodes:this.options.customNodes})]}});function dv(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let o=n.child(r),s=e.child(r);if(o==s){t+=o.nodeSize;continue}if(!o.sameMarkup(s))return t;if(o.isText&&o.text!=s.text){for(let a=0;o.text[a]==s.text[a];a++)t++;return t}if(o.content.size||s.content.size){let a=dv(o.content,s.content,t+1);if(a!=null)return a}t+=o.nodeSize}}function hv(n,e,t,r){for(let o=n.childCount,s=e.childCount;;){if(o==0||s==0)return o==s?null:{a:t,b:r};let a=n.child(--o),c=e.child(--s),d=a.nodeSize;if(a==c){t-=d,r-=d;continue}if(!a.sameMarkup(c))return{a:t,b:r};if(a.isText&&a.text!=c.text){let h=0,m=Math.min(a.text.length,c.text.length);for(;h<m&&a.text[a.text.length-h-1]==c.text[c.text.length-h-1];)h++,t--,r--;return{a:t,b:r}}if(a.content.size||c.content.size){let h=hv(a.content,c.content,t-1,r-1);if(h)return h}t-=d,r-=d}}class at{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,o=0,s){for(let a=0,c=0;c<t;a++){let d=this.content[a],h=c+d.nodeSize;if(h>e&&r(d,o+c,s||null,a)!==!1&&d.content.size){let m=c+1;d.nodesBetween(Math.max(0,e-m),Math.min(d.content.size,t-m),r,o+m)}c=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,o){let s="",a=!0;return this.nodesBetween(e,t,(c,d)=>{let h=c.isText?c.text.slice(Math.max(e,d)-d,t-d):c.isLeaf?o?typeof o=="function"?o(c):o:c.type.spec.leafText?c.type.spec.leafText(c):"":"";c.isBlock&&(c.isLeaf&&h||c.isTextblock)&&r&&(a?a=!1:s+=r),s+=h},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,o=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(o[o.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)o.push(e.content[s]);return new at(o,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],o=0;if(t>e)for(let s=0,a=0;a<t;s++){let c=this.content[s],d=a+c.nodeSize;d>e&&((a<e||d>t)&&(c.isText?c=c.cut(Math.max(0,e-a),Math.min(c.text.length,t-a)):c=c.cut(Math.max(0,e-a-1),Math.min(c.content.size,t-a-1))),r.push(c),o+=c.nodeSize),a=d}return new at(r,o)}cutByIndex(e,t){return e==t?at.empty:e==0&&t==this.content.length?this:new at(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let o=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return o[e]=t,new at(o,s)}addToStart(e){return new at([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new at(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let o=this.content[t];e(o,r,t),r+=o.nodeSize}}findDiffStart(e,t=0){return dv(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return hv(this,e,t,r)}findIndex(e,t=-1){if(e==0)return yc(0,e);if(e==this.size)return yc(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,o=0;;r++){let s=this.child(r),a=o+s.nodeSize;if(a>=e)return a==e||t>0?yc(r+1,a):yc(r,o);o=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return at.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new at(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return at.empty;let t,r=0;for(let o=0;o<e.length;o++){let s=e[o];r+=s.nodeSize,o&&s.isText&&e[o-1].sameMarkup(s)?(t||(t=e.slice(0,o)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new at(t||e,r)}static from(e){if(!e)return at.empty;if(e instanceof at)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new at([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}at.empty=new at([],0);const l1={index:0,offset:0};function yc(n,e){return l1.index=n,l1.offset=e,l1}class wN extends Error{}class kt{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=mv(this.content,e+this.openStart,t);return r&&new kt(r,this.openStart,this.openEnd)}removeBetween(e,t){return new kt(pv(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return kt.empty;let r=t.openStart||0,o=t.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new kt(at.fromJSON(e,t.content),r,o)}static maxOpen(e,t=!0){let r=0,o=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)o++;return new kt(e,r,o)}}kt.empty=new kt(at.empty,0,0);function pv(n,e,t){let{index:r,offset:o}=n.findIndex(e),s=n.maybeChild(r),{index:a,offset:c}=n.findIndex(t);if(o==e||s.isText){if(c!=t&&!n.child(a).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=a)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(pv(s.content,e-o-1,t-o-1)))}function mv(n,e,t,r){let{index:o,offset:s}=n.findIndex(e),a=n.maybeChild(o);if(s==e||a.isText)return n.cut(0,e).append(t).append(n.cut(e));let c=mv(a.content,e-s-1,t);return c&&n.replaceChild(o,a.copy(c))}const gv=65535,yv=Math.pow(2,16);function MN(n,e){return n+e*yv}function d3(n){return n&gv}function TN(n){return(n-(n&gv))/yv}const bv=1,vv=2,kc=4,Cv=8;class h3{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&Cv)>0}get deletedBefore(){return(this.delInfo&(bv|kc))>0}get deletedAfter(){return(this.delInfo&(vv|kc))>0}get deletedAcross(){return(this.delInfo&kc)>0}}class zn{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&zn.empty)return zn.empty}recover(e){let t=0,r=d3(e);if(!this.inverted)for(let o=0;o<r;o++)t+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+t+TN(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let o=0,s=this.inverted?2:1,a=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let d=this.ranges[c]-(this.inverted?o:0);if(d>e)break;let h=this.ranges[c+s],m=this.ranges[c+a],g=d+h;if(e<=g){let b=h?e==d?-1:e==g?1:t:t,v=d+o+(b<0?0:m);if(r)return v;let C=e==(t<0?d:g)?null:MN(c/3,e-d),x=e==d?vv:e==g?bv:kc;return(t<0?e!=d:e!=g)&&(x|=Cv),new h3(v,x,C)}o+=m-h}return r?e+o:new h3(e+o,0,null)}touches(e,t){let r=0,o=d3(t),s=this.inverted?2:1,a=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let d=this.ranges[c]-(this.inverted?r:0);if(d>e)break;let h=this.ranges[c+s],m=d+h;if(e<=m&&c==o*3)return!0;r+=this.ranges[c+a]-h}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,s=0;o<this.ranges.length;o+=3){let a=this.ranges[o],c=a-(this.inverted?s:0),d=a+(this.inverted?0:s),h=this.ranges[o+t],m=this.ranges[o+r];e(c,c+h,d,d+m),s+=m-h}}invert(){return new zn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?zn.empty:new zn(e<0?[0,-e,0]:[0,0,e])}}zn.empty=new zn([]);const s1=Object.create(null);class on{getMap(){return zn.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=s1[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in s1)throw new RangeError("Duplicate use of step JSON ID "+e);return s1[e]=t,t.prototype.jsonID=e,t}}class wt{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new wt(e,null)}static fail(e){return new wt(null,e)}static fromReplace(e,t,r,o){try{return wt.ok(e.replace(t,r,o))}catch(s){if(s instanceof wN)return wt.fail(s.message);throw s}}}function m0(n,e,t){let r=[];for(let o=0;o<n.childCount;o++){let s=n.child(o);s.content.size&&(s=s.copy(m0(s.content,e,s))),s.isInline&&(s=e(s,t,o)),r.push(s)}return at.fromArray(r)}class Co extends on{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),s=new kt(m0(t.content,(a,c)=>!a.isAtom||!c.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),o),t.openStart,t.openEnd);return wt.fromReplace(e,this.from,this.to,s)}invert(){return new xo(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Co(t.pos,r.pos,this.mark)}merge(e){return e instanceof Co&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Co(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Co(t.from,t.to,e.markFromJSON(t.mark))}}on.jsonID("addMark",Co);class xo extends on{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new kt(m0(t.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),t.openStart,t.openEnd);return wt.fromReplace(e,this.from,this.to,r)}invert(){return new Co(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new xo(t.pos,r.pos,this.mark)}merge(e){return e instanceof xo&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new xo(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new xo(t.from,t.to,e.markFromJSON(t.mark))}}on.jsonID("removeMark",xo);class So extends on{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return wt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return wt.fromReplace(e,this.pos,this.pos+1,new kt(at.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let o=0;o<t.marks.length;o++)if(!t.marks[o].isInSet(r))return new So(this.pos,t.marks[o]);return new So(this.pos,this.mark)}}return new Da(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new So(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new So(t.pos,e.markFromJSON(t.mark))}}on.jsonID("addNodeMark",So);class Da extends on{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return wt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return wt.fromReplace(e,this.pos,this.pos+1,new kt(at.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new So(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Da(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Da(t.pos,e.markFromJSON(t.mark))}}on.jsonID("removeNodeMark",Da);class ki extends on{constructor(e,t,r,o=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=o}apply(e){return this.structure&&Q1(e,this.from,this.to)?wt.fail("Structure replace would overwrite content"):wt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new zn([this.from,this.to-this.from,this.slice.size])}invert(e){return new ki(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new ki(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof ki)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?kt.empty:new kt(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ki(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?kt.empty:new kt(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ki(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ki(t.from,t.to,kt.fromJSON(e,t.slice),!!t.structure)}}on.jsonID("replace",ki);class ba extends on{constructor(e,t,r,o,s,a,c=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=o,this.slice=s,this.insert=a,this.structure=c}apply(e){if(this.structure&&(Q1(e,this.from,this.gapFrom)||Q1(e,this.gapTo,this.to)))return wt.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return wt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?wt.fromReplace(e,this.from,this.to,r):wt.fail("Content does not fit in gap")}getMap(){return new zn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new ba(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=e.map(this.gapFrom,-1),s=e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||o<t.pos||s>r.pos?null:new ba(t.pos,r.pos,o,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ba(t.from,t.to,t.gapFrom,t.gapTo,kt.fromJSON(e,t.slice),t.insert,!!t.structure)}}on.jsonID("replaceAround",ba);function Q1(n,e,t){let r=n.resolve(e),o=t-e,s=r.depth;for(;o>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,o--;if(o>0){let a=r.node(s).maybeChild(r.indexAfter(s));for(;o>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,o--}}return!1}function kN(n,e){let t=n.resolve(e),r=t.index();return AN(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function AN(n,e){return!!(n&&e&&!n.isLeaf&&n.canAppend(e))}class va extends on{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return wt.fail("No node at attribute step's position");let r=Object.create(null);for(let s in t.attrs)r[s]=t.attrs[s];r[this.attr]=this.value;let o=t.type.create(r,null,t.marks);return wt.fromReplace(e,this.pos,this.pos+1,new kt(at.from(o),0,t.isLeaf?0:1))}getMap(){return zn.empty}invert(e){return new va(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new va(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new va(t.pos,t.attr,t.value)}}on.jsonID("attr",va);class Tf extends on{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let o in e.attrs)t[o]=e.attrs[o];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return wt.ok(r)}getMap(){return zn.empty}invert(e){return new Tf(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Tf(t.attr,t.value)}}on.jsonID("docAttr",Tf);let La=class extends Error{};La=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};La.prototype=Object.create(Error.prototype);La.prototype.constructor=La;La.prototype.name="TransformError";function RN(n,e,t){let r=[];for(let a=0;a<n.mapping.maps.length;a++){let c=n.mapping.maps[a];if(c){for(let d=0;d<r.length;d++)r[d]=c.map(r[d]);c.forEach((d,h,m,g)=>r.push(m,g))}}let o=[];for(let a=0;a<r.length;a+=2){let c=r[a],d=r[a+1],h=n.doc.resolve(c),m=h.sharedDepth(d),g=h.node(m);for(let b=h.indexAfter(m),v=h.after(m+1);v<=d;++b){let C=g.maybeChild(b);if(!C)break;if(b&&o.indexOf(v)==-1){let x=g.child(b-1);x.type==C.type&&t.includes(x.type)&&o.push(v)}v+=C.nodeSize}}let s=!1;o.sort((a,c)=>a-c);for(let a=o.length-1;a>=0;a--)kN(n.doc,o[a])&&(e.join(o[a]),s=!0);return s}const ON=xt.create({name:"autoJoiner",addOptions(){return{elementsToJoin:[]}},addProseMirrorPlugins(){const n=new $t(this.name),e=[this.editor.schema.nodes.bulletList,this.editor.schema.nodes.orderedList];return this.options.elementsToJoin.forEach(t=>{const r=At(t,this.editor.schema);e.push(r)}),[new pt({key:n,appendTransaction(t,r,o){let s=o.tr,a=!1;for(const c of t)a=RN(c,s,e)||a;if(a)return s}})]}}),NN=({onHighlighterClick:n,onLinkClick:e,isMobile:t})=>S.jsxs(S.Fragment,{children:[S.jsx(Z1,{}),S.jsxs(Pr,{children:[S.jsx(J1,{action:"undo"}),S.jsx(J1,{action:"redo"})]}),S.jsx(Ti,{}),S.jsxs(Pr,{children:[S.jsx(iO,{levels:[1,2,3,4]}),S.jsx(SO,{types:["bulletList","orderedList","taskList"]}),S.jsx(z9,{}),S.jsx(j9,{})]}),S.jsx(Ti,{}),S.jsxs(Pr,{children:[S.jsx(Si,{type:"bold"}),S.jsx(Si,{type:"italic"}),S.jsx(Si,{type:"strike"}),S.jsx(Si,{type:"code"}),S.jsx(Si,{type:"underline"}),t?S.jsx(d0,{onClick:n}):S.jsx(_O,{}),t?S.jsx(p0,{onClick:e}):S.jsx(PO,{})]}),S.jsx(Ti,{}),S.jsxs(Pr,{children:[S.jsx(Si,{type:"superscript"}),S.jsx(Si,{type:"subscript"})]}),S.jsx(Ti,{}),S.jsxs(Pr,{children:[S.jsx(oa,{align:"left"}),S.jsx(oa,{align:"center"}),S.jsx(oa,{align:"right"}),S.jsx(oa,{align:"justify"})]}),S.jsx(Ti,{}),S.jsxs(Pr,{children:[S.jsx(k9,{text:"Add"}),S.jsx(A9,{})]}),S.jsx(Z1,{}),t&&S.jsx(Ti,{}),S.jsx(Pr,{children:S.jsx(yN,{})})]}),DN=({type:n,onBack:e})=>S.jsxs(S.Fragment,{children:[S.jsx(Pr,{children:S.jsxs(Ge,{"data-style":"ghost",onClick:e,children:[S.jsx(av,{className:"tiptap-button-icon"}),n==="highlighter"?S.jsx(c0,{className:"tiptap-button-icon"}):S.jsx(h0,{className:"tiptap-button-icon"})]})}),S.jsx(Ti,{}),n==="highlighter"?S.jsx(_9,{}):S.jsx(qO,{})]});function LN({onUpdate:n,defaultContent:e}){const t=mN(),r=uv(),[o,s]=w.useState("main"),a=w.useRef(null),c=lM({onUpdate:n,content:e,immediatelyRender:!1,editorProps:{attributes:{autocomplete:"off",autocorrect:"off",autocapitalize:"off","aria-label":"Main content area, start typing to enter text."}},extensions:[hT,vT.configure({types:["heading","paragraph"]}),GT,bT,yT.configure({nested:!0}),KT.configure({multicolor:!0}),mT,qT,ZT,$T,vk,zR.configure({accept:"image/*",maxSize:Y1,limit:3,upload:GR,onError:h=>console.error("Upload failed:",h)}),Ck,bk.configure({openOnClick:!1}),KR.configure({apiUrl:"/api/folio-blocks",onError:h=>console.error("Folio block error:",h),onSuccess:h=>console.log("Folio block loaded:",h)}),EN.configure({dragHandleWidth:20,scrollTreshold:100}),ON.configure({elementsToJoin:["bulletList","orderedList"]})]}),d=gN({editor:c,overlayHeight:a.current?.getBoundingClientRect().height??0});return w.useEffect(()=>{!t&&o!=="main"&&s("main")},[t,o]),S.jsxs(Am.Provider,{value:{editor:c},children:[S.jsx(l9,{ref:a,style:t?{bottom:`calc(100% - ${r.height-d.y}px)`}:{},children:o==="main"?S.jsx(NN,{onHighlighterClick:()=>s("highlighter"),onLinkClick:()=>s("link"),isMobile:t}):S.jsx(DN,{type:o==="highlighter"?"highlighter":"link",onBack:()=>s("main")})}),S.jsx("div",{className:"content-wrapper",children:S.jsx(Jw,{editor:c,role:"presentation",className:"simple-editor-content"})})]})}function HN({onUpdate:n,defaultContent:e}){return S.jsx(LN,{onUpdate:n,defaultContent:e})}window.Folio=window.Folio||{};window.Folio.Tiptap=window.Folio.Tiptap||{};window.Folio.Tiptap.init=n=>{if(!n.node)throw new Error("Node is required");const e=q6.createRoot(n.node);return e.render(S.jsx(w.StrictMode,{children:S.jsx(HN,{onUpdate:n.onUpdate,defaultContent:n.content})})),e};window.Folio.Tiptap.destroy=n=>{n&&n.unmount()};
//# sourceMappingURL=folio-tiptap.js.map
