function lE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function v2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fm={exports:{}},gc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e7;function aE(){if(e7)return gc;e7=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,o){var l=null;if(o!==void 0&&(l=""+o),i.key!==void 0&&(l=""+i.key),"key"in i){o={};for(var c in i)c!=="key"&&(o[c]=i[c])}else o=i;return i=o.ref,{$$typeof:t,type:r,key:l,ref:i!==void 0?i:null,props:o}}return gc.Fragment=e,gc.jsx=n,gc.jsxs=n,gc}var t7;function cE(){return t7||(t7=1,Fm.exports=aE()),Fm.exports}var S=cE(),$m={exports:{}},Ae={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n7;function uE(){if(n7)return Ae;n7=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;function g(R){return R===null||typeof R!="object"?null:(R=m&&R[m]||R["@@iterator"],typeof R=="function"?R:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,w={};function x(R,Y,te){this.props=R,this.context=Y,this.refs=w,this.updater=te||y}x.prototype.isReactComponent={},x.prototype.setState=function(R,Y){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,Y,"setState")},x.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function k(){}k.prototype=x.prototype;function A(R,Y,te){this.props=R,this.context=Y,this.refs=w,this.updater=te||y}var N=A.prototype=new k;N.constructor=A,b(N,x.prototype),N.isPureReactComponent=!0;var D=Array.isArray,L={H:null,A:null,T:null,S:null,V:null},z=Object.prototype.hasOwnProperty;function q(R,Y,te,W,ae,de){return te=de.ref,{$$typeof:t,type:R,key:Y,ref:te!==void 0?te:null,props:de}}function j(R,Y){return q(R.type,Y,void 0,void 0,void 0,R.props)}function ee(R){return typeof R=="object"&&R!==null&&R.$$typeof===t}function $(R){var Y={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(te){return Y[te]})}var re=/\/+/g;function se(R,Y){return typeof R=="object"&&R!==null&&R.key!=null?$(""+R.key):Y.toString(36)}function ue(){}function G(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(ue,ue):(R.status="pending",R.then(function(Y){R.status==="pending"&&(R.status="fulfilled",R.value=Y)},function(Y){R.status==="pending"&&(R.status="rejected",R.reason=Y)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function P(R,Y,te,W,ae){var de=typeof R;(de==="undefined"||de==="boolean")&&(R=null);var fe=!1;if(R===null)fe=!0;else switch(de){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(R.$$typeof){case t:case e:fe=!0;break;case h:return fe=R._init,P(fe(R._payload),Y,te,W,ae)}}if(fe)return ae=ae(R),fe=W===""?"."+se(R,0):W,D(ae)?(te="",fe!=null&&(te=fe.replace(re,"$&/")+"/"),P(ae,Y,te,"",function(wn){return wn})):ae!=null&&(ee(ae)&&(ae=j(ae,te+(ae.key==null||R&&R.key===ae.key?"":(""+ae.key).replace(re,"$&/")+"/")+fe)),Y.push(ae)),1;fe=0;var lt=W===""?".":W+":";if(D(R))for(var qe=0;qe<R.length;qe++)W=R[qe],de=lt+se(W,qe),fe+=P(W,Y,te,de,ae);else if(qe=g(R),typeof qe=="function")for(R=qe.call(R),qe=0;!(W=R.next()).done;)W=W.value,de=lt+se(W,qe++),fe+=P(W,Y,te,de,ae);else if(de==="object"){if(typeof R.then=="function")return P(G(R),Y,te,W,ae);throw Y=String(R),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return fe}function H(R,Y,te){if(R==null)return R;var W=[],ae=0;return P(R,W,"","",function(de){return Y.call(te,de,ae++)}),W}function V(R){if(R._status===-1){var Y=R._result;Y=Y(),Y.then(function(te){(R._status===0||R._status===-1)&&(R._status=1,R._result=te)},function(te){(R._status===0||R._status===-1)&&(R._status=2,R._result=te)}),R._status===-1&&(R._status=0,R._result=Y)}if(R._status===1)return R._result.default;throw R._result}var I=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)};function ie(){}return Ae.Children={map:H,forEach:function(R,Y,te){H(R,function(){Y.apply(this,arguments)},te)},count:function(R){var Y=0;return H(R,function(){Y++}),Y},toArray:function(R){return H(R,function(Y){return Y})||[]},only:function(R){if(!ee(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Ae.Component=x,Ae.Fragment=n,Ae.Profiler=i,Ae.PureComponent=A,Ae.StrictMode=r,Ae.Suspense=f,Ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,Ae.__COMPILER_RUNTIME={__proto__:null,c:function(R){return L.H.useMemoCache(R)}},Ae.cache=function(R){return function(){return R.apply(null,arguments)}},Ae.cloneElement=function(R,Y,te){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var W=b({},R.props),ae=R.key,de=void 0;if(Y!=null)for(fe in Y.ref!==void 0&&(de=void 0),Y.key!==void 0&&(ae=""+Y.key),Y)!z.call(Y,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&Y.ref===void 0||(W[fe]=Y[fe]);var fe=arguments.length-2;if(fe===1)W.children=te;else if(1<fe){for(var lt=Array(fe),qe=0;qe<fe;qe++)lt[qe]=arguments[qe+2];W.children=lt}return q(R.type,ae,void 0,void 0,de,W)},Ae.createContext=function(R){return R={$$typeof:l,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:o,_context:R},R},Ae.createElement=function(R,Y,te){var W,ae={},de=null;if(Y!=null)for(W in Y.key!==void 0&&(de=""+Y.key),Y)z.call(Y,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(ae[W]=Y[W]);var fe=arguments.length-2;if(fe===1)ae.children=te;else if(1<fe){for(var lt=Array(fe),qe=0;qe<fe;qe++)lt[qe]=arguments[qe+2];ae.children=lt}if(R&&R.defaultProps)for(W in fe=R.defaultProps,fe)ae[W]===void 0&&(ae[W]=fe[W]);return q(R,de,void 0,void 0,null,ae)},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(R){return{$$typeof:c,render:R}},Ae.isValidElement=ee,Ae.lazy=function(R){return{$$typeof:h,_payload:{_status:-1,_result:R},_init:V}},Ae.memo=function(R,Y){return{$$typeof:d,type:R,compare:Y===void 0?null:Y}},Ae.startTransition=function(R){var Y=L.T,te={};L.T=te;try{var W=R(),ae=L.S;ae!==null&&ae(te,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(ie,I)}catch(de){I(de)}finally{L.T=Y}},Ae.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},Ae.use=function(R){return L.H.use(R)},Ae.useActionState=function(R,Y,te){return L.H.useActionState(R,Y,te)},Ae.useCallback=function(R,Y){return L.H.useCallback(R,Y)},Ae.useContext=function(R){return L.H.useContext(R)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(R,Y){return L.H.useDeferredValue(R,Y)},Ae.useEffect=function(R,Y,te){var W=L.H;if(typeof te=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(R,Y)},Ae.useId=function(){return L.H.useId()},Ae.useImperativeHandle=function(R,Y,te){return L.H.useImperativeHandle(R,Y,te)},Ae.useInsertionEffect=function(R,Y){return L.H.useInsertionEffect(R,Y)},Ae.useLayoutEffect=function(R,Y){return L.H.useLayoutEffect(R,Y)},Ae.useMemo=function(R,Y){return L.H.useMemo(R,Y)},Ae.useOptimistic=function(R,Y){return L.H.useOptimistic(R,Y)},Ae.useReducer=function(R,Y,te){return L.H.useReducer(R,Y,te)},Ae.useRef=function(R){return L.H.useRef(R)},Ae.useState=function(R){return L.H.useState(R)},Ae.useSyncExternalStore=function(R,Y,te){return L.H.useSyncExternalStore(R,Y,te)},Ae.useTransition=function(){return L.H.useTransition()},Ae.version="19.1.0",Ae}var r7;function du(){return r7||(r7=1,$m.exports=uE()),$m.exports}var M=du();const ht=v2(M),D6=lE({__proto__:null,default:ht},[M]);var qm={exports:{}},yc={},Zm={exports:{}},Km={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i7;function fE(){return i7||(i7=1,function(t){function e(H,V){var I=H.length;H.push(V);e:for(;0<I;){var ie=I-1>>>1,R=H[ie];if(0<i(R,V))H[ie]=V,H[I]=R,I=ie;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var V=H[0],I=H.pop();if(I!==V){H[0]=I;e:for(var ie=0,R=H.length,Y=R>>>1;ie<Y;){var te=2*(ie+1)-1,W=H[te],ae=te+1,de=H[ae];if(0>i(W,I))ae<R&&0>i(de,W)?(H[ie]=de,H[ae]=I,ie=ae):(H[ie]=W,H[te]=I,ie=te);else if(ae<R&&0>i(de,I))H[ie]=de,H[ae]=I,ie=ae;else break e}}return V}function i(H,V){var I=H.sortIndex-V.sortIndex;return I!==0?I:H.id-V.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var f=[],d=[],h=1,m=null,g=3,y=!1,b=!1,w=!1,x=!1,k=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function D(H){for(var V=n(d);V!==null;){if(V.callback===null)r(d);else if(V.startTime<=H)r(d),V.sortIndex=V.expirationTime,e(f,V);else break;V=n(d)}}function L(H){if(w=!1,D(H),!b)if(n(f)!==null)b=!0,z||(z=!0,se());else{var V=n(d);V!==null&&P(L,V.startTime-H)}}var z=!1,q=-1,j=5,ee=-1;function $(){return x?!0:!(t.unstable_now()-ee<j)}function re(){if(x=!1,z){var H=t.unstable_now();ee=H;var V=!0;try{e:{b=!1,w&&(w=!1,A(q),q=-1),y=!0;var I=g;try{t:{for(D(H),m=n(f);m!==null&&!(m.expirationTime>H&&$());){var ie=m.callback;if(typeof ie=="function"){m.callback=null,g=m.priorityLevel;var R=ie(m.expirationTime<=H);if(H=t.unstable_now(),typeof R=="function"){m.callback=R,D(H),V=!0;break t}m===n(f)&&r(f),D(H)}else r(f);m=n(f)}if(m!==null)V=!0;else{var Y=n(d);Y!==null&&P(L,Y.startTime-H),V=!1}}break e}finally{m=null,g=I,y=!1}V=void 0}}finally{V?se():z=!1}}}var se;if(typeof N=="function")se=function(){N(re)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,G=ue.port2;ue.port1.onmessage=re,se=function(){G.postMessage(null)}}else se=function(){k(re,0)};function P(H,V){q=k(function(){H(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(H){switch(g){case 1:case 2:case 3:var V=3;break;default:V=g}var I=g;g=V;try{return H()}finally{g=I}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(H,V){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var I=g;g=H;try{return V()}finally{g=I}},t.unstable_scheduleCallback=function(H,V,I){var ie=t.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?ie+I:ie):I=ie,H){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=I+R,H={id:h++,callback:V,priorityLevel:H,startTime:I,expirationTime:R,sortIndex:-1},I>ie?(H.sortIndex=I,e(d,H),n(f)===null&&H===n(d)&&(w?(A(q),q=-1):w=!0,P(L,I-ie))):(H.sortIndex=R,e(f,H),b||y||(b=!0,z||(z=!0,se()))),H},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(H){var V=g;return function(){var I=g;g=V;try{return H.apply(this,arguments)}finally{g=I}}}}(Km)),Km}var o7;function dE(){return o7||(o7=1,Zm.exports=fE()),Zm.exports}var Gm={exports:{}},dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s7;function hE(){if(s7)return dn;s7=1;var t=du();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(f,d,h){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:f,containerInfo:d,implementation:h}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,dn.createPortal=function(f,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return o(f,d,null,h)},dn.flushSync=function(f){var d=l.T,h=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=d,r.p=h,r.d.f()}},dn.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(f,d))},dn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},dn.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var h=d.as,m=c(h,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:m,integrity:g,fetchPriority:y}):h==="script"&&r.d.X(f,{crossOrigin:m,integrity:g,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},dn.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=c(d.as,d.crossOrigin);r.d.M(f,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(f)},dn.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,m=c(h,d.crossOrigin);r.d.L(f,h,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},dn.preloadModule=function(f,d){if(typeof f=="string")if(d){var h=c(d.as,d.crossOrigin);r.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(f)},dn.requestFormReset=function(f){r.d.r(f)},dn.unstable_batchedUpdates=function(f,d){return f(d)},dn.useFormState=function(f,d,h){return l.H.useFormState(f,d,h)},dn.useFormStatus=function(){return l.H.useHostTransitionStatus()},dn.version="19.1.0",dn}var l7;function L6(){if(l7)return Gm.exports;l7=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Gm.exports=hE(),Gm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a7;function pE(){if(a7)return yc;a7=1;var t=dE(),e=du(),n=L6();function r(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function l(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function c(s){if(o(s)!==s)throw Error(r(188))}function f(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(r(188));return a!==s?null:s}for(var u=s,p=a;;){var v=u.return;if(v===null)break;var C=v.alternate;if(C===null){if(p=v.return,p!==null){u=p;continue}break}if(v.child===C.child){for(C=v.child;C;){if(C===u)return c(v),s;if(C===p)return c(v),a;C=C.sibling}throw Error(r(188))}if(u.return!==p.return)u=v,p=C;else{for(var T=!1,E=v.child;E;){if(E===u){T=!0,u=v,p=C;break}if(E===p){T=!0,p=v,u=C;break}E=E.sibling}if(!T){for(E=C.child;E;){if(E===u){T=!0,u=C,p=v;break}if(E===p){T=!0,p=C,u=v;break}E=E.sibling}if(!T)throw Error(r(189))}}if(u.alternate!==p)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?s:a}function d(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=d(s),a!==null)return a;s=s.sibling}return null}var h=Object.assign,m=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),A=Symbol.for("react.consumer"),N=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),ee=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),re=Symbol.iterator;function se(s){return s===null||typeof s!="object"?null:(s=re&&s[re]||s["@@iterator"],typeof s=="function"?s:null)}var ue=Symbol.for("react.client.reference");function G(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ue?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case b:return"Fragment";case x:return"Profiler";case w:return"StrictMode";case L:return"Suspense";case z:return"SuspenseList";case ee:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case y:return"Portal";case N:return(s.displayName||"Context")+".Provider";case A:return(s._context.displayName||"Context")+".Consumer";case D:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case q:return a=s.displayName||null,a!==null?a:G(s.type)||"Memo";case j:a=s._payload,s=s._init;try{return G(s(a))}catch{}}return null}var P=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I={pending:!1,data:null,method:null,action:null},ie=[],R=-1;function Y(s){return{current:s}}function te(s){0>R||(s.current=ie[R],ie[R]=null,R--)}function W(s,a){R++,ie[R]=s.current,s.current=a}var ae=Y(null),de=Y(null),fe=Y(null),lt=Y(null);function qe(s,a){switch(W(fe,a),W(de,s),W(ae,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?A4(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=A4(a),s=R4(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}te(ae),W(ae,s)}function wn(){te(ae),te(de),te(fe)}function Zn(s){s.memoizedState!==null&&W(lt,s);var a=ae.current,u=R4(a,s.type);a!==u&&(W(de,s),W(ae,u))}function Sr(s){de.current===s&&(te(ae),te(de)),lt.current===s&&(te(lt),fc._currentValue=I)}var ke=Object.prototype.hasOwnProperty,Le=t.unstable_scheduleCallback,Me=t.unstable_cancelCallback,at=t.unstable_shouldYield,yt=t.unstable_requestPaint,Te=t.unstable_now,Qt=t.unstable_getCurrentPriorityLevel,Lt=t.unstable_ImmediatePriority,jt=t.unstable_UserBlockingPriority,xn=t.unstable_NormalPriority,ye=t.unstable_LowPriority,Ee=t.unstable_IdlePriority,ge=t.log,Ge=t.unstable_setDisableYieldValue,Ze=null,Ie=null;function Rn(s){if(typeof ge=="function"&&Ge(s),Ie&&typeof Ie.setStrictMode=="function")try{Ie.setStrictMode(Ze,s)}catch{}}var Ft=Math.clz32?Math.clz32:oi,Go=Math.log,Nn=Math.LN2;function oi(s){return s>>>=0,s===0?32:31-(Go(s)/Nn|0)|0}var si=256,Yo=4194304;function Fr(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function li(s,a,u){var p=s.pendingLanes;if(p===0)return 0;var v=0,C=s.suspendedLanes,T=s.pingedLanes;s=s.warmLanes;var E=p&134217727;return E!==0?(p=E&~C,p!==0?v=Fr(p):(T&=E,T!==0?v=Fr(T):u||(u=E&~s,u!==0&&(v=Fr(u))))):(E=p&~C,E!==0?v=Fr(E):T!==0?v=Fr(T):u||(u=p&~s,u!==0&&(v=Fr(u)))),v===0?0:a!==0&&a!==v&&(a&C)===0&&(C=v&-v,u=a&-a,C>=u||C===32&&(u&4194048)!==0)?a:v}function On(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function Zs(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nu(){var s=si;return si<<=1,(si&4194048)===0&&(si=256),s}function Ca(){var s=Yo;return Yo<<=1,(Yo&62914560)===0&&(Yo=4194304),s}function Ks(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function wa(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function YT(s,a,u,p,v,C){var T=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var E=s.entanglements,O=s.expirationTimes,F=s.hiddenUpdates;for(u=T&~u;0<u;){var X=31-Ft(u),ne=1<<X;E[X]=0,O[X]=-1;var Z=F[X];if(Z!==null)for(F[X]=null,X=0;X<Z.length;X++){var K=Z[X];K!==null&&(K.lane&=-536870913)}u&=~ne}p!==0&&h3(s,p,0),C!==0&&v===0&&s.tag!==0&&(s.suspendedLanes|=C&~(T&~a))}function h3(s,a,u){s.pendingLanes|=a,s.suspendedLanes&=~a;var p=31-Ft(a);s.entangledLanes|=a,s.entanglements[p]=s.entanglements[p]|1073741824|u&4194090}function p3(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var p=31-Ft(u),v=1<<p;v&a|s[p]&a&&(s[p]|=a),u&=~v}}function Lp(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function _p(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function m3(){var s=V.p;return s!==0?s:(s=window.event,s===void 0?32:G4(s.type))}function WT(s,a){var u=V.p;try{return V.p=s,a()}finally{V.p=u}}var $i=Math.random().toString(36).slice(2),un="__reactFiber$"+$i,Dn="__reactProps$"+$i,Gs="__reactContainer$"+$i,Hp="__reactEvents$"+$i,XT="__reactListeners$"+$i,JT="__reactHandles$"+$i,g3="__reactResources$"+$i,xa="__reactMarker$"+$i;function Ip(s){delete s[un],delete s[Dn],delete s[Hp],delete s[XT],delete s[JT]}function Ys(s){var a=s[un];if(a)return a;for(var u=s.parentNode;u;){if(a=u[Gs]||u[un]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=L4(s);s!==null;){if(u=s[un])return u;s=L4(s)}return a}s=u,u=s.parentNode}return null}function Ws(s){if(s=s[un]||s[Gs]){var a=s.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return s}return null}function Sa(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(r(33))}function Xs(s){var a=s[g3];return a||(a=s[g3]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function $t(s){s[xa]=!0}var y3=new Set,v3={};function Wo(s,a){Js(s,a),Js(s+"Capture",a)}function Js(s,a){for(v3[s]=a,s=0;s<a.length;s++)y3.add(a[s])}var QT=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),b3={},C3={};function ek(s){return ke.call(C3,s)?!0:ke.call(b3,s)?!1:QT.test(s)?C3[s]=!0:(b3[s]=!0,!1)}function Ou(s,a,u){if(ek(a))if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var p=a.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+u)}}function Du(s,a,u){if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+u)}}function ai(s,a,u,p){if(p===null)s.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(a,u,""+p)}}var zp,w3;function Qs(s){if(zp===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);zp=a&&a[1]||"",w3=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zp+s+w3}var Bp=!1;function Vp(s,a){if(!s||Bp)return"";Bp=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(a){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(K){var Z=K}Reflect.construct(s,[],ne)}else{try{ne.call()}catch(K){Z=K}s.call(ne.prototype)}}else{try{throw Error()}catch(K){Z=K}(ne=s())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(K){if(K&&Z&&typeof K.stack=="string")return[K.stack,Z.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=p.DetermineComponentFrameRoot(),T=C[0],E=C[1];if(T&&E){var O=T.split(`
`),F=E.split(`
`);for(v=p=0;p<O.length&&!O[p].includes("DetermineComponentFrameRoot");)p++;for(;v<F.length&&!F[v].includes("DetermineComponentFrameRoot");)v++;if(p===O.length||v===F.length)for(p=O.length-1,v=F.length-1;1<=p&&0<=v&&O[p]!==F[v];)v--;for(;1<=p&&0<=v;p--,v--)if(O[p]!==F[v]){if(p!==1||v!==1)do if(p--,v--,0>v||O[p]!==F[v]){var X=`
`+O[p].replace(" at new "," at ");return s.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",s.displayName)),X}while(1<=p&&0<=v);break}}}finally{Bp=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?Qs(u):""}function tk(s){switch(s.tag){case 26:case 27:case 5:return Qs(s.type);case 16:return Qs("Lazy");case 13:return Qs("Suspense");case 19:return Qs("SuspenseList");case 0:case 15:return Vp(s.type,!1);case 11:return Vp(s.type.render,!1);case 1:return Vp(s.type,!0);case 31:return Qs("Activity");default:return""}}function x3(s){try{var a="";do a+=tk(s),s=s.return;while(s);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function or(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function S3(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function nk(s){var a=S3(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),p=""+s[a];if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var v=u.get,C=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return v.call(this)},set:function(T){p=""+T,C.call(this,T)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(T){p=""+T},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Lu(s){s._valueTracker||(s._valueTracker=nk(s))}function T3(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),p="";return s&&(p=S3(s)?s.checked?"true":"false":s.value),s=p,s!==u?(a.setValue(s),!0):!1}function _u(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var rk=/[\n"\\]/g;function sr(s){return s.replace(rk,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function jp(s,a,u,p,v,C,T,E){s.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?s.type=T:s.removeAttribute("type"),a!=null?T==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+or(a)):s.value!==""+or(a)&&(s.value=""+or(a)):T!=="submit"&&T!=="reset"||s.removeAttribute("value"),a!=null?Up(s,T,or(a)):u!=null?Up(s,T,or(u)):p!=null&&s.removeAttribute("value"),v==null&&C!=null&&(s.defaultChecked=!!C),v!=null&&(s.checked=v&&typeof v!="function"&&typeof v!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?s.name=""+or(E):s.removeAttribute("name")}function k3(s,a,u,p,v,C,T,E){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.type=C),a!=null||u!=null){if(!(C!=="submit"&&C!=="reset"||a!=null))return;u=u!=null?""+or(u):"",a=a!=null?""+or(a):u,E||a===s.value||(s.value=a),s.defaultValue=a}p=p??v,p=typeof p!="function"&&typeof p!="symbol"&&!!p,s.checked=E?s.checked:!!p,s.defaultChecked=!!p,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.name=T)}function Up(s,a,u){a==="number"&&_u(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function el(s,a,u,p){if(s=s.options,a){a={};for(var v=0;v<u.length;v++)a["$"+u[v]]=!0;for(u=0;u<s.length;u++)v=a.hasOwnProperty("$"+s[u].value),s[u].selected!==v&&(s[u].selected=v),v&&p&&(s[u].defaultSelected=!0)}else{for(u=""+or(u),a=null,v=0;v<s.length;v++){if(s[v].value===u){s[v].selected=!0,p&&(s[v].defaultSelected=!0);return}a!==null||s[v].disabled||(a=s[v])}a!==null&&(a.selected=!0)}}function M3(s,a,u){if(a!=null&&(a=""+or(a),a!==s.value&&(s.value=a),u==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=u!=null?""+or(u):""}function E3(s,a,u,p){if(a==null){if(p!=null){if(u!=null)throw Error(r(92));if(P(p)){if(1<p.length)throw Error(r(93));p=p[0]}u=p}u==null&&(u=""),a=u}u=or(a),s.defaultValue=u,p=s.textContent,p===u&&p!==""&&p!==null&&(s.value=p)}function tl(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var ik=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function A3(s,a,u){var p=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?p?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":p?s.setProperty(a,u):typeof u!="number"||u===0||ik.has(a)?a==="float"?s.cssFloat=u:s[a]=(""+u).trim():s[a]=u+"px"}function R3(s,a,u){if(a!=null&&typeof a!="object")throw Error(r(62));if(s=s.style,u!=null){for(var p in u)!u.hasOwnProperty(p)||a!=null&&a.hasOwnProperty(p)||(p.indexOf("--")===0?s.setProperty(p,""):p==="float"?s.cssFloat="":s[p]="");for(var v in a)p=a[v],a.hasOwnProperty(v)&&u[v]!==p&&A3(s,v,p)}else for(var C in a)a.hasOwnProperty(C)&&A3(s,C,a[C])}function Pp(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ok=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sk=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hu(s){return sk.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Fp=null;function $p(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var nl=null,rl=null;function N3(s){var a=Ws(s);if(a&&(s=a.stateNode)){var u=s[Dn]||null;e:switch(s=a.stateNode,a.type){case"input":if(jp(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+sr(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var p=u[a];if(p!==s&&p.form===s.form){var v=p[Dn]||null;if(!v)throw Error(r(90));jp(p,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(a=0;a<u.length;a++)p=u[a],p.form===s.form&&T3(p)}break e;case"textarea":M3(s,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&el(s,!!u.multiple,a,!1)}}}var qp=!1;function O3(s,a,u){if(qp)return s(a,u);qp=!0;try{var p=s(a);return p}finally{if(qp=!1,(nl!==null||rl!==null)&&(wf(),nl&&(a=nl,s=rl,rl=nl=null,N3(a),s)))for(a=0;a<s.length;a++)N3(s[a])}}function Ta(s,a){var u=s.stateNode;if(u===null)return null;var p=u[Dn]||null;if(p===null)return null;u=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(r(231,a,typeof u));return u}var ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zp=!1;if(ci)try{var ka={};Object.defineProperty(ka,"passive",{get:function(){Zp=!0}}),window.addEventListener("test",ka,ka),window.removeEventListener("test",ka,ka)}catch{Zp=!1}var qi=null,Kp=null,Iu=null;function D3(){if(Iu)return Iu;var s,a=Kp,u=a.length,p,v="value"in qi?qi.value:qi.textContent,C=v.length;for(s=0;s<u&&a[s]===v[s];s++);var T=u-s;for(p=1;p<=T&&a[u-p]===v[C-p];p++);return Iu=v.slice(s,1<p?1-p:void 0)}function zu(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Bu(){return!0}function L3(){return!1}function Ln(s){function a(u,p,v,C,T){this._reactName=u,this._targetInst=v,this.type=p,this.nativeEvent=C,this.target=T,this.currentTarget=null;for(var E in s)s.hasOwnProperty(E)&&(u=s[E],this[E]=u?u(C):C[E]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Bu:L3,this.isPropagationStopped=L3,this}return h(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Bu)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Bu)},persist:function(){},isPersistent:Bu}),a}var Xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vu=Ln(Xo),Ma=h({},Xo,{view:0,detail:0}),lk=Ln(Ma),Gp,Yp,Ea,ju=h({},Ma,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xp,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ea&&(Ea&&s.type==="mousemove"?(Gp=s.screenX-Ea.screenX,Yp=s.screenY-Ea.screenY):Yp=Gp=0,Ea=s),Gp)},movementY:function(s){return"movementY"in s?s.movementY:Yp}}),_3=Ln(ju),ak=h({},ju,{dataTransfer:0}),ck=Ln(ak),uk=h({},Ma,{relatedTarget:0}),Wp=Ln(uk),fk=h({},Xo,{animationName:0,elapsedTime:0,pseudoElement:0}),dk=Ln(fk),hk=h({},Xo,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),pk=Ln(hk),mk=h({},Xo,{data:0}),H3=Ln(mk),gk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bk(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=vk[s])?!!a[s]:!1}function Xp(){return bk}var Ck=h({},Ma,{key:function(s){if(s.key){var a=gk[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=zu(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?yk[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xp,charCode:function(s){return s.type==="keypress"?zu(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?zu(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),wk=Ln(Ck),xk=h({},ju,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I3=Ln(xk),Sk=h({},Ma,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xp}),Tk=Ln(Sk),kk=h({},Xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mk=Ln(kk),Ek=h({},ju,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Ak=Ln(Ek),Rk=h({},Xo,{newState:0,oldState:0}),Nk=Ln(Rk),Ok=[9,13,27,32],Jp=ci&&"CompositionEvent"in window,Aa=null;ci&&"documentMode"in document&&(Aa=document.documentMode);var Dk=ci&&"TextEvent"in window&&!Aa,z3=ci&&(!Jp||Aa&&8<Aa&&11>=Aa),B3=" ",V3=!1;function j3(s,a){switch(s){case"keyup":return Ok.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function U3(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var il=!1;function Lk(s,a){switch(s){case"compositionend":return U3(a);case"keypress":return a.which!==32?null:(V3=!0,B3);case"textInput":return s=a.data,s===B3&&V3?null:s;default:return null}}function _k(s,a){if(il)return s==="compositionend"||!Jp&&j3(s,a)?(s=D3(),Iu=Kp=qi=null,il=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return z3&&a.locale!=="ko"?null:a.data;default:return null}}var Hk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function P3(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!Hk[s.type]:a==="textarea"}function F3(s,a,u,p){nl?rl?rl.push(p):rl=[p]:nl=p,a=Ef(a,"onChange"),0<a.length&&(u=new Vu("onChange","change",null,u,p),s.push({event:u,listeners:a}))}var Ra=null,Na=null;function Ik(s){S4(s,0)}function Uu(s){var a=Sa(s);if(T3(a))return s}function $3(s,a){if(s==="change")return a}var q3=!1;if(ci){var Qp;if(ci){var e1="oninput"in document;if(!e1){var Z3=document.createElement("div");Z3.setAttribute("oninput","return;"),e1=typeof Z3.oninput=="function"}Qp=e1}else Qp=!1;q3=Qp&&(!document.documentMode||9<document.documentMode)}function K3(){Ra&&(Ra.detachEvent("onpropertychange",G3),Na=Ra=null)}function G3(s){if(s.propertyName==="value"&&Uu(Na)){var a=[];F3(a,Na,s,$p(s)),O3(Ik,a)}}function zk(s,a,u){s==="focusin"?(K3(),Ra=a,Na=u,Ra.attachEvent("onpropertychange",G3)):s==="focusout"&&K3()}function Bk(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Uu(Na)}function Vk(s,a){if(s==="click")return Uu(a)}function jk(s,a){if(s==="input"||s==="change")return Uu(a)}function Uk(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Kn=typeof Object.is=="function"?Object.is:Uk;function Oa(s,a){if(Kn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),p=Object.keys(a);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var v=u[p];if(!ke.call(a,v)||!Kn(s[v],a[v]))return!1}return!0}function Y3(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function W3(s,a){var u=Y3(s);s=0;for(var p;u;){if(u.nodeType===3){if(p=s+u.textContent.length,s<=a&&p>=a)return{node:u,offset:a-s};s=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Y3(u)}}function X3(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?X3(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function J3(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=_u(s.document);a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=_u(s.document)}return a}function t1(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var Pk=ci&&"documentMode"in document&&11>=document.documentMode,ol=null,n1=null,Da=null,r1=!1;function Q3(s,a,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;r1||ol==null||ol!==_u(p)||(p=ol,"selectionStart"in p&&t1(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Da&&Oa(Da,p)||(Da=p,p=Ef(n1,"onSelect"),0<p.length&&(a=new Vu("onSelect","select",null,a,u),s.push({event:a,listeners:p}),a.target=ol)))}function Jo(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var sl={animationend:Jo("Animation","AnimationEnd"),animationiteration:Jo("Animation","AnimationIteration"),animationstart:Jo("Animation","AnimationStart"),transitionrun:Jo("Transition","TransitionRun"),transitionstart:Jo("Transition","TransitionStart"),transitioncancel:Jo("Transition","TransitionCancel"),transitionend:Jo("Transition","TransitionEnd")},i1={},ev={};ci&&(ev=document.createElement("div").style,"AnimationEvent"in window||(delete sl.animationend.animation,delete sl.animationiteration.animation,delete sl.animationstart.animation),"TransitionEvent"in window||delete sl.transitionend.transition);function Qo(s){if(i1[s])return i1[s];if(!sl[s])return s;var a=sl[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in ev)return i1[s]=a[u];return s}var tv=Qo("animationend"),nv=Qo("animationiteration"),rv=Qo("animationstart"),Fk=Qo("transitionrun"),$k=Qo("transitionstart"),qk=Qo("transitioncancel"),iv=Qo("transitionend"),ov=new Map,o1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");o1.push("scrollEnd");function Tr(s,a){ov.set(s,a),Wo(a,[s])}var sv=new WeakMap;function lr(s,a){if(typeof s=="object"&&s!==null){var u=sv.get(s);return u!==void 0?u:(a={value:s,source:a,stack:x3(a)},sv.set(s,a),a)}return{value:s,source:a,stack:x3(a)}}var ar=[],ll=0,s1=0;function Pu(){for(var s=ll,a=s1=ll=0;a<s;){var u=ar[a];ar[a++]=null;var p=ar[a];ar[a++]=null;var v=ar[a];ar[a++]=null;var C=ar[a];if(ar[a++]=null,p!==null&&v!==null){var T=p.pending;T===null?v.next=v:(v.next=T.next,T.next=v),p.pending=v}C!==0&&lv(u,v,C)}}function Fu(s,a,u,p){ar[ll++]=s,ar[ll++]=a,ar[ll++]=u,ar[ll++]=p,s1|=p,s.lanes|=p,s=s.alternate,s!==null&&(s.lanes|=p)}function l1(s,a,u,p){return Fu(s,a,u,p),$u(s)}function al(s,a){return Fu(s,null,null,a),$u(s)}function lv(s,a,u){s.lanes|=u;var p=s.alternate;p!==null&&(p.lanes|=u);for(var v=!1,C=s.return;C!==null;)C.childLanes|=u,p=C.alternate,p!==null&&(p.childLanes|=u),C.tag===22&&(s=C.stateNode,s===null||s._visibility&1||(v=!0)),s=C,C=C.return;return s.tag===3?(C=s.stateNode,v&&a!==null&&(v=31-Ft(u),s=C.hiddenUpdates,p=s[v],p===null?s[v]=[a]:p.push(a),a.lane=u|536870912),C):null}function $u(s){if(50<rc)throw rc=0,hm=null,Error(r(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var cl={};function Zk(s,a,u,p){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(s,a,u,p){return new Zk(s,a,u,p)}function a1(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ui(s,a){var u=s.alternate;return u===null?(u=Gn(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function av(s,a){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,a=u.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function qu(s,a,u,p,v,C){var T=0;if(p=s,typeof s=="function")a1(s)&&(T=1);else if(typeof s=="string")T=GM(s,u,ae.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case ee:return s=Gn(31,u,a,v),s.elementType=ee,s.lanes=C,s;case b:return es(u.children,v,C,a);case w:T=8,v|=24;break;case x:return s=Gn(12,u,a,v|2),s.elementType=x,s.lanes=C,s;case L:return s=Gn(13,u,a,v),s.elementType=L,s.lanes=C,s;case z:return s=Gn(19,u,a,v),s.elementType=z,s.lanes=C,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case k:case N:T=10;break e;case A:T=9;break e;case D:T=11;break e;case q:T=14;break e;case j:T=16,p=null;break e}T=29,u=Error(r(130,s===null?"null":typeof s,"")),p=null}return a=Gn(T,u,a,v),a.elementType=s,a.type=p,a.lanes=C,a}function es(s,a,u,p){return s=Gn(7,s,p,a),s.lanes=u,s}function c1(s,a,u){return s=Gn(6,s,null,a),s.lanes=u,s}function u1(s,a,u){return a=Gn(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var ul=[],fl=0,Zu=null,Ku=0,cr=[],ur=0,ts=null,fi=1,di="";function ns(s,a){ul[fl++]=Ku,ul[fl++]=Zu,Zu=s,Ku=a}function cv(s,a,u){cr[ur++]=fi,cr[ur++]=di,cr[ur++]=ts,ts=s;var p=fi;s=di;var v=32-Ft(p)-1;p&=~(1<<v),u+=1;var C=32-Ft(a)+v;if(30<C){var T=v-v%5;C=(p&(1<<T)-1).toString(32),p>>=T,v-=T,fi=1<<32-Ft(a)+v|u<<v|p,di=C+s}else fi=1<<C|u<<v|p,di=s}function f1(s){s.return!==null&&(ns(s,1),cv(s,1,0))}function d1(s){for(;s===Zu;)Zu=ul[--fl],ul[fl]=null,Ku=ul[--fl],ul[fl]=null;for(;s===ts;)ts=cr[--ur],cr[ur]=null,di=cr[--ur],cr[ur]=null,fi=cr[--ur],cr[ur]=null}var Sn=null,bt=null,$e=!1,rs=null,$r=!1,h1=Error(r(519));function is(s){var a=Error(r(418,""));throw Ha(lr(a,s)),h1}function uv(s){var a=s.stateNode,u=s.type,p=s.memoizedProps;switch(a[un]=s,a[Dn]=p,u){case"dialog":He("cancel",a),He("close",a);break;case"iframe":case"object":case"embed":He("load",a);break;case"video":case"audio":for(u=0;u<oc.length;u++)He(oc[u],a);break;case"source":He("error",a);break;case"img":case"image":case"link":He("error",a),He("load",a);break;case"details":He("toggle",a);break;case"input":He("invalid",a),k3(a,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),Lu(a);break;case"select":He("invalid",a);break;case"textarea":He("invalid",a),E3(a,p.value,p.defaultValue,p.children),Lu(a)}u=p.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||p.suppressHydrationWarning===!0||E4(a.textContent,u)?(p.popover!=null&&(He("beforetoggle",a),He("toggle",a)),p.onScroll!=null&&He("scroll",a),p.onScrollEnd!=null&&He("scrollend",a),p.onClick!=null&&(a.onclick=Af),a=!0):a=!1,a||is(s)}function fv(s){for(Sn=s.return;Sn;)switch(Sn.tag){case 5:case 13:$r=!1;return;case 27:case 3:$r=!0;return;default:Sn=Sn.return}}function La(s){if(s!==Sn)return!1;if(!$e)return fv(s),$e=!0,!1;var a=s.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||Rm(s.type,s.memoizedProps)),u=!u),u&&bt&&is(s),fv(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8)if(u=s.data,u==="/$"){if(a===0){bt=Mr(s.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++;s=s.nextSibling}bt=null}}else a===27?(a=bt,lo(s.type)?(s=Lm,Lm=null,bt=s):bt=a):bt=Sn?Mr(s.stateNode.nextSibling):null;return!0}function _a(){bt=Sn=null,$e=!1}function dv(){var s=rs;return s!==null&&(In===null?In=s:In.push.apply(In,s),rs=null),s}function Ha(s){rs===null?rs=[s]:rs.push(s)}var p1=Y(null),ss=null,hi=null;function Zi(s,a,u){W(p1,a._currentValue),a._currentValue=u}function pi(s){s._currentValue=p1.current,te(p1)}function m1(s,a,u){for(;s!==null;){var p=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),s===u)break;s=s.return}}function g1(s,a,u,p){var v=s.child;for(v!==null&&(v.return=s);v!==null;){var C=v.dependencies;if(C!==null){var T=v.child;C=C.firstContext;e:for(;C!==null;){var E=C;C=v;for(var O=0;O<a.length;O++)if(E.context===a[O]){C.lanes|=u,E=C.alternate,E!==null&&(E.lanes|=u),m1(C.return,u,s),p||(T=null);break e}C=E.next}}else if(v.tag===18){if(T=v.return,T===null)throw Error(r(341));T.lanes|=u,C=T.alternate,C!==null&&(C.lanes|=u),m1(T,u,s),T=null}else T=v.child;if(T!==null)T.return=v;else for(T=v;T!==null;){if(T===s){T=null;break}if(v=T.sibling,v!==null){v.return=T.return,T=v;break}T=T.return}v=T}}function Ia(s,a,u,p){s=null;for(var v=a,C=!1;v!==null;){if(!C){if((v.flags&524288)!==0)C=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var T=v.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var E=v.type;Kn(v.pendingProps.value,T.value)||(s!==null?s.push(E):s=[E])}}else if(v===lt.current){if(T=v.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(s!==null?s.push(fc):s=[fc])}v=v.return}s!==null&&g1(a,s,u,p),a.flags|=262144}function Gu(s){for(s=s.firstContext;s!==null;){if(!Kn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ls(s){ss=s,hi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function fn(s){return hv(ss,s)}function Yu(s,a){return ss===null&&ls(s),hv(s,a)}function hv(s,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},hi===null){if(s===null)throw Error(r(308));hi=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else hi=hi.next=a;return u}var Kk=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(u,p){s.push(p)}};this.abort=function(){a.aborted=!0,s.forEach(function(u){return u()})}},Gk=t.unstable_scheduleCallback,Yk=t.unstable_NormalPriority,Ut={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function y1(){return{controller:new Kk,data:new Map,refCount:0}}function za(s){s.refCount--,s.refCount===0&&Gk(Yk,function(){s.controller.abort()})}var Ba=null,v1=0,dl=0,hl=null;function Wk(s,a){if(Ba===null){var u=Ba=[];v1=0,dl=Cm(),hl={status:"pending",value:void 0,then:function(p){u.push(p)}}}return v1++,a.then(pv,pv),a}function pv(){if(--v1===0&&Ba!==null){hl!==null&&(hl.status="fulfilled");var s=Ba;Ba=null,dl=0,hl=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function Xk(s,a){var u=[],p={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return s.then(function(){p.status="fulfilled",p.value=a;for(var v=0;v<u.length;v++)(0,u[v])(a)},function(v){for(p.status="rejected",p.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),p}var mv=H.S;H.S=function(s,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&Wk(s,a),mv!==null&&mv(s,a)};var as=Y(null);function b1(){var s=as.current;return s!==null?s:ct.pooledCache}function Wu(s,a){a===null?W(as,as.current):W(as,a.pool)}function gv(){var s=b1();return s===null?null:{parent:Ut._currentValue,pool:s}}var Va=Error(r(460)),yv=Error(r(474)),Xu=Error(r(542)),C1={then:function(){}};function vv(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Ju(){}function bv(s,a,u){switch(u=s[u],u===void 0?s.push(a):u!==a&&(a.then(Ju,Ju),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,wv(s),s;default:if(typeof a.status=="string")a.then(Ju,Ju);else{if(s=ct,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=a,s.status="pending",s.then(function(p){if(a.status==="pending"){var v=a;v.status="fulfilled",v.value=p}},function(p){if(a.status==="pending"){var v=a;v.status="rejected",v.reason=p}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,wv(s),s}throw ja=a,Va}}var ja=null;function Cv(){if(ja===null)throw Error(r(459));var s=ja;return ja=null,s}function wv(s){if(s===Va||s===Xu)throw Error(r(483))}var Ki=!1;function w1(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function x1(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Gi(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Yi(s,a,u){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(Ye&2)!==0){var v=p.pending;return v===null?a.next=a:(a.next=v.next,v.next=a),p.pending=a,a=$u(s),lv(s,null,u),a}return Fu(s,p,a,u),$u(s)}function Ua(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var p=a.lanes;p&=s.pendingLanes,u|=p,a.lanes=u,p3(s,u)}}function S1(s,a){var u=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var v=null,C=null;if(u=u.firstBaseUpdate,u!==null){do{var T={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};C===null?v=C=T:C=C.next=T,u=u.next}while(u!==null);C===null?v=C=a:C=C.next=a}else v=C=a;u={baseState:p.baseState,firstBaseUpdate:v,lastBaseUpdate:C,shared:p.shared,callbacks:p.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}var T1=!1;function Pa(){if(T1){var s=hl;if(s!==null)throw s}}function Fa(s,a,u,p){T1=!1;var v=s.updateQueue;Ki=!1;var C=v.firstBaseUpdate,T=v.lastBaseUpdate,E=v.shared.pending;if(E!==null){v.shared.pending=null;var O=E,F=O.next;O.next=null,T===null?C=F:T.next=F,T=O;var X=s.alternate;X!==null&&(X=X.updateQueue,E=X.lastBaseUpdate,E!==T&&(E===null?X.firstBaseUpdate=F:E.next=F,X.lastBaseUpdate=O))}if(C!==null){var ne=v.baseState;T=0,X=F=O=null,E=C;do{var Z=E.lane&-536870913,K=Z!==E.lane;if(K?(ze&Z)===Z:(p&Z)===Z){Z!==0&&Z===dl&&(T1=!0),X!==null&&(X=X.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Se=s,Ce=E;Z=a;var tt=u;switch(Ce.tag){case 1:if(Se=Ce.payload,typeof Se=="function"){ne=Se.call(tt,ne,Z);break e}ne=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ce.payload,Z=typeof Se=="function"?Se.call(tt,ne,Z):Se,Z==null)break e;ne=h({},ne,Z);break e;case 2:Ki=!0}}Z=E.callback,Z!==null&&(s.flags|=64,K&&(s.flags|=8192),K=v.callbacks,K===null?v.callbacks=[Z]:K.push(Z))}else K={lane:Z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},X===null?(F=X=K,O=ne):X=X.next=K,T|=Z;if(E=E.next,E===null){if(E=v.shared.pending,E===null)break;K=E,E=K.next,K.next=null,v.lastBaseUpdate=K,v.shared.pending=null}}while(!0);X===null&&(O=ne),v.baseState=O,v.firstBaseUpdate=F,v.lastBaseUpdate=X,C===null&&(v.shared.lanes=0),ro|=T,s.lanes=T,s.memoizedState=ne}}function xv(s,a){if(typeof s!="function")throw Error(r(191,s));s.call(a)}function Sv(s,a){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)xv(u[s],a)}var pl=Y(null),Qu=Y(0);function Tv(s,a){s=wi,W(Qu,s),W(pl,a),wi=s|a.baseLanes}function k1(){W(Qu,wi),W(pl,pl.current)}function M1(){wi=Qu.current,te(pl),te(Qu)}var Wi=0,Ne=null,Qe=null,_t=null,ef=!1,ml=!1,cs=!1,tf=0,$a=0,gl=null,Jk=0;function At(){throw Error(r(321))}function E1(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!Kn(s[u],a[u]))return!1;return!0}function A1(s,a,u,p,v,C){return Wi=C,Ne=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,H.H=s===null||s.memoizedState===null?lb:ab,cs=!1,C=u(p,v),cs=!1,ml&&(C=Mv(a,u,p,v)),kv(s),C}function kv(s){H.H=af;var a=Qe!==null&&Qe.next!==null;if(Wi=0,_t=Qe=Ne=null,ef=!1,$a=0,gl=null,a)throw Error(r(300));s===null||qt||(s=s.dependencies,s!==null&&Gu(s)&&(qt=!0))}function Mv(s,a,u,p){Ne=s;var v=0;do{if(ml&&(gl=null),$a=0,ml=!1,25<=v)throw Error(r(301));if(v+=1,_t=Qe=null,s.updateQueue!=null){var C=s.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}H.H=oM,C=a(u,p)}while(ml);return C}function Qk(){var s=H.H,a=s.useState()[0];return a=typeof a.then=="function"?qa(a):a,s=s.useState()[0],(Qe!==null?Qe.memoizedState:null)!==s&&(Ne.flags|=1024),a}function R1(){var s=tf!==0;return tf=0,s}function N1(s,a,u){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~u}function O1(s){if(ef){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}ef=!1}Wi=0,_t=Qe=Ne=null,ml=!1,$a=tf=0,gl=null}function _n(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?Ne.memoizedState=_t=s:_t=_t.next=s,_t}function Ht(){if(Qe===null){var s=Ne.alternate;s=s!==null?s.memoizedState:null}else s=Qe.next;var a=_t===null?Ne.memoizedState:_t.next;if(a!==null)_t=a,Qe=s;else{if(s===null)throw Ne.alternate===null?Error(r(467)):Error(r(310));Qe=s,s={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},_t===null?Ne.memoizedState=_t=s:_t=_t.next=s}return _t}function D1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function qa(s){var a=$a;return $a+=1,gl===null&&(gl=[]),s=bv(gl,s,a),a=Ne,(_t===null?a.memoizedState:_t.next)===null&&(a=a.alternate,H.H=a===null||a.memoizedState===null?lb:ab),s}function nf(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return qa(s);if(s.$$typeof===N)return fn(s)}throw Error(r(438,String(s)))}function L1(s){var a=null,u=Ne.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var p=Ne.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(a={data:p.data.map(function(v){return v.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=D1(),Ne.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(s),p=0;p<s;p++)u[p]=$;return a.index++,u}function mi(s,a){return typeof a=="function"?a(s):a}function rf(s){var a=Ht();return _1(a,Qe,s)}function _1(s,a,u){var p=s.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=u;var v=s.baseQueue,C=p.pending;if(C!==null){if(v!==null){var T=v.next;v.next=C.next,C.next=T}a.baseQueue=v=C,p.pending=null}if(C=s.baseState,v===null)s.memoizedState=C;else{a=v.next;var E=T=null,O=null,F=a,X=!1;do{var ne=F.lane&-536870913;if(ne!==F.lane?(ze&ne)===ne:(Wi&ne)===ne){var Z=F.revertLane;if(Z===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ne===dl&&(X=!0);else if((Wi&Z)===Z){F=F.next,Z===dl&&(X=!0);continue}else ne={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},O===null?(E=O=ne,T=C):O=O.next=ne,Ne.lanes|=Z,ro|=Z;ne=F.action,cs&&u(C,ne),C=F.hasEagerState?F.eagerState:u(C,ne)}else Z={lane:ne,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},O===null?(E=O=Z,T=C):O=O.next=Z,Ne.lanes|=ne,ro|=ne;F=F.next}while(F!==null&&F!==a);if(O===null?T=C:O.next=E,!Kn(C,s.memoizedState)&&(qt=!0,X&&(u=hl,u!==null)))throw u;s.memoizedState=C,s.baseState=T,s.baseQueue=O,p.lastRenderedState=C}return v===null&&(p.lanes=0),[s.memoizedState,p.dispatch]}function H1(s){var a=Ht(),u=a.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=s;var p=u.dispatch,v=u.pending,C=a.memoizedState;if(v!==null){u.pending=null;var T=v=v.next;do C=s(C,T.action),T=T.next;while(T!==v);Kn(C,a.memoizedState)||(qt=!0),a.memoizedState=C,a.baseQueue===null&&(a.baseState=C),u.lastRenderedState=C}return[C,p]}function Ev(s,a,u){var p=Ne,v=Ht(),C=$e;if(C){if(u===void 0)throw Error(r(407));u=u()}else u=a();var T=!Kn((Qe||v).memoizedState,u);T&&(v.memoizedState=u,qt=!0),v=v.queue;var E=Nv.bind(null,p,v,s);if(Za(2048,8,E,[s]),v.getSnapshot!==a||T||_t!==null&&_t.memoizedState.tag&1){if(p.flags|=2048,yl(9,of(),Rv.bind(null,p,v,u,a),null),ct===null)throw Error(r(349));C||(Wi&124)!==0||Av(p,a,u)}return u}function Av(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=Ne.updateQueue,a===null?(a=D1(),Ne.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function Rv(s,a,u,p){a.value=u,a.getSnapshot=p,Ov(a)&&Dv(s)}function Nv(s,a,u){return u(function(){Ov(a)&&Dv(s)})}function Ov(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!Kn(s,u)}catch{return!0}}function Dv(s){var a=al(s,2);a!==null&&Qn(a,s,2)}function I1(s){var a=_n();if(typeof s=="function"){var u=s;if(s=u(),cs){Rn(!0);try{u()}finally{Rn(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mi,lastRenderedState:s},a}function Lv(s,a,u,p){return s.baseState=u,_1(s,Qe,typeof p=="function"?p:mi)}function eM(s,a,u,p,v){if(lf(s))throw Error(r(485));if(s=a.action,s!==null){var C={payload:v,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){C.listeners.push(T)}};H.T!==null?u(!0):C.isTransition=!1,p(C),u=a.pending,u===null?(C.next=a.pending=C,_v(a,C)):(C.next=u.next,a.pending=u.next=C)}}function _v(s,a){var u=a.action,p=a.payload,v=s.state;if(a.isTransition){var C=H.T,T={};H.T=T;try{var E=u(v,p),O=H.S;O!==null&&O(T,E),Hv(s,a,E)}catch(F){z1(s,a,F)}finally{H.T=C}}else try{C=u(v,p),Hv(s,a,C)}catch(F){z1(s,a,F)}}function Hv(s,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(p){Iv(s,a,p)},function(p){return z1(s,a,p)}):Iv(s,a,u)}function Iv(s,a,u){a.status="fulfilled",a.value=u,zv(a),s.state=u,a=s.pending,a!==null&&(u=a.next,u===a?s.pending=null:(u=u.next,a.next=u,_v(s,u)))}function z1(s,a,u){var p=s.pending;if(s.pending=null,p!==null){p=p.next;do a.status="rejected",a.reason=u,zv(a),a=a.next;while(a!==p)}s.action=null}function zv(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function Bv(s,a){return a}function Vv(s,a){if($e){var u=ct.formState;if(u!==null){e:{var p=Ne;if($e){if(bt){t:{for(var v=bt,C=$r;v.nodeType!==8;){if(!C){v=null;break t}if(v=Mr(v.nextSibling),v===null){v=null;break t}}C=v.data,v=C==="F!"||C==="F"?v:null}if(v){bt=Mr(v.nextSibling),p=v.data==="F!";break e}}is(p)}p=!1}p&&(a=u[0])}}return u=_n(),u.memoizedState=u.baseState=a,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bv,lastRenderedState:a},u.queue=p,u=ib.bind(null,Ne,p),p.dispatch=u,p=I1(!1),C=P1.bind(null,Ne,!1,p.queue),p=_n(),v={state:a,dispatch:null,action:s,pending:null},p.queue=v,u=eM.bind(null,Ne,v,C,u),v.dispatch=u,p.memoizedState=s,[a,u,!1]}function jv(s){var a=Ht();return Uv(a,Qe,s)}function Uv(s,a,u){if(a=_1(s,a,Bv)[0],s=rf(mi)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var p=qa(a)}catch(T){throw T===Va?Xu:T}else p=a;a=Ht();var v=a.queue,C=v.dispatch;return u!==a.memoizedState&&(Ne.flags|=2048,yl(9,of(),tM.bind(null,v,u),null)),[p,C,s]}function tM(s,a){s.action=a}function Pv(s){var a=Ht(),u=Qe;if(u!==null)return Uv(a,u,s);Ht(),a=a.memoizedState,u=Ht();var p=u.queue.dispatch;return u.memoizedState=s,[a,p,!1]}function yl(s,a,u,p){return s={tag:s,create:u,deps:p,inst:a,next:null},a=Ne.updateQueue,a===null&&(a=D1(),Ne.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=s.next=s:(p=u.next,u.next=s,s.next=p,a.lastEffect=s),s}function of(){return{destroy:void 0,resource:void 0}}function Fv(){return Ht().memoizedState}function sf(s,a,u,p){var v=_n();p=p===void 0?null:p,Ne.flags|=s,v.memoizedState=yl(1|a,of(),u,p)}function Za(s,a,u,p){var v=Ht();p=p===void 0?null:p;var C=v.memoizedState.inst;Qe!==null&&p!==null&&E1(p,Qe.memoizedState.deps)?v.memoizedState=yl(a,C,u,p):(Ne.flags|=s,v.memoizedState=yl(1|a,C,u,p))}function $v(s,a){sf(8390656,8,s,a)}function qv(s,a){Za(2048,8,s,a)}function Zv(s,a){return Za(4,2,s,a)}function Kv(s,a){return Za(4,4,s,a)}function Gv(s,a){if(typeof a=="function"){s=s();var u=a(s);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function Yv(s,a,u){u=u!=null?u.concat([s]):null,Za(4,4,Gv.bind(null,a,s),u)}function B1(){}function Wv(s,a){var u=Ht();a=a===void 0?null:a;var p=u.memoizedState;return a!==null&&E1(a,p[1])?p[0]:(u.memoizedState=[s,a],s)}function Xv(s,a){var u=Ht();a=a===void 0?null:a;var p=u.memoizedState;if(a!==null&&E1(a,p[1]))return p[0];if(p=s(),cs){Rn(!0);try{s()}finally{Rn(!1)}}return u.memoizedState=[p,a],p}function V1(s,a,u){return u===void 0||(Wi&1073741824)!==0?s.memoizedState=a:(s.memoizedState=u,s=e4(),Ne.lanes|=s,ro|=s,u)}function Jv(s,a,u,p){return Kn(u,a)?u:pl.current!==null?(s=V1(s,u,p),Kn(s,a)||(qt=!0),s):(Wi&42)===0?(qt=!0,s.memoizedState=u):(s=e4(),Ne.lanes|=s,ro|=s,a)}function Qv(s,a,u,p,v){var C=V.p;V.p=C!==0&&8>C?C:8;var T=H.T,E={};H.T=E,P1(s,!1,a,u);try{var O=v(),F=H.S;if(F!==null&&F(E,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var X=Xk(O,p);Ka(s,a,X,Jn(s))}else Ka(s,a,p,Jn(s))}catch(ne){Ka(s,a,{then:function(){},status:"rejected",reason:ne},Jn())}finally{V.p=C,H.T=T}}function nM(){}function j1(s,a,u,p){if(s.tag!==5)throw Error(r(476));var v=eb(s).queue;Qv(s,v,a,I,u===null?nM:function(){return tb(s),u(p)})}function eb(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:I,baseState:I,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mi,lastRenderedState:I},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mi,lastRenderedState:u},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function tb(s){var a=eb(s).next.queue;Ka(s,a,{},Jn())}function U1(){return fn(fc)}function nb(){return Ht().memoizedState}function rb(){return Ht().memoizedState}function rM(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var u=Jn();s=Gi(u);var p=Yi(a,s,u);p!==null&&(Qn(p,a,u),Ua(p,a,u)),a={cache:y1()},s.payload=a;return}a=a.return}}function iM(s,a,u){var p=Jn();u={lane:p,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},lf(s)?ob(a,u):(u=l1(s,a,u,p),u!==null&&(Qn(u,s,p),sb(u,a,p)))}function ib(s,a,u){var p=Jn();Ka(s,a,u,p)}function Ka(s,a,u,p){var v={lane:p,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(lf(s))ob(a,v);else{var C=s.alternate;if(s.lanes===0&&(C===null||C.lanes===0)&&(C=a.lastRenderedReducer,C!==null))try{var T=a.lastRenderedState,E=C(T,u);if(v.hasEagerState=!0,v.eagerState=E,Kn(E,T))return Fu(s,a,v,0),ct===null&&Pu(),!1}catch{}finally{}if(u=l1(s,a,v,p),u!==null)return Qn(u,s,p),sb(u,a,p),!0}return!1}function P1(s,a,u,p){if(p={lane:2,revertLane:Cm(),action:p,hasEagerState:!1,eagerState:null,next:null},lf(s)){if(a)throw Error(r(479))}else a=l1(s,u,p,2),a!==null&&Qn(a,s,2)}function lf(s){var a=s.alternate;return s===Ne||a!==null&&a===Ne}function ob(s,a){ml=ef=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function sb(s,a,u){if((u&4194048)!==0){var p=a.lanes;p&=s.pendingLanes,u|=p,a.lanes=u,p3(s,u)}}var af={readContext:fn,use:nf,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useLayoutEffect:At,useInsertionEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useSyncExternalStore:At,useId:At,useHostTransitionStatus:At,useFormState:At,useActionState:At,useOptimistic:At,useMemoCache:At,useCacheRefresh:At},lb={readContext:fn,use:nf,useCallback:function(s,a){return _n().memoizedState=[s,a===void 0?null:a],s},useContext:fn,useEffect:$v,useImperativeHandle:function(s,a,u){u=u!=null?u.concat([s]):null,sf(4194308,4,Gv.bind(null,a,s),u)},useLayoutEffect:function(s,a){return sf(4194308,4,s,a)},useInsertionEffect:function(s,a){sf(4,2,s,a)},useMemo:function(s,a){var u=_n();a=a===void 0?null:a;var p=s();if(cs){Rn(!0);try{s()}finally{Rn(!1)}}return u.memoizedState=[p,a],p},useReducer:function(s,a,u){var p=_n();if(u!==void 0){var v=u(a);if(cs){Rn(!0);try{u(a)}finally{Rn(!1)}}}else v=a;return p.memoizedState=p.baseState=v,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:v},p.queue=s,s=s.dispatch=iM.bind(null,Ne,s),[p.memoizedState,s]},useRef:function(s){var a=_n();return s={current:s},a.memoizedState=s},useState:function(s){s=I1(s);var a=s.queue,u=ib.bind(null,Ne,a);return a.dispatch=u,[s.memoizedState,u]},useDebugValue:B1,useDeferredValue:function(s,a){var u=_n();return V1(u,s,a)},useTransition:function(){var s=I1(!1);return s=Qv.bind(null,Ne,s.queue,!0,!1),_n().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,u){var p=Ne,v=_n();if($e){if(u===void 0)throw Error(r(407));u=u()}else{if(u=a(),ct===null)throw Error(r(349));(ze&124)!==0||Av(p,a,u)}v.memoizedState=u;var C={value:u,getSnapshot:a};return v.queue=C,$v(Nv.bind(null,p,C,s),[s]),p.flags|=2048,yl(9,of(),Rv.bind(null,p,C,u,a),null),u},useId:function(){var s=_n(),a=ct.identifierPrefix;if($e){var u=di,p=fi;u=(p&~(1<<32-Ft(p)-1)).toString(32)+u,a=""+a+"R"+u,u=tf++,0<u&&(a+="H"+u.toString(32)),a+=""}else u=Jk++,a=""+a+"r"+u.toString(32)+"";return s.memoizedState=a},useHostTransitionStatus:U1,useFormState:Vv,useActionState:Vv,useOptimistic:function(s){var a=_n();a.memoizedState=a.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=P1.bind(null,Ne,!0,u),u.dispatch=a,[s,a]},useMemoCache:L1,useCacheRefresh:function(){return _n().memoizedState=rM.bind(null,Ne)}},ab={readContext:fn,use:nf,useCallback:Wv,useContext:fn,useEffect:qv,useImperativeHandle:Yv,useInsertionEffect:Zv,useLayoutEffect:Kv,useMemo:Xv,useReducer:rf,useRef:Fv,useState:function(){return rf(mi)},useDebugValue:B1,useDeferredValue:function(s,a){var u=Ht();return Jv(u,Qe.memoizedState,s,a)},useTransition:function(){var s=rf(mi)[0],a=Ht().memoizedState;return[typeof s=="boolean"?s:qa(s),a]},useSyncExternalStore:Ev,useId:nb,useHostTransitionStatus:U1,useFormState:jv,useActionState:jv,useOptimistic:function(s,a){var u=Ht();return Lv(u,Qe,s,a)},useMemoCache:L1,useCacheRefresh:rb},oM={readContext:fn,use:nf,useCallback:Wv,useContext:fn,useEffect:qv,useImperativeHandle:Yv,useInsertionEffect:Zv,useLayoutEffect:Kv,useMemo:Xv,useReducer:H1,useRef:Fv,useState:function(){return H1(mi)},useDebugValue:B1,useDeferredValue:function(s,a){var u=Ht();return Qe===null?V1(u,s,a):Jv(u,Qe.memoizedState,s,a)},useTransition:function(){var s=H1(mi)[0],a=Ht().memoizedState;return[typeof s=="boolean"?s:qa(s),a]},useSyncExternalStore:Ev,useId:nb,useHostTransitionStatus:U1,useFormState:Pv,useActionState:Pv,useOptimistic:function(s,a){var u=Ht();return Qe!==null?Lv(u,Qe,s,a):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:L1,useCacheRefresh:rb},vl=null,Ga=0;function cf(s){var a=Ga;return Ga+=1,vl===null&&(vl=[]),bv(vl,s,a)}function Ya(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function uf(s,a){throw a.$$typeof===m?Error(r(525)):(s=Object.prototype.toString.call(a),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function cb(s){var a=s._init;return a(s._payload)}function ub(s){function a(B,_){if(s){var U=B.deletions;U===null?(B.deletions=[_],B.flags|=16):U.push(_)}}function u(B,_){if(!s)return null;for(;_!==null;)a(B,_),_=_.sibling;return null}function p(B){for(var _=new Map;B!==null;)B.key!==null?_.set(B.key,B):_.set(B.index,B),B=B.sibling;return _}function v(B,_){return B=ui(B,_),B.index=0,B.sibling=null,B}function C(B,_,U){return B.index=U,s?(U=B.alternate,U!==null?(U=U.index,U<_?(B.flags|=67108866,_):U):(B.flags|=67108866,_)):(B.flags|=1048576,_)}function T(B){return s&&B.alternate===null&&(B.flags|=67108866),B}function E(B,_,U,J){return _===null||_.tag!==6?(_=c1(U,B.mode,J),_.return=B,_):(_=v(_,U),_.return=B,_)}function O(B,_,U,J){var he=U.type;return he===b?X(B,_,U.props.children,J,U.key):_!==null&&(_.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===j&&cb(he)===_.type)?(_=v(_,U.props),Ya(_,U),_.return=B,_):(_=qu(U.type,U.key,U.props,null,B.mode,J),Ya(_,U),_.return=B,_)}function F(B,_,U,J){return _===null||_.tag!==4||_.stateNode.containerInfo!==U.containerInfo||_.stateNode.implementation!==U.implementation?(_=u1(U,B.mode,J),_.return=B,_):(_=v(_,U.children||[]),_.return=B,_)}function X(B,_,U,J,he){return _===null||_.tag!==7?(_=es(U,B.mode,J,he),_.return=B,_):(_=v(_,U),_.return=B,_)}function ne(B,_,U){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return _=c1(""+_,B.mode,U),_.return=B,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case g:return U=qu(_.type,_.key,_.props,null,B.mode,U),Ya(U,_),U.return=B,U;case y:return _=u1(_,B.mode,U),_.return=B,_;case j:var J=_._init;return _=J(_._payload),ne(B,_,U)}if(P(_)||se(_))return _=es(_,B.mode,U,null),_.return=B,_;if(typeof _.then=="function")return ne(B,cf(_),U);if(_.$$typeof===N)return ne(B,Yu(B,_),U);uf(B,_)}return null}function Z(B,_,U,J){var he=_!==null?_.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return he!==null?null:E(B,_,""+U,J);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case g:return U.key===he?O(B,_,U,J):null;case y:return U.key===he?F(B,_,U,J):null;case j:return he=U._init,U=he(U._payload),Z(B,_,U,J)}if(P(U)||se(U))return he!==null?null:X(B,_,U,J,null);if(typeof U.then=="function")return Z(B,_,cf(U),J);if(U.$$typeof===N)return Z(B,_,Yu(B,U),J);uf(B,U)}return null}function K(B,_,U,J,he){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return B=B.get(U)||null,E(_,B,""+J,he);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case g:return B=B.get(J.key===null?U:J.key)||null,O(_,B,J,he);case y:return B=B.get(J.key===null?U:J.key)||null,F(_,B,J,he);case j:var De=J._init;return J=De(J._payload),K(B,_,U,J,he)}if(P(J)||se(J))return B=B.get(U)||null,X(_,B,J,he,null);if(typeof J.then=="function")return K(B,_,U,cf(J),he);if(J.$$typeof===N)return K(B,_,U,Yu(_,J),he);uf(_,J)}return null}function Se(B,_,U,J){for(var he=null,De=null,ve=_,xe=_=0,Kt=null;ve!==null&&xe<U.length;xe++){ve.index>xe?(Kt=ve,ve=null):Kt=ve.sibling;var Ue=Z(B,ve,U[xe],J);if(Ue===null){ve===null&&(ve=Kt);break}s&&ve&&Ue.alternate===null&&a(B,ve),_=C(Ue,_,xe),De===null?he=Ue:De.sibling=Ue,De=Ue,ve=Kt}if(xe===U.length)return u(B,ve),$e&&ns(B,xe),he;if(ve===null){for(;xe<U.length;xe++)ve=ne(B,U[xe],J),ve!==null&&(_=C(ve,_,xe),De===null?he=ve:De.sibling=ve,De=ve);return $e&&ns(B,xe),he}for(ve=p(ve);xe<U.length;xe++)Kt=K(ve,B,xe,U[xe],J),Kt!==null&&(s&&Kt.alternate!==null&&ve.delete(Kt.key===null?xe:Kt.key),_=C(Kt,_,xe),De===null?he=Kt:De.sibling=Kt,De=Kt);return s&&ve.forEach(function(ho){return a(B,ho)}),$e&&ns(B,xe),he}function Ce(B,_,U,J){if(U==null)throw Error(r(151));for(var he=null,De=null,ve=_,xe=_=0,Kt=null,Ue=U.next();ve!==null&&!Ue.done;xe++,Ue=U.next()){ve.index>xe?(Kt=ve,ve=null):Kt=ve.sibling;var ho=Z(B,ve,Ue.value,J);if(ho===null){ve===null&&(ve=Kt);break}s&&ve&&ho.alternate===null&&a(B,ve),_=C(ho,_,xe),De===null?he=ho:De.sibling=ho,De=ho,ve=Kt}if(Ue.done)return u(B,ve),$e&&ns(B,xe),he;if(ve===null){for(;!Ue.done;xe++,Ue=U.next())Ue=ne(B,Ue.value,J),Ue!==null&&(_=C(Ue,_,xe),De===null?he=Ue:De.sibling=Ue,De=Ue);return $e&&ns(B,xe),he}for(ve=p(ve);!Ue.done;xe++,Ue=U.next())Ue=K(ve,B,xe,Ue.value,J),Ue!==null&&(s&&Ue.alternate!==null&&ve.delete(Ue.key===null?xe:Ue.key),_=C(Ue,_,xe),De===null?he=Ue:De.sibling=Ue,De=Ue);return s&&ve.forEach(function(sE){return a(B,sE)}),$e&&ns(B,xe),he}function tt(B,_,U,J){if(typeof U=="object"&&U!==null&&U.type===b&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case g:e:{for(var he=U.key;_!==null;){if(_.key===he){if(he=U.type,he===b){if(_.tag===7){u(B,_.sibling),J=v(_,U.props.children),J.return=B,B=J;break e}}else if(_.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===j&&cb(he)===_.type){u(B,_.sibling),J=v(_,U.props),Ya(J,U),J.return=B,B=J;break e}u(B,_);break}else a(B,_);_=_.sibling}U.type===b?(J=es(U.props.children,B.mode,J,U.key),J.return=B,B=J):(J=qu(U.type,U.key,U.props,null,B.mode,J),Ya(J,U),J.return=B,B=J)}return T(B);case y:e:{for(he=U.key;_!==null;){if(_.key===he)if(_.tag===4&&_.stateNode.containerInfo===U.containerInfo&&_.stateNode.implementation===U.implementation){u(B,_.sibling),J=v(_,U.children||[]),J.return=B,B=J;break e}else{u(B,_);break}else a(B,_);_=_.sibling}J=u1(U,B.mode,J),J.return=B,B=J}return T(B);case j:return he=U._init,U=he(U._payload),tt(B,_,U,J)}if(P(U))return Se(B,_,U,J);if(se(U)){if(he=se(U),typeof he!="function")throw Error(r(150));return U=he.call(U),Ce(B,_,U,J)}if(typeof U.then=="function")return tt(B,_,cf(U),J);if(U.$$typeof===N)return tt(B,_,Yu(B,U),J);uf(B,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,_!==null&&_.tag===6?(u(B,_.sibling),J=v(_,U),J.return=B,B=J):(u(B,_),J=c1(U,B.mode,J),J.return=B,B=J),T(B)):u(B,_)}return function(B,_,U,J){try{Ga=0;var he=tt(B,_,U,J);return vl=null,he}catch(ve){if(ve===Va||ve===Xu)throw ve;var De=Gn(29,ve,null,B.mode);return De.lanes=J,De.return=B,De}finally{}}}var bl=ub(!0),fb=ub(!1),fr=Y(null),qr=null;function Xi(s){var a=s.alternate;W(Pt,Pt.current&1),W(fr,s),qr===null&&(a===null||pl.current!==null||a.memoizedState!==null)&&(qr=s)}function db(s){if(s.tag===22){if(W(Pt,Pt.current),W(fr,s),qr===null){var a=s.alternate;a!==null&&a.memoizedState!==null&&(qr=s)}}else Ji()}function Ji(){W(Pt,Pt.current),W(fr,fr.current)}function gi(s){te(fr),qr===s&&(qr=null),te(Pt)}var Pt=Y(0);function ff(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||Dm(u)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function F1(s,a,u,p){a=s.memoizedState,u=u(p,a),u=u==null?a:h({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var $1={enqueueSetState:function(s,a,u){s=s._reactInternals;var p=Jn(),v=Gi(p);v.payload=a,u!=null&&(v.callback=u),a=Yi(s,v,p),a!==null&&(Qn(a,s,p),Ua(a,s,p))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var p=Jn(),v=Gi(p);v.tag=1,v.payload=a,u!=null&&(v.callback=u),a=Yi(s,v,p),a!==null&&(Qn(a,s,p),Ua(a,s,p))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=Jn(),p=Gi(u);p.tag=2,a!=null&&(p.callback=a),a=Yi(s,p,u),a!==null&&(Qn(a,s,u),Ua(a,s,u))}};function hb(s,a,u,p,v,C,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,C,T):a.prototype&&a.prototype.isPureReactComponent?!Oa(u,p)||!Oa(v,C):!0}function pb(s,a,u,p){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,p),a.state!==s&&$1.enqueueReplaceState(a,a.state,null)}function us(s,a){var u=a;if("ref"in a){u={};for(var p in a)p!=="ref"&&(u[p]=a[p])}if(s=s.defaultProps){u===a&&(u=h({},u));for(var v in s)u[v]===void 0&&(u[v]=s[v])}return u}var df=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function mb(s){df(s)}function gb(s){console.error(s)}function yb(s){df(s)}function hf(s,a){try{var u=s.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(p){setTimeout(function(){throw p})}}function vb(s,a,u){try{var p=s.onCaughtError;p(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function q1(s,a,u){return u=Gi(u),u.tag=3,u.payload={element:null},u.callback=function(){hf(s,a)},u}function bb(s){return s=Gi(s),s.tag=3,s}function Cb(s,a,u,p){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var C=p.value;s.payload=function(){return v(C)},s.callback=function(){vb(a,u,p)}}var T=u.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(s.callback=function(){vb(a,u,p),typeof v!="function"&&(io===null?io=new Set([this]):io.add(this));var E=p.stack;this.componentDidCatch(p.value,{componentStack:E!==null?E:""})})}function sM(s,a,u,p,v){if(u.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(a=u.alternate,a!==null&&Ia(a,u,v,!0),u=fr.current,u!==null){switch(u.tag){case 13:return qr===null?mm():u.alternate===null&&Ct===0&&(Ct=3),u.flags&=-257,u.flags|=65536,u.lanes=v,p===C1?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([p]):a.add(p),ym(s,p,v)),!1;case 22:return u.flags|=65536,p===C1?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([p])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([p]):u.add(p)),ym(s,p,v)),!1}throw Error(r(435,u.tag))}return ym(s,p,v),mm(),!1}if($e)return a=fr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=v,p!==h1&&(s=Error(r(422),{cause:p}),Ha(lr(s,u)))):(p!==h1&&(a=Error(r(423),{cause:p}),Ha(lr(a,u))),s=s.current.alternate,s.flags|=65536,v&=-v,s.lanes|=v,p=lr(p,u),v=q1(s.stateNode,p,v),S1(s,v),Ct!==4&&(Ct=2)),!1;var C=Error(r(520),{cause:p});if(C=lr(C,u),nc===null?nc=[C]:nc.push(C),Ct!==4&&(Ct=2),a===null)return!0;p=lr(p,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,s=v&-v,u.lanes|=s,s=q1(u.stateNode,p,s),S1(u,s),!1;case 1:if(a=u.type,C=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(io===null||!io.has(C))))return u.flags|=65536,v&=-v,u.lanes|=v,v=bb(v),Cb(v,s,u,p),S1(u,v),!1}u=u.return}while(u!==null);return!1}var wb=Error(r(461)),qt=!1;function en(s,a,u,p){a.child=s===null?fb(a,null,u,p):bl(a,s.child,u,p)}function xb(s,a,u,p,v){u=u.render;var C=a.ref;if("ref"in p){var T={};for(var E in p)E!=="ref"&&(T[E]=p[E])}else T=p;return ls(a),p=A1(s,a,u,T,C,v),E=R1(),s!==null&&!qt?(N1(s,a,v),yi(s,a,v)):($e&&E&&f1(a),a.flags|=1,en(s,a,p,v),a.child)}function Sb(s,a,u,p,v){if(s===null){var C=u.type;return typeof C=="function"&&!a1(C)&&C.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=C,Tb(s,a,C,p,v)):(s=qu(u.type,null,p,a,a.mode,v),s.ref=a.ref,s.return=a,a.child=s)}if(C=s.child,!Q1(s,v)){var T=C.memoizedProps;if(u=u.compare,u=u!==null?u:Oa,u(T,p)&&s.ref===a.ref)return yi(s,a,v)}return a.flags|=1,s=ui(C,p),s.ref=a.ref,s.return=a,a.child=s}function Tb(s,a,u,p,v){if(s!==null){var C=s.memoizedProps;if(Oa(C,p)&&s.ref===a.ref)if(qt=!1,a.pendingProps=p=C,Q1(s,v))(s.flags&131072)!==0&&(qt=!0);else return a.lanes=s.lanes,yi(s,a,v)}return Z1(s,a,u,p,v)}function kb(s,a,u){var p=a.pendingProps,v=p.children,C=s!==null?s.memoizedState:null;if(p.mode==="hidden"){if((a.flags&128)!==0){if(p=C!==null?C.baseLanes|u:u,s!==null){for(v=a.child=s.child,C=0;v!==null;)C=C|v.lanes|v.childLanes,v=v.sibling;a.childLanes=C&~p}else a.childLanes=0,a.child=null;return Mb(s,a,p,u)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Wu(a,C!==null?C.cachePool:null),C!==null?Tv(a,C):k1(),db(a);else return a.lanes=a.childLanes=536870912,Mb(s,a,C!==null?C.baseLanes|u:u,u)}else C!==null?(Wu(a,C.cachePool),Tv(a,C),Ji(),a.memoizedState=null):(s!==null&&Wu(a,null),k1(),Ji());return en(s,a,v,u),a.child}function Mb(s,a,u,p){var v=b1();return v=v===null?null:{parent:Ut._currentValue,pool:v},a.memoizedState={baseLanes:u,cachePool:v},s!==null&&Wu(a,null),k1(),db(a),s!==null&&Ia(s,a,p,!0),null}function pf(s,a){var u=a.ref;if(u===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(s===null||s.ref!==u)&&(a.flags|=4194816)}}function Z1(s,a,u,p,v){return ls(a),u=A1(s,a,u,p,void 0,v),p=R1(),s!==null&&!qt?(N1(s,a,v),yi(s,a,v)):($e&&p&&f1(a),a.flags|=1,en(s,a,u,v),a.child)}function Eb(s,a,u,p,v,C){return ls(a),a.updateQueue=null,u=Mv(a,p,u,v),kv(s),p=R1(),s!==null&&!qt?(N1(s,a,C),yi(s,a,C)):($e&&p&&f1(a),a.flags|=1,en(s,a,u,C),a.child)}function Ab(s,a,u,p,v){if(ls(a),a.stateNode===null){var C=cl,T=u.contextType;typeof T=="object"&&T!==null&&(C=fn(T)),C=new u(p,C),a.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=$1,a.stateNode=C,C._reactInternals=a,C=a.stateNode,C.props=p,C.state=a.memoizedState,C.refs={},w1(a),T=u.contextType,C.context=typeof T=="object"&&T!==null?fn(T):cl,C.state=a.memoizedState,T=u.getDerivedStateFromProps,typeof T=="function"&&(F1(a,u,T,p),C.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(T=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),T!==C.state&&$1.enqueueReplaceState(C,C.state,null),Fa(a,p,C,v),Pa(),C.state=a.memoizedState),typeof C.componentDidMount=="function"&&(a.flags|=4194308),p=!0}else if(s===null){C=a.stateNode;var E=a.memoizedProps,O=us(u,E);C.props=O;var F=C.context,X=u.contextType;T=cl,typeof X=="object"&&X!==null&&(T=fn(X));var ne=u.getDerivedStateFromProps;X=typeof ne=="function"||typeof C.getSnapshotBeforeUpdate=="function",E=a.pendingProps!==E,X||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(E||F!==T)&&pb(a,C,p,T),Ki=!1;var Z=a.memoizedState;C.state=Z,Fa(a,p,C,v),Pa(),F=a.memoizedState,E||Z!==F||Ki?(typeof ne=="function"&&(F1(a,u,ne,p),F=a.memoizedState),(O=Ki||hb(a,u,O,p,Z,F,T))?(X||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(a.flags|=4194308)):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=F),C.props=p,C.state=F,C.context=T,p=O):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{C=a.stateNode,x1(s,a),T=a.memoizedProps,X=us(u,T),C.props=X,ne=a.pendingProps,Z=C.context,F=u.contextType,O=cl,typeof F=="object"&&F!==null&&(O=fn(F)),E=u.getDerivedStateFromProps,(F=typeof E=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(T!==ne||Z!==O)&&pb(a,C,p,O),Ki=!1,Z=a.memoizedState,C.state=Z,Fa(a,p,C,v),Pa();var K=a.memoizedState;T!==ne||Z!==K||Ki||s!==null&&s.dependencies!==null&&Gu(s.dependencies)?(typeof E=="function"&&(F1(a,u,E,p),K=a.memoizedState),(X=Ki||hb(a,u,X,p,Z,K,O)||s!==null&&s.dependencies!==null&&Gu(s.dependencies))?(F||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(p,K,O),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(p,K,O)),typeof C.componentDidUpdate=="function"&&(a.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof C.componentDidUpdate!="function"||T===s.memoizedProps&&Z===s.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&Z===s.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=K),C.props=p,C.state=K,C.context=O,p=X):(typeof C.componentDidUpdate!="function"||T===s.memoizedProps&&Z===s.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&Z===s.memoizedState||(a.flags|=1024),p=!1)}return C=p,pf(s,a),p=(a.flags&128)!==0,C||p?(C=a.stateNode,u=p&&typeof u.getDerivedStateFromError!="function"?null:C.render(),a.flags|=1,s!==null&&p?(a.child=bl(a,s.child,null,v),a.child=bl(a,null,u,v)):en(s,a,u,v),a.memoizedState=C.state,s=a.child):s=yi(s,a,v),s}function Rb(s,a,u,p){return _a(),a.flags|=256,en(s,a,u,p),a.child}var K1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function G1(s){return{baseLanes:s,cachePool:gv()}}function Y1(s,a,u){return s=s!==null?s.childLanes&~u:0,a&&(s|=dr),s}function Nb(s,a,u){var p=a.pendingProps,v=!1,C=(a.flags&128)!==0,T;if((T=C)||(T=s!==null&&s.memoizedState===null?!1:(Pt.current&2)!==0),T&&(v=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,s===null){if($e){if(v?Xi(a):Ji(),$e){var E=bt,O;if(O=E){e:{for(O=E,E=$r;O.nodeType!==8;){if(!E){E=null;break e}if(O=Mr(O.nextSibling),O===null){E=null;break e}}E=O}E!==null?(a.memoizedState={dehydrated:E,treeContext:ts!==null?{id:fi,overflow:di}:null,retryLane:536870912,hydrationErrors:null},O=Gn(18,null,null,0),O.stateNode=E,O.return=a,a.child=O,Sn=a,bt=null,O=!0):O=!1}O||is(a)}if(E=a.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Dm(E)?a.lanes=32:a.lanes=536870912,null;gi(a)}return E=p.children,p=p.fallback,v?(Ji(),v=a.mode,E=mf({mode:"hidden",children:E},v),p=es(p,v,u,null),E.return=a,p.return=a,E.sibling=p,a.child=E,v=a.child,v.memoizedState=G1(u),v.childLanes=Y1(s,T,u),a.memoizedState=K1,p):(Xi(a),W1(a,E))}if(O=s.memoizedState,O!==null&&(E=O.dehydrated,E!==null)){if(C)a.flags&256?(Xi(a),a.flags&=-257,a=X1(s,a,u)):a.memoizedState!==null?(Ji(),a.child=s.child,a.flags|=128,a=null):(Ji(),v=p.fallback,E=a.mode,p=mf({mode:"visible",children:p.children},E),v=es(v,E,u,null),v.flags|=2,p.return=a,v.return=a,p.sibling=v,a.child=p,bl(a,s.child,null,u),p=a.child,p.memoizedState=G1(u),p.childLanes=Y1(s,T,u),a.memoizedState=K1,a=v);else if(Xi(a),Dm(E)){if(T=E.nextSibling&&E.nextSibling.dataset,T)var F=T.dgst;T=F,p=Error(r(419)),p.stack="",p.digest=T,Ha({value:p,source:null,stack:null}),a=X1(s,a,u)}else if(qt||Ia(s,a,u,!1),T=(u&s.childLanes)!==0,qt||T){if(T=ct,T!==null&&(p=u&-u,p=(p&42)!==0?1:Lp(p),p=(p&(T.suspendedLanes|u))!==0?0:p,p!==0&&p!==O.retryLane))throw O.retryLane=p,al(s,p),Qn(T,s,p),wb;E.data==="$?"||mm(),a=X1(s,a,u)}else E.data==="$?"?(a.flags|=192,a.child=s.child,a=null):(s=O.treeContext,bt=Mr(E.nextSibling),Sn=a,$e=!0,rs=null,$r=!1,s!==null&&(cr[ur++]=fi,cr[ur++]=di,cr[ur++]=ts,fi=s.id,di=s.overflow,ts=a),a=W1(a,p.children),a.flags|=4096);return a}return v?(Ji(),v=p.fallback,E=a.mode,O=s.child,F=O.sibling,p=ui(O,{mode:"hidden",children:p.children}),p.subtreeFlags=O.subtreeFlags&65011712,F!==null?v=ui(F,v):(v=es(v,E,u,null),v.flags|=2),v.return=a,p.return=a,p.sibling=v,a.child=p,p=v,v=a.child,E=s.child.memoizedState,E===null?E=G1(u):(O=E.cachePool,O!==null?(F=Ut._currentValue,O=O.parent!==F?{parent:F,pool:F}:O):O=gv(),E={baseLanes:E.baseLanes|u,cachePool:O}),v.memoizedState=E,v.childLanes=Y1(s,T,u),a.memoizedState=K1,p):(Xi(a),u=s.child,s=u.sibling,u=ui(u,{mode:"visible",children:p.children}),u.return=a,u.sibling=null,s!==null&&(T=a.deletions,T===null?(a.deletions=[s],a.flags|=16):T.push(s)),a.child=u,a.memoizedState=null,u)}function W1(s,a){return a=mf({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function mf(s,a){return s=Gn(22,s,null,a),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function X1(s,a,u){return bl(a,s.child,null,u),s=W1(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function Ob(s,a,u){s.lanes|=a;var p=s.alternate;p!==null&&(p.lanes|=a),m1(s.return,a,u)}function J1(s,a,u,p,v){var C=s.memoizedState;C===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:v}:(C.isBackwards=a,C.rendering=null,C.renderingStartTime=0,C.last=p,C.tail=u,C.tailMode=v)}function Db(s,a,u){var p=a.pendingProps,v=p.revealOrder,C=p.tail;if(en(s,a,p.children,u),p=Pt.current,(p&2)!==0)p=p&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Ob(s,u,a);else if(s.tag===19)Ob(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}p&=1}switch(W(Pt,p),v){case"forwards":for(u=a.child,v=null;u!==null;)s=u.alternate,s!==null&&ff(s)===null&&(v=u),u=u.sibling;u=v,u===null?(v=a.child,a.child=null):(v=u.sibling,u.sibling=null),J1(a,!1,v,u,C);break;case"backwards":for(u=null,v=a.child,a.child=null;v!==null;){if(s=v.alternate,s!==null&&ff(s)===null){a.child=v;break}s=v.sibling,v.sibling=u,u=v,v=s}J1(a,!0,u,null,C);break;case"together":J1(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function yi(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),ro|=a.lanes,(u&a.childLanes)===0)if(s!==null){if(Ia(s,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(r(153));if(a.child!==null){for(s=a.child,u=ui(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=ui(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function Q1(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&Gu(s)))}function lM(s,a,u){switch(a.tag){case 3:qe(a,a.stateNode.containerInfo),Zi(a,Ut,s.memoizedState.cache),_a();break;case 27:case 5:Zn(a);break;case 4:qe(a,a.stateNode.containerInfo);break;case 10:Zi(a,a.type,a.memoizedProps.value);break;case 13:var p=a.memoizedState;if(p!==null)return p.dehydrated!==null?(Xi(a),a.flags|=128,null):(u&a.child.childLanes)!==0?Nb(s,a,u):(Xi(a),s=yi(s,a,u),s!==null?s.sibling:null);Xi(a);break;case 19:var v=(s.flags&128)!==0;if(p=(u&a.childLanes)!==0,p||(Ia(s,a,u,!1),p=(u&a.childLanes)!==0),v){if(p)return Db(s,a,u);a.flags|=128}if(v=a.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),W(Pt,Pt.current),p)break;return null;case 22:case 23:return a.lanes=0,kb(s,a,u);case 24:Zi(a,Ut,s.memoizedState.cache)}return yi(s,a,u)}function Lb(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps)qt=!0;else{if(!Q1(s,u)&&(a.flags&128)===0)return qt=!1,lM(s,a,u);qt=(s.flags&131072)!==0}else qt=!1,$e&&(a.flags&1048576)!==0&&cv(a,Ku,a.index);switch(a.lanes=0,a.tag){case 16:e:{s=a.pendingProps;var p=a.elementType,v=p._init;if(p=v(p._payload),a.type=p,typeof p=="function")a1(p)?(s=us(p,s),a.tag=1,a=Ab(null,a,p,s,u)):(a.tag=0,a=Z1(null,a,p,s,u));else{if(p!=null){if(v=p.$$typeof,v===D){a.tag=11,a=xb(null,a,p,s,u);break e}else if(v===q){a.tag=14,a=Sb(null,a,p,s,u);break e}}throw a=G(p)||p,Error(r(306,a,""))}}return a;case 0:return Z1(s,a,a.type,a.pendingProps,u);case 1:return p=a.type,v=us(p,a.pendingProps),Ab(s,a,p,v,u);case 3:e:{if(qe(a,a.stateNode.containerInfo),s===null)throw Error(r(387));p=a.pendingProps;var C=a.memoizedState;v=C.element,x1(s,a),Fa(a,p,null,u);var T=a.memoizedState;if(p=T.cache,Zi(a,Ut,p),p!==C.cache&&g1(a,[Ut],u,!0),Pa(),p=T.element,C.isDehydrated)if(C={element:p,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=C,a.memoizedState=C,a.flags&256){a=Rb(s,a,p,u);break e}else if(p!==v){v=lr(Error(r(424)),a),Ha(v),a=Rb(s,a,p,u);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(bt=Mr(s.firstChild),Sn=a,$e=!0,rs=null,$r=!0,u=fb(a,null,p,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(_a(),p===v){a=yi(s,a,u);break e}en(s,a,p,u)}a=a.child}return a;case 26:return pf(s,a),s===null?(u=z4(a.type,null,a.pendingProps,null))?a.memoizedState=u:$e||(u=a.type,s=a.pendingProps,p=Rf(fe.current).createElement(u),p[un]=a,p[Dn]=s,nn(p,u,s),$t(p),a.stateNode=p):a.memoizedState=z4(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Zn(a),s===null&&$e&&(p=a.stateNode=_4(a.type,a.pendingProps,fe.current),Sn=a,$r=!0,v=bt,lo(a.type)?(Lm=v,bt=Mr(p.firstChild)):bt=v),en(s,a,a.pendingProps.children,u),pf(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&$e&&((v=p=bt)&&(p=HM(p,a.type,a.pendingProps,$r),p!==null?(a.stateNode=p,Sn=a,bt=Mr(p.firstChild),$r=!1,v=!0):v=!1),v||is(a)),Zn(a),v=a.type,C=a.pendingProps,T=s!==null?s.memoizedProps:null,p=C.children,Rm(v,C)?p=null:T!==null&&Rm(v,T)&&(a.flags|=32),a.memoizedState!==null&&(v=A1(s,a,Qk,null,null,u),fc._currentValue=v),pf(s,a),en(s,a,p,u),a.child;case 6:return s===null&&$e&&((s=u=bt)&&(u=IM(u,a.pendingProps,$r),u!==null?(a.stateNode=u,Sn=a,bt=null,s=!0):s=!1),s||is(a)),null;case 13:return Nb(s,a,u);case 4:return qe(a,a.stateNode.containerInfo),p=a.pendingProps,s===null?a.child=bl(a,null,p,u):en(s,a,p,u),a.child;case 11:return xb(s,a,a.type,a.pendingProps,u);case 7:return en(s,a,a.pendingProps,u),a.child;case 8:return en(s,a,a.pendingProps.children,u),a.child;case 12:return en(s,a,a.pendingProps.children,u),a.child;case 10:return p=a.pendingProps,Zi(a,a.type,p.value),en(s,a,p.children,u),a.child;case 9:return v=a.type._context,p=a.pendingProps.children,ls(a),v=fn(v),p=p(v),a.flags|=1,en(s,a,p,u),a.child;case 14:return Sb(s,a,a.type,a.pendingProps,u);case 15:return Tb(s,a,a.type,a.pendingProps,u);case 19:return Db(s,a,u);case 31:return p=a.pendingProps,u=a.mode,p={mode:p.mode,children:p.children},s===null?(u=mf(p,u),u.ref=a.ref,a.child=u,u.return=a,a=u):(u=ui(s.child,p),u.ref=a.ref,a.child=u,u.return=a,a=u),a;case 22:return kb(s,a,u);case 24:return ls(a),p=fn(Ut),s===null?(v=b1(),v===null&&(v=ct,C=y1(),v.pooledCache=C,C.refCount++,C!==null&&(v.pooledCacheLanes|=u),v=C),a.memoizedState={parent:p,cache:v},w1(a),Zi(a,Ut,v)):((s.lanes&u)!==0&&(x1(s,a),Fa(a,null,null,u),Pa()),v=s.memoizedState,C=a.memoizedState,v.parent!==p?(v={parent:p,cache:p},a.memoizedState=v,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=v),Zi(a,Ut,p)):(p=C.cache,Zi(a,Ut,p),p!==v.cache&&g1(a,[Ut],u,!0))),en(s,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function vi(s){s.flags|=4}function _b(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!P4(a)){if(a=fr.current,a!==null&&((ze&4194048)===ze?qr!==null:(ze&62914560)!==ze&&(ze&536870912)===0||a!==qr))throw ja=C1,yv;s.flags|=8192}}function gf(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?Ca():536870912,s.lanes|=a,Sl|=a)}function Wa(s,a){if(!$e)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function vt(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,p=0;if(a)for(var v=s.child;v!==null;)u|=v.lanes|v.childLanes,p|=v.subtreeFlags&65011712,p|=v.flags&65011712,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)u|=v.lanes|v.childLanes,p|=v.subtreeFlags,p|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=p,s.childLanes=u,a}function aM(s,a,u){var p=a.pendingProps;switch(d1(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(a),null;case 1:return vt(a),null;case 3:return u=a.stateNode,p=null,s!==null&&(p=s.memoizedState.cache),a.memoizedState.cache!==p&&(a.flags|=2048),pi(Ut),wn(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(La(a)?vi(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,dv())),vt(a),null;case 26:return u=a.memoizedState,s===null?(vi(a),u!==null?(vt(a),_b(a,u)):(vt(a),a.flags&=-16777217)):u?u!==s.memoizedState?(vi(a),vt(a),_b(a,u)):(vt(a),a.flags&=-16777217):(s.memoizedProps!==p&&vi(a),vt(a),a.flags&=-16777217),null;case 27:Sr(a),u=fe.current;var v=a.type;if(s!==null&&a.stateNode!=null)s.memoizedProps!==p&&vi(a);else{if(!p){if(a.stateNode===null)throw Error(r(166));return vt(a),null}s=ae.current,La(a)?uv(a):(s=_4(v,p,u),a.stateNode=s,vi(a))}return vt(a),null;case 5:if(Sr(a),u=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==p&&vi(a);else{if(!p){if(a.stateNode===null)throw Error(r(166));return vt(a),null}if(s=ae.current,La(a))uv(a);else{switch(v=Rf(fe.current),s){case 1:s=v.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:s=v.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":s=v.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":s=v.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":s=v.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof p.is=="string"?v.createElement("select",{is:p.is}):v.createElement("select"),p.multiple?s.multiple=!0:p.size&&(s.size=p.size);break;default:s=typeof p.is=="string"?v.createElement(u,{is:p.is}):v.createElement(u)}}s[un]=a,s[Dn]=p;e:for(v=a.child;v!==null;){if(v.tag===5||v.tag===6)s.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===a)break e;for(;v.sibling===null;){if(v.return===null||v.return===a)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}a.stateNode=s;e:switch(nn(s,u,p),u){case"button":case"input":case"select":case"textarea":s=!!p.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&vi(a)}}return vt(a),a.flags&=-16777217,null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==p&&vi(a);else{if(typeof p!="string"&&a.stateNode===null)throw Error(r(166));if(s=fe.current,La(a)){if(s=a.stateNode,u=a.memoizedProps,p=null,v=Sn,v!==null)switch(v.tag){case 27:case 5:p=v.memoizedProps}s[un]=a,s=!!(s.nodeValue===u||p!==null&&p.suppressHydrationWarning===!0||E4(s.nodeValue,u)),s||is(a)}else s=Rf(s).createTextNode(p),s[un]=a,a.stateNode=s}return vt(a),null;case 13:if(p=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(v=La(a),p!==null&&p.dehydrated!==null){if(s===null){if(!v)throw Error(r(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[un]=a}else _a(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;vt(a),v=!1}else v=dv(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=v),v=!0;if(!v)return a.flags&256?(gi(a),a):(gi(a),null)}if(gi(a),(a.flags&128)!==0)return a.lanes=u,a;if(u=p!==null,s=s!==null&&s.memoizedState!==null,u){p=a.child,v=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(v=p.alternate.memoizedState.cachePool.pool);var C=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(C=p.memoizedState.cachePool.pool),C!==v&&(p.flags|=2048)}return u!==s&&u&&(a.child.flags|=8192),gf(a,a.updateQueue),vt(a),null;case 4:return wn(),s===null&&Tm(a.stateNode.containerInfo),vt(a),null;case 10:return pi(a.type),vt(a),null;case 19:if(te(Pt),v=a.memoizedState,v===null)return vt(a),null;if(p=(a.flags&128)!==0,C=v.rendering,C===null)if(p)Wa(v,!1);else{if(Ct!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(C=ff(s),C!==null){for(a.flags|=128,Wa(v,!1),s=C.updateQueue,a.updateQueue=s,gf(a,s),a.subtreeFlags=0,s=u,u=a.child;u!==null;)av(u,s),u=u.sibling;return W(Pt,Pt.current&1|2),a.child}s=s.sibling}v.tail!==null&&Te()>bf&&(a.flags|=128,p=!0,Wa(v,!1),a.lanes=4194304)}else{if(!p)if(s=ff(C),s!==null){if(a.flags|=128,p=!0,s=s.updateQueue,a.updateQueue=s,gf(a,s),Wa(v,!0),v.tail===null&&v.tailMode==="hidden"&&!C.alternate&&!$e)return vt(a),null}else 2*Te()-v.renderingStartTime>bf&&u!==536870912&&(a.flags|=128,p=!0,Wa(v,!1),a.lanes=4194304);v.isBackwards?(C.sibling=a.child,a.child=C):(s=v.last,s!==null?s.sibling=C:a.child=C,v.last=C)}return v.tail!==null?(a=v.tail,v.rendering=a,v.tail=a.sibling,v.renderingStartTime=Te(),a.sibling=null,s=Pt.current,W(Pt,p?s&1|2:s&1),a):(vt(a),null);case 22:case 23:return gi(a),M1(),p=a.memoizedState!==null,s!==null?s.memoizedState!==null!==p&&(a.flags|=8192):p&&(a.flags|=8192),p?(u&536870912)!==0&&(a.flags&128)===0&&(vt(a),a.subtreeFlags&6&&(a.flags|=8192)):vt(a),u=a.updateQueue,u!==null&&gf(a,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),p=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(p=a.memoizedState.cachePool.pool),p!==u&&(a.flags|=2048),s!==null&&te(as),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),pi(Ut),vt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function cM(s,a){switch(d1(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return pi(Ut),wn(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Sr(a),null;case 13:if(gi(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(r(340));_a()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return te(Pt),null;case 4:return wn(),null;case 10:return pi(a.type),null;case 22:case 23:return gi(a),M1(),s!==null&&te(as),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return pi(Ut),null;case 25:return null;default:return null}}function Hb(s,a){switch(d1(a),a.tag){case 3:pi(Ut),wn();break;case 26:case 27:case 5:Sr(a);break;case 4:wn();break;case 13:gi(a);break;case 19:te(Pt);break;case 10:pi(a.type);break;case 22:case 23:gi(a),M1(),s!==null&&te(as);break;case 24:pi(Ut)}}function Xa(s,a){try{var u=a.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var v=p.next;u=v;do{if((u.tag&s)===s){p=void 0;var C=u.create,T=u.inst;p=C(),T.destroy=p}u=u.next}while(u!==v)}}catch(E){nt(a,a.return,E)}}function Qi(s,a,u){try{var p=a.updateQueue,v=p!==null?p.lastEffect:null;if(v!==null){var C=v.next;p=C;do{if((p.tag&s)===s){var T=p.inst,E=T.destroy;if(E!==void 0){T.destroy=void 0,v=a;var O=u,F=E;try{F()}catch(X){nt(v,O,X)}}}p=p.next}while(p!==C)}}catch(X){nt(a,a.return,X)}}function Ib(s){var a=s.updateQueue;if(a!==null){var u=s.stateNode;try{Sv(a,u)}catch(p){nt(s,s.return,p)}}}function zb(s,a,u){u.props=us(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(p){nt(s,a,p)}}function Ja(s,a){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var p=s.stateNode;break;case 30:p=s.stateNode;break;default:p=s.stateNode}typeof u=="function"?s.refCleanup=u(p):u.current=p}}catch(v){nt(s,a,v)}}function Zr(s,a){var u=s.ref,p=s.refCleanup;if(u!==null)if(typeof p=="function")try{p()}catch(v){nt(s,a,v)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){nt(s,a,v)}else u.current=null}function Bb(s){var a=s.type,u=s.memoizedProps,p=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&p.focus();break e;case"img":u.src?p.src=u.src:u.srcSet&&(p.srcset=u.srcSet)}}catch(v){nt(s,s.return,v)}}function em(s,a,u){try{var p=s.stateNode;NM(p,s.type,u,a),p[Dn]=a}catch(v){nt(s,s.return,v)}}function Vb(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&lo(s.type)||s.tag===4}function tm(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Vb(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&lo(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function nm(s,a,u){var p=s.tag;if(p===5||p===6)s=s.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(s),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Af));else if(p!==4&&(p===27&&lo(s.type)&&(u=s.stateNode,a=null),s=s.child,s!==null))for(nm(s,a,u),s=s.sibling;s!==null;)nm(s,a,u),s=s.sibling}function yf(s,a,u){var p=s.tag;if(p===5||p===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(p!==4&&(p===27&&lo(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(yf(s,a,u),s=s.sibling;s!==null;)yf(s,a,u),s=s.sibling}function jb(s){var a=s.stateNode,u=s.memoizedProps;try{for(var p=s.type,v=a.attributes;v.length;)a.removeAttributeNode(v[0]);nn(a,p,u),a[un]=s,a[Dn]=u}catch(C){nt(s,s.return,C)}}var bi=!1,Rt=!1,rm=!1,Ub=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function uM(s,a){if(s=s.containerInfo,Em=Hf,s=J3(s),t1(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var v=p.anchorOffset,C=p.focusNode;p=p.focusOffset;try{u.nodeType,C.nodeType}catch{u=null;break e}var T=0,E=-1,O=-1,F=0,X=0,ne=s,Z=null;t:for(;;){for(var K;ne!==u||v!==0&&ne.nodeType!==3||(E=T+v),ne!==C||p!==0&&ne.nodeType!==3||(O=T+p),ne.nodeType===3&&(T+=ne.nodeValue.length),(K=ne.firstChild)!==null;)Z=ne,ne=K;for(;;){if(ne===s)break t;if(Z===u&&++F===v&&(E=T),Z===C&&++X===p&&(O=T),(K=ne.nextSibling)!==null)break;ne=Z,Z=ne.parentNode}ne=K}u=E===-1||O===-1?null:{start:E,end:O}}else u=null}u=u||{start:0,end:0}}else u=null;for(Am={focusedElem:s,selectionRange:u},Hf=!1,Zt=a;Zt!==null;)if(a=Zt,s=a.child,(a.subtreeFlags&1024)!==0&&s!==null)s.return=a,Zt=s;else for(;Zt!==null;){switch(a=Zt,C=a.alternate,s=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&C!==null){s=void 0,u=a,v=C.memoizedProps,C=C.memoizedState,p=u.stateNode;try{var Se=us(u.type,v,u.elementType===u.type);s=p.getSnapshotBeforeUpdate(Se,C),p.__reactInternalSnapshotBeforeUpdate=s}catch(Ce){nt(u,u.return,Ce)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,u=s.nodeType,u===9)Om(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Om(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=a.sibling,s!==null){s.return=a.return,Zt=s;break}Zt=a.return}}function Pb(s,a,u){var p=u.flags;switch(u.tag){case 0:case 11:case 15:eo(s,u),p&4&&Xa(5,u);break;case 1:if(eo(s,u),p&4)if(s=u.stateNode,a===null)try{s.componentDidMount()}catch(T){nt(u,u.return,T)}else{var v=us(u.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(v,a,s.__reactInternalSnapshotBeforeUpdate)}catch(T){nt(u,u.return,T)}}p&64&&Ib(u),p&512&&Ja(u,u.return);break;case 3:if(eo(s,u),p&64&&(s=u.updateQueue,s!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{Sv(s,a)}catch(T){nt(u,u.return,T)}}break;case 27:a===null&&p&4&&jb(u);case 26:case 5:eo(s,u),a===null&&p&4&&Bb(u),p&512&&Ja(u,u.return);break;case 12:eo(s,u);break;case 13:eo(s,u),p&4&&qb(s,u),p&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=bM.bind(null,u),zM(s,u))));break;case 22:if(p=u.memoizedState!==null||bi,!p){a=a!==null&&a.memoizedState!==null||Rt,v=bi;var C=Rt;bi=p,(Rt=a)&&!C?to(s,u,(u.subtreeFlags&8772)!==0):eo(s,u),bi=v,Rt=C}break;case 30:break;default:eo(s,u)}}function Fb(s){var a=s.alternate;a!==null&&(s.alternate=null,Fb(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&Ip(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var gt=null,Hn=!1;function Ci(s,a,u){for(u=u.child;u!==null;)$b(s,a,u),u=u.sibling}function $b(s,a,u){if(Ie&&typeof Ie.onCommitFiberUnmount=="function")try{Ie.onCommitFiberUnmount(Ze,u)}catch{}switch(u.tag){case 26:Rt||Zr(u,a),Ci(s,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Rt||Zr(u,a);var p=gt,v=Hn;lo(u.type)&&(gt=u.stateNode,Hn=!1),Ci(s,a,u),lc(u.stateNode),gt=p,Hn=v;break;case 5:Rt||Zr(u,a);case 6:if(p=gt,v=Hn,gt=null,Ci(s,a,u),gt=p,Hn=v,gt!==null)if(Hn)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(u.stateNode)}catch(C){nt(u,a,C)}else try{gt.removeChild(u.stateNode)}catch(C){nt(u,a,C)}break;case 18:gt!==null&&(Hn?(s=gt,D4(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),mc(s)):D4(gt,u.stateNode));break;case 4:p=gt,v=Hn,gt=u.stateNode.containerInfo,Hn=!0,Ci(s,a,u),gt=p,Hn=v;break;case 0:case 11:case 14:case 15:Rt||Qi(2,u,a),Rt||Qi(4,u,a),Ci(s,a,u);break;case 1:Rt||(Zr(u,a),p=u.stateNode,typeof p.componentWillUnmount=="function"&&zb(u,a,p)),Ci(s,a,u);break;case 21:Ci(s,a,u);break;case 22:Rt=(p=Rt)||u.memoizedState!==null,Ci(s,a,u),Rt=p;break;default:Ci(s,a,u)}}function qb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{mc(s)}catch(u){nt(a,a.return,u)}}function fM(s){switch(s.tag){case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new Ub),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new Ub),a;default:throw Error(r(435,s.tag))}}function im(s,a){var u=fM(s);a.forEach(function(p){var v=CM.bind(null,s,p);u.has(p)||(u.add(p),p.then(v,v))})}function Yn(s,a){var u=a.deletions;if(u!==null)for(var p=0;p<u.length;p++){var v=u[p],C=s,T=a,E=T;e:for(;E!==null;){switch(E.tag){case 27:if(lo(E.type)){gt=E.stateNode,Hn=!1;break e}break;case 5:gt=E.stateNode,Hn=!1;break e;case 3:case 4:gt=E.stateNode.containerInfo,Hn=!0;break e}E=E.return}if(gt===null)throw Error(r(160));$b(C,T,v),gt=null,Hn=!1,C=v.alternate,C!==null&&(C.return=null),v.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Zb(a,s),a=a.sibling}var kr=null;function Zb(s,a){var u=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Yn(a,s),Wn(s),p&4&&(Qi(3,s,s.return),Xa(3,s),Qi(5,s,s.return));break;case 1:Yn(a,s),Wn(s),p&512&&(Rt||u===null||Zr(u,u.return)),p&64&&bi&&(s=s.updateQueue,s!==null&&(p=s.callbacks,p!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?p:u.concat(p))));break;case 26:var v=kr;if(Yn(a,s),Wn(s),p&512&&(Rt||u===null||Zr(u,u.return)),p&4){var C=u!==null?u.memoizedState:null;if(p=s.memoizedState,u===null)if(p===null)if(s.stateNode===null){e:{p=s.type,u=s.memoizedProps,v=v.ownerDocument||v;t:switch(p){case"title":C=v.getElementsByTagName("title")[0],(!C||C[xa]||C[un]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=v.createElement(p),v.head.insertBefore(C,v.querySelector("head > title"))),nn(C,p,u),C[un]=s,$t(C),p=C;break e;case"link":var T=j4("link","href",v).get(p+(u.href||""));if(T){for(var E=0;E<T.length;E++)if(C=T[E],C.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&C.getAttribute("rel")===(u.rel==null?null:u.rel)&&C.getAttribute("title")===(u.title==null?null:u.title)&&C.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){T.splice(E,1);break t}}C=v.createElement(p),nn(C,p,u),v.head.appendChild(C);break;case"meta":if(T=j4("meta","content",v).get(p+(u.content||""))){for(E=0;E<T.length;E++)if(C=T[E],C.getAttribute("content")===(u.content==null?null:""+u.content)&&C.getAttribute("name")===(u.name==null?null:u.name)&&C.getAttribute("property")===(u.property==null?null:u.property)&&C.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&C.getAttribute("charset")===(u.charSet==null?null:u.charSet)){T.splice(E,1);break t}}C=v.createElement(p),nn(C,p,u),v.head.appendChild(C);break;default:throw Error(r(468,p))}C[un]=s,$t(C),p=C}s.stateNode=p}else U4(v,s.type,s.stateNode);else s.stateNode=V4(v,p,s.memoizedProps);else C!==p?(C===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):C.count--,p===null?U4(v,s.type,s.stateNode):V4(v,p,s.memoizedProps)):p===null&&s.stateNode!==null&&em(s,s.memoizedProps,u.memoizedProps)}break;case 27:Yn(a,s),Wn(s),p&512&&(Rt||u===null||Zr(u,u.return)),u!==null&&p&4&&em(s,s.memoizedProps,u.memoizedProps);break;case 5:if(Yn(a,s),Wn(s),p&512&&(Rt||u===null||Zr(u,u.return)),s.flags&32){v=s.stateNode;try{tl(v,"")}catch(K){nt(s,s.return,K)}}p&4&&s.stateNode!=null&&(v=s.memoizedProps,em(s,v,u!==null?u.memoizedProps:v)),p&1024&&(rm=!0);break;case 6:if(Yn(a,s),Wn(s),p&4){if(s.stateNode===null)throw Error(r(162));p=s.memoizedProps,u=s.stateNode;try{u.nodeValue=p}catch(K){nt(s,s.return,K)}}break;case 3:if(Df=null,v=kr,kr=Nf(a.containerInfo),Yn(a,s),kr=v,Wn(s),p&4&&u!==null&&u.memoizedState.isDehydrated)try{mc(a.containerInfo)}catch(K){nt(s,s.return,K)}rm&&(rm=!1,Kb(s));break;case 4:p=kr,kr=Nf(s.stateNode.containerInfo),Yn(a,s),Wn(s),kr=p;break;case 12:Yn(a,s),Wn(s);break;case 13:Yn(a,s),Wn(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(um=Te()),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,im(s,p)));break;case 22:v=s.memoizedState!==null;var O=u!==null&&u.memoizedState!==null,F=bi,X=Rt;if(bi=F||v,Rt=X||O,Yn(a,s),Rt=X,bi=F,Wn(s),p&8192)e:for(a=s.stateNode,a._visibility=v?a._visibility&-2:a._visibility|1,v&&(u===null||O||bi||Rt||fs(s)),u=null,a=s;;){if(a.tag===5||a.tag===26){if(u===null){O=u=a;try{if(C=O.stateNode,v)T=C.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{E=O.stateNode;var ne=O.memoizedProps.style,Z=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;E.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(K){nt(O,O.return,K)}}}else if(a.tag===6){if(u===null){O=a;try{O.stateNode.nodeValue=v?"":O.memoizedProps}catch(K){nt(O,O.return,K)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}p&4&&(p=s.updateQueue,p!==null&&(u=p.retryQueue,u!==null&&(p.retryQueue=null,im(s,u))));break;case 19:Yn(a,s),Wn(s),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,im(s,p)));break;case 30:break;case 21:break;default:Yn(a,s),Wn(s)}}function Wn(s){var a=s.flags;if(a&2){try{for(var u,p=s.return;p!==null;){if(Vb(p)){u=p;break}p=p.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var v=u.stateNode,C=tm(s);yf(s,C,v);break;case 5:var T=u.stateNode;u.flags&32&&(tl(T,""),u.flags&=-33);var E=tm(s);yf(s,E,T);break;case 3:case 4:var O=u.stateNode.containerInfo,F=tm(s);nm(s,F,O);break;default:throw Error(r(161))}}catch(X){nt(s,s.return,X)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Kb(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;Kb(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function eo(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Pb(s,a.alternate,a),a=a.sibling}function fs(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:Qi(4,a,a.return),fs(a);break;case 1:Zr(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&zb(a,a.return,u),fs(a);break;case 27:lc(a.stateNode);case 26:case 5:Zr(a,a.return),fs(a);break;case 22:a.memoizedState===null&&fs(a);break;case 30:fs(a);break;default:fs(a)}s=s.sibling}}function to(s,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var p=a.alternate,v=s,C=a,T=C.flags;switch(C.tag){case 0:case 11:case 15:to(v,C,u),Xa(4,C);break;case 1:if(to(v,C,u),p=C,v=p.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(F){nt(p,p.return,F)}if(p=C,v=p.updateQueue,v!==null){var E=p.stateNode;try{var O=v.shared.hiddenCallbacks;if(O!==null)for(v.shared.hiddenCallbacks=null,v=0;v<O.length;v++)xv(O[v],E)}catch(F){nt(p,p.return,F)}}u&&T&64&&Ib(C),Ja(C,C.return);break;case 27:jb(C);case 26:case 5:to(v,C,u),u&&p===null&&T&4&&Bb(C),Ja(C,C.return);break;case 12:to(v,C,u);break;case 13:to(v,C,u),u&&T&4&&qb(v,C);break;case 22:C.memoizedState===null&&to(v,C,u),Ja(C,C.return);break;case 30:break;default:to(v,C,u)}a=a.sibling}}function om(s,a){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&za(u))}function sm(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&za(s))}function Kr(s,a,u,p){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Gb(s,a,u,p),a=a.sibling}function Gb(s,a,u,p){var v=a.flags;switch(a.tag){case 0:case 11:case 15:Kr(s,a,u,p),v&2048&&Xa(9,a);break;case 1:Kr(s,a,u,p);break;case 3:Kr(s,a,u,p),v&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&za(s)));break;case 12:if(v&2048){Kr(s,a,u,p),s=a.stateNode;try{var C=a.memoizedProps,T=C.id,E=C.onPostCommit;typeof E=="function"&&E(T,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(O){nt(a,a.return,O)}}else Kr(s,a,u,p);break;case 13:Kr(s,a,u,p);break;case 23:break;case 22:C=a.stateNode,T=a.alternate,a.memoizedState!==null?C._visibility&2?Kr(s,a,u,p):Qa(s,a):C._visibility&2?Kr(s,a,u,p):(C._visibility|=2,Cl(s,a,u,p,(a.subtreeFlags&10256)!==0)),v&2048&&om(T,a);break;case 24:Kr(s,a,u,p),v&2048&&sm(a.alternate,a);break;default:Kr(s,a,u,p)}}function Cl(s,a,u,p,v){for(v=v&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var C=s,T=a,E=u,O=p,F=T.flags;switch(T.tag){case 0:case 11:case 15:Cl(C,T,E,O,v),Xa(8,T);break;case 23:break;case 22:var X=T.stateNode;T.memoizedState!==null?X._visibility&2?Cl(C,T,E,O,v):Qa(C,T):(X._visibility|=2,Cl(C,T,E,O,v)),v&&F&2048&&om(T.alternate,T);break;case 24:Cl(C,T,E,O,v),v&&F&2048&&sm(T.alternate,T);break;default:Cl(C,T,E,O,v)}a=a.sibling}}function Qa(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=s,p=a,v=p.flags;switch(p.tag){case 22:Qa(u,p),v&2048&&om(p.alternate,p);break;case 24:Qa(u,p),v&2048&&sm(p.alternate,p);break;default:Qa(u,p)}a=a.sibling}}var ec=8192;function wl(s){if(s.subtreeFlags&ec)for(s=s.child;s!==null;)Yb(s),s=s.sibling}function Yb(s){switch(s.tag){case 26:wl(s),s.flags&ec&&s.memoizedState!==null&&WM(kr,s.memoizedState,s.memoizedProps);break;case 5:wl(s);break;case 3:case 4:var a=kr;kr=Nf(s.stateNode.containerInfo),wl(s),kr=a;break;case 22:s.memoizedState===null&&(a=s.alternate,a!==null&&a.memoizedState!==null?(a=ec,ec=16777216,wl(s),ec=a):wl(s));break;default:wl(s)}}function Wb(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function tc(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var p=a[u];Zt=p,Jb(p,s)}Wb(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Xb(s),s=s.sibling}function Xb(s){switch(s.tag){case 0:case 11:case 15:tc(s),s.flags&2048&&Qi(9,s,s.return);break;case 3:tc(s);break;case 12:tc(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,vf(s)):tc(s);break;default:tc(s)}}function vf(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var p=a[u];Zt=p,Jb(p,s)}Wb(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:Qi(8,a,a.return),vf(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,vf(a));break;default:vf(a)}s=s.sibling}}function Jb(s,a){for(;Zt!==null;){var u=Zt;switch(u.tag){case 0:case 11:case 15:Qi(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var p=u.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:za(u.memoizedState.cache)}if(p=u.child,p!==null)p.return=u,Zt=p;else e:for(u=s;Zt!==null;){p=Zt;var v=p.sibling,C=p.return;if(Fb(p),p===u){Zt=null;break e}if(v!==null){v.return=C,Zt=v;break e}Zt=C}}}var dM={getCacheForType:function(s){var a=fn(Ut),u=a.data.get(s);return u===void 0&&(u=s(),a.data.set(s,u)),u}},hM=typeof WeakMap=="function"?WeakMap:Map,Ye=0,ct=null,_e=null,ze=0,We=0,Xn=null,no=!1,xl=!1,lm=!1,wi=0,Ct=0,ro=0,ds=0,am=0,dr=0,Sl=0,nc=null,In=null,cm=!1,um=0,bf=1/0,Cf=null,io=null,tn=0,oo=null,Tl=null,kl=0,fm=0,dm=null,Qb=null,rc=0,hm=null;function Jn(){if((Ye&2)!==0&&ze!==0)return ze&-ze;if(H.T!==null){var s=dl;return s!==0?s:Cm()}return m3()}function e4(){dr===0&&(dr=(ze&536870912)===0||$e?Nu():536870912);var s=fr.current;return s!==null&&(s.flags|=32),dr}function Qn(s,a,u){(s===ct&&(We===2||We===9)||s.cancelPendingCommit!==null)&&(Ml(s,0),so(s,ze,dr,!1)),wa(s,u),((Ye&2)===0||s!==ct)&&(s===ct&&((Ye&2)===0&&(ds|=u),Ct===4&&so(s,ze,dr,!1)),Gr(s))}function t4(s,a,u){if((Ye&6)!==0)throw Error(r(327));var p=!u&&(a&124)===0&&(a&s.expiredLanes)===0||On(s,a),v=p?gM(s,a):gm(s,a,!0),C=p;do{if(v===0){xl&&!p&&so(s,a,0,!1);break}else{if(u=s.current.alternate,C&&!pM(u)){v=gm(s,a,!1),C=!1;continue}if(v===2){if(C=a,s.errorRecoveryDisabledLanes&C)var T=0;else T=s.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;e:{var E=s;v=nc;var O=E.current.memoizedState.isDehydrated;if(O&&(Ml(E,T).flags|=256),T=gm(E,T,!1),T!==2){if(lm&&!O){E.errorRecoveryDisabledLanes|=C,ds|=C,v=4;break e}C=In,In=v,C!==null&&(In===null?In=C:In.push.apply(In,C))}v=T}if(C=!1,v!==2)continue}}if(v===1){Ml(s,0),so(s,a,0,!0);break}e:{switch(p=s,C=v,C){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:so(p,a,dr,!no);break e;case 2:In=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(v=um+300-Te(),10<v)){if(so(p,a,dr,!no),li(p,0,!0)!==0)break e;p.timeoutHandle=N4(n4.bind(null,p,u,In,Cf,cm,a,dr,ds,Sl,no,C,2,-0,0),v);break e}n4(p,u,In,Cf,cm,a,dr,ds,Sl,no,C,0,-0,0)}}break}while(!0);Gr(s)}function n4(s,a,u,p,v,C,T,E,O,F,X,ne,Z,K){if(s.timeoutHandle=-1,ne=a.subtreeFlags,(ne&8192||(ne&16785408)===16785408)&&(uc={stylesheets:null,count:0,unsuspend:YM},Yb(a),ne=XM(),ne!==null)){s.cancelPendingCommit=ne(c4.bind(null,s,a,C,u,p,v,T,E,O,X,1,Z,K)),so(s,C,T,!F);return}c4(s,a,C,u,p,v,T,E,O)}function pM(s){for(var a=s;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var p=0;p<u.length;p++){var v=u[p],C=v.getSnapshot;v=v.value;try{if(!Kn(C(),v))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function so(s,a,u,p){a&=~am,a&=~ds,s.suspendedLanes|=a,s.pingedLanes&=~a,p&&(s.warmLanes|=a),p=s.expirationTimes;for(var v=a;0<v;){var C=31-Ft(v),T=1<<C;p[C]=-1,v&=~T}u!==0&&h3(s,u,a)}function wf(){return(Ye&6)===0?(ic(0),!1):!0}function pm(){if(_e!==null){if(We===0)var s=_e.return;else s=_e,hi=ss=null,O1(s),vl=null,Ga=0,s=_e;for(;s!==null;)Hb(s.alternate,s),s=s.return;_e=null}}function Ml(s,a){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,DM(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),pm(),ct=s,_e=u=ui(s.current,null),ze=a,We=0,Xn=null,no=!1,xl=On(s,a),lm=!1,Sl=dr=am=ds=ro=Ct=0,In=nc=null,cm=!1,(a&8)!==0&&(a|=a&32);var p=s.entangledLanes;if(p!==0)for(s=s.entanglements,p&=a;0<p;){var v=31-Ft(p),C=1<<v;a|=s[v],p&=~C}return wi=a,Pu(),u}function r4(s,a){Ne=null,H.H=af,a===Va||a===Xu?(a=Cv(),We=3):a===yv?(a=Cv(),We=4):We=a===wb?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Xn=a,_e===null&&(Ct=1,hf(s,lr(a,s.current)))}function i4(){var s=H.H;return H.H=af,s===null?af:s}function o4(){var s=H.A;return H.A=dM,s}function mm(){Ct=4,no||(ze&4194048)!==ze&&fr.current!==null||(xl=!0),(ro&134217727)===0&&(ds&134217727)===0||ct===null||so(ct,ze,dr,!1)}function gm(s,a,u){var p=Ye;Ye|=2;var v=i4(),C=o4();(ct!==s||ze!==a)&&(Cf=null,Ml(s,a)),a=!1;var T=Ct;e:do try{if(We!==0&&_e!==null){var E=_e,O=Xn;switch(We){case 8:pm(),T=6;break e;case 3:case 2:case 9:case 6:fr.current===null&&(a=!0);var F=We;if(We=0,Xn=null,El(s,E,O,F),u&&xl){T=0;break e}break;default:F=We,We=0,Xn=null,El(s,E,O,F)}}mM(),T=Ct;break}catch(X){r4(s,X)}while(!0);return a&&s.shellSuspendCounter++,hi=ss=null,Ye=p,H.H=v,H.A=C,_e===null&&(ct=null,ze=0,Pu()),T}function mM(){for(;_e!==null;)s4(_e)}function gM(s,a){var u=Ye;Ye|=2;var p=i4(),v=o4();ct!==s||ze!==a?(Cf=null,bf=Te()+500,Ml(s,a)):xl=On(s,a);e:do try{if(We!==0&&_e!==null){a=_e;var C=Xn;t:switch(We){case 1:We=0,Xn=null,El(s,a,C,1);break;case 2:case 9:if(vv(C)){We=0,Xn=null,l4(a);break}a=function(){We!==2&&We!==9||ct!==s||(We=7),Gr(s)},C.then(a,a);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:vv(C)?(We=0,Xn=null,l4(a)):(We=0,Xn=null,El(s,a,C,7));break;case 5:var T=null;switch(_e.tag){case 26:T=_e.memoizedState;case 5:case 27:var E=_e;if(!T||P4(T)){We=0,Xn=null;var O=E.sibling;if(O!==null)_e=O;else{var F=E.return;F!==null?(_e=F,xf(F)):_e=null}break t}}We=0,Xn=null,El(s,a,C,5);break;case 6:We=0,Xn=null,El(s,a,C,6);break;case 8:pm(),Ct=6;break e;default:throw Error(r(462))}}yM();break}catch(X){r4(s,X)}while(!0);return hi=ss=null,H.H=p,H.A=v,Ye=u,_e!==null?0:(ct=null,ze=0,Pu(),Ct)}function yM(){for(;_e!==null&&!at();)s4(_e)}function s4(s){var a=Lb(s.alternate,s,wi);s.memoizedProps=s.pendingProps,a===null?xf(s):_e=a}function l4(s){var a=s,u=a.alternate;switch(a.tag){case 15:case 0:a=Eb(u,a,a.pendingProps,a.type,void 0,ze);break;case 11:a=Eb(u,a,a.pendingProps,a.type.render,a.ref,ze);break;case 5:O1(a);default:Hb(u,a),a=_e=av(a,wi),a=Lb(u,a,wi)}s.memoizedProps=s.pendingProps,a===null?xf(s):_e=a}function El(s,a,u,p){hi=ss=null,O1(a),vl=null,Ga=0;var v=a.return;try{if(sM(s,v,a,u,ze)){Ct=1,hf(s,lr(u,s.current)),_e=null;return}}catch(C){if(v!==null)throw _e=v,C;Ct=1,hf(s,lr(u,s.current)),_e=null;return}a.flags&32768?($e||p===1?s=!0:xl||(ze&536870912)!==0?s=!1:(no=s=!0,(p===2||p===9||p===3||p===6)&&(p=fr.current,p!==null&&p.tag===13&&(p.flags|=16384))),a4(a,s)):xf(a)}function xf(s){var a=s;do{if((a.flags&32768)!==0){a4(a,no);return}s=a.return;var u=aM(a.alternate,a,wi);if(u!==null){_e=u;return}if(a=a.sibling,a!==null){_e=a;return}_e=a=s}while(a!==null);Ct===0&&(Ct=5)}function a4(s,a){do{var u=cM(s.alternate,s);if(u!==null){u.flags&=32767,_e=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(s=s.sibling,s!==null)){_e=s;return}_e=s=u}while(s!==null);Ct=6,_e=null}function c4(s,a,u,p,v,C,T,E,O){s.cancelPendingCommit=null;do Sf();while(tn!==0);if((Ye&6)!==0)throw Error(r(327));if(a!==null){if(a===s.current)throw Error(r(177));if(C=a.lanes|a.childLanes,C|=s1,YT(s,u,C,T,E,O),s===ct&&(_e=ct=null,ze=0),Tl=a,oo=s,kl=u,fm=C,dm=v,Qb=p,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,wM(xn,function(){return p4(),null})):(s.callbackNode=null,s.callbackPriority=0),p=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||p){p=H.T,H.T=null,v=V.p,V.p=2,T=Ye,Ye|=4;try{uM(s,a,u)}finally{Ye=T,V.p=v,H.T=p}}tn=1,u4(),f4(),d4()}}function u4(){if(tn===1){tn=0;var s=oo,a=Tl,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=H.T,H.T=null;var p=V.p;V.p=2;var v=Ye;Ye|=4;try{Zb(a,s);var C=Am,T=J3(s.containerInfo),E=C.focusedElem,O=C.selectionRange;if(T!==E&&E&&E.ownerDocument&&X3(E.ownerDocument.documentElement,E)){if(O!==null&&t1(E)){var F=O.start,X=O.end;if(X===void 0&&(X=F),"selectionStart"in E)E.selectionStart=F,E.selectionEnd=Math.min(X,E.value.length);else{var ne=E.ownerDocument||document,Z=ne&&ne.defaultView||window;if(Z.getSelection){var K=Z.getSelection(),Se=E.textContent.length,Ce=Math.min(O.start,Se),tt=O.end===void 0?Ce:Math.min(O.end,Se);!K.extend&&Ce>tt&&(T=tt,tt=Ce,Ce=T);var B=W3(E,Ce),_=W3(E,tt);if(B&&_&&(K.rangeCount!==1||K.anchorNode!==B.node||K.anchorOffset!==B.offset||K.focusNode!==_.node||K.focusOffset!==_.offset)){var U=ne.createRange();U.setStart(B.node,B.offset),K.removeAllRanges(),Ce>tt?(K.addRange(U),K.extend(_.node,_.offset)):(U.setEnd(_.node,_.offset),K.addRange(U))}}}}for(ne=[],K=E;K=K.parentNode;)K.nodeType===1&&ne.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ne.length;E++){var J=ne[E];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Hf=!!Em,Am=Em=null}finally{Ye=v,V.p=p,H.T=u}}s.current=a,tn=2}}function f4(){if(tn===2){tn=0;var s=oo,a=Tl,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=H.T,H.T=null;var p=V.p;V.p=2;var v=Ye;Ye|=4;try{Pb(s,a.alternate,a)}finally{Ye=v,V.p=p,H.T=u}}tn=3}}function d4(){if(tn===4||tn===3){tn=0,yt();var s=oo,a=Tl,u=kl,p=Qb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?tn=5:(tn=0,Tl=oo=null,h4(s,s.pendingLanes));var v=s.pendingLanes;if(v===0&&(io=null),_p(u),a=a.stateNode,Ie&&typeof Ie.onCommitFiberRoot=="function")try{Ie.onCommitFiberRoot(Ze,a,void 0,(a.current.flags&128)===128)}catch{}if(p!==null){a=H.T,v=V.p,V.p=2,H.T=null;try{for(var C=s.onRecoverableError,T=0;T<p.length;T++){var E=p[T];C(E.value,{componentStack:E.stack})}}finally{H.T=a,V.p=v}}(kl&3)!==0&&Sf(),Gr(s),v=s.pendingLanes,(u&4194090)!==0&&(v&42)!==0?s===hm?rc++:(rc=0,hm=s):rc=0,ic(0)}}function h4(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,za(a)))}function Sf(s){return u4(),f4(),d4(),p4()}function p4(){if(tn!==5)return!1;var s=oo,a=fm;fm=0;var u=_p(kl),p=H.T,v=V.p;try{V.p=32>u?32:u,H.T=null,u=dm,dm=null;var C=oo,T=kl;if(tn=0,Tl=oo=null,kl=0,(Ye&6)!==0)throw Error(r(331));var E=Ye;if(Ye|=4,Xb(C.current),Gb(C,C.current,T,u),Ye=E,ic(0,!1),Ie&&typeof Ie.onPostCommitFiberRoot=="function")try{Ie.onPostCommitFiberRoot(Ze,C)}catch{}return!0}finally{V.p=v,H.T=p,h4(s,a)}}function m4(s,a,u){a=lr(u,a),a=q1(s.stateNode,a,2),s=Yi(s,a,2),s!==null&&(wa(s,2),Gr(s))}function nt(s,a,u){if(s.tag===3)m4(s,s,u);else for(;a!==null;){if(a.tag===3){m4(a,s,u);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(io===null||!io.has(p))){s=lr(u,s),u=bb(2),p=Yi(a,u,2),p!==null&&(Cb(u,p,a,s),wa(p,2),Gr(p));break}}a=a.return}}function ym(s,a,u){var p=s.pingCache;if(p===null){p=s.pingCache=new hM;var v=new Set;p.set(a,v)}else v=p.get(a),v===void 0&&(v=new Set,p.set(a,v));v.has(u)||(lm=!0,v.add(u),s=vM.bind(null,s,a,u),a.then(s,s))}function vM(s,a,u){var p=s.pingCache;p!==null&&p.delete(a),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,ct===s&&(ze&u)===u&&(Ct===4||Ct===3&&(ze&62914560)===ze&&300>Te()-um?(Ye&2)===0&&Ml(s,0):am|=u,Sl===ze&&(Sl=0)),Gr(s)}function g4(s,a){a===0&&(a=Ca()),s=al(s,a),s!==null&&(wa(s,a),Gr(s))}function bM(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),g4(s,u)}function CM(s,a){var u=0;switch(s.tag){case 13:var p=s.stateNode,v=s.memoizedState;v!==null&&(u=v.retryLane);break;case 19:p=s.stateNode;break;case 22:p=s.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(a),g4(s,u)}function wM(s,a){return Le(s,a)}var Tf=null,Al=null,vm=!1,kf=!1,bm=!1,hs=0;function Gr(s){s!==Al&&s.next===null&&(Al===null?Tf=Al=s:Al=Al.next=s),kf=!0,vm||(vm=!0,SM())}function ic(s,a){if(!bm&&kf){bm=!0;do for(var u=!1,p=Tf;p!==null;){if(s!==0){var v=p.pendingLanes;if(v===0)var C=0;else{var T=p.suspendedLanes,E=p.pingedLanes;C=(1<<31-Ft(42|s)+1)-1,C&=v&~(T&~E),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(u=!0,C4(p,C))}else C=ze,C=li(p,p===ct?C:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(C&3)===0||On(p,C)||(u=!0,C4(p,C));p=p.next}while(u);bm=!1}}function xM(){y4()}function y4(){kf=vm=!1;var s=0;hs!==0&&(OM()&&(s=hs),hs=0);for(var a=Te(),u=null,p=Tf;p!==null;){var v=p.next,C=v4(p,a);C===0?(p.next=null,u===null?Tf=v:u.next=v,v===null&&(Al=u)):(u=p,(s!==0||(C&3)!==0)&&(kf=!0)),p=v}ic(s)}function v4(s,a){for(var u=s.suspendedLanes,p=s.pingedLanes,v=s.expirationTimes,C=s.pendingLanes&-62914561;0<C;){var T=31-Ft(C),E=1<<T,O=v[T];O===-1?((E&u)===0||(E&p)!==0)&&(v[T]=Zs(E,a)):O<=a&&(s.expiredLanes|=E),C&=~E}if(a=ct,u=ze,u=li(s,s===a?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),p=s.callbackNode,u===0||s===a&&(We===2||We===9)||s.cancelPendingCommit!==null)return p!==null&&p!==null&&Me(p),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||On(s,u)){if(a=u&-u,a===s.callbackPriority)return a;switch(p!==null&&Me(p),_p(u)){case 2:case 8:u=jt;break;case 32:u=xn;break;case 268435456:u=Ee;break;default:u=xn}return p=b4.bind(null,s),u=Le(u,p),s.callbackPriority=a,s.callbackNode=u,a}return p!==null&&p!==null&&Me(p),s.callbackPriority=2,s.callbackNode=null,2}function b4(s,a){if(tn!==0&&tn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(Sf()&&s.callbackNode!==u)return null;var p=ze;return p=li(s,s===ct?p:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),p===0?null:(t4(s,p,a),v4(s,Te()),s.callbackNode!=null&&s.callbackNode===u?b4.bind(null,s):null)}function C4(s,a){if(Sf())return null;t4(s,a,!0)}function SM(){LM(function(){(Ye&6)!==0?Le(Lt,xM):y4()})}function Cm(){return hs===0&&(hs=Nu()),hs}function w4(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Hu(""+s)}function x4(s,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,s.id&&u.setAttribute("form",s.id),a.parentNode.insertBefore(u,a),s=new FormData(s),u.parentNode.removeChild(u),s}function TM(s,a,u,p,v){if(a==="submit"&&u&&u.stateNode===v){var C=w4((v[Dn]||null).action),T=p.submitter;T&&(a=(a=T[Dn]||null)?w4(a.formAction):T.getAttribute("formAction"),a!==null&&(C=a,T=null));var E=new Vu("action","action",null,p,v);s.push({event:E,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(hs!==0){var O=T?x4(v,T):new FormData(v);j1(u,{pending:!0,data:O,method:v.method,action:C},null,O)}}else typeof C=="function"&&(E.preventDefault(),O=T?x4(v,T):new FormData(v),j1(u,{pending:!0,data:O,method:v.method,action:C},C,O))},currentTarget:v}]})}}for(var wm=0;wm<o1.length;wm++){var xm=o1[wm],kM=xm.toLowerCase(),MM=xm[0].toUpperCase()+xm.slice(1);Tr(kM,"on"+MM)}Tr(tv,"onAnimationEnd"),Tr(nv,"onAnimationIteration"),Tr(rv,"onAnimationStart"),Tr("dblclick","onDoubleClick"),Tr("focusin","onFocus"),Tr("focusout","onBlur"),Tr(Fk,"onTransitionRun"),Tr($k,"onTransitionStart"),Tr(qk,"onTransitionCancel"),Tr(iv,"onTransitionEnd"),Js("onMouseEnter",["mouseout","mouseover"]),Js("onMouseLeave",["mouseout","mouseover"]),Js("onPointerEnter",["pointerout","pointerover"]),Js("onPointerLeave",["pointerout","pointerover"]),Wo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(oc));function S4(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var p=s[u],v=p.event;p=p.listeners;e:{var C=void 0;if(a)for(var T=p.length-1;0<=T;T--){var E=p[T],O=E.instance,F=E.currentTarget;if(E=E.listener,O!==C&&v.isPropagationStopped())break e;C=E,v.currentTarget=F;try{C(v)}catch(X){df(X)}v.currentTarget=null,C=O}else for(T=0;T<p.length;T++){if(E=p[T],O=E.instance,F=E.currentTarget,E=E.listener,O!==C&&v.isPropagationStopped())break e;C=E,v.currentTarget=F;try{C(v)}catch(X){df(X)}v.currentTarget=null,C=O}}}}function He(s,a){var u=a[Hp];u===void 0&&(u=a[Hp]=new Set);var p=s+"__bubble";u.has(p)||(T4(a,s,2,!1),u.add(p))}function Sm(s,a,u){var p=0;a&&(p|=4),T4(u,s,p,a)}var Mf="_reactListening"+Math.random().toString(36).slice(2);function Tm(s){if(!s[Mf]){s[Mf]=!0,y3.forEach(function(u){u!=="selectionchange"&&(EM.has(u)||Sm(u,!1,s),Sm(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Mf]||(a[Mf]=!0,Sm("selectionchange",!1,a))}}function T4(s,a,u,p){switch(G4(a)){case 2:var v=eE;break;case 8:v=tE;break;default:v=Bm}u=v.bind(null,a,u,s),v=void 0,!Zp||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(v=!0),p?v!==void 0?s.addEventListener(a,u,{capture:!0,passive:v}):s.addEventListener(a,u,!0):v!==void 0?s.addEventListener(a,u,{passive:v}):s.addEventListener(a,u,!1)}function km(s,a,u,p,v){var C=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var T=p.tag;if(T===3||T===4){var E=p.stateNode.containerInfo;if(E===v)break;if(T===4)for(T=p.return;T!==null;){var O=T.tag;if((O===3||O===4)&&T.stateNode.containerInfo===v)return;T=T.return}for(;E!==null;){if(T=Ys(E),T===null)return;if(O=T.tag,O===5||O===6||O===26||O===27){p=C=T;continue e}E=E.parentNode}}p=p.return}O3(function(){var F=C,X=$p(u),ne=[];e:{var Z=ov.get(s);if(Z!==void 0){var K=Vu,Se=s;switch(s){case"keypress":if(zu(u)===0)break e;case"keydown":case"keyup":K=wk;break;case"focusin":Se="focus",K=Wp;break;case"focusout":Se="blur",K=Wp;break;case"beforeblur":case"afterblur":K=Wp;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=_3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=ck;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Tk;break;case tv:case nv:case rv:K=dk;break;case iv:K=Mk;break;case"scroll":case"scrollend":K=lk;break;case"wheel":K=Ak;break;case"copy":case"cut":case"paste":K=pk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=I3;break;case"toggle":case"beforetoggle":K=Nk}var Ce=(a&4)!==0,tt=!Ce&&(s==="scroll"||s==="scrollend"),B=Ce?Z!==null?Z+"Capture":null:Z;Ce=[];for(var _=F,U;_!==null;){var J=_;if(U=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||U===null||B===null||(J=Ta(_,B),J!=null&&Ce.push(sc(_,J,U))),tt)break;_=_.return}0<Ce.length&&(Z=new K(Z,Se,null,u,X),ne.push({event:Z,listeners:Ce}))}}if((a&7)===0){e:{if(Z=s==="mouseover"||s==="pointerover",K=s==="mouseout"||s==="pointerout",Z&&u!==Fp&&(Se=u.relatedTarget||u.fromElement)&&(Ys(Se)||Se[Gs]))break e;if((K||Z)&&(Z=X.window===X?X:(Z=X.ownerDocument)?Z.defaultView||Z.parentWindow:window,K?(Se=u.relatedTarget||u.toElement,K=F,Se=Se?Ys(Se):null,Se!==null&&(tt=o(Se),Ce=Se.tag,Se!==tt||Ce!==5&&Ce!==27&&Ce!==6)&&(Se=null)):(K=null,Se=F),K!==Se)){if(Ce=_3,J="onMouseLeave",B="onMouseEnter",_="mouse",(s==="pointerout"||s==="pointerover")&&(Ce=I3,J="onPointerLeave",B="onPointerEnter",_="pointer"),tt=K==null?Z:Sa(K),U=Se==null?Z:Sa(Se),Z=new Ce(J,_+"leave",K,u,X),Z.target=tt,Z.relatedTarget=U,J=null,Ys(X)===F&&(Ce=new Ce(B,_+"enter",Se,u,X),Ce.target=U,Ce.relatedTarget=tt,J=Ce),tt=J,K&&Se)t:{for(Ce=K,B=Se,_=0,U=Ce;U;U=Rl(U))_++;for(U=0,J=B;J;J=Rl(J))U++;for(;0<_-U;)Ce=Rl(Ce),_--;for(;0<U-_;)B=Rl(B),U--;for(;_--;){if(Ce===B||B!==null&&Ce===B.alternate)break t;Ce=Rl(Ce),B=Rl(B)}Ce=null}else Ce=null;K!==null&&k4(ne,Z,K,Ce,!1),Se!==null&&tt!==null&&k4(ne,tt,Se,Ce,!0)}}e:{if(Z=F?Sa(F):window,K=Z.nodeName&&Z.nodeName.toLowerCase(),K==="select"||K==="input"&&Z.type==="file")var he=$3;else if(P3(Z))if(q3)he=jk;else{he=Bk;var De=zk}else K=Z.nodeName,!K||K.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?F&&Pp(F.elementType)&&(he=$3):he=Vk;if(he&&(he=he(s,F))){F3(ne,he,u,X);break e}De&&De(s,Z,F),s==="focusout"&&F&&Z.type==="number"&&F.memoizedProps.value!=null&&Up(Z,"number",Z.value)}switch(De=F?Sa(F):window,s){case"focusin":(P3(De)||De.contentEditable==="true")&&(ol=De,n1=F,Da=null);break;case"focusout":Da=n1=ol=null;break;case"mousedown":r1=!0;break;case"contextmenu":case"mouseup":case"dragend":r1=!1,Q3(ne,u,X);break;case"selectionchange":if(Pk)break;case"keydown":case"keyup":Q3(ne,u,X)}var ve;if(Jp)e:{switch(s){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else il?j3(s,u)&&(xe="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(xe="onCompositionStart");xe&&(z3&&u.locale!=="ko"&&(il||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&il&&(ve=D3()):(qi=X,Kp="value"in qi?qi.value:qi.textContent,il=!0)),De=Ef(F,xe),0<De.length&&(xe=new H3(xe,s,null,u,X),ne.push({event:xe,listeners:De}),ve?xe.data=ve:(ve=U3(u),ve!==null&&(xe.data=ve)))),(ve=Dk?Lk(s,u):_k(s,u))&&(xe=Ef(F,"onBeforeInput"),0<xe.length&&(De=new H3("onBeforeInput","beforeinput",null,u,X),ne.push({event:De,listeners:xe}),De.data=ve)),TM(ne,s,F,u,X)}S4(ne,a)})}function sc(s,a,u){return{instance:s,listener:a,currentTarget:u}}function Ef(s,a){for(var u=a+"Capture",p=[];s!==null;){var v=s,C=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||C===null||(v=Ta(s,u),v!=null&&p.unshift(sc(s,v,C)),v=Ta(s,a),v!=null&&p.push(sc(s,v,C))),s.tag===3)return p;s=s.return}return[]}function Rl(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function k4(s,a,u,p,v){for(var C=a._reactName,T=[];u!==null&&u!==p;){var E=u,O=E.alternate,F=E.stateNode;if(E=E.tag,O!==null&&O===p)break;E!==5&&E!==26&&E!==27||F===null||(O=F,v?(F=Ta(u,C),F!=null&&T.unshift(sc(u,F,O))):v||(F=Ta(u,C),F!=null&&T.push(sc(u,F,O)))),u=u.return}T.length!==0&&s.push({event:a,listeners:T})}var AM=/\r\n?/g,RM=/\u0000|\uFFFD/g;function M4(s){return(typeof s=="string"?s:""+s).replace(AM,`
`).replace(RM,"")}function E4(s,a){return a=M4(a),M4(s)===a}function Af(){}function et(s,a,u,p,v,C){switch(u){case"children":typeof p=="string"?a==="body"||a==="textarea"&&p===""||tl(s,p):(typeof p=="number"||typeof p=="bigint")&&a!=="body"&&tl(s,""+p);break;case"className":Du(s,"class",p);break;case"tabIndex":Du(s,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Du(s,u,p);break;case"style":R3(s,p,C);break;case"data":if(a!=="object"){Du(s,"data",p);break}case"src":case"href":if(p===""&&(a!=="a"||u!=="href")){s.removeAttribute(u);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){s.removeAttribute(u);break}p=Hu(""+p),s.setAttribute(u,p);break;case"action":case"formAction":if(typeof p=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(u==="formAction"?(a!=="input"&&et(s,a,"name",v.name,v,null),et(s,a,"formEncType",v.formEncType,v,null),et(s,a,"formMethod",v.formMethod,v,null),et(s,a,"formTarget",v.formTarget,v,null)):(et(s,a,"encType",v.encType,v,null),et(s,a,"method",v.method,v,null),et(s,a,"target",v.target,v,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){s.removeAttribute(u);break}p=Hu(""+p),s.setAttribute(u,p);break;case"onClick":p!=null&&(s.onclick=Af);break;case"onScroll":p!=null&&He("scroll",s);break;case"onScrollEnd":p!=null&&He("scrollend",s);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(u=p.__html,u!=null){if(v.children!=null)throw Error(r(60));s.innerHTML=u}}break;case"multiple":s.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":s.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){s.removeAttribute("xlink:href");break}u=Hu(""+p),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(u,""+p):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":p===!0?s.setAttribute(u,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(u,p):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?s.setAttribute(u,p):s.removeAttribute(u);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?s.removeAttribute(u):s.setAttribute(u,p);break;case"popover":He("beforetoggle",s),He("toggle",s),Ou(s,"popover",p);break;case"xlinkActuate":ai(s,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":ai(s,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":ai(s,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":ai(s,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":ai(s,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":ai(s,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":ai(s,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":ai(s,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":ai(s,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Ou(s,"is",p);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=ok.get(u)||u,Ou(s,u,p))}}function Mm(s,a,u,p,v,C){switch(u){case"style":R3(s,p,C);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(u=p.__html,u!=null){if(v.children!=null)throw Error(r(60));s.innerHTML=u}}break;case"children":typeof p=="string"?tl(s,p):(typeof p=="number"||typeof p=="bigint")&&tl(s,""+p);break;case"onScroll":p!=null&&He("scroll",s);break;case"onScrollEnd":p!=null&&He("scrollend",s);break;case"onClick":p!=null&&(s.onclick=Af);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!v3.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),a=u.slice(2,v?u.length-7:void 0),C=s[Dn]||null,C=C!=null?C[u]:null,typeof C=="function"&&s.removeEventListener(a,C,v),typeof p=="function")){typeof C!="function"&&C!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(a,p,v);break e}u in s?s[u]=p:p===!0?s.setAttribute(u,""):Ou(s,u,p)}}}function nn(s,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",s),He("load",s);var p=!1,v=!1,C;for(C in u)if(u.hasOwnProperty(C)){var T=u[C];if(T!=null)switch(C){case"src":p=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:et(s,a,C,T,u,null)}}v&&et(s,a,"srcSet",u.srcSet,u,null),p&&et(s,a,"src",u.src,u,null);return;case"input":He("invalid",s);var E=C=T=v=null,O=null,F=null;for(p in u)if(u.hasOwnProperty(p)){var X=u[p];if(X!=null)switch(p){case"name":v=X;break;case"type":T=X;break;case"checked":O=X;break;case"defaultChecked":F=X;break;case"value":C=X;break;case"defaultValue":E=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,a));break;default:et(s,a,p,X,u,null)}}k3(s,C,E,O,F,T,v,!1),Lu(s);return;case"select":He("invalid",s),p=T=C=null;for(v in u)if(u.hasOwnProperty(v)&&(E=u[v],E!=null))switch(v){case"value":C=E;break;case"defaultValue":T=E;break;case"multiple":p=E;default:et(s,a,v,E,u,null)}a=C,u=T,s.multiple=!!p,a!=null?el(s,!!p,a,!1):u!=null&&el(s,!!p,u,!0);return;case"textarea":He("invalid",s),C=v=p=null;for(T in u)if(u.hasOwnProperty(T)&&(E=u[T],E!=null))switch(T){case"value":p=E;break;case"defaultValue":v=E;break;case"children":C=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:et(s,a,T,E,u,null)}E3(s,p,v,C),Lu(s);return;case"option":for(O in u)if(u.hasOwnProperty(O)&&(p=u[O],p!=null))switch(O){case"selected":s.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:et(s,a,O,p,u,null)}return;case"dialog":He("beforetoggle",s),He("toggle",s),He("cancel",s),He("close",s);break;case"iframe":case"object":He("load",s);break;case"video":case"audio":for(p=0;p<oc.length;p++)He(oc[p],s);break;case"image":He("error",s),He("load",s);break;case"details":He("toggle",s);break;case"embed":case"source":case"link":He("error",s),He("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in u)if(u.hasOwnProperty(F)&&(p=u[F],p!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:et(s,a,F,p,u,null)}return;default:if(Pp(a)){for(X in u)u.hasOwnProperty(X)&&(p=u[X],p!==void 0&&Mm(s,a,X,p,u,void 0));return}}for(E in u)u.hasOwnProperty(E)&&(p=u[E],p!=null&&et(s,a,E,p,u,null))}function NM(s,a,u,p){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,C=null,T=null,E=null,O=null,F=null,X=null;for(K in u){var ne=u[K];if(u.hasOwnProperty(K)&&ne!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":O=ne;default:p.hasOwnProperty(K)||et(s,a,K,null,p,ne)}}for(var Z in p){var K=p[Z];if(ne=u[Z],p.hasOwnProperty(Z)&&(K!=null||ne!=null))switch(Z){case"type":C=K;break;case"name":v=K;break;case"checked":F=K;break;case"defaultChecked":X=K;break;case"value":T=K;break;case"defaultValue":E=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,a));break;default:K!==ne&&et(s,a,Z,K,p,ne)}}jp(s,T,E,O,F,X,C,v);return;case"select":K=T=E=Z=null;for(C in u)if(O=u[C],u.hasOwnProperty(C)&&O!=null)switch(C){case"value":break;case"multiple":K=O;default:p.hasOwnProperty(C)||et(s,a,C,null,p,O)}for(v in p)if(C=p[v],O=u[v],p.hasOwnProperty(v)&&(C!=null||O!=null))switch(v){case"value":Z=C;break;case"defaultValue":E=C;break;case"multiple":T=C;default:C!==O&&et(s,a,v,C,p,O)}a=E,u=T,p=K,Z!=null?el(s,!!u,Z,!1):!!p!=!!u&&(a!=null?el(s,!!u,a,!0):el(s,!!u,u?[]:"",!1));return;case"textarea":K=Z=null;for(E in u)if(v=u[E],u.hasOwnProperty(E)&&v!=null&&!p.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:et(s,a,E,null,p,v)}for(T in p)if(v=p[T],C=u[T],p.hasOwnProperty(T)&&(v!=null||C!=null))switch(T){case"value":Z=v;break;case"defaultValue":K=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==C&&et(s,a,T,v,p,C)}M3(s,Z,K);return;case"option":for(var Se in u)if(Z=u[Se],u.hasOwnProperty(Se)&&Z!=null&&!p.hasOwnProperty(Se))switch(Se){case"selected":s.selected=!1;break;default:et(s,a,Se,null,p,Z)}for(O in p)if(Z=p[O],K=u[O],p.hasOwnProperty(O)&&Z!==K&&(Z!=null||K!=null))switch(O){case"selected":s.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:et(s,a,O,Z,p,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in u)Z=u[Ce],u.hasOwnProperty(Ce)&&Z!=null&&!p.hasOwnProperty(Ce)&&et(s,a,Ce,null,p,Z);for(F in p)if(Z=p[F],K=u[F],p.hasOwnProperty(F)&&Z!==K&&(Z!=null||K!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,a));break;default:et(s,a,F,Z,p,K)}return;default:if(Pp(a)){for(var tt in u)Z=u[tt],u.hasOwnProperty(tt)&&Z!==void 0&&!p.hasOwnProperty(tt)&&Mm(s,a,tt,void 0,p,Z);for(X in p)Z=p[X],K=u[X],!p.hasOwnProperty(X)||Z===K||Z===void 0&&K===void 0||Mm(s,a,X,Z,p,K);return}}for(var B in u)Z=u[B],u.hasOwnProperty(B)&&Z!=null&&!p.hasOwnProperty(B)&&et(s,a,B,null,p,Z);for(ne in p)Z=p[ne],K=u[ne],!p.hasOwnProperty(ne)||Z===K||Z==null&&K==null||et(s,a,ne,Z,p,K)}var Em=null,Am=null;function Rf(s){return s.nodeType===9?s:s.ownerDocument}function A4(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function R4(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Rm(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Nm=null;function OM(){var s=window.event;return s&&s.type==="popstate"?s===Nm?!1:(Nm=s,!0):(Nm=null,!1)}var N4=typeof setTimeout=="function"?setTimeout:void 0,DM=typeof clearTimeout=="function"?clearTimeout:void 0,O4=typeof Promise=="function"?Promise:void 0,LM=typeof queueMicrotask=="function"?queueMicrotask:typeof O4<"u"?function(s){return O4.resolve(null).then(s).catch(_M)}:N4;function _M(s){setTimeout(function(){throw s})}function lo(s){return s==="head"}function D4(s,a){var u=a,p=0,v=0;do{var C=u.nextSibling;if(s.removeChild(u),C&&C.nodeType===8)if(u=C.data,u==="/$"){if(0<p&&8>p){u=p;var T=s.ownerDocument;if(u&1&&lc(T.documentElement),u&2&&lc(T.body),u&4)for(u=T.head,lc(u),T=u.firstChild;T;){var E=T.nextSibling,O=T.nodeName;T[xa]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&T.rel.toLowerCase()==="stylesheet"||u.removeChild(T),T=E}}if(v===0){s.removeChild(C),mc(a);return}v--}else u==="$"||u==="$?"||u==="$!"?v++:p=u.charCodeAt(0)-48;else p=0;u=C}while(u);mc(a)}function Om(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Om(u),Ip(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function HM(s,a,u,p){for(;s.nodeType===1;){var v=u;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!p&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(p){if(!s[xa])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(C=s.getAttribute("rel"),C==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(C!==v.rel||s.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||s.getAttribute("title")!==(v.title==null?null:v.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(C=s.getAttribute("src"),(C!==(v.src==null?null:v.src)||s.getAttribute("type")!==(v.type==null?null:v.type)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&C&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var C=v.name==null?null:""+v.name;if(v.type==="hidden"&&s.getAttribute("name")===C)return s}else return s;if(s=Mr(s.nextSibling),s===null)break}return null}function IM(s,a,u){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=Mr(s.nextSibling),s===null))return null;return s}function Dm(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function zM(s,a){var u=s.ownerDocument;if(s.data!=="$?"||u.readyState==="complete")a();else{var p=function(){a(),u.removeEventListener("DOMContentLoaded",p)};u.addEventListener("DOMContentLoaded",p),s._reactRetry=p}}function Mr(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return s}var Lm=null;function L4(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return s;a--}else u==="/$"&&a++}s=s.previousSibling}return null}function _4(s,a,u){switch(a=Rf(u),s){case"html":if(s=a.documentElement,!s)throw Error(r(452));return s;case"head":if(s=a.head,!s)throw Error(r(453));return s;case"body":if(s=a.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function lc(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);Ip(s)}var hr=new Map,H4=new Set;function Nf(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var xi=V.d;V.d={f:BM,r:VM,D:jM,C:UM,L:PM,m:FM,X:qM,S:$M,M:ZM};function BM(){var s=xi.f(),a=wf();return s||a}function VM(s){var a=Ws(s);a!==null&&a.tag===5&&a.type==="form"?tb(a):xi.r(s)}var Nl=typeof document>"u"?null:document;function I4(s,a,u){var p=Nl;if(p&&typeof a=="string"&&a){var v=sr(a);v='link[rel="'+s+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),H4.has(v)||(H4.add(v),s={rel:s,crossOrigin:u,href:a},p.querySelector(v)===null&&(a=p.createElement("link"),nn(a,"link",s),$t(a),p.head.appendChild(a)))}}function jM(s){xi.D(s),I4("dns-prefetch",s,null)}function UM(s,a){xi.C(s,a),I4("preconnect",s,a)}function PM(s,a,u){xi.L(s,a,u);var p=Nl;if(p&&s&&a){var v='link[rel="preload"][as="'+sr(a)+'"]';a==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+sr(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+sr(u.imageSizes)+'"]')):v+='[href="'+sr(s)+'"]';var C=v;switch(a){case"style":C=Ol(s);break;case"script":C=Dl(s)}hr.has(C)||(s=h({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:s,as:a},u),hr.set(C,s),p.querySelector(v)!==null||a==="style"&&p.querySelector(ac(C))||a==="script"&&p.querySelector(cc(C))||(a=p.createElement("link"),nn(a,"link",s),$t(a),p.head.appendChild(a)))}}function FM(s,a){xi.m(s,a);var u=Nl;if(u&&s){var p=a&&typeof a.as=="string"?a.as:"script",v='link[rel="modulepreload"][as="'+sr(p)+'"][href="'+sr(s)+'"]',C=v;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=Dl(s)}if(!hr.has(C)&&(s=h({rel:"modulepreload",href:s},a),hr.set(C,s),u.querySelector(v)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(cc(C)))return}p=u.createElement("link"),nn(p,"link",s),$t(p),u.head.appendChild(p)}}}function $M(s,a,u){xi.S(s,a,u);var p=Nl;if(p&&s){var v=Xs(p).hoistableStyles,C=Ol(s);a=a||"default";var T=v.get(C);if(!T){var E={loading:0,preload:null};if(T=p.querySelector(ac(C)))E.loading=5;else{s=h({rel:"stylesheet",href:s,"data-precedence":a},u),(u=hr.get(C))&&_m(s,u);var O=T=p.createElement("link");$t(O),nn(O,"link",s),O._p=new Promise(function(F,X){O.onload=F,O.onerror=X}),O.addEventListener("load",function(){E.loading|=1}),O.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Of(T,a,p)}T={type:"stylesheet",instance:T,count:1,state:E},v.set(C,T)}}}function qM(s,a){xi.X(s,a);var u=Nl;if(u&&s){var p=Xs(u).hoistableScripts,v=Dl(s),C=p.get(v);C||(C=u.querySelector(cc(v)),C||(s=h({src:s,async:!0},a),(a=hr.get(v))&&Hm(s,a),C=u.createElement("script"),$t(C),nn(C,"link",s),u.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},p.set(v,C))}}function ZM(s,a){xi.M(s,a);var u=Nl;if(u&&s){var p=Xs(u).hoistableScripts,v=Dl(s),C=p.get(v);C||(C=u.querySelector(cc(v)),C||(s=h({src:s,async:!0,type:"module"},a),(a=hr.get(v))&&Hm(s,a),C=u.createElement("script"),$t(C),nn(C,"link",s),u.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},p.set(v,C))}}function z4(s,a,u,p){var v=(v=fe.current)?Nf(v):null;if(!v)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=Ol(u.href),u=Xs(v).hoistableStyles,p=u.get(a),p||(p={type:"style",instance:null,count:0,state:null},u.set(a,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=Ol(u.href);var C=Xs(v).hoistableStyles,T=C.get(s);if(T||(v=v.ownerDocument||v,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(s,T),(C=v.querySelector(ac(s)))&&!C._p&&(T.instance=C,T.state.loading=5),hr.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},hr.set(s,u),C||KM(v,s,u,T.state))),a&&p===null)throw Error(r(528,""));return T}if(a&&p!==null)throw Error(r(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Dl(u),u=Xs(v).hoistableScripts,p=u.get(a),p||(p={type:"script",instance:null,count:0,state:null},u.set(a,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Ol(s){return'href="'+sr(s)+'"'}function ac(s){return'link[rel="stylesheet"]['+s+"]"}function B4(s){return h({},s,{"data-precedence":s.precedence,precedence:null})}function KM(s,a,u,p){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?p.loading=1:(a=s.createElement("link"),p.preload=a,a.addEventListener("load",function(){return p.loading|=1}),a.addEventListener("error",function(){return p.loading|=2}),nn(a,"link",u),$t(a),s.head.appendChild(a))}function Dl(s){return'[src="'+sr(s)+'"]'}function cc(s){return"script[async]"+s}function V4(s,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var p=s.querySelector('style[data-href~="'+sr(u.href)+'"]');if(p)return a.instance=p,$t(p),p;var v=h({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return p=(s.ownerDocument||s).createElement("style"),$t(p),nn(p,"style",v),Of(p,u.precedence,s),a.instance=p;case"stylesheet":v=Ol(u.href);var C=s.querySelector(ac(v));if(C)return a.state.loading|=4,a.instance=C,$t(C),C;p=B4(u),(v=hr.get(v))&&_m(p,v),C=(s.ownerDocument||s).createElement("link"),$t(C);var T=C;return T._p=new Promise(function(E,O){T.onload=E,T.onerror=O}),nn(C,"link",p),a.state.loading|=4,Of(C,u.precedence,s),a.instance=C;case"script":return C=Dl(u.src),(v=s.querySelector(cc(C)))?(a.instance=v,$t(v),v):(p=u,(v=hr.get(C))&&(p=h({},u),Hm(p,v)),s=s.ownerDocument||s,v=s.createElement("script"),$t(v),nn(v,"link",p),s.head.appendChild(v),a.instance=v);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(p=a.instance,a.state.loading|=4,Of(p,u.precedence,s));return a.instance}function Of(s,a,u){for(var p=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=p.length?p[p.length-1]:null,C=v,T=0;T<p.length;T++){var E=p[T];if(E.dataset.precedence===a)C=E;else if(C!==v)break}C?C.parentNode.insertBefore(s,C.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(s,a.firstChild))}function _m(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function Hm(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Df=null;function j4(s,a,u){if(Df===null){var p=new Map,v=Df=new Map;v.set(u,p)}else v=Df,p=v.get(u),p||(p=new Map,v.set(u,p));if(p.has(s))return p;for(p.set(s,null),u=u.getElementsByTagName(s),v=0;v<u.length;v++){var C=u[v];if(!(C[xa]||C[un]||s==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var T=C.getAttribute(a)||"";T=s+T;var E=p.get(T);E?E.push(C):p.set(T,[C])}}return p}function U4(s,a,u){s=s.ownerDocument||s,s.head.insertBefore(u,a==="title"?s.querySelector("head > title"):null)}function GM(s,a,u){if(u===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function P4(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var uc=null;function YM(){}function WM(s,a,u){if(uc===null)throw Error(r(475));var p=uc;if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var v=Ol(u.href),C=s.querySelector(ac(v));if(C){s=C._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(p.count++,p=Lf.bind(p),s.then(p,p)),a.state.loading|=4,a.instance=C,$t(C);return}C=s.ownerDocument||s,u=B4(u),(v=hr.get(v))&&_m(u,v),C=C.createElement("link"),$t(C);var T=C;T._p=new Promise(function(E,O){T.onload=E,T.onerror=O}),nn(C,"link",u),a.instance=C}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(p.count++,a=Lf.bind(p),s.addEventListener("load",a),s.addEventListener("error",a))}}function XM(){if(uc===null)throw Error(r(475));var s=uc;return s.stylesheets&&s.count===0&&Im(s,s.stylesheets),0<s.count?function(a){var u=setTimeout(function(){if(s.stylesheets&&Im(s,s.stylesheets),s.unsuspend){var p=s.unsuspend;s.unsuspend=null,p()}},6e4);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(u)}}:null}function Lf(){if(this.count--,this.count===0){if(this.stylesheets)Im(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var _f=null;function Im(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,_f=new Map,a.forEach(JM,s),_f=null,Lf.call(s))}function JM(s,a){if(!(a.state.loading&4)){var u=_f.get(s);if(u)var p=u.get(null);else{u=new Map,_f.set(s,u);for(var v=s.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<v.length;C++){var T=v[C];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(u.set(T.dataset.precedence,T),p=T)}p&&u.set(null,p)}v=a.instance,T=v.getAttribute("data-precedence"),C=u.get(T)||p,C===p&&u.set(null,v),u.set(T,v),this.count++,p=Lf.bind(this),v.addEventListener("load",p),v.addEventListener("error",p),C?C.parentNode.insertBefore(v,C.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(v,s.firstChild)),a.state.loading|=4}}var fc={$$typeof:N,Provider:null,Consumer:null,_currentValue:I,_currentValue2:I,_threadCount:0};function QM(s,a,u,p,v,C,T,E){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ks(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ks(0),this.hiddenUpdates=Ks(null),this.identifierPrefix=p,this.onUncaughtError=v,this.onCaughtError=C,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function F4(s,a,u,p,v,C,T,E,O,F,X,ne){return s=new QM(s,a,u,T,E,O,F,ne),a=1,C===!0&&(a|=24),C=Gn(3,null,null,a),s.current=C,C.stateNode=s,a=y1(),a.refCount++,s.pooledCache=a,a.refCount++,C.memoizedState={element:p,isDehydrated:u,cache:a},w1(C),s}function $4(s){return s?(s=cl,s):cl}function q4(s,a,u,p,v,C){v=$4(v),p.context===null?p.context=v:p.pendingContext=v,p=Gi(a),p.payload={element:u},C=C===void 0?null:C,C!==null&&(p.callback=C),u=Yi(s,p,a),u!==null&&(Qn(u,s,a),Ua(u,s,a))}function Z4(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function zm(s,a){Z4(s,a),(s=s.alternate)&&Z4(s,a)}function K4(s){if(s.tag===13){var a=al(s,67108864);a!==null&&Qn(a,s,67108864),zm(s,67108864)}}var Hf=!0;function eE(s,a,u,p){var v=H.T;H.T=null;var C=V.p;try{V.p=2,Bm(s,a,u,p)}finally{V.p=C,H.T=v}}function tE(s,a,u,p){var v=H.T;H.T=null;var C=V.p;try{V.p=8,Bm(s,a,u,p)}finally{V.p=C,H.T=v}}function Bm(s,a,u,p){if(Hf){var v=Vm(p);if(v===null)km(s,a,p,If,u),Y4(s,p);else if(rE(v,s,a,u,p))p.stopPropagation();else if(Y4(s,p),a&4&&-1<nE.indexOf(s)){for(;v!==null;){var C=Ws(v);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var T=Fr(C.pendingLanes);if(T!==0){var E=C;for(E.pendingLanes|=2,E.entangledLanes|=2;T;){var O=1<<31-Ft(T);E.entanglements[1]|=O,T&=~O}Gr(C),(Ye&6)===0&&(bf=Te()+500,ic(0))}}break;case 13:E=al(C,2),E!==null&&Qn(E,C,2),wf(),zm(C,2)}if(C=Vm(p),C===null&&km(s,a,p,If,u),C===v)break;v=C}v!==null&&p.stopPropagation()}else km(s,a,p,null,u)}}function Vm(s){return s=$p(s),jm(s)}var If=null;function jm(s){if(If=null,s=Ys(s),s!==null){var a=o(s);if(a===null)s=null;else{var u=a.tag;if(u===13){if(s=l(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return If=s,null}function G4(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qt()){case Lt:return 2;case jt:return 8;case xn:case ye:return 32;case Ee:return 268435456;default:return 32}default:return 32}}var Um=!1,ao=null,co=null,uo=null,dc=new Map,hc=new Map,fo=[],nE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Y4(s,a){switch(s){case"focusin":case"focusout":ao=null;break;case"dragenter":case"dragleave":co=null;break;case"mouseover":case"mouseout":uo=null;break;case"pointerover":case"pointerout":dc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":hc.delete(a.pointerId)}}function pc(s,a,u,p,v,C){return s===null||s.nativeEvent!==C?(s={blockedOn:a,domEventName:u,eventSystemFlags:p,nativeEvent:C,targetContainers:[v]},a!==null&&(a=Ws(a),a!==null&&K4(a)),s):(s.eventSystemFlags|=p,a=s.targetContainers,v!==null&&a.indexOf(v)===-1&&a.push(v),s)}function rE(s,a,u,p,v){switch(a){case"focusin":return ao=pc(ao,s,a,u,p,v),!0;case"dragenter":return co=pc(co,s,a,u,p,v),!0;case"mouseover":return uo=pc(uo,s,a,u,p,v),!0;case"pointerover":var C=v.pointerId;return dc.set(C,pc(dc.get(C)||null,s,a,u,p,v)),!0;case"gotpointercapture":return C=v.pointerId,hc.set(C,pc(hc.get(C)||null,s,a,u,p,v)),!0}return!1}function W4(s){var a=Ys(s.target);if(a!==null){var u=o(a);if(u!==null){if(a=u.tag,a===13){if(a=l(u),a!==null){s.blockedOn=a,WT(s.priority,function(){if(u.tag===13){var p=Jn();p=Lp(p);var v=al(u,p);v!==null&&Qn(v,u,p),zm(u,p)}});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function zf(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=Vm(s.nativeEvent);if(u===null){u=s.nativeEvent;var p=new u.constructor(u.type,u);Fp=p,u.target.dispatchEvent(p),Fp=null}else return a=Ws(u),a!==null&&K4(a),s.blockedOn=u,!1;a.shift()}return!0}function X4(s,a,u){zf(s)&&u.delete(a)}function iE(){Um=!1,ao!==null&&zf(ao)&&(ao=null),co!==null&&zf(co)&&(co=null),uo!==null&&zf(uo)&&(uo=null),dc.forEach(X4),hc.forEach(X4)}function Bf(s,a){s.blockedOn===a&&(s.blockedOn=null,Um||(Um=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,iE)))}var Vf=null;function J4(s){Vf!==s&&(Vf=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Vf===s&&(Vf=null);for(var a=0;a<s.length;a+=3){var u=s[a],p=s[a+1],v=s[a+2];if(typeof p!="function"){if(jm(p||u)===null)continue;break}var C=Ws(u);C!==null&&(s.splice(a,3),a-=3,j1(C,{pending:!0,data:v,method:u.method,action:p},p,v))}}))}function mc(s){function a(O){return Bf(O,s)}ao!==null&&Bf(ao,s),co!==null&&Bf(co,s),uo!==null&&Bf(uo,s),dc.forEach(a),hc.forEach(a);for(var u=0;u<fo.length;u++){var p=fo[u];p.blockedOn===s&&(p.blockedOn=null)}for(;0<fo.length&&(u=fo[0],u.blockedOn===null);)W4(u),u.blockedOn===null&&fo.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(p=0;p<u.length;p+=3){var v=u[p],C=u[p+1],T=v[Dn]||null;if(typeof C=="function")T||J4(u);else if(T){var E=null;if(C&&C.hasAttribute("formAction")){if(v=C,T=C[Dn]||null)E=T.formAction;else if(jm(v)!==null)continue}else E=T.action;typeof E=="function"?u[p+1]=E:(u.splice(p,3),p-=3),J4(u)}}}function Pm(s){this._internalRoot=s}jf.prototype.render=Pm.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(r(409));var u=a.current,p=Jn();q4(u,p,s,a,null,null)},jf.prototype.unmount=Pm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;q4(s.current,2,null,s,null,null),wf(),a[Gs]=null}};function jf(s){this._internalRoot=s}jf.prototype.unstable_scheduleHydration=function(s){if(s){var a=m3();s={blockedOn:null,target:s,priority:a};for(var u=0;u<fo.length&&a!==0&&a<fo[u].priority;u++);fo.splice(u,0,s),u===0&&W4(s)}};var Q4=e.version;if(Q4!=="19.1.0")throw Error(r(527,Q4,"19.1.0"));V.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=f(a),s=s!==null?d(s):null,s=s===null?null:s.stateNode,s};var oE={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uf.isDisabled&&Uf.supportsFiber)try{Ze=Uf.inject(oE),Ie=Uf}catch{}}return yc.createRoot=function(s,a){if(!i(s))throw Error(r(299));var u=!1,p="",v=mb,C=gb,T=yb,E=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(C=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(E=a.unstable_transitionCallbacks)),a=F4(s,1,!1,null,null,u,p,v,C,T,E,null),s[Gs]=a.current,Tm(s),new Pm(a)},yc.hydrateRoot=function(s,a,u){if(!i(s))throw Error(r(299));var p=!1,v="",C=mb,T=gb,E=yb,O=null,F=null;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(C=u.onUncaughtError),u.onCaughtError!==void 0&&(T=u.onCaughtError),u.onRecoverableError!==void 0&&(E=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(O=u.unstable_transitionCallbacks),u.formState!==void 0&&(F=u.formState)),a=F4(s,1,!0,a,u??null,p,v,C,T,E,O,F),a.context=$4(null),u=a.current,p=Jn(),p=Lp(p),v=Gi(p),v.callback=null,Yi(u,v,p),u=p,a.current.lanes=u,wa(a,u),Gr(a),s[Gs]=a.current,Tm(s),new jf(a)},yc.version="19.1.0",yc}var c7;function mE(){if(c7)return qm.exports;c7=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),qm.exports=pE(),qm.exports}var gE=mE(),da=L6();const yE=v2(da);var Ym={exports:{}},Wm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u7;function vE(){if(u7)return Wm;u7=1;var t=du();function e(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,l=t.useDebugValue;function c(m,g){var y=g(),b=r({inst:{value:y,getSnapshot:g}}),w=b[0].inst,x=b[1];return o(function(){w.value=y,w.getSnapshot=g,f(w)&&x({inst:w})},[m,y,g]),i(function(){return f(w)&&x({inst:w}),m(function(){f(w)&&x({inst:w})})},[m]),l(y),y}function f(m){var g=m.getSnapshot;m=m.value;try{var y=g();return!n(m,y)}catch{return!0}}function d(m,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return Wm.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,Wm}var f7;function _6(){return f7||(f7=1,Ym.exports=vE()),Ym.exports}var H6=_6();function rn(t){this.content=t}rn.prototype={constructor:rn,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new rn(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new rn(n)},addToStart:function(t,e){return new rn([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new rn(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new rn(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=rn.from(t),t.size?new rn(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=rn.from(t),t.size?new rn(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=rn.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};rn.from=function(t){if(t instanceof rn)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new rn(e)};function I6(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let l=0;i.text[l]==o.text[l];l++)n++;return n}if(i.content.size||o.content.size){let l=I6(i.content,o.content,n+1);if(l!=null)return l}n+=i.nodeSize}}function z6(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let l=t.child(--i),c=e.child(--o),f=l.nodeSize;if(l==c){n-=f,r-=f;continue}if(!l.sameMarkup(c))return{a:n,b:r};if(l.isText&&l.text!=c.text){let d=0,h=Math.min(l.text.length,c.text.length);for(;d<h&&l.text[l.text.length-d-1]==c.text[c.text.length-d-1];)d++,n--,r--;return{a:n,b:r}}if(l.content.size||c.content.size){let d=z6(l.content,c.content,n-1,r-1);if(d)return d}n-=f,r-=f}}class Q{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let l=0,c=0;c<n;l++){let f=this.content[l],d=c+f.nodeSize;if(d>e&&r(f,i+c,o||null,l)!==!1&&f.content.size){let h=c+1;f.nodesBetween(Math.max(0,e-h),Math.min(f.content.size,n-h),r,i+h)}c=d}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",l=!0;return this.nodesBetween(e,n,(c,f)=>{let d=c.isText?c.text.slice(Math.max(e,f)-f,n-f):c.isLeaf?i?typeof i=="function"?i(c):i:c.type.spec.leafText?c.type.spec.leafText(c):"":"";c.isBlock&&(c.isLeaf&&d||c.isTextblock)&&r&&(l?l=!1:o+=r),o+=d},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new Q(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,l=0;l<n;o++){let c=this.content[o],f=l+c.nodeSize;f>e&&((l<e||f>n)&&(c.isText?c=c.cut(Math.max(0,e-l),Math.min(c.text.length,n-l)):c=c.cut(Math.max(0,e-l-1),Math.min(c.content.size,n-l-1))),r.push(c),i+=c.nodeSize),l=f}return new Q(r,i)}cutByIndex(e,n){return e==n?Q.empty:e==0&&n==this.content.length?this:new Q(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new Q(i,o)}addToStart(e){return new Q([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Q(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return I6(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return z6(this,e,n,r)}findIndex(e){if(e==0)return Pf(0,e);if(e==this.size)return Pf(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),o=r+i.nodeSize;if(o>=e)return o==e?Pf(n+1,o):Pf(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Q.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Q(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Q.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new Q(n||e,r)}static from(e){if(!e)return Q.empty;if(e instanceof Q)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Q([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Q.empty=new Q([],0);const Xm={index:0,offset:0};function Pf(t,e){return Xm.index=t,Xm.offset=e,Xm}function Nd(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Nd(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Nd(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let it=class t0{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Nd(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return t0.none;if(e instanceof t0)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};it.none=[];class Od extends Error{}class le{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=V6(this.content,e+this.openStart,n);return r&&new le(r,this.openStart,this.openEnd)}removeBetween(e,n){return new le(B6(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return le.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new le(Q.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new le(e,r,i)}}le.empty=new le(Q.empty,0,0);function B6(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:l,offset:c}=t.findIndex(n);if(i==e||o.isText){if(c!=n&&!t.child(l).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=l)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(B6(o.content,e-i-1,n-i-1)))}function V6(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),l=t.maybeChild(i);if(o==e||l.isText)return t.cut(0,e).append(n).append(t.cut(e));let c=V6(l.content,e-o-1,n);return c&&t.replaceChild(i,l.copy(c))}function bE(t,e,n){if(n.openStart>t.depth)throw new Od("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Od("Inconsistent open depths");return j6(t,e,n,0)}function j6(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let l=j6(t,e,n,r+1);return o.copy(o.content.replaceChild(i,l))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let l=t.parent,c=l.content;return Ts(l,c.cut(0,t.parentOffset).append(n.content).append(c.cut(e.parentOffset)))}else{let{start:l,end:c}=CE(n,t);return Ts(o,P6(t,l,c,e,r))}else return Ts(o,Dd(t,e,r))}function U6(t,e){if(!e.type.compatibleContent(t.type))throw new Od("Cannot join "+e.type.name+" onto "+t.type.name)}function n0(t,e,n){let r=t.node(n);return U6(r,e.node(n)),r}function Ss(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Ac(t,e,n,r){let i=(e||t).node(n),o=0,l=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(Ss(t.nodeAfter,r),o++));for(let c=o;c<l;c++)Ss(i.child(c),r);e&&e.depth==n&&e.textOffset&&Ss(e.nodeBefore,r)}function Ts(t,e){return t.type.checkContent(e),t.copy(e)}function P6(t,e,n,r,i){let o=t.depth>i&&n0(t,e,i+1),l=r.depth>i&&n0(n,r,i+1),c=[];return Ac(null,t,i,c),o&&l&&e.index(i)==n.index(i)?(U6(o,l),Ss(Ts(o,P6(t,e,n,r,i+1)),c)):(o&&Ss(Ts(o,Dd(t,e,i+1)),c),Ac(e,n,i,c),l&&Ss(Ts(l,Dd(n,r,i+1)),c)),Ac(r,null,i,c),new Q(c)}function Dd(t,e,n){let r=[];if(Ac(null,t,n,r),t.depth>n){let i=n0(t,e,n+1);Ss(Ts(i,Dd(t,e,n+1)),r)}return Ac(e,null,n,r),new Q(r)}function CE(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(Q.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Pc{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return it.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let c=r;r=i,i=c}let o=r.marks;for(var l=0;l<o.length;l++)o[l].type.spec.inclusive===!1&&(!i||!o[l].isInSet(i.marks))&&(o=o[l--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Fc(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let l=e;;){let{index:c,offset:f}=l.content.findIndex(o),d=o-f;if(r.push(l,c,i+f),!d||(l=l.child(c),l.isText))break;o=d-1,i+=f+1}return new Pc(n,r,o)}static resolveCached(e,n){let r=d7.get(e);if(r)for(let o=0;o<r.elts.length;o++){let l=r.elts[o];if(l.pos==n)return l}else d7.set(e,r=new wE);let i=r.elts[r.i]=Pc.resolve(e,n);return r.i=(r.i+1)%xE,i}}class wE{constructor(){this.elts=[],this.i=0}}const xE=12,d7=new WeakMap;class Fc{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const SE=Object.create(null);let jn=class r0{constructor(e,n,r,i=it.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||Q.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Nd(this.attrs,n||e.defaultAttrs||SE)&&it.sameSet(this.marks,r||it.none)}copy(e=null){return e==this.content?this:new r0(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new r0(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return le.empty;let i=this.resolve(e),o=this.resolve(n),l=r?0:i.sharedDepth(n),c=i.start(l),d=i.node(l).content.cut(i.pos-c,o.pos-c);return new le(d,i.depth-l,o.depth-l)}replace(e,n,r){return bE(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Pc.resolveCached(this,e)}resolveNoCache(e){return Pc.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),F6(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=Q.empty,i=0,o=r.childCount){let l=this.contentMatchAt(e).matchFragment(r,i,o),c=l&&l.matchFragment(this.content,n);if(!c||!c.validEnd)return!1;for(let f=i;f<o;f++)if(!this.type.allowsMarks(r.child(f).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),l=o&&o.matchFragment(this.content,n);return l?l.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=it.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!it.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=Q.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};jn.prototype.text=void 0;class Ld extends jn{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):F6(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Ld(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Ld(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function F6(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Ns{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new TE(e,n);if(r.next==null)return Ns.empty;let i=$6(r);r.next&&r.err("Unexpected trailing text");let o=OE(NE(i));return DE(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(l,c){let f=l.matchFragment(e,r);if(f&&(!n||f.validEnd))return Q.from(c.map(d=>d.createAndFill()));for(let d=0;d<l.next.length;d++){let{type:h,next:m}=l.next[d];if(!(h.isText||h.hasRequiredAttrs())&&i.indexOf(m)==-1){i.push(m);let g=o(m,c.concat(h));if(g)return g}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let l=[];for(let c=i;c.type;c=c.via)l.push(c.type);return l.reverse()}for(let l=0;l<o.next.length;l++){let{type:c,next:f}=o.next[l];!c.isLeaf&&!c.hasRequiredAttrs()&&!(c.name in n)&&(!i.type||f.validEnd)&&(r.push({match:c.contentMatch,type:c,via:i}),n[c.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let l=0;l<r.next.length;l++)o+=(l?", ":"")+r.next[l].type.name+"->"+e.indexOf(r.next[l].next);return o}).join(`
`)}}Ns.empty=new Ns(!0);class TE{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function $6(t){let e=[];do e.push(kE(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function kE(t){let e=[];do e.push(ME(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function ME(t){let e=RE(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=EE(t,e);else break;return e}function h7(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function EE(t,e){let n=h7(t),r=n;return t.eat(",")&&(t.next!="}"?r=h7(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function AE(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let l=n[o];l.isInGroup(e)&&i.push(l)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function RE(t){if(t.eat("(")){let e=$6(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=AE(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function NE(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(l,c,f){let d={term:f,to:c};return e[l].push(d),d}function i(l,c){l.forEach(f=>f.to=c)}function o(l,c){if(l.type=="choice")return l.exprs.reduce((f,d)=>f.concat(o(d,c)),[]);if(l.type=="seq")for(let f=0;;f++){let d=o(l.exprs[f],c);if(f==l.exprs.length-1)return d;i(d,c=n())}else if(l.type=="star"){let f=n();return r(c,f),i(o(l.expr,f),f),[r(f)]}else if(l.type=="plus"){let f=n();return i(o(l.expr,c),f),i(o(l.expr,f),f),[r(f)]}else{if(l.type=="opt")return[r(c)].concat(o(l.expr,c));if(l.type=="range"){let f=c;for(let d=0;d<l.min;d++){let h=n();i(o(l.expr,f),h),f=h}if(l.max==-1)i(o(l.expr,f),f);else for(let d=l.min;d<l.max;d++){let h=n();r(f,h),i(o(l.expr,f),h),f=h}return[r(f)]}else{if(l.type=="name")return[r(c,void 0,l.value)];throw new Error("Unknown expr type")}}}}function q6(t,e){return e-t}function p7(t,e){let n=[];return r(e),n.sort(q6);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let l=0;l<o.length;l++){let{term:c,to:f}=o[l];!c&&n.indexOf(f)==-1&&r(f)}}}function OE(t){let e=Object.create(null);return n(p7(t,0));function n(r){let i=[];r.forEach(l=>{t[l].forEach(({term:c,to:f})=>{if(!c)return;let d;for(let h=0;h<i.length;h++)i[h][0]==c&&(d=i[h][1]);p7(t,f).forEach(h=>{d||i.push([c,d=[]]),d.indexOf(h)==-1&&d.push(h)})})});let o=e[r.join(",")]=new Ns(r.indexOf(t.length-1)>-1);for(let l=0;l<i.length;l++){let c=i[l][1].sort(q6);o.next.push({type:i[l][0],next:e[c.join(",")]||n(c)})}return o}}function DE(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,l=[];for(let c=0;c<i.next.length;c++){let{type:f,next:d}=i.next[c];l.push(f.name),o&&!(f.isText||f.hasRequiredAttrs())&&(o=!1),r.indexOf(d)==-1&&r.push(d)}o&&e.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Z6(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function K6(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function G6(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let o=t[i];o.validate&&o.validate(e[i])}}function Y6(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new _E(t,r,e[r]);return n}let m7=class W6{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Y6(e,r.attrs),this.defaultAttrs=Z6(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ns.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:K6(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new jn(this,this.computeAttrs(e),Q.from(n),it.setFrom(r))}createChecked(e=null,n,r){return n=Q.from(n),this.checkContent(n),new jn(this,this.computeAttrs(e),n,it.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=Q.from(n),n.size){let l=this.contentMatch.fillBefore(n);if(!l)return null;n=l.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(Q.empty,!0);return o?new jn(this,e,n.append(o),it.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){G6(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:it.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,l)=>r[o]=new W6(o,n,l));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function LE(t,e,n){let r=n.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class _E{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?LE(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Bh{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=Y6(e,i.attrs),this.excluded=null;let o=Z6(this.attrs);this.instance=o?new it(this,o):null}create(e=null){return!e&&this.instance?this.instance:new it(this,K6(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,l)=>r[o]=new Bh(o,i++,n,l)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){G6(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class X6{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=rn.from(e.nodes),n.marks=rn.from(e.marks||{}),this.nodes=m7.compile(this.spec.nodes,this),this.marks=Bh.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],l=o.spec.content||"",c=o.spec.marks;if(o.contentMatch=r[l]||(r[l]=Ns.parse(l,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=c=="_"?null:c?g7(this,c.split(" ")):c==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],l=o.spec.excludes;o.excluded=l==null?[o]:l==""?[]:g7(this,l.split(" "))}this.nodeFromJSON=i=>jn.fromJSON(this,i),this.markFromJSON=i=>it.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof m7){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Ld(r,r.defaultAttrs,e,it.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function g7(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],l=o;if(o)n.push(o);else for(let c in t.marks){let f=t.marks[c];(i=="_"||f.spec.group&&f.spec.group.split(" ").indexOf(i)>-1)&&n.push(l=f)}if(!l)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function HE(t){return t.tag!=null}function IE(t){return t.style!=null}let Rc=class i0{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(HE(i))this.tags.push(i);else if(IE(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new v7(this,n,!1);return r.addAll(e,it.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new v7(this,n,!0);return r.addAll(e,it.none,n.from,n.to),le.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(VE(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let l=o.getAttrs(e);if(l===!1)continue;o.attrs=l||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let l=this.styles[o],c=l.style;if(!(c.indexOf(e)!=0||l.context&&!r.matchesContext(l.context)||c.length>e.length&&(c.charCodeAt(e.length)!=61||c.slice(e.length+1)!=n))){if(l.getAttrs){let f=l.getAttrs(n);if(f===!1)continue;l.attrs=f||void 0}return l}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,l=0;for(;l<n.length;l++){let c=n[l];if((c.priority==null?50:c.priority)<o)break}n.splice(l,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(l=>{r(l=b7(l)),l.mark||l.ignore||l.clearMark||(l.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(l=>{r(l=b7(l)),l.node||l.ignore||l.mark||(l.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new i0(e,i0.schemaRules(e)))}};const J6={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},zE={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Q6={ol:!0,ul:!0},$c=1,o0=2,Nc=4;function y7(t,e,n){return e!=null?(e?$c:0)|(e==="full"?o0:0):t&&t.whitespace=="pre"?$c|o0:n&~Nc}class Ff{constructor(e,n,r,i,o,l){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=l,this.content=[],this.activeMarks=it.none,this.match=o||(l&Nc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Q.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&$c)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=Q.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Q.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!J6.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class v7{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,o,l=y7(null,n.preserveWhitespace,0)|(r?Nc:0);i?o=new Ff(i.type,i.attrs,it.none,!0,n.topMatch||i.type.contentMatch,l):r?o=new Ff(null,null,it.none,!0,null,l):o=new Ff(e.schema.topNodeType,null,it.none,!0,null,l),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,o=i.options&o0?"full":this.localPreserveWS||(i.options&$c)>0;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)o!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let l=i.content[i.content.length-1],c=e.previousSibling;(!l||c&&c.nodeName=="BR"||l.isText&&/[ \t\r\n\u000c]$/.test(l.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let l=e.nodeName.toLowerCase(),c;Q6.hasOwnProperty(l)&&this.parser.normalizeLists&&BE(e);let f=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(c=this.parser.matchTag(e,this,r));e:if(f?f.ignore:zE.hasOwnProperty(l))this.findInside(e),this.ignoreFallback(e,n);else if(!f||f.skip||f.closeParent){f&&f.closeParent?this.open=Math.max(0,this.open-1):f&&f.skip.nodeType&&(e=f.skip);let d,h=this.needsBlock;if(J6.hasOwnProperty(l))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),d=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let m=f&&f.skip?n:this.readStyles(e,n);m&&this.addAll(e,m),d&&this.sync(o),this.needsBlock=h}else{let d=this.readStyles(e,n);d&&this.addElementByRule(e,f,d,f.consuming===!1?c:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],l=r.getPropertyValue(o);if(l)for(let c=void 0;;){let f=this.parser.matchStyle(o,l,this,c);if(!f)break;if(f.ignore)return null;if(f.clearMark?n=n.filter(d=>!f.clearMark(d)):n=n.concat(this.parser.schema.marks[f.mark].create(f.attrs)),f.consuming===!1)c=f;else break}}return n}addElementByRule(e,n,r,i){let o,l;if(n.node)if(l=this.parser.schema.nodes[n.node],l.isLeaf)this.insertNode(l.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let f=this.enter(l,n.attrs||null,r,n.preserveWhitespace);f&&(o=!0,r=f)}else{let f=this.parser.schema.marks[n.mark];r=r.concat(f.create(n.attrs))}let c=this.top;if(l&&l.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(f=>this.insertNode(f,r,!1));else{let f=e;typeof n.contentElement=="string"?f=e.querySelector(n.contentElement):typeof n.contentElement=="function"?f=n.contentElement(e):n.contentElement&&(f=n.contentElement),this.findAround(e,f,!0),this.addAll(f,r),this.findAround(e,f,!1)}o&&this.sync(c)&&this.open--}addAll(e,n,r,i){let o=r||0;for(let l=r?e.childNodes[r]:e.firstChild,c=i==null?null:e.childNodes[i];l!=c;l=l.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(l,n);this.findAtPoint(e,o)}findPlace(e,n,r){let i,o;for(let l=this.open,c=0;l>=0;l--){let f=this.nodes[l],d=f.findWrapping(e);if(d&&(!i||i.length>d.length+c)&&(i=d,o=f,!d.length))break;if(f.solid){if(r)break;c+=2}}if(!i)return null;this.sync(o);for(let l=0;l<i.length;l++)n=this.enterInner(i[l],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let l=it.none;for(let c of i.concat(e.marks))(o.type?o.type.allowsMarkType(c.type):C7(c.type,e.type))&&(l=c.addToSet(l));return o.content.push(e.mark(l)),!0}return!1}enter(e,n,r,i){let o=this.findPlace(e.create(n),r,!1);return o&&(o=this.enterInner(e,n,r,!0,i)),o}enterInner(e,n,r,i=!1,o){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(e);let c=y7(e,o,l.options);l.options&Nc&&l.content.length==0&&(c|=Nc);let f=it.none;return r=r.filter(d=>(l.type?l.type.allowsMarkType(d.type):C7(d.type,e))?(f=d.addToSet(f),!1):!0),this.nodes.push(new Ff(e,n,f,i,null,c)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=$c)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),l=(c,f)=>{for(;c>=0;c--){let d=n[c];if(d==""){if(c==n.length-1||c==0)continue;for(;f>=o;f--)if(l(c-1,f))return!0;return!1}else{let h=f>0||f==0&&i?this.nodes[f].type:r&&f>=o?r.node(f-o).type:null;if(!h||h.name!=d&&!h.isInGroup(d))return!1;f--}}return!0};return l(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function BE(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Q6.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function VE(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function b7(t){let e={};for(let n in t)e[n]=t[n];return e}function C7(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],l=c=>{o.push(c);for(let f=0;f<c.edgeCount;f++){let{type:d,next:h}=c.edge(f);if(d==e||o.indexOf(h)<0&&l(h))return!0}};if(l(i.contentMatch))return!0}}class Ps{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Jm(n).createDocumentFragment());let i=r,o=[];return e.forEach(l=>{if(o.length||l.marks.length){let c=0,f=0;for(;c<o.length&&f<l.marks.length;){let d=l.marks[f];if(!this.marks[d.type.name]){f++;continue}if(!d.eq(o[c][0])||d.type.spec.spanning===!1)break;c++,f++}for(;c<o.length;)i=o.pop()[1];for(;f<l.marks.length;){let d=l.marks[f++],h=this.serializeMark(d,l.isInline,n);h&&(o.push([d,i]),i.appendChild(h.dom),i=h.contentDOM||h.dom)}}i.appendChild(this.serializeNodeInner(l,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=md(Jm(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&md(Jm(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return md(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Ps(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=w7(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return w7(e.marks)}}function w7(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Jm(t){return t.document||window.document}const x7=new WeakMap;function jE(t){let e=x7.get(t);return e===void 0&&x7.set(t,e=UE(t)),e}function UE(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function md(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=jE(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=i.indexOf(" ");l>0&&(n=i.slice(0,l),i=i.slice(l+1));let c,f=n?t.createElementNS(n,i):t.createElement(i),d=e[1],h=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){h=2;for(let m in d)if(d[m]!=null){let g=m.indexOf(" ");g>0?f.setAttributeNS(m.slice(0,g),m.slice(g+1),d[m]):m=="style"&&f.style?f.style.cssText=d[m]:f.setAttribute(m,d[m])}}for(let m=h;m<e.length;m++){let g=e[m];if(g===0){if(m<e.length-1||m>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:f,contentDOM:f}}else{let{dom:y,contentDOM:b}=md(t,g,n,r);if(f.appendChild(y),b){if(c)throw new RangeError("Multiple content holes");c=b}}}return{dom:f,contentDOM:c}}const e5=65535,t5=Math.pow(2,16);function PE(t,e){return t+e*t5}function S7(t){return t&e5}function FE(t){return(t-(t&e5))/t5}const n5=1,r5=2,gd=4,i5=8;class s0{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&i5)>0}get deletedBefore(){return(this.delInfo&(n5|gd))>0}get deletedAfter(){return(this.delInfo&(r5|gd))>0}get deletedAcross(){return(this.delInfo&gd)>0}}class nr{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&nr.empty)return nr.empty}recover(e){let n=0,r=S7(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+FE(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,l=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let f=this.ranges[c]-(this.inverted?i:0);if(f>e)break;let d=this.ranges[c+o],h=this.ranges[c+l],m=f+d;if(e<=m){let g=d?e==f?-1:e==m?1:n:n,y=f+i+(g<0?0:h);if(r)return y;let b=e==(n<0?f:m)?null:PE(c/3,e-f),w=e==f?r5:e==m?n5:gd;return(n<0?e!=f:e!=m)&&(w|=i5),new s0(y,w,b)}i+=h-d}return r?e+i:new s0(e+i,0,null)}touches(e,n){let r=0,i=S7(n),o=this.inverted?2:1,l=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let f=this.ranges[c]-(this.inverted?r:0);if(f>e)break;let d=this.ranges[c+o],h=f+d;if(e<=h&&c==i*3)return!0;r+=this.ranges[c+l]-d}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let l=this.ranges[i],c=l-(this.inverted?o:0),f=l+(this.inverted?0:o),d=this.ranges[i+n],h=this.ranges[i+r];e(c,c+d,f,f+h),o+=h-d}}invert(){return new nr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?nr.empty:new nr(e<0?[0,-e,0]:[0,0,e])}}nr.empty=new nr([]);class qc{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new qc(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new qc;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let l=this._maps[o],c=l.mapResult(e,n);if(c.recover!=null){let f=this.getMirror(o);if(f!=null&&f>o&&f<this.to){o=f,e=this._maps[f].recover(c.recover);continue}}i|=c.delInfo,e=c.pos}return r?e:new s0(e,i,null)}}const Qm=Object.create(null);class Cn{getMap(){return nr.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Qm[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Qm)throw new RangeError("Duplicate use of step JSON ID "+e);return Qm[e]=n,n.prototype.jsonID=e,n}}class It{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new It(e,null)}static fail(e){return new It(null,e)}static fromReplace(e,n,r,i){try{return It.ok(e.replace(n,r,i))}catch(o){if(o instanceof Od)return It.fail(o.message);throw o}}}function b2(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(b2(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return Q.fromArray(r)}class Mo extends Cn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new le(b2(n.content,(l,c)=>!l.isAtom||!c.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),i),n.openStart,n.openEnd);return It.fromReplace(e,this.from,this.to,o)}invert(){return new Nr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Mo(n.pos,r.pos,this.mark)}merge(e){return e instanceof Mo&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Mo(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Mo(n.from,n.to,e.markFromJSON(n.mark))}}Cn.jsonID("addMark",Mo);class Nr extends Cn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new le(b2(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return It.fromReplace(e,this.from,this.to,r)}invert(){return new Mo(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Nr(n.pos,r.pos,this.mark)}merge(e){return e instanceof Nr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Nr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Nr(n.from,n.to,e.markFromJSON(n.mark))}}Cn.jsonID("removeMark",Nr);class Eo extends Cn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return It.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return It.fromReplace(e,this.pos,this.pos+1,new le(Q.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Eo(this.pos,n.marks[i]);return new Eo(this.pos,this.mark)}}return new Os(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Eo(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Eo(n.pos,e.markFromJSON(n.mark))}}Cn.jsonID("addNodeMark",Eo);class Os extends Cn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return It.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return It.fromReplace(e,this.pos,this.pos+1,new le(Q.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Eo(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Os(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Os(n.pos,e.markFromJSON(n.mark))}}Cn.jsonID("removeNodeMark",Os);class Yt extends Cn{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&l0(e,this.from,this.to)?It.fail("Structure replace would overwrite content"):It.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new nr([this.from,this.to-this.from,this.slice.size])}invert(e){return new Yt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Yt(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Yt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?le.empty:new le(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Yt(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?le.empty:new le(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Yt(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Yt(n.from,n.to,le.fromJSON(e,n.slice),!!n.structure)}}Cn.jsonID("replace",Yt);class Wt extends Cn{constructor(e,n,r,i,o,l,c=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=l,this.structure=c}apply(e){if(this.structure&&(l0(e,this.from,this.gapFrom)||l0(e,this.gapTo,this.to)))return It.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return It.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?It.fromReplace(e,this.from,this.to,r):It.fail("Content does not fit in gap")}getMap(){return new nr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Wt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new Wt(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Wt(n.from,n.to,n.gapFrom,n.gapTo,le.fromJSON(e,n.slice),n.insert,!!n.structure)}}Cn.jsonID("replaceAround",Wt);function l0(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let l=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,i--}}return!1}function $E(t,e,n,r){let i=[],o=[],l,c;t.doc.nodesBetween(e,n,(f,d,h)=>{if(!f.isInline)return;let m=f.marks;if(!r.isInSet(m)&&h.type.allowsMarkType(r.type)){let g=Math.max(d,e),y=Math.min(d+f.nodeSize,n),b=r.addToSet(m);for(let w=0;w<m.length;w++)m[w].isInSet(b)||(l&&l.to==g&&l.mark.eq(m[w])?l.to=y:i.push(l=new Nr(g,y,m[w])));c&&c.to==g?c.to=y:o.push(c=new Mo(g,y,r))}}),i.forEach(f=>t.step(f)),o.forEach(f=>t.step(f))}function qE(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(l,c)=>{if(!l.isInline)return;o++;let f=null;if(r instanceof Bh){let d=l.marks,h;for(;h=r.isInSet(d);)(f||(f=[])).push(h),d=h.removeFromSet(d)}else r?r.isInSet(l.marks)&&(f=[r]):f=l.marks;if(f&&f.length){let d=Math.min(c+l.nodeSize,n);for(let h=0;h<f.length;h++){let m=f[h],g;for(let y=0;y<i.length;y++){let b=i[y];b.step==o-1&&m.eq(i[y].style)&&(g=b)}g?(g.to=d,g.step=o):i.push({style:m,from:Math.max(c,e),to:d,step:o})}}}),i.forEach(l=>t.step(new Nr(l.from,l.to,l.style)))}function C2(t,e,n,r=n.contentMatch,i=!0){let o=t.doc.nodeAt(e),l=[],c=e+1;for(let f=0;f<o.childCount;f++){let d=o.child(f),h=c+d.nodeSize,m=r.matchType(d.type);if(!m)l.push(new Yt(c,h,le.empty));else{r=m;for(let g=0;g<d.marks.length;g++)n.allowsMarkType(d.marks[g].type)||t.step(new Nr(c,h,d.marks[g]));if(i&&d.isText&&n.whitespace!="pre"){let g,y=/\r?\n|\r/g,b;for(;g=y.exec(d.text);)b||(b=new le(Q.from(n.schema.text(" ",n.allowedMarks(d.marks))),0,0)),l.push(new Yt(c+g.index,c+g.index+g[0].length,b))}}c=h}if(!r.validEnd){let f=r.fillBefore(Q.empty,!0);t.replace(c,c,new le(f,0,0))}for(let f=l.length-1;f>=0;f--)t.step(l[f])}function ZE(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function ha(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),o=t.$from.index(r),l=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(o,l,n))return r;if(r==0||i.type.spec.isolating||!ZE(i,o,l))break}return null}function KE(t,e,n){let{$from:r,$to:i,depth:o}=e,l=r.before(o+1),c=i.after(o+1),f=l,d=c,h=Q.empty,m=0;for(let b=o,w=!1;b>n;b--)w||r.index(b)>0?(w=!0,h=Q.from(r.node(b).copy(h)),m++):f--;let g=Q.empty,y=0;for(let b=o,w=!1;b>n;b--)w||i.after(b+1)<i.end(b)?(w=!0,g=Q.from(i.node(b).copy(g)),y++):d++;t.step(new Wt(f,d,l,c,new le(h.append(g),m,y),h.size-m,!0))}function w2(t,e,n=null,r=t){let i=GE(t,e),o=i&&YE(r,e);return o?i.map(T7).concat({type:e,attrs:n}).concat(o.map(T7)):null}function T7(t){return{type:t,attrs:null}}function GE(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let l=o.length?o[0]:e;return n.canReplaceWith(r,i,l)?o:null}function YE(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),l=e.contentMatch.findWrapping(o.type);if(!l)return null;let f=(l.length?l[l.length-1]:e).contentMatch;for(let d=r;f&&d<i;d++)f=f.matchType(n.child(d).type);return!f||!f.validEnd?null:l}function WE(t,e,n){let r=Q.empty;for(let l=n.length-1;l>=0;l--){if(r.size){let c=n[l].type.contentMatch.matchFragment(r);if(!c||!c.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Q.from(n[l].type.create(n[l].attrs,r))}let i=e.start,o=e.end;t.step(new Wt(i,o,i,o,new le(r,0,0),n.length,!0))}function XE(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(l,c)=>{let f=typeof i=="function"?i(l):i;if(l.isTextblock&&!l.hasMarkup(r,f)&&JE(t.doc,t.mapping.slice(o).map(c),r)){let d=null;if(r.schema.linebreakReplacement){let y=r.whitespace=="pre",b=!!r.contentMatch.matchType(r.schema.linebreakReplacement);y&&!b?d=!1:!y&&b&&(d=!0)}d===!1&&s5(t,l,c,o),C2(t,t.mapping.slice(o).map(c,1),r,void 0,d===null);let h=t.mapping.slice(o),m=h.map(c,1),g=h.map(c+l.nodeSize,1);return t.step(new Wt(m,g,m+1,g-1,new le(Q.from(r.create(f,null,l.marks)),0,0),1,!0)),d===!0&&o5(t,l,c,o),!1}})}function o5(t,e,n,r){e.forEach((i,o)=>{if(i.isText){let l,c=/\r?\n|\r/g;for(;l=c.exec(i.text);){let f=t.mapping.slice(r).map(n+1+o+l.index);t.replaceWith(f,f+1,e.type.schema.linebreakReplacement.create())}}})}function s5(t,e,n,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let l=t.mapping.slice(r).map(n+1+o);t.replaceWith(l,l+1,e.type.schema.text(`
`))}})}function JE(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function QE(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let l=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,l);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Wt(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new le(Q.from(l),0,0),1,!0))}function Li(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,l=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!l.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let d=i.depth-1,h=n-2;d>o;d--,h--){let m=i.node(d),g=i.index(d);if(m.type.spec.isolating)return!1;let y=m.content.cutByIndex(g,m.childCount),b=r&&r[h+1];b&&(y=y.replaceChild(0,b.type.create(b.attrs)));let w=r&&r[h]||m;if(!m.canReplace(g+1,m.childCount)||!w.type.validContent(y))return!1}let c=i.indexAfter(o),f=r&&r[0];return i.node(o).canReplaceWith(c,c,f?f.type:i.node(o+1).type)}function eA(t,e,n=1,r){let i=t.doc.resolve(e),o=Q.empty,l=Q.empty;for(let c=i.depth,f=i.depth-n,d=n-1;c>f;c--,d--){o=Q.from(i.node(c).copy(o));let h=r&&r[d];l=Q.from(h?h.type.create(h.attrs,l):i.node(c).copy(l))}t.step(new Yt(e,e,new le(o.append(l),n,n),!0))}function Fo(t,e){let n=t.resolve(e),r=n.index();return l5(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function tA(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),l=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(l),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function l5(t,e){return!!(t&&e&&!t.isLeaf&&tA(t,e))}function Vh(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,l,c=r.index(i);if(i==r.depth?(o=r.nodeBefore,l=r.nodeAfter):n>0?(o=r.node(i+1),c++,l=r.node(i).maybeChild(c)):(o=r.node(i).maybeChild(c-1),l=r.node(i+1)),o&&!o.isTextblock&&l5(o,l)&&r.node(i).canReplace(c,c+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function nA(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,o=t.doc.resolve(e-n),l=o.node().type;if(i&&l.inlineContent){let h=l.whitespace=="pre",m=!!l.contentMatch.matchType(i);h&&!m?r=!1:!h&&m&&(r=!0)}let c=t.steps.length;if(r===!1){let h=t.doc.resolve(e+n);s5(t,h.node(),h.before(),c)}l.inlineContent&&C2(t,e+n-1,l,o.node().contentMatchAt(o.index()),r==null);let f=t.mapping.slice(c),d=f.map(e-n);if(t.step(new Yt(d,f.map(e+n,-1),le.empty,!0)),r===!0){let h=t.doc.resolve(d);o5(t,h.node(),h.before(),t.steps.length)}return t}function rA(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function a5(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let l=r.depth;l>=0;l--){let c=l==r.depth?0:r.pos<=(r.start(l+1)+r.end(l+1))/2?-1:1,f=r.index(l)+(c>0?1:0),d=r.node(l),h=!1;if(o==1)h=d.canReplace(f,f,i);else{let m=d.contentMatchAt(f).findWrapping(i.firstChild.type);h=m&&d.canReplaceWith(f,f,m[0])}if(h)return c==0?r.pos:c<0?r.before(l+1):r.after(l+1)}return null}function jh(t,e,n=e,r=le.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return c5(i,o,r)?new Yt(e,n,r):new iA(i,o,r).fit()}function c5(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class iA{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Q.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=Q.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,l=r.depth,c=i.depth;for(;l&&c&&o.childCount==1;)o=o.firstChild.content,l--,c--;let f=new le(o,l,c);return e>-1?new Wt(r.pos,e,this.$to.pos,this.$to.end(),f,n):f.size||r.pos!=this.$to.pos?new Yt(r.pos,i.pos,f):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=eg(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let l=i.firstChild;for(let c=this.depth;c>=0;c--){let{type:f,match:d}=this.frontier[c],h,m=null;if(n==1&&(l?d.matchType(l.type)||(m=d.fillBefore(Q.from(l),!1)):o&&f.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:c,parent:o,inject:m};if(n==2&&l&&(h=d.findWrapping(l.type)))return{sliceDepth:r,frontierDepth:c,parent:o,wrap:h};if(o&&d.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=eg(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new le(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=eg(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new le(Tc(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new le(Tc(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let w=0;w<o.length;w++)this.openFrontierNode(o[w]);let l=this.unplaced,c=r?r.content:l.content,f=l.openStart-e,d=0,h=[],{match:m,type:g}=this.frontier[n];if(i){for(let w=0;w<i.childCount;w++)h.push(i.child(w));m=m.matchFragment(i)}let y=c.size+e-(l.content.size-l.openEnd);for(;d<c.childCount;){let w=c.child(d),x=m.matchType(w.type);if(!x)break;d++,(d>1||f==0||w.content.size)&&(m=x,h.push(u5(w.mark(g.allowedMarks(w.marks)),d==1?f:0,d==c.childCount?y:-1)))}let b=d==c.childCount;b||(y=-1),this.placed=kc(this.placed,n,Q.from(h)),this.frontier[n].match=m,b&&y<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let w=0,x=c;w<y;w++){let k=x.lastChild;this.frontier.push({type:k.type,match:k.contentMatchAt(k.childCount)}),x=k.content}this.unplaced=b?e==0?le.empty:new le(Tc(l.content,e-1,1),e-1,y<0?l.openEnd:e-1):new le(Tc(l.content,e,d),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!tg(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),l=tg(e,n,i,r,o);if(l){for(let c=n-1;c>=0;c--){let{match:f,type:d}=this.frontier[c],h=tg(e,c,d,f,!0);if(!h||h.childCount)continue e}return{depth:n,fit:l,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=kc(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=kc(this.placed,this.depth,Q.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Q.empty,!0);n.childCount&&(this.placed=kc(this.placed,this.frontier.length,n))}}function Tc(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Tc(t.firstChild.content,e-1,n)))}function kc(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(kc(t.lastChild.content,e-1,n)))}function eg(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function u5(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,u5(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Q.empty,!0)))),t.copy(r)}function tg(t,e,n,r,i){let o=t.node(e),l=i?t.indexAfter(e):t.index(e);if(l==o.childCount&&!n.compatibleContent(o.type))return null;let c=r.fillBefore(o.content,!0,l);return c&&!oA(n,o.content,l)?c:null}function oA(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function sA(t){return t.spec.defining||t.spec.definingForContent}function lA(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(c5(i,o,r))return t.step(new Yt(e,n,r));let l=d5(i,t.doc.resolve(n));l[l.length-1]==0&&l.pop();let c=-(i.depth+1);l.unshift(c);for(let g=i.depth,y=i.pos-1;g>0;g--,y--){let b=i.node(g).type.spec;if(b.defining||b.definingAsContext||b.isolating)break;l.indexOf(g)>-1?c=g:i.before(g)==y&&l.splice(1,0,-g)}let f=l.indexOf(c),d=[],h=r.openStart;for(let g=r.content,y=0;;y++){let b=g.firstChild;if(d.push(b),y==r.openStart)break;g=b.content}for(let g=h-1;g>=0;g--){let y=d[g],b=sA(y.type);if(b&&!y.sameMarkup(i.node(Math.abs(c)-1)))h=g;else if(b||!y.type.isTextblock)break}for(let g=r.openStart;g>=0;g--){let y=(g+h+1)%(r.openStart+1),b=d[y];if(b)for(let w=0;w<l.length;w++){let x=l[(w+f)%l.length],k=!0;x<0&&(k=!1,x=-x);let A=i.node(x-1),N=i.index(x-1);if(A.canReplaceWith(N,N,b.type,b.marks))return t.replace(i.before(x),k?o.after(x):n,new le(f5(r.content,0,r.openStart,y),y,r.openEnd))}}let m=t.steps.length;for(let g=l.length-1;g>=0&&(t.replace(e,n,r),!(t.steps.length>m));g--){let y=l[g];y<0||(e=i.before(y),n=o.after(y))}}function f5(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(f5(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),l=o.fillBefore(t).append(t);t=l.append(o.matchFragment(l).fillBefore(Q.empty,!0))}return t}function aA(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=rA(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new le(Q.from(r),0,0))}function cA(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=d5(r,i);for(let l=0;l<o.length;l++){let c=o[l],f=l==o.length-1;if(f&&c==0||r.node(c).type.contentMatch.validEnd)return t.delete(r.start(c),i.end(c));if(c>0&&(f||r.node(c-1).canReplace(r.index(c-1),i.indexAfter(c-1))))return t.delete(r.before(c),i.after(c))}for(let l=1;l<=r.depth&&l<=i.depth;l++)if(e-r.start(l)==r.depth-l&&n>r.end(l)&&i.end(l)-n!=i.depth-l&&r.start(l-1)==i.start(l-1)&&r.node(l-1).canReplace(r.index(l-1),i.index(l-1)))return t.delete(r.before(l),n);t.delete(e,n)}function d5(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}class Fl extends Cn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return It.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return It.fromReplace(e,this.pos,this.pos+1,new le(Q.from(i),0,n.isLeaf?0:1))}getMap(){return nr.empty}invert(e){return new Fl(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Fl(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Fl(n.pos,n.attr,n.value)}}Cn.jsonID("attr",Fl);class Zc extends Cn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return It.ok(r)}getMap(){return nr.empty}invert(e){return new Zc(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Zc(n.attr,n.value)}}Cn.jsonID("docAttr",Zc);let Xl=class extends Error{};Xl=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Xl.prototype=Object.create(Error.prototype);Xl.prototype.constructor=Xl;Xl.prototype.name="TransformError";class x2{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new qc}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Xl(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=le.empty){let i=jh(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new le(Q.from(r),0,0))}delete(e,n){return this.replace(e,n,le.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return lA(this,e,n,r),this}replaceRangeWith(e,n,r){return aA(this,e,n,r),this}deleteRange(e,n){return cA(this,e,n),this}lift(e,n){return KE(this,e,n),this}join(e,n=1){return nA(this,e,n),this}wrap(e,n){return WE(this,e,n),this}setBlockType(e,n=e,r,i=null){return XE(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return QE(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new Fl(e,n,r)),this}setDocAttribute(e,n){return this.step(new Zc(e,n)),this}addNodeMark(e,n){return this.step(new Eo(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof it)n.isInSet(r.marks)&&this.step(new Os(e,n));else{let i=r.marks,o,l=[];for(;o=n.isInSet(i);)l.push(new Os(e,o)),i=o.removeFromSet(i);for(let c=l.length-1;c>=0;c--)this.step(l[c])}return this}split(e,n=1,r){return eA(this,e,n,r),this}addMark(e,n,r){return $E(this,e,n,r),this}removeMark(e,n,r){return qE(this,e,n,r),this}clearIncompatible(e,n,r){return C2(this,e,n,r),this}}const ng=Object.create(null);class we{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new S2(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=le.empty){let r=n.content.lastChild,i=null;for(let c=0;c<n.openEnd;c++)i=r,r=r.lastChild;let o=e.steps.length,l=this.ranges;for(let c=0;c<l.length;c++){let{$from:f,$to:d}=l[c],h=e.mapping.slice(o);e.replaceRange(h.map(f.pos),h.map(d.pos),c?le.empty:n),c==0&&E7(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:l,$to:c}=i[o],f=e.mapping.slice(r),d=f.map(l.pos),h=f.map(c.pos);o?e.deleteRange(d,h):(e.replaceRangeWith(d,h,n),E7(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new ce(e):zl(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let l=n<0?zl(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):zl(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(l)return l}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Un(e.node(0))}static atStart(e){return zl(e,e,0,0,1)||new Un(e)}static atEnd(e){return zl(e,e,e.content.size,e.childCount,-1)||new Un(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=ng[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in ng)throw new RangeError("Duplicate use of selection JSON ID "+e);return ng[e]=n,n.prototype.jsonID=e,n}getBookmark(){return ce.between(this.$anchor,this.$head).getBookmark()}}we.prototype.visible=!0;class S2{constructor(e,n){this.$from=e,this.$to=n}}let k7=!1;function M7(t){!k7&&!t.parent.inlineContent&&(k7=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class ce extends we{constructor(e,n=e){M7(e),M7(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return we.near(r);let i=e.resolve(n.map(this.anchor));return new ce(i.parent.inlineContent?i:r,r)}replace(e,n=le.empty){if(super.replace(e,n),n==le.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof ce&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Uh(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ce(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=we.findFrom(n,r,!0)||we.findFrom(n,-r,!0);if(o)n=o.$head;else return we.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(we.findFrom(e,-r,!0)||we.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new ce(e,n)}}we.jsonID("text",ce);class Uh{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Uh(e.map(this.anchor),e.map(this.head))}resolve(e){return ce.between(e.resolve(this.anchor),e.resolve(this.head))}}class me extends we{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?we.near(o):new me(o)}content(){return new le(Q.from(this.node),0,0)}eq(e){return e instanceof me&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new T2(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new me(e.resolve(n.anchor))}static create(e,n){return new me(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}me.prototype.visible=!1;we.jsonID("node",me);class T2{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Uh(r,r):new T2(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&me.isSelectable(r)?new me(n):we.near(n)}}class Un extends we{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=le.empty){if(n==le.empty){e.delete(0,e.doc.content.size);let r=we.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Un(e)}map(e){return new Un(e)}eq(e){return e instanceof Un}getBookmark(){return uA}}we.jsonID("all",Un);const uA={map(){return this},resolve(t){return new Un(t)}};function zl(t,e,n,r,i,o=!1){if(e.inlineContent)return ce.create(t,n);for(let l=r-(i>0?0:1);i>0?l<e.childCount:l>=0;l+=i){let c=e.child(l);if(c.isAtom){if(!o&&me.isSelectable(c))return me.create(t,n-(i<0?c.nodeSize:0))}else{let f=zl(t,c,n+i,i<0?c.childCount:0,i,o);if(f)return f}n+=c.nodeSize*i}return null}function E7(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Yt||i instanceof Wt))return;let o=t.mapping.maps[r],l;o.forEach((c,f,d,h)=>{l==null&&(l=h)}),t.setSelection(we.near(t.doc.resolve(l),n))}const A7=1,$f=2,R7=4;let fA=class extends x2{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|A7)&~$f,this.storedMarks=null,this}get selectionSet(){return(this.updated&A7)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=$f,this}ensureMarks(e){return it.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&$f)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~$f,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||it.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let l=this.doc.resolve(n);o=r==n?l.marks():l.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,o)),this.selection.empty||this.setSelection(we.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=R7,this}get scrolledIntoView(){return(this.updated&R7)>0}};function N7(t,e){return!e||!t?t:t.bind(e)}class Mc{constructor(e,n,r){this.name=e,this.init=N7(n.init,r),this.apply=N7(n.apply,r)}}const dA=[new Mc("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Mc("selection",{init(t,e){return t.selection||we.atStart(e.doc)},apply(t){return t.selection}}),new Mc("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Mc("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class rg{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=dA.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Mc(r.key,r.spec.state,r))})}}class Ul{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let l=0;l<this.config.plugins.length;l++){let c=this.config.plugins[l];if(c.spec.appendTransaction){let f=i?i[l].n:0,d=i?i[l].state:this,h=f<n.length&&c.spec.appendTransaction.call(c,f?n.slice(f):n,d,r);if(h&&r.filterTransaction(h,l)){if(h.setMeta("appendedTransaction",e),!i){i=[];for(let m=0;m<this.config.plugins.length;m++)i.push(m<l?{state:r,n:n.length}:{state:this,n:0})}n.push(h),r=r.applyInner(h),o=!0}i&&(i[l]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Ul(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new fA(this)}static create(e){let n=new rg(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Ul(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new rg(this.schema,e.plugins),r=n.fields,i=new Ul(n);for(let o=0;o<r.length;o++){let l=r[o].name;i[l]=this.hasOwnProperty(l)?this[l]:r[o].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new rg(e.schema,e.plugins),o=new Ul(i);return i.fields.forEach(l=>{if(l.name=="doc")o.doc=jn.fromJSON(e.schema,n.doc);else if(l.name=="selection")o.selection=we.fromJSON(o.doc,n.selection);else if(l.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let c in r){let f=r[c],d=f.spec.state;if(f.key==l.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(n,c)){o[l.name]=d.fromJSON.call(f,e,n[c],o);return}}o[l.name]=l.init(e,o)}}),o}}function h5(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=h5(i,e,{})),n[r]=i}return n}class Be{constructor(e){this.spec=e,this.props={},e.props&&h5(e.props,this,this.props),this.key=e.key?e.key.key:p5("plugin")}getState(e){return e[this.key]}}const ig=Object.create(null);function p5(t){return t in ig?t+"$"+ ++ig[t]:(ig[t]=0,t+"$")}class Pe{constructor(e="key"){this.key=p5(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const k2=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function m5(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const g5=(t,e,n)=>{let r=m5(t,n);if(!r)return!1;let i=M2(r);if(!i){let l=r.blockRange(),c=l&&ha(l);return c==null?!1:(e&&e(t.tr.lift(l,c).scrollIntoView()),!0)}let o=i.nodeBefore;if(k5(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Jl(o,"end")||me.isSelectable(o)))for(let l=r.depth;;l--){let c=jh(t.doc,r.before(l),r.after(l),le.empty);if(c&&c.slice.size<c.to-c.from){if(e){let f=t.tr.step(c);f.setSelection(Jl(o,"end")?we.findFrom(f.doc.resolve(f.mapping.map(i.pos,-1)),-1):me.create(f.doc,i.pos-o.nodeSize)),e(f.scrollIntoView())}return!0}if(l==1||r.node(l-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},hA=(t,e,n)=>{let r=m5(t,n);if(!r)return!1;let i=M2(r);return i?y5(t,i,e):!1},pA=(t,e,n)=>{let r=b5(t,n);if(!r)return!1;let i=E2(r);return i?y5(t,i,e):!1};function y5(t,e,n){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let h=i.lastChild;if(!h)return!1;i=h}let l=e.nodeAfter,c=l,f=e.pos+1;for(;!c.isTextblock;f++){if(c.type.spec.isolating)return!1;let h=c.firstChild;if(!h)return!1;c=h}let d=jh(t.doc,o,f,le.empty);if(!d||d.from!=o||d instanceof Yt&&d.slice.size>=f-o)return!1;if(n){let h=t.tr.step(d);h.setSelection(ce.create(h.doc,o)),n(h.scrollIntoView())}return!0}function Jl(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const v5=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=M2(r)}let l=o&&o.nodeBefore;return!l||!me.isSelectable(l)?!1:(e&&e(t.tr.setSelection(me.create(t.doc,o.pos-l.nodeSize)).scrollIntoView()),!0)};function M2(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function b5(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const C5=(t,e,n)=>{let r=b5(t,n);if(!r)return!1;let i=E2(r);if(!i)return!1;let o=i.nodeAfter;if(k5(t,i,e,1))return!0;if(r.parent.content.size==0&&(Jl(o,"start")||me.isSelectable(o))){let l=jh(t.doc,r.before(),r.after(),le.empty);if(l&&l.slice.size<l.to-l.from){if(e){let c=t.tr.step(l);c.setSelection(Jl(o,"start")?we.findFrom(c.doc.resolve(c.mapping.map(i.pos)),1):me.create(c.doc,c.mapping.map(i.pos))),e(c.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},w5=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=E2(r)}let l=o&&o.nodeAfter;return!l||!me.isSelectable(l)?!1:(e&&e(t.tr.setSelection(me.create(t.doc,o.pos)).scrollIntoView()),!0)};function E2(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const mA=(t,e)=>{let n=t.selection,r=n instanceof me,i;if(r){if(n.node.isTextblock||!Fo(t.doc,n.from))return!1;i=n.from}else if(i=Vh(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(me.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},gA=(t,e)=>{let n=t.selection,r;if(n instanceof me){if(n.node.isTextblock||!Fo(t.doc,n.to))return!1;r=n.to}else if(r=Vh(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},yA=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&ha(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},x5=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function A2(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const vA=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),l=A2(i.contentMatchAt(o));if(!l||!i.canReplaceWith(o,o,l))return!1;if(e){let c=n.after(),f=t.tr.replaceWith(c,c,l.createAndFill());f.setSelection(we.near(f.doc.resolve(c),1)),e(f.scrollIntoView())}return!0},S5=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Un||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=A2(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let l=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,c=t.tr.insert(l,o.createAndFill());c.setSelection(ce.create(c.doc,l+1)),e(c.scrollIntoView())}return!0},T5=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(Li(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&ha(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function bA(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof me&&e.selection.node.isBlock)return!r.parentOffset||!Li(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],l,c,f=!1,d=!1;for(let y=r.depth;;y--)if(r.node(y).isBlock){f=r.end(y)==r.pos+(r.depth-y),d=r.start(y)==r.pos-(r.depth-y),c=A2(r.node(y-1).contentMatchAt(r.indexAfter(y-1))),o.unshift(f&&c?{type:c}:null),l=y;break}else{if(y==1)return!1;o.unshift(null)}let h=e.tr;(e.selection instanceof ce||e.selection instanceof Un)&&h.deleteSelection();let m=h.mapping.map(r.pos),g=Li(h.doc,m,o.length,o);if(g||(o[0]=c?{type:c}:null,g=Li(h.doc,m,o.length,o)),!g)return!1;if(h.split(m,o.length,o),!f&&d&&r.node(l).type!=c){let y=h.mapping.map(r.before(l)),b=h.doc.resolve(y);c&&r.node(l-1).canReplaceWith(b.index(),b.index()+1,c)&&h.setNodeMarkup(h.mapping.map(r.before(l)),c)}return n&&n(h.scrollIntoView()),!0}}const CA=bA(),wA=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(me.create(t.doc,i))),!0)};function xA(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||Fo(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function k5(t,e,n,r){let i=e.nodeBefore,o=e.nodeAfter,l,c,f=i.type.spec.isolating||o.type.spec.isolating;if(!f&&xA(t,e,n))return!0;let d=!f&&e.parent.canReplace(e.index(),e.index()+1);if(d&&(l=(c=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&c.matchType(l[0]||o.type).validEnd){if(n){let y=e.pos+o.nodeSize,b=Q.empty;for(let k=l.length-1;k>=0;k--)b=Q.from(l[k].create(null,b));b=Q.from(i.copy(b));let w=t.tr.step(new Wt(e.pos-1,y,e.pos,y,new le(b,1,0),l.length,!0)),x=w.doc.resolve(y+2*l.length);x.nodeAfter&&x.nodeAfter.type==i.type&&Fo(w.doc,x.pos)&&w.join(x.pos),n(w.scrollIntoView())}return!0}let h=o.type.spec.isolating||r>0&&f?null:we.findFrom(e,1),m=h&&h.$from.blockRange(h.$to),g=m&&ha(m);if(g!=null&&g>=e.depth)return n&&n(t.tr.lift(m,g).scrollIntoView()),!0;if(d&&Jl(o,"start",!0)&&Jl(i,"end")){let y=i,b=[];for(;b.push(y),!y.isTextblock;)y=y.lastChild;let w=o,x=1;for(;!w.isTextblock;w=w.firstChild)x++;if(y.canReplace(y.childCount,y.childCount,w.content)){if(n){let k=Q.empty;for(let N=b.length-1;N>=0;N--)k=Q.from(b[N].copy(k));let A=t.tr.step(new Wt(e.pos-b.length,e.pos+o.nodeSize,e.pos+x,e.pos+o.nodeSize-x,new le(k,b.length,0),0,!0));n(A.scrollIntoView())}return!0}}return!1}function M5(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(ce.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const SA=M5(-1),TA=M5(1);function kA(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,l=i.blockRange(o),c=l&&w2(l,t,e);return c?(r&&r(n.tr.wrap(l,c).scrollIntoView()),!0):!1}}function O7(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:l},$to:{pos:c}}=n.selection.ranges[o];n.doc.nodesBetween(l,c,(f,d)=>{if(i)return!1;if(!(!f.isTextblock||f.hasMarkup(t,e)))if(f.type==t)i=!0;else{let h=n.doc.resolve(d),m=h.index();i=h.parent.canReplaceWith(m,m+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let l=0;l<n.selection.ranges.length;l++){let{$from:{pos:c},$to:{pos:f}}=n.selection.ranges[l];o.setBlockType(c,f,t,e)}r(o.scrollIntoView())}return!0}}function R2(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}R2(k2,g5,v5);R2(k2,C5,w5);R2(x5,S5,T5,CA);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function MA(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,l=i.blockRange(o);if(!l)return!1;let c=r?n.tr:null;return EA(c,l,t,e)?(r&&r(c.scrollIntoView()),!0):!1}}function EA(t,e,n,r=null){let i=!1,o=e,l=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let f=l.resolve(e.start-2);o=new Fc(f,f,e.depth),e.endIndex<e.parent.childCount&&(e=new Fc(e.$from,l.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let c=w2(o,n,r,e);return c?(t&&AA(t,e,c,i,n),!0):!1}function AA(t,e,n,r,i){let o=Q.empty;for(let h=n.length-1;h>=0;h--)o=Q.from(n[h].type.create(n[h].attrs,o));t.step(new Wt(e.start-(r?2:0),e.end,e.start,e.end,new le(o,0,0),n.length,!0));let l=0;for(let h=0;h<n.length;h++)n[h].type==i&&(l=h+1);let c=n.length-l,f=e.start+n.length-(r?2:0),d=e.parent;for(let h=e.startIndex,m=e.endIndex,g=!0;h<m;h++,g=!1)!g&&Li(t.doc,f,c)&&(t.split(f,c),f+=2*c),f+=d.child(h).nodeSize;return t}function RA(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,l=>l.childCount>0&&l.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?NA(e,n,t,o):OA(e,n,o):!0:!1}}function NA(t,e,n,r){let i=t.tr,o=r.end,l=r.$to.end(r.depth);o<l&&(i.step(new Wt(o-1,l,o,l,new le(Q.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Fc(i.doc.resolve(r.$from.pos),i.doc.resolve(l),r.depth));const c=ha(r);if(c==null)return!1;i.lift(r,c);let f=i.doc.resolve(i.mapping.map(o,-1)-1);return Fo(i.doc,f.pos)&&f.nodeBefore.type==f.nodeAfter.type&&i.join(f.pos),e(i.scrollIntoView()),!0}function OA(t,e,n){let r=t.tr,i=n.parent;for(let y=n.end,b=n.endIndex-1,w=n.startIndex;b>w;b--)y-=i.child(b).nodeSize,r.delete(y-1,y+1);let o=r.doc.resolve(n.start),l=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let c=n.startIndex==0,f=n.endIndex==i.childCount,d=o.node(-1),h=o.index(-1);if(!d.canReplace(h+(c?0:1),h+1,l.content.append(f?Q.empty:Q.from(i))))return!1;let m=o.pos,g=m+l.nodeSize;return r.step(new Wt(m-(c?1:0),g+(f?1:0),m+1,g-1,new le((c?Q.empty:Q.from(i.copy(Q.empty))).append(f?Q.empty:Q.from(i.copy(Q.empty))),c?0:1,f?0:1),c?0:1)),e(r.scrollIntoView()),!0}function DA(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,d=>d.childCount>0&&d.firstChild.type==t);if(!o)return!1;let l=o.startIndex;if(l==0)return!1;let c=o.parent,f=c.child(l-1);if(f.type!=t)return!1;if(n){let d=f.lastChild&&f.lastChild.type==c.type,h=Q.from(d?t.create():null),m=new le(Q.from(t.create(null,Q.from(c.type.create(null,h)))),d?3:1,0),g=o.start,y=o.end;n(e.tr.step(new Wt(g-(d?3:1),y,g,y,m,1,!0)).scrollIntoView())}return!0}}const ln=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Ql=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let a0=null;const Ri=function(t,e,n){let r=a0||(a0=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},LA=function(){a0=null},Ds=function(t,e,n,r){return n&&(D7(t,e,n,r,-1)||D7(t,e,n,r,1))},_A=/^(img|br|input|textarea|hr)$/i;function D7(t,e,n,r,i){for(var o;;){if(t==n&&e==r)return!0;if(e==(i<0?0:br(t))){let l=t.parentNode;if(!l||l.nodeType!=1||hu(t)||_A.test(t.nodeName)||t.contentEditable=="false")return!1;e=ln(t)+(i<0?0:1),t=l}else if(t.nodeType==1){let l=t.childNodes[e+(i<0?-1:0)];if(l.nodeType==1&&l.contentEditable=="false")if(!((o=l.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=i;else return!1;else t=l,e=i<0?br(t):0}else return!1}}function br(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function HA(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=br(t)}else if(t.parentNode&&!hu(t))e=ln(t),t=t.parentNode;else return null}}function IA(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!hu(t))e=ln(t)+1,t=t.parentNode;else return null}}function zA(t,e,n){for(let r=e==0,i=e==br(t);r||i;){if(t==n)return!0;let o=ln(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==br(t)}}function hu(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Ph=function(t){return t.focusNode&&Ds(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function vs(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function BA(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function VA(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(br(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(br(r.startContainer),r.startOffset)}}}const ti=typeof navigator<"u"?navigator:null,L7=typeof document<"u"?document:null,$o=ti&&ti.userAgent||"",c0=/Edge\/(\d+)/.exec($o),E5=/MSIE \d/.exec($o),u0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec($o),Pn=!!(E5||u0||c0),Do=E5?document.documentMode:u0?+u0[1]:c0?+c0[1]:0,Ir=!Pn&&/gecko\/(\d+)/i.test($o);Ir&&+(/Firefox\/(\d+)/.exec($o)||[0,0])[1];const f0=!Pn&&/Chrome\/(\d+)/.exec($o),gn=!!f0,A5=f0?+f0[1]:0,Mn=!Pn&&!!ti&&/Apple Computer/.test(ti.vendor),ea=Mn&&(/Mobile\/\w+/.test($o)||!!ti&&ti.maxTouchPoints>2),vr=ea||(ti?/Mac/.test(ti.platform):!1),jA=ti?/Win/.test(ti.platform):!1,Oi=/Android \d/.test($o),pu=!!L7&&"webkitFontSmoothing"in L7.documentElement.style,UA=pu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function PA(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Si(t,e){return typeof t=="number"?t:t[e]}function FA(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function _7(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let l=n||t.dom;l;){if(l.nodeType!=1){l=Ql(l);continue}let c=l,f=c==o.body,d=f?PA(o):FA(c),h=0,m=0;if(e.top<d.top+Si(r,"top")?m=-(d.top-e.top+Si(i,"top")):e.bottom>d.bottom-Si(r,"bottom")&&(m=e.bottom-e.top>d.bottom-d.top?e.top+Si(i,"top")-d.top:e.bottom-d.bottom+Si(i,"bottom")),e.left<d.left+Si(r,"left")?h=-(d.left-e.left+Si(i,"left")):e.right>d.right-Si(r,"right")&&(h=e.right-d.right+Si(i,"right")),h||m)if(f)o.defaultView.scrollBy(h,m);else{let y=c.scrollLeft,b=c.scrollTop;m&&(c.scrollTop+=m),h&&(c.scrollLeft+=h);let w=c.scrollLeft-y,x=c.scrollTop-b;e={left:e.left-w,top:e.top-x,right:e.right-w,bottom:e.bottom-x}}let g=f?"fixed":getComputedStyle(l).position;if(/^(fixed|sticky)$/.test(g))break;l=g=="absolute"?l.offsetParent:Ql(l)}}function $A(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,l=n+1;l<Math.min(innerHeight,e.bottom);l+=5){let c=t.root.elementFromPoint(o,l);if(!c||c==t.dom||!t.dom.contains(c))continue;let f=c.getBoundingClientRect();if(f.top>=n-20){r=c,i=f.top;break}}return{refDOM:r,refTop:i,stack:R5(t.dom)}}function R5(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Ql(r));return e}function qA({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;N5(n,r==0?0:r-e)}function N5(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let Ll=null;function ZA(t){if(t.setActive)return t.setActive();if(Ll)return t.focus(Ll);let e=R5(t);t.focus(Ll==null?{get preventScroll(){return Ll={preventScroll:!0},!0}}:void 0),Ll||(Ll=!1,N5(e,0))}function O5(t,e){let n,r=2e8,i,o=0,l=e.top,c=e.top,f,d;for(let h=t.firstChild,m=0;h;h=h.nextSibling,m++){let g;if(h.nodeType==1)g=h.getClientRects();else if(h.nodeType==3)g=Ri(h).getClientRects();else continue;for(let y=0;y<g.length;y++){let b=g[y];if(b.top<=l&&b.bottom>=c){l=Math.max(b.bottom,l),c=Math.min(b.top,c);let w=b.left>e.left?b.left-e.left:b.right<e.left?e.left-b.right:0;if(w<r){n=h,r=w,i=w&&n.nodeType==3?{left:b.right<e.left?b.right:b.left,top:e.top}:e,h.nodeType==1&&w&&(o=m+(e.left>=(b.left+b.right)/2?1:0));continue}}else b.top>e.top&&!f&&b.left<=e.left&&b.right>=e.left&&(f=h,d={left:Math.max(b.left,Math.min(b.right,e.left)),top:b.top});!n&&(e.left>=b.right&&e.top>=b.top||e.left>=b.left&&e.top>=b.bottom)&&(o=m+1)}}return!n&&f&&(n=f,i=d,r=0),n&&n.nodeType==3?KA(n,i):!n||r&&n.nodeType==1?{node:t,offset:o}:O5(n,i)}function KA(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let o=go(r,1);if(o.top!=o.bottom&&N2(e,o))return{node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function N2(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function GA(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function YA(t,e,n){let{node:r,offset:i}=O5(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let l=r.getBoundingClientRect();o=l.left!=l.right&&n.left>(l.left+l.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function WA(t,e,n,r){let i=-1;for(let o=e,l=!1;o!=t.dom;){let c=t.docView.nearestDesc(o,!0),f;if(!c)return null;if(c.dom.nodeType==1&&(c.node.isBlock&&c.parent||!c.contentDOM)&&((f=c.dom.getBoundingClientRect()).width||f.height)&&(c.node.isBlock&&c.parent&&(!l&&f.left>r.left||f.top>r.top?i=c.posBefore:(!l&&f.right<r.left||f.bottom<r.top)&&(i=c.posAfter),l=!0),!c.contentDOM&&i<0&&!c.node.isText))return(c.node.isBlock?r.top<(f.top+f.bottom)/2:r.left<(f.left+f.right)/2)?c.posBefore:c.posAfter;o=c.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function D5(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let l=t.childNodes[o];if(l.nodeType==1){let c=l.getClientRects();for(let f=0;f<c.length;f++){let d=c[f];if(N2(e,d))return D5(l,e,d)}}if((o=(o+1)%r)==i)break}return t}function XA(t,e){let n=t.dom.ownerDocument,r,i=0,o=VA(n,e.left,e.top);o&&({node:r,offset:i}=o);let l=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),c;if(!l||!t.dom.contains(l.nodeType!=1?l.parentNode:l)){let d=t.dom.getBoundingClientRect();if(!N2(e,d)||(l=D5(t.dom,e,d),!l))return null}if(Mn)for(let d=l;r&&d;d=Ql(d))d.draggable&&(r=void 0);if(l=GA(l,e),r){if(Ir&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let h=r.childNodes[i],m;h.nodeName=="IMG"&&(m=h.getBoundingClientRect()).right<=e.left&&m.bottom>e.top&&i++}let d;pu&&i&&r.nodeType==1&&(d=r.childNodes[i-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?c=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(c=WA(t,r,i,e))}c==null&&(c=YA(t,l,e));let f=t.docView.nearestDesc(l,!0);return{pos:c,inside:f?f.posAtStart-f.border:-1}}function H7(t){return t.top<t.bottom||t.left<t.right}function go(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(H7(r))return r}return Array.prototype.find.call(n,H7)||t.getBoundingClientRect()}const JA=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function L5(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),l=pu||Ir;if(r.nodeType==3)if(l&&(JA.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let f=go(Ri(r,i,i),n);if(Ir&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let d=go(Ri(r,i-1,i-1),-1);if(d.top==f.top){let h=go(Ri(r,i,i+1),-1);if(h.top!=f.top)return vc(h,h.left<d.left)}}return f}else{let f=i,d=i,h=n<0?1:-1;return n<0&&!i?(d++,h=-1):n>=0&&i==r.nodeValue.length?(f--,h=1):n<0?f--:d++,vc(go(Ri(r,f,d),h),h<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==br(r))){let f=r.childNodes[i-1];if(f.nodeType==1)return og(f.getBoundingClientRect(),!1)}if(o==null&&i<br(r)){let f=r.childNodes[i];if(f.nodeType==1)return og(f.getBoundingClientRect(),!0)}return og(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==br(r))){let f=r.childNodes[i-1],d=f.nodeType==3?Ri(f,br(f)-(l?0:1)):f.nodeType==1&&(f.nodeName!="BR"||!f.nextSibling)?f:null;if(d)return vc(go(d,1),!1)}if(o==null&&i<br(r)){let f=r.childNodes[i];for(;f.pmViewDesc&&f.pmViewDesc.ignoreForCoords;)f=f.nextSibling;let d=f?f.nodeType==3?Ri(f,0,l?0:1):f.nodeType==1?f:null:null;if(d)return vc(go(d,-1),!0)}return vc(go(r.nodeType==3?Ri(r):r,-n),n>=0)}function vc(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function og(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function _5(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function QA(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return _5(t,e,()=>{let{node:o}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let c=t.docView.nearestDesc(o,!0);if(!c)break;if(c.node.isBlock){o=c.contentDOM||c.dom;break}o=c.dom.parentNode}let l=L5(t,i.pos,1);for(let c=o.firstChild;c;c=c.nextSibling){let f;if(c.nodeType==1)f=c.getClientRects();else if(c.nodeType==3)f=Ri(c,0,c.nodeValue.length).getClientRects();else continue;for(let d=0;d<f.length;d++){let h=f[d];if(h.bottom>h.top+1&&(n=="up"?l.top-h.top>(h.bottom-l.top)*2:h.bottom-l.bottom>(l.bottom-h.top)*2))return!1}}return!0})}const eR=/[\u0590-\u08ac]/;function tR(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,l=i==r.parent.content.size,c=t.domSelection();return c?!eR.test(r.parent.textContent)||!c.modify?n=="left"||n=="backward"?o:l:_5(t,e,()=>{let{focusNode:f,focusOffset:d,anchorNode:h,anchorOffset:m}=t.domSelectionRange(),g=c.caretBidiLevel;c.modify("move",n,"character");let y=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:b,focusOffset:w}=t.domSelectionRange(),x=b&&!y.contains(b.nodeType==1?b:b.parentNode)||f==b&&d==w;try{c.collapse(h,m),f&&(f!=h||d!=m)&&c.extend&&c.extend(f,d)}catch{}return g!=null&&(c.caretBidiLevel=g),x}):r.pos==r.start()||r.pos==r.end()}let I7=null,z7=null,B7=!1;function nR(t,e,n){return I7==e&&z7==n?B7:(I7=e,z7=n,B7=n=="up"||n=="down"?QA(t,e,n):tR(t,e,n))}const wr=0,V7=1,Cs=2,ni=3;class mu{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=wr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,l;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(l)+l.size:this.posAtStart}else{let o,l;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(l):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>ln(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),l;if(o&&(!n||o.node))if(r&&(l=o.nodeDOM)&&!(l.nodeType==1?l.contains(e.nodeType==1?e:e.parentNode):l==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)for(let l=0;l<i.children.length;l++){let c=i.children[l];if(c.size){i=c;break}}return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let l=this.children[r],c=o+l.size;if(c>e||l instanceof I5){i=e-o;break}o=c}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof H5&&o.side>=0;r--);if(n<=0){let o,l=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,l=!1);return o&&n&&l&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?ln(o.dom)+1:0}}else{let o,l=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,l=!1);return o&&l&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?ln(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let l=r,c=0;;c++){let f=this.children[c],d=l+f.size;if(i==-1&&e<=d){let h=l+f.border;if(e>=h&&n<=d-f.border&&f.node&&f.contentDOM&&this.contentDOM.contains(f.contentDOM))return f.parseRange(e,n,h);e=l;for(let m=c;m>0;m--){let g=this.children[m-1];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(1)){i=ln(g.dom)+1;break}e-=g.size}i==-1&&(i=0)}if(i>-1&&(d>n||c==this.children.length-1)){n=d;for(let h=c+1;h<this.children.length;h++){let m=this.children[h];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(-1)){o=ln(m.dom);break}n+=m.size}o==-1&&(o=this.contentDOM.childNodes.length);break}l=d}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let o=Math.min(e,n),l=Math.max(e,n);for(let y=0,b=0;y<this.children.length;y++){let w=this.children[y],x=b+w.size;if(o>b&&l<x)return w.setSelection(e-b-w.border,n-b-w.border,r,i);b=x}let c=this.domFromPos(e,e?-1:1),f=n==e?c:this.domFromPos(n,n?-1:1),d=r.root.getSelection(),h=r.domSelectionRange(),m=!1;if((Ir||Mn)&&e==n){let{node:y,offset:b}=c;if(y.nodeType==3){if(m=!!(b&&y.nodeValue[b-1]==`
`),m&&b==y.nodeValue.length)for(let w=y,x;w;w=w.parentNode){if(x=w.nextSibling){x.nodeName=="BR"&&(c=f={node:x.parentNode,offset:ln(x)+1});break}let k=w.pmViewDesc;if(k&&k.node&&k.node.isBlock)break}}else{let w=y.childNodes[b-1];m=w&&(w.nodeName=="BR"||w.contentEditable=="false")}}if(Ir&&h.focusNode&&h.focusNode!=f.node&&h.focusNode.nodeType==1){let y=h.focusNode.childNodes[h.focusOffset];y&&y.contentEditable=="false"&&(i=!0)}if(!(i||m&&Mn)&&Ds(c.node,c.offset,h.anchorNode,h.anchorOffset)&&Ds(f.node,f.offset,h.focusNode,h.focusOffset))return;let g=!1;if((d.extend||e==n)&&!m){d.collapse(c.node,c.offset);try{e!=n&&d.extend(f.node,f.offset),g=!0}catch{}}if(!g){if(e>n){let b=c;c=f,f=b}let y=document.createRange();y.setEnd(f.node,f.offset),y.setStart(c.node,c.offset),d.removeAllRanges(),d.addRange(y)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],l=r+o.size;if(r==l?e<=l&&n>=r:e<l&&n>r){let c=r+o.border,f=l-o.border;if(e>=c&&n<=f){this.dirty=e==r||n==l?Cs:V7,e==c&&n==f&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=ni:o.markDirty(e-c,n-c);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Cs:ni}r=l}this.dirty=Cs}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Cs:V7;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class H5 extends mu{constructor(e,n,r,i){let o,l=n.type.toDOM;if(typeof l=="function"&&(l=l(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(l.nodeType!=1){let c=document.createElement("span");c.appendChild(l),l=c}l.contentEditable="false",l.classList.add("ProseMirror-widget")}super(e,[],l,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==wr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class rR extends mu{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Ls extends mu{constructor(e,n,r,i,o){super(e,[],r,i),this.mark=n,this.spec=o}static create(e,n,r,i){let o=i.nodeViews[n.type.name],l=o&&o(n,i,r);return(!l||!l.dom)&&(l=Ps.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Ls(e,n,l.dom,l.contentDOM||l.dom,l)}parseRule(){return this.dirty&ni||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=ni&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=wr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=wr}}slice(e,n,r){let i=Ls.create(this.parent,this.mark,!0,r),o=this.children,l=this.size;n<l&&(o=h0(o,n,l,r)),e>0&&(o=h0(o,0,e,r));for(let c=0;c<o.length;c++)o[c].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Lo extends mu{constructor(e,n,r,i,o,l,c,f,d){super(e,[],o,l),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=c}static create(e,n,r,i,o,l){let c=o.nodeViews[n.type.name],f,d=c&&c(n,o,()=>{if(!f)return l;if(f.parent)return f.parent.posBeforeChild(f)},r,i),h=d&&d.dom,m=d&&d.contentDOM;if(n.isText){if(!h)h=document.createTextNode(n.text);else if(h.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else h||({dom:h,contentDOM:m}=Ps.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!m&&!n.isText&&h.nodeName!="BR"&&(h.hasAttribute("contenteditable")||(h.contentEditable="false"),n.type.spec.draggable&&(h.draggable=!0));let g=h;return h=V5(h,r,n),d?f=new iR(e,n,r,i,h,m||null,g,d,o,l+1):n.isText?new Fh(e,n,r,i,h,g,o):new Lo(e,n,r,i,h,m||null,g,o,l+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Q.empty)}return e}matchesNode(e,n,r){return this.dirty==wr&&e.eq(this.node)&&_d(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,o=e.composing?this.localCompositionInfo(e,n):null,l=o&&o.pos>-1?o:null,c=o&&o.pos<0,f=new sR(this,l&&l.node,e);cR(this.node,this.innerDeco,(d,h,m)=>{d.spec.marks?f.syncToMarks(d.spec.marks,r,e):d.type.side>=0&&!m&&f.syncToMarks(h==this.node.childCount?it.none:this.node.child(h).marks,r,e),f.placeWidget(d,e,i)},(d,h,m,g)=>{f.syncToMarks(d.marks,r,e);let y;f.findNodeMatch(d,h,m,g)||c&&e.state.selection.from>i&&e.state.selection.to<i+d.nodeSize&&(y=f.findIndexWithChild(o.node))>-1&&f.updateNodeAt(d,h,m,y,e)||f.updateNextNode(d,h,m,e,g,i)||f.addNode(d,h,m,e,i),i+=d.nodeSize}),f.syncToMarks([],r,e),this.node.isTextblock&&f.addTextblockHacks(),f.destroyRest(),(f.changed||this.dirty==Cs)&&(l&&this.protectLocalComposition(e,l),z5(this.contentDOM,this.children,e),ea&&uR(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof ce)||r<n||i>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let l=o.nodeValue,c=fR(this.node.content,l,r-n,i-n);return c<0?null:{node:o,pos:c,text:l}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let l=new rR(this,o,n,i);e.input.compositionNodes.push(l),this.children=h0(this.children,r,r+i.length,e,l)}update(e,n,r,i){return this.dirty==ni||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=wr}updateOuterDeco(e){if(_d(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=B5(this.dom,this.nodeDOM,d0(this.outerDeco,this.node,n),d0(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function j7(t,e,n,r,i){V5(r,e,t);let o=new Lo(void 0,t,e,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class Fh extends Lo{constructor(e,n,r,i,o,l,c){super(e,n,r,i,o,null,l,c,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==ni||this.dirty!=wr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=wr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=wr,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),o=document.createTextNode(i.text);return new Fh(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=ni)}get domAtom(){return!1}isText(e){return this.node.text==e}}class I5 extends mu{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==wr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class iR extends Lo{constructor(e,n,r,i,o,l,c,f,d,h){super(e,n,r,i,o,l,c,d,h),this.spec=f}update(e,n,r,i){if(this.dirty==ni)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function z5(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let l=e[o],c=l.dom;if(c.parentNode==t){for(;c!=r;)r=U7(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(c,r);if(l instanceof Ls){let f=r?r.previousSibling:t.lastChild;z5(l.contentDOM,l.children,n),r=f?f.nextSibling:t.firstChild}}for(;r;)r=U7(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Oc=function(t){t&&(this.nodeName=t)};Oc.prototype=Object.create(null);const ws=[new Oc];function d0(t,e,n){if(t.length==0)return ws;let r=n?ws[0]:new Oc,i=[r];for(let o=0;o<t.length;o++){let l=t[o].type.attrs;if(l){l.nodeName&&i.push(r=new Oc(l.nodeName));for(let c in l){let f=l[c];f!=null&&(n&&i.length==1&&i.push(r=new Oc(e.isInline?"span":"div")),c=="class"?r.class=(r.class?r.class+" ":"")+f:c=="style"?r.style=(r.style?r.style+";":"")+f:c!="nodeName"&&(r[c]=f))}}}return i}function B5(t,e,n,r){if(n==ws&&r==ws)return e;let i=e;for(let o=0;o<r.length;o++){let l=r[o],c=n[o];if(o){let f;c&&c.nodeName==l.nodeName&&i!=t&&(f=i.parentNode)&&f.nodeName.toLowerCase()==l.nodeName||(f=document.createElement(l.nodeName),f.pmIsDeco=!0,f.appendChild(i),c=ws[0]),i=f}oR(i,c||ws[0],l)}return i}function oR(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.add(i[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function V5(t,e,n){return B5(t,t,ws,d0(e,n,t.nodeType!=1))}function _d(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function U7(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class sR{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=lR(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,o=this.stack.length>>1,l=Math.min(o,e.length);for(;i<l&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=wr,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let c=-1;for(let f=this.index;f<Math.min(this.index+3,this.top.children.length);f++){let d=this.top.children[f];if(d.matchesMark(e[o])&&!this.isLocked(d.dom)){c=f;break}}if(c>-1)c>this.index&&(this.changed=!0,this.destroyBetween(this.index,c)),this.top=this.top.children[this.index];else{let f=Ls.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,f),this.top=f,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,i){let o=-1,l;if(i>=this.preMatch.index&&(l=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&l.matchesNode(e,n,r))o=this.top.children.indexOf(l,this.index);else for(let c=this.index,f=Math.min(this.top.children.length,c+5);c<f;c++){let d=this.top.children[c];if(d.matchesNode(e,n,r)&&!this.preMatch.matched.has(d)){o=c;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,i,o){let l=this.top.children[i];return l.dirty==ni&&l.dom==l.contentDOM&&(l.dirty=Cs),l.update(e,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,o,l){for(let c=this.index;c<this.top.children.length;c++){let f=this.top.children[c];if(f instanceof Lo){let d=this.preMatch.matched.get(f);if(d!=null&&d!=o)return!1;let h=f.dom,m,g=this.isLocked(h)&&!(e.isText&&f.node&&f.node.isText&&f.nodeDOM.nodeValue==e.text&&f.dirty!=ni&&_d(n,f.outerDeco));if(!g&&f.update(e,n,r,i))return this.destroyBetween(this.index,c),f.dom!=h&&(this.changed=!0),this.index++,!0;if(!g&&(m=this.recreateWrapper(f,e,n,r,i,l)))return this.destroyBetween(this.index,c),this.top.children[this.index]=m,m.contentDOM&&(m.dirty=Cs,m.updateChildren(i,l+1),m.dirty=wr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,o,l){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!_d(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let c=Lo.create(this.top,n,r,i,o,l);if(c.contentDOM){c.children=e.children,e.children=[];for(let f of c.children)f.parent=c}return e.destroy(),c}addNode(e,n,r,i,o){let l=Lo.create(this.top,e,n,r,i,o);l.contentDOM&&l.updateChildren(i,o+1),this.top.children.splice(this.index++,0,l),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new H5(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Ls;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Fh)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Mn||gn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new I5(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function lR(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,l=[];e:for(;i>0;){let c;for(;;)if(r){let d=n.children[r-1];if(d instanceof Ls)n=d,r=d.children.length;else{c=d,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let f=c.node;if(f){if(f!=t.child(i-1))break;--i,o.set(c,i),l.push(c)}}return{index:i,matched:o,matches:l.reverse()}}function aR(t,e){return t.type.side-e.type.side}function cR(t,e,n,r){let i=e.locals(t),o=0;if(i.length==0){for(let d=0;d<t.childCount;d++){let h=t.child(d);r(h,i,e.forChild(o,h),d),o+=h.nodeSize}return}let l=0,c=[],f=null;for(let d=0;;){let h,m;for(;l<i.length&&i[l].to==o;){let x=i[l++];x.widget&&(h?(m||(m=[h])).push(x):h=x)}if(h)if(m){m.sort(aR);for(let x=0;x<m.length;x++)n(m[x],d,!!f)}else n(h,d,!!f);let g,y;if(f)y=-1,g=f,f=null;else if(d<t.childCount)y=d,g=t.child(d++);else break;for(let x=0;x<c.length;x++)c[x].to<=o&&c.splice(x--,1);for(;l<i.length&&i[l].from<=o&&i[l].to>o;)c.push(i[l++]);let b=o+g.nodeSize;if(g.isText){let x=b;l<i.length&&i[l].from<x&&(x=i[l].from);for(let k=0;k<c.length;k++)c[k].to<x&&(x=c[k].to);x<b&&(f=g.cut(x-o),g=g.cut(0,x-o),b=x,y=-1)}else for(;l<i.length&&i[l].to<b;)l++;let w=g.isInline&&!g.isLeaf?c.filter(x=>!x.inline):c.slice();r(g,w,e.forChild(o,g),y),o=b}}function uR(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function fR(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let l=t.child(i++),c=o;if(o+=l.nodeSize,!l.isText)continue;let f=l.text;for(;i<t.childCount;){let d=t.child(i++);if(o+=d.nodeSize,!d.isText)break;f+=d.text}if(o>=n){if(o>=r&&f.slice(r-e.length-c,r-c)==e)return r-e.length;let d=c<r?f.lastIndexOf(e,r-c-1):-1;if(d>=0&&d+e.length+c>=n)return c+d;if(n==r&&f.length>=r+e.length-c&&f.slice(r-c,r-c+e.length)==e)return r}}return-1}function h0(t,e,n,r,i){let o=[];for(let l=0,c=0;l<t.length;l++){let f=t[l],d=c,h=c+=f.size;d>=n||h<=e?o.push(f):(d<e&&o.push(f.slice(0,e-d,r)),i&&(o.push(i),i=void 0),h>n&&o.push(f.slice(n-d,f.size,r)))}return o}function O2(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,l=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(l<0)return null;let c=r.resolve(l),f,d;if(Ph(n)){for(f=l;i&&!i.node;)i=i.parent;let m=i.node;if(i&&m.isAtom&&me.isSelectable(m)&&i.parent&&!(m.isInline&&zA(n.focusNode,n.focusOffset,i.dom))){let g=i.posBefore;d=new me(l==g?c:r.resolve(g))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let m=l,g=l;for(let y=0;y<n.rangeCount;y++){let b=n.getRangeAt(y);m=Math.min(m,t.docView.posFromDOM(b.startContainer,b.startOffset,1)),g=Math.max(g,t.docView.posFromDOM(b.endContainer,b.endOffset,-1))}if(m<0)return null;[f,l]=g==t.state.selection.anchor?[g,m]:[m,g],c=r.resolve(l)}else f=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(f<0)return null}let h=r.resolve(f);if(!d){let m=e=="pointer"||t.state.selection.head<c.pos&&!o?1:-1;d=D2(t,h,c,m)}return d}function j5(t){return t.editable?t.hasFocus():P5(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function _i(t,e=!1){let n=t.state.selection;if(U5(t,n),!!j5(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&gn){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Ds(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)hR(t);else{let{anchor:r,head:i}=n,o,l;P7&&!(n instanceof ce)&&(n.$from.parent.inlineContent||(o=F7(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(l=F7(t,n.to))),t.docView.setSelection(r,i,t,e),P7&&(o&&$7(o),l&&$7(l)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&dR(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const P7=Mn||gn&&A5<63;function F7(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(Mn&&i&&i.contentEditable=="false")return sg(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return sg(i);if(o)return sg(o)}}function sg(t){return t.contentEditable="true",Mn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function $7(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function dR(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!j5(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function hR(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,ln(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&Pn&&Do<=11&&(r.disabled=!0,r.disabled=!1)}function U5(t,e){if(e instanceof me){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(q7(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else q7(t)}function q7(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function D2(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||ce.between(e,n,r)}function Z7(t){return t.editable&&!t.hasFocus()?!1:P5(t)}function P5(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function pR(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Ds(e.node,e.offset,n.anchorNode,n.anchorOffset)}function p0(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&we.findFrom(o,e)}function bo(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function K7(t,e,n){let r=t.state.selection;if(r instanceof ce)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let l=t.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return bo(t,new ce(r.$anchor,l))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=p0(t.state,e);return i&&i instanceof me?bo(t,i):!1}else if(!(vr&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,l;if(!o||o.isText)return!1;let c=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(l=t.docView.descAt(c))&&!l.contentDOM?me.isSelectable(o)?bo(t,new me(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):pu?bo(t,new ce(t.state.doc.resolve(e<0?c:c+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof me&&r.node.isInline)return bo(t,new ce(e>0?r.$to:r.$from));{let i=p0(t.state,e);return i?bo(t,i):!1}}}function Hd(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Dc(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function _l(t,e){return e<0?mR(t):gR(t)}function mR(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,l=!1;for(Ir&&n.nodeType==1&&r<Hd(n)&&Dc(n.childNodes[r],-1)&&(l=!0);;)if(r>0){if(n.nodeType!=1)break;{let c=n.childNodes[r-1];if(Dc(c,-1))i=n,o=--r;else if(c.nodeType==3)n=c,r=n.nodeValue.length;else break}}else{if(F5(n))break;{let c=n.previousSibling;for(;c&&Dc(c,-1);)i=n.parentNode,o=ln(c),c=c.previousSibling;if(c)n=c,r=Hd(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}l?m0(t,n,r):i&&m0(t,i,o)}function gR(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Hd(n),o,l;for(;;)if(r<i){if(n.nodeType!=1)break;let c=n.childNodes[r];if(Dc(c,1))o=n,l=++r;else break}else{if(F5(n))break;{let c=n.nextSibling;for(;c&&Dc(c,1);)o=c.parentNode,l=ln(c)+1,c=c.nextSibling;if(c)n=c,r=0,i=Hd(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&m0(t,o,l)}function F5(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function yR(t,e){for(;t&&e==t.childNodes.length&&!hu(t);)e=ln(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function vR(t,e){for(;t&&!e&&!hu(t);)e=ln(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function m0(t,e,n){if(e.nodeType!=3){let o,l;(l=yR(e,n))?(e=l,n=0):(o=vR(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Ph(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&_i(t)},50)}function G7(t,e){let n=t.state.doc.resolve(e);if(!(gn||jA)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),l=(o.top+o.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),l=(o.top+o.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Y7(t,e,n){let r=t.state.selection;if(r instanceof ce&&!r.empty||n.indexOf("s")>-1||vr&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let l=p0(t.state,e);if(l&&l instanceof me)return bo(t,l)}if(!i.parent.inlineContent){let l=e<0?i:o,c=r instanceof Un?we.near(l,e):we.findFrom(l,e);return c?bo(t,c):!1}return!1}function W7(t,e){if(!(t.state.selection instanceof ce))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let l=t.state.tr;return e<0?l.delete(n.pos-o.nodeSize,n.pos):l.delete(n.pos,n.pos+o.nodeSize),t.dispatch(l),!0}return!1}function X7(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function bR(t){if(!Mn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;X7(t,r,"true"),setTimeout(()=>X7(t,r,"false"),20)}return!1}function CR(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function wR(t,e){let n=e.keyCode,r=CR(e);if(n==8||vr&&n==72&&r=="c")return W7(t,-1)||_l(t,-1);if(n==46&&!e.shiftKey||vr&&n==68&&r=="c")return W7(t,1)||_l(t,1);if(n==13||n==27)return!0;if(n==37||vr&&n==66&&r=="c"){let i=n==37?G7(t,t.state.selection.from)=="ltr"?-1:1:-1;return K7(t,i,r)||_l(t,i)}else if(n==39||vr&&n==70&&r=="c"){let i=n==39?G7(t,t.state.selection.from)=="ltr"?1:-1:1;return K7(t,i,r)||_l(t,i)}else{if(n==38||vr&&n==80&&r=="c")return Y7(t,-1,r)||_l(t,-1);if(n==40||vr&&n==78&&r=="c")return bR(t)||Y7(t,1,r)||_l(t,1);if(r==(vr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function L2(t,e){t.someProp("transformCopied",y=>{e=y(e,t)});let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let y=r.firstChild;n.push(y.type.name,y.attrs!=y.type.defaultAttrs?y.attrs:null),r=y.content}let l=t.someProp("clipboardSerializer")||Ps.fromSchema(t.state.schema),c=Y5(),f=c.createElement("div");f.appendChild(l.serializeFragment(r,{document:c}));let d=f.firstChild,h,m=0;for(;d&&d.nodeType==1&&(h=G5[d.nodeName.toLowerCase()]);){for(let y=h.length-1;y>=0;y--){let b=c.createElement(h[y]);for(;f.firstChild;)b.appendChild(f.firstChild);f.appendChild(b),m++}d=f.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${i} ${o}${m?` -${m}`:""} ${JSON.stringify(n)}`);let g=t.someProp("clipboardTextSerializer",y=>y(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:f,text:g,slice:e}}function $5(t,e,n,r,i){let o=i.parent.type.spec.code,l,c;if(!n&&!e)return null;let f=e&&(r||o||!n);if(f){if(t.someProp("transformPastedText",g=>{e=g(e,o||r,t)}),o)return e?new le(Q.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):le.empty;let m=t.someProp("clipboardTextParser",g=>g(e,i,r,t));if(m)c=m;else{let g=i.marks(),{schema:y}=t.state,b=Ps.fromSchema(y);l=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(w=>{let x=l.appendChild(document.createElement("p"));w&&x.appendChild(b.serializeNode(y.text(w,g)))})}}else t.someProp("transformPastedHTML",m=>{n=m(n,t)}),l=kR(n),pu&&MR(l);let d=l&&l.querySelector("[data-pm-slice]"),h=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let m=+h[3];m>0;m--){let g=l.firstChild;for(;g&&g.nodeType!=1;)g=g.nextSibling;if(!g)break;l=g}if(c||(c=(t.someProp("clipboardParser")||t.someProp("domParser")||Rc.fromSchema(t.state.schema)).parseSlice(l,{preserveWhitespace:!!(f||h),context:i,ruleFromNode(g){return g.nodeName=="BR"&&!g.nextSibling&&g.parentNode&&!xR.test(g.parentNode.nodeName)?{ignore:!0}:null}})),h)c=ER(J7(c,+h[1],+h[2]),h[4]);else if(c=le.maxOpen(SR(c.content,i),!0),c.openStart||c.openEnd){let m=0,g=0;for(let y=c.content.firstChild;m<c.openStart&&!y.type.spec.isolating;m++,y=y.firstChild);for(let y=c.content.lastChild;g<c.openEnd&&!y.type.spec.isolating;g++,y=y.lastChild);c=J7(c,m,g)}return t.someProp("transformPasted",m=>{c=m(c,t)}),c}const xR=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function SR(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,l=[];if(t.forEach(c=>{if(!l)return;let f=i.findWrapping(c.type),d;if(!f)return l=null;if(d=l.length&&o.length&&Z5(f,o,c,l[l.length-1],0))l[l.length-1]=d;else{l.length&&(l[l.length-1]=K5(l[l.length-1],o.length));let h=q5(c,f);l.push(h),i=i.matchType(h.type),o=f}}),l)return Q.from(l)}return t}function q5(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,Q.from(t));return t}function Z5(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=Z5(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(Q.from(q5(n,t,i+1))))}}function K5(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,K5(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(Q.empty,!0);return t.copy(n.append(r))}function g0(t,e,n,r,i,o){let l=e<0?t.firstChild:t.lastChild,c=l.content;return t.childCount>1&&(o=0),i<r-1&&(c=g0(c,e,n,r,i+1,o)),i>=n&&(c=e<0?l.contentMatchAt(0).fillBefore(c,o<=i).append(c):c.append(l.contentMatchAt(l.childCount).fillBefore(Q.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,l.copy(c))}function J7(t,e,n){return e<t.openStart&&(t=new le(g0(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new le(g0(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const G5={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Q7=null;function Y5(){return Q7||(Q7=document.implementation.createHTMLDocument("title"))}let lg=null;function TR(t){let e=window.trustedTypes;return e?(lg||(lg=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),lg.createHTML(t)):t}function kR(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=Y5().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&G5[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=TR(t),i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function MR(t){let e=t.querySelectorAll(gn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function ER(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:l}=t;for(let c=r.length-2;c>=0;c-=2){let f=n.nodes[r[c]];if(!f||f.hasRequiredAttrs())break;i=Q.from(f.create(r[c+1],i)),o++,l++}return new le(i,o,l)}const En={},An={},AR={touchstart:!0,touchmove:!0};class RR{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function NR(t){for(let e in En){let n=En[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{DR(t,r)&&!_2(t,r)&&(t.editable||!(r.type in An))&&n(t,r)},AR[e]?{passive:!0}:void 0)}Mn&&t.dom.addEventListener("input",()=>null),y0(t)}function Ao(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function OR(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function y0(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>_2(t,r))})}function _2(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function DR(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function LR(t,e){!_2(t,e)&&En[e.type]&&(t.editable||!(e.type in An))&&En[e.type](t,e)}An.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!X5(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Oi&&gn&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),ea&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,vs(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||wR(t,n)?n.preventDefault():Ao(t,"key")};An.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};An.keypress=(t,e)=>{let n=e;if(X5(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||vr&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof ce)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),o=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",l=>l(t,r.$from.pos,r.$to.pos,i,o))&&t.dispatch(o()),n.preventDefault()}};function $h(t){return{left:t.clientX,top:t.clientY}}function _R(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function H2(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let l=o.depth+1;l>0;l--)if(t.someProp(e,c=>l>o.depth?c(t,n,o.nodeAfter,o.before(l),i,!0):c(t,n,o.node(l),o.before(l),i,!1)))return!0;return!1}function $l(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function HR(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&me.isSelectable(r)?($l(t,new me(n)),!0):!1}function IR(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof me&&(r=n.node);let o=t.state.doc.resolve(e);for(let l=o.depth+1;l>0;l--){let c=l>o.depth?o.nodeAfter:o.node(l);if(me.isSelectable(c)){r&&n.$from.depth>0&&l>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(l);break}}return i!=null?($l(t,me.create(t.state.doc,i)),!0):!1}function zR(t,e,n,r,i){return H2(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?IR(t,n):HR(t,n))}function BR(t,e,n,r){return H2(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function VR(t,e,n,r){return H2(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||jR(t,n,r)}function jR(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?($l(t,ce.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let l=o>i.depth?i.nodeAfter:i.node(o),c=i.before(o);if(l.inlineContent)$l(t,ce.create(r,c+1,c+1+l.content.size));else if(me.isSelectable(l))$l(t,me.create(r,c));else continue;return!0}}function I2(t){return Id(t)}const W5=vr?"metaKey":"ctrlKey";En.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=I2(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&_R(n,t.input.lastClick)&&!n[W5]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o,button:n.button};let l=t.posAtCoords($h(n));l&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new UR(t,l,n,!!r)):(o=="doubleClick"?BR:VR)(t,l.pos,l.inside,n)?n.preventDefault():Ao(t,"pointer"))};class UR{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[W5],this.allowDefault=r.shiftKey;let o,l;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),l=n.inside;else{let h=e.state.doc.resolve(n.pos);o=h.parent,l=h.depth?h.before():0}const c=i?null:r.target,f=c?e.docView.nearestDesc(c,!0):null;this.target=f&&f.dom.nodeType==1?f.dom:null;let{selection:d}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||d instanceof me&&d.from<=l&&d.to>l)&&(this.mightDrag={node:o,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Ir&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ao(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>_i(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords($h(e))),this.updateAllowDefault(e),this.allowDefault||!n?Ao(this.view,"pointer"):zR(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Mn&&this.mightDrag&&!this.mightDrag.node.isAtom||gn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?($l(this.view,we.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Ao(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ao(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}En.touchstart=t=>{t.input.lastTouch=Date.now(),I2(t),Ao(t,"pointer")};En.touchmove=t=>{t.input.lastTouch=Date.now(),Ao(t,"pointer")};En.contextmenu=t=>I2(t);function X5(t,e){return t.composing?!0:Mn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const PR=Oi?5e3:-1;An.compositionstart=An.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof ce&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Id(t,!0),t.markCursor=null;else if(Id(t,!e.selection.empty),Ir&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let l=o<0?i.lastChild:i.childNodes[o-1];if(!l)break;if(l.nodeType==3){let c=t.domSelection();c&&c.collapse(l,l.nodeValue.length);break}else i=l,o=-1}}t.input.composing=!0}J5(t,PR)};An.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,J5(t,20))};function J5(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Id(t),e))}function Q5(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=$R());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function FR(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=HA(e.focusNode,e.focusOffset),r=IA(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let l=n.pmViewDesc;if(!(!l||!l.isText(n.nodeValue)))return r}}return n||r}function $R(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Id(t,e=!1){if(!(Oi&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),Q5(t),e||t.docView&&t.docView.dirty){let n=O2(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function qR(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Kc=Pn&&Do<15||ea&&UA<604;En.copy=An.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=Kc?null:n.clipboardData,l=r.content(),{dom:c,text:f}=L2(t,l);o?(n.preventDefault(),o.clearData(),o.setData("text/html",c.innerHTML),o.setData("text/plain",f)):qR(t,c),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function ZR(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function KR(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Gc(t,r.value,null,i,e):Gc(t,r.textContent,r.innerHTML,i,e)},50)}function Gc(t,e,n,r,i){let o=$5(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",f=>f(t,i,o||le.empty)))return!0;if(!o)return!1;let l=ZR(o),c=l?t.state.tr.replaceSelectionWith(l,r):t.state.tr.replaceSelection(o);return t.dispatch(c.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function e9(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}An.paste=(t,e)=>{let n=e;if(t.composing&&!Oi)return;let r=Kc?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Gc(t,e9(r),r.getData("text/html"),i,n)?n.preventDefault():KR(t,n)};class t9{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const GR=vr?"altKey":"ctrlKey";function n9(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[GR]}En.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords($h(n)),l;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof me?i.to-1:i.to))){if(r&&r.mightDrag)l=me.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let m=t.docView.nearestDesc(n.target,!0);m&&m.node.type.spec.draggable&&m!=t.docView&&(l=me.create(t.state.doc,m.posBefore))}}let c=(l||t.state.selection).content(),{dom:f,text:d,slice:h}=L2(t,c);(!n.dataTransfer.files.length||!gn||A5>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Kc?"Text":"text/html",f.innerHTML),n.dataTransfer.effectAllowed="copyMove",Kc||n.dataTransfer.setData("text/plain",d),t.dragging=new t9(h,n9(t,n),l)};En.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};An.dragover=An.dragenter=(t,e)=>e.preventDefault();An.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords($h(n));if(!i)return;let o=t.state.doc.resolve(i.pos),l=r&&r.slice;l?t.someProp("transformPasted",b=>{l=b(l,t)}):l=$5(t,e9(n.dataTransfer),Kc?null:n.dataTransfer.getData("text/html"),!1,o);let c=!!(r&&n9(t,n));if(t.someProp("handleDrop",b=>b(t,n,l||le.empty,c))){n.preventDefault();return}if(!l)return;n.preventDefault();let f=l?a5(t.state.doc,o.pos,l):o.pos;f==null&&(f=o.pos);let d=t.state.tr;if(c){let{node:b}=r;b?b.replace(d):d.deleteSelection()}let h=d.mapping.map(f),m=l.openStart==0&&l.openEnd==0&&l.content.childCount==1,g=d.doc;if(m?d.replaceRangeWith(h,h,l.content.firstChild):d.replaceRange(h,h,l),d.doc.eq(g))return;let y=d.doc.resolve(h);if(m&&me.isSelectable(l.content.firstChild)&&y.nodeAfter&&y.nodeAfter.sameMarkup(l.content.firstChild))d.setSelection(new me(y));else{let b=d.mapping.map(f);d.mapping.maps[d.mapping.maps.length-1].forEach((w,x,k,A)=>b=A),d.setSelection(D2(t,y,d.doc.resolve(b)))}t.focus(),t.dispatch(d.setMeta("uiEvent","drop"))};En.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&_i(t)},20))};En.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};En.beforeinput=(t,e)=>{if(gn&&Oi&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,vs(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in An)En[t]=An[t];function Yc(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class zd{constructor(e,n){this.toDOM=e,this.spec=n||ks,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:l}=e.mapResult(n.from+i,this.side<0?-1:1);return l?null:new zt(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof zd&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Yc(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class _o{constructor(e,n){this.attrs=e,this.spec=n||ks}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,l=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=l?null:new zt(o,l,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof _o&&Yc(this.attrs,e.attrs)&&Yc(this.spec,e.spec)}static is(e){return e.type instanceof _o}destroy(){}}class z2{constructor(e,n){this.attrs=e,this.spec=n||ks}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let l=e.mapResult(n.to+i,-1);return l.deleted||l.pos<=o.pos?null:new zt(o.pos-r,l.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof z2&&Yc(this.attrs,e.attrs)&&Yc(this.spec,e.spec)}destroy(){}}class zt{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new zt(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new zt(e,e,new zd(n,r))}static inline(e,n,r,i){return new zt(e,n,new _o(r,i))}static node(e,n,r,i){return new zt(e,n,new z2(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof _o}get widget(){return this.type instanceof zd}}const Bl=[],ks={};class Xe{constructor(e,n){this.local=e.length?e:Bl,this.children=n.length?n:Bl}static create(e,n){return n.length?Bd(n,e,0,ks):hn}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let l=0;l<this.local.length;l++){let c=this.local[l];c.from<=n&&c.to>=e&&(!o||o(c.spec))&&r.push(c.copy(c.from+i,c.to+i))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<n&&this.children[l+1]>e){let c=this.children[l]+1;this.children[l+2].findInner(e-c,n-c,r,i+c,o)}}map(e,n,r){return this==hn||e.maps.length==0?this:this.mapInner(e,n,0,0,r||ks)}mapInner(e,n,r,i,o){let l;for(let c=0;c<this.local.length;c++){let f=this.local[c].map(e,r,i);f&&f.type.valid(n,f)?(l||(l=[])).push(f):o.onRemove&&o.onRemove(this.local[c].spec)}return this.children.length?YR(this.children,l||[],e,n,r,i,o):l?new Xe(l.sort(Ms),Bl):hn}add(e,n){return n.length?this==hn?Xe.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((c,f)=>{let d=f+r,h;if(h=i9(n,c,d)){for(i||(i=this.children.slice());o<i.length&&i[o]<f;)o+=3;i[o]==f?i[o+2]=i[o+2].addInner(c,h,d+1):i.splice(o,0,f,f+c.nodeSize,Bd(h,c,d+1,ks)),o+=3}});let l=r9(o?o9(n):n,-r);for(let c=0;c<l.length;c++)l[c].type.valid(e,l[c])||l.splice(c--,1);return new Xe(l.length?this.local.concat(l).sort(Ms):this.local,i||this.children)}remove(e){return e.length==0||this==hn?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let l,c=r[o]+n,f=r[o+1]+n;for(let h=0,m;h<e.length;h++)(m=e[h])&&m.from>c&&m.to<f&&(e[h]=null,(l||(l=[])).push(m));if(!l)continue;r==this.children&&(r=this.children.slice());let d=r[o+2].removeInner(l,c+1);d!=hn?r[o+2]=d:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,l;o<e.length;o++)if(l=e[o])for(let c=0;c<i.length;c++)i[c].eq(l,n)&&(i==this.local&&(i=this.local.slice()),i.splice(c--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Xe(i,r):hn}forChild(e,n){if(this==hn)return this;if(n.isLeaf)return Xe.empty;let r,i;for(let c=0;c<this.children.length;c+=3)if(this.children[c]>=e){this.children[c]==e&&(r=this.children[c+2]);break}let o=e+1,l=o+n.content.size;for(let c=0;c<this.local.length;c++){let f=this.local[c];if(f.from<l&&f.to>o&&f.type instanceof _o){let d=Math.max(o,f.from)-o,h=Math.min(l,f.to)-o;d<h&&(i||(i=[])).push(f.copy(d,h))}}if(i){let c=new Xe(i.sort(Ms),Bl);return r?new So([c,r]):c}return r||hn}eq(e){if(this==e)return!0;if(!(e instanceof Xe)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return B2(this.localsInner(e))}localsInner(e){if(this==hn)return Bl;if(e.inlineContent||!this.local.some(_o.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof _o||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Xe.empty=new Xe([],[]);Xe.removeOverlap=B2;const hn=Xe.empty;class So{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,ks));return So.from(r)}forChild(e,n){if(n.isLeaf)return Xe.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=hn&&(o instanceof So?r=r.concat(o.members):r.push(o))}return So.from(r)}eq(e){if(!(e instanceof So)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let l=0;l<o.length;l++)n.push(o[l])}}return n?B2(r?n:n.sort(Ms)):Bl}static from(e){switch(e.length){case 0:return hn;case 1:return e[0];default:return new So(e.every(n=>n instanceof Xe)?e:e.reduce((n,r)=>n.concat(r instanceof Xe?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function YR(t,e,n,r,i,o,l){let c=t.slice();for(let d=0,h=o;d<n.maps.length;d++){let m=0;n.maps[d].forEach((g,y,b,w)=>{let x=w-b-(y-g);for(let k=0;k<c.length;k+=3){let A=c[k+1];if(A<0||g>A+h-m)continue;let N=c[k]+h-m;y>=N?c[k+1]=g<=N?-2:-1:g>=h&&x&&(c[k]+=x,c[k+1]+=x)}m+=x}),h=n.maps[d].map(h,-1)}let f=!1;for(let d=0;d<c.length;d+=3)if(c[d+1]<0){if(c[d+1]==-2){f=!0,c[d+1]=-1;continue}let h=n.map(t[d]+o),m=h-i;if(m<0||m>=r.content.size){f=!0;continue}let g=n.map(t[d+1]+o,-1),y=g-i,{index:b,offset:w}=r.content.findIndex(m),x=r.maybeChild(b);if(x&&w==m&&w+x.nodeSize==y){let k=c[d+2].mapInner(n,x,h+1,t[d]+o+1,l);k!=hn?(c[d]=m,c[d+1]=y,c[d+2]=k):(c[d+1]=-2,f=!0)}else f=!0}if(f){let d=WR(c,t,e,n,i,o,l),h=Bd(d,r,0,l);e=h.local;for(let m=0;m<c.length;m+=3)c[m+1]<0&&(c.splice(m,3),m-=3);for(let m=0,g=0;m<h.children.length;m+=3){let y=h.children[m];for(;g<c.length&&c[g]<y;)g+=3;c.splice(g,0,h.children[m],h.children[m+1],h.children[m+2])}}return new Xe(e.sort(Ms),c)}function r9(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new zt(i.from+e,i.to+e,i.type))}return n}function WR(t,e,n,r,i,o,l){function c(f,d){for(let h=0;h<f.local.length;h++){let m=f.local[h].map(r,i,d);m?n.push(m):l.onRemove&&l.onRemove(f.local[h].spec)}for(let h=0;h<f.children.length;h+=3)c(f.children[h+2],f.children[h]+d+1)}for(let f=0;f<t.length;f+=3)t[f+1]==-1&&c(t[f+2],e[f]+o+1);return n}function i9(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,l;o<t.length;o++)(l=t[o])&&l.from>n&&l.to<r&&((i||(i=[])).push(l),t[o]=null);return i}function o9(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Bd(t,e,n,r){let i=[],o=!1;e.forEach((c,f)=>{let d=i9(t,c,f+n);if(d){o=!0;let h=Bd(d,c,n+f+1,r);h!=hn&&i.push(f,f+c.nodeSize,h)}});let l=r9(o?o9(t):t,-n).sort(Ms);for(let c=0;c<l.length;c++)l[c].type.valid(e,l[c])||(r.onRemove&&r.onRemove(l[c].spec),l.splice(c--,1));return l.length||i.length?new Xe(l,i):hn}function Ms(t,e){return t.from-e.from||t.to-e.to}function B2(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),eC(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),eC(e,i,r.copy(o.from,r.to)));break}}}return e}function eC(t,e,n){for(;e<t.length&&Ms(n,t[e])>0;)e++;t.splice(e,0,n)}function ag(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=hn&&e.push(r)}),t.cursorWrapper&&e.push(Xe.create(t.state.doc,[t.cursorWrapper.deco])),So.from(e)}const XR={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},JR=Pn&&Do<=11;class QR{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class eN{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new QR,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Pn&&Do<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),JR&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,XR)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Z7(this.view)){if(this.suppressingSelectionUpdates)return _i(this.view);if(Pn&&Do<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Ds(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=Ql(o))n.add(o);for(let o=e.anchorNode;o;o=Ql(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Z7(e)&&!this.ignoreSelectionChange(r),o=-1,l=-1,c=!1,f=[];if(e.editable)for(let h=0;h<n.length;h++){let m=this.registerMutation(n[h],f);m&&(o=o<0?m.from:Math.min(m.from,o),l=l<0?m.to:Math.max(m.to,l),m.typeOver&&(c=!0))}if(Ir&&f.length){let h=f.filter(m=>m.nodeName=="BR");if(h.length==2){let[m,g]=h;m.parentNode&&m.parentNode.parentNode==g.parentNode?g.remove():m.remove()}else{let{focusNode:m}=this.currentSelection;for(let g of h){let y=g.parentNode;y&&y.nodeName=="LI"&&(!m||rN(e,m)!=y)&&g.remove()}}}let d=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Ph(r)&&(d=O2(e))&&d.eq(we.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,_i(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,l),tN(e)),this.handleDOMChange(o,l,c,f),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||_i(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let h=0;h<e.addedNodes.length;h++){let m=e.addedNodes[h];n.push(m),m.nodeType==3&&(this.lastChangedTextNode=m)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(Pn&&Do<=11&&e.addedNodes.length)for(let h=0;h<e.addedNodes.length;h++){let{previousSibling:m,nextSibling:g}=e.addedNodes[h];(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(i=m),(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(o=g)}let l=i&&i.parentNode==e.target?ln(i)+1:0,c=r.localPosFromDOM(e.target,l,-1),f=o&&o.parentNode==e.target?ln(o):e.target.childNodes.length,d=r.localPosFromDOM(e.target,f,1);return{from:c,to:d}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let tC=new WeakMap,nC=!1;function tN(t){if(!tC.has(t)&&(tC.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Ir,nC)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),nC=!0}}function rC(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,l=t.domAtPos(t.state.selection.anchor);return Ds(l.node,l.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function nN(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return rC(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?rC(t,n):null}function rN(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function iN(t,e,n){let{node:r,fromOffset:i,toOffset:o,from:l,to:c}=t.docView.parseRange(e,n),f=t.domSelectionRange(),d,h=f.anchorNode;if(h&&t.dom.contains(h.nodeType==1?h:h.parentNode)&&(d=[{node:h,offset:f.anchorOffset}],Ph(f)||d.push({node:f.focusNode,offset:f.focusOffset})),gn&&t.input.lastKeyCode===8)for(let x=o;x>i;x--){let k=r.childNodes[x-1],A=k.pmViewDesc;if(k.nodeName=="BR"&&!A){o=x;break}if(!A||A.size)break}let m=t.state.doc,g=t.someProp("domParser")||Rc.fromSchema(t.state.schema),y=m.resolve(l),b=null,w=g.parse(r,{topNode:y.parent,topMatch:y.parent.contentMatchAt(y.index()),topOpen:!0,from:i,to:o,preserveWhitespace:y.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:oN,context:y});if(d&&d[0].pos!=null){let x=d[0].pos,k=d[1]&&d[1].pos;k==null&&(k=x),b={anchor:x+l,head:k+l}}return{doc:w,sel:b,from:l,to:c}}function oN(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Mn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Mn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const sN=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function lN(t,e,n,r,i){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let j=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,ee=O2(t,j);if(ee&&!t.state.selection.eq(ee)){if(gn&&Oi&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",re=>re(t,vs(13,"Enter"))))return;let $=t.state.tr.setSelection(ee);j=="pointer"?$.setMeta("pointer",!0):j=="key"&&$.scrollIntoView(),o&&$.setMeta("composition",o),t.dispatch($)}return}let l=t.state.doc.resolve(e),c=l.sharedDepth(n);e=l.before(c+1),n=t.state.doc.resolve(n).after(c+1);let f=t.state.selection,d=iN(t,e,n),h=t.state.doc,m=h.slice(d.from,d.to),g,y;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(g=t.state.selection.to,y="end"):(g=t.state.selection.from,y="start"),t.input.lastKeyCode=null;let b=uN(m.content,d.doc.content,d.from,g,y);if(b&&t.input.domChangeCount++,(ea&&t.input.lastIOSEnter>Date.now()-225||Oi)&&i.some(j=>j.nodeType==1&&!sN.test(j.nodeName))&&(!b||b.endA>=b.endB)&&t.someProp("handleKeyDown",j=>j(t,vs(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!b)if(r&&f instanceof ce&&!f.empty&&f.$head.sameParent(f.$anchor)&&!t.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))b={start:f.from,endA:f.to,endB:f.to};else{if(d.sel){let j=iC(t,t.state.doc,d.sel);if(j&&!j.eq(t.state.selection)){let ee=t.state.tr.setSelection(j);o&&ee.setMeta("composition",o),t.dispatch(ee)}}return}t.state.selection.from<t.state.selection.to&&b.start==b.endB&&t.state.selection instanceof ce&&(b.start>t.state.selection.from&&b.start<=t.state.selection.from+2&&t.state.selection.from>=d.from?b.start=t.state.selection.from:b.endA<t.state.selection.to&&b.endA>=t.state.selection.to-2&&t.state.selection.to<=d.to&&(b.endB+=t.state.selection.to-b.endA,b.endA=t.state.selection.to)),Pn&&Do<=11&&b.endB==b.start+1&&b.endA==b.start&&b.start>d.from&&d.doc.textBetween(b.start-d.from-1,b.start-d.from+1)==" "&&(b.start--,b.endA--,b.endB--);let w=d.doc.resolveNoCache(b.start-d.from),x=d.doc.resolveNoCache(b.endB-d.from),k=h.resolve(b.start),A=w.sameParent(x)&&w.parent.inlineContent&&k.end()>=b.endA,N;if((ea&&t.input.lastIOSEnter>Date.now()-225&&(!A||i.some(j=>j.nodeName=="DIV"||j.nodeName=="P"))||!A&&w.pos<d.doc.content.size&&(!w.sameParent(x)||!w.parent.inlineContent)&&!/\S/.test(d.doc.textBetween(w.pos,x.pos,"",""))&&(N=we.findFrom(d.doc.resolve(w.pos+1),1,!0))&&N.head>w.pos)&&t.someProp("handleKeyDown",j=>j(t,vs(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>b.start&&cN(h,b.start,b.endA,w,x)&&t.someProp("handleKeyDown",j=>j(t,vs(8,"Backspace")))){Oi&&gn&&t.domObserver.suppressSelectionUpdates();return}gn&&b.endB==b.start&&(t.input.lastChromeDelete=Date.now()),Oi&&!A&&w.start()!=x.start()&&x.parentOffset==0&&w.depth==x.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==b.endA&&(b.endB-=2,x=d.doc.resolveNoCache(b.endB-d.from),setTimeout(()=>{t.someProp("handleKeyDown",function(j){return j(t,vs(13,"Enter"))})},20));let D=b.start,L=b.endA,z=j=>{let ee=j||t.state.tr.replace(D,L,d.doc.slice(b.start-d.from,b.endB-d.from));if(d.sel){let $=iC(t,ee.doc,d.sel);$&&!(gn&&t.composing&&$.empty&&(b.start!=b.endB||t.input.lastChromeDelete<Date.now()-100)&&($.head==D||$.head==ee.mapping.map(L)-1)||Pn&&$.empty&&$.head==D)&&ee.setSelection($)}return o&&ee.setMeta("composition",o),ee.scrollIntoView()},q;if(A){if(w.pos==x.pos){Pn&&Do<=11&&w.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>_i(t),20));let j=z(t.state.tr.delete(D,L)),ee=h.resolve(b.start).marksAcross(h.resolve(b.endA));ee&&j.ensureMarks(ee),t.dispatch(j)}else if(b.endA==b.endB&&(q=aN(w.parent.content.cut(w.parentOffset,x.parentOffset),k.parent.content.cut(k.parentOffset,b.endA-k.start())))){let j=z(t.state.tr);q.type=="add"?j.addMark(D,L,q.mark):j.removeMark(D,L,q.mark),t.dispatch(j)}else if(w.parent.child(w.index()).isText&&w.index()==x.index()-(x.textOffset?0:1)){let j=w.parent.textBetween(w.parentOffset,x.parentOffset),ee=()=>z(t.state.tr.insertText(j,D,L));t.someProp("handleTextInput",$=>$(t,D,L,j,ee))||t.dispatch(ee())}}else t.dispatch(z())}function iC(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:D2(t,e.resolve(n.anchor),e.resolve(n.head))}function aN(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,o=r,l,c,f;for(let h=0;h<r.length;h++)i=r[h].removeFromSet(i);for(let h=0;h<n.length;h++)o=n[h].removeFromSet(o);if(i.length==1&&o.length==0)c=i[0],l="add",f=h=>h.mark(c.addToSet(h.marks));else if(i.length==0&&o.length==1)c=o[0],l="remove",f=h=>h.mark(c.removeFromSet(h.marks));else return null;let d=[];for(let h=0;h<e.childCount;h++)d.push(f(e.child(h)));if(Q.from(d).eq(t))return{mark:c,type:l}}function cN(t,e,n,r,i){if(n-e<=i.pos-r.pos||cg(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let c=o.nodeAfter;return c!=null&&n==e+c.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let l=t.resolve(cg(o,!0,!0));return!l.parent.isTextblock||l.pos>n||cg(l,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(l.parent.content)}function cg(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function uN(t,e,n,r,i){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:l,b:c}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let f=Math.max(0,o-Math.min(l,c));r-=l+f-o}if(l<o&&t.size<e.size){let f=r<=o&&r>=l?o-r:0;o-=f,o&&o<e.size&&oC(e.textBetween(o-1,o+1))&&(o+=f?1:-1),c=o+(c-l),l=o}else if(c<o){let f=r<=o&&r>=c?o-r:0;o-=f,o&&o<t.size&&oC(t.textBetween(o-1,o+1))&&(o+=f?1:-1),l=o+(l-c),c=o}return{start:o,endA:l,endB:c}}function oC(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class s9{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new RR,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(uC),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=aC(this),lC(this),this.nodeViews=cC(this),this.docView=j7(this.state.doc,sC(this),ag(this),this.dom,this),this.domObserver=new eN(this,(r,i,o,l)=>lN(this,r,i,o,l)),this.domObserver.start(),NR(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&y0(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(uC),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,o=!1,l=!1;e.storedMarks&&this.composing&&(Q5(this),l=!0),this.state=e;let c=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(c||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let y=cC(this);dN(y,this.nodeViews)&&(this.nodeViews=y,o=!0)}(c||n.handleDOMEvents!=this._props.handleDOMEvents)&&y0(this),this.editable=aC(this),lC(this);let f=ag(this),d=sC(this),h=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",m=o||!this.docView.matchesNode(e.doc,d,f);(m||!e.selection.eq(i.selection))&&(l=!0);let g=h=="preserve"&&l&&this.dom.style.overflowAnchor==null&&$A(this);if(l){this.domObserver.stop();let y=m&&(Pn||gn)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&fN(i.selection,e.selection);if(m){let b=gn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=FR(this)),(o||!this.docView.update(e.doc,d,f,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=j7(e.doc,d,f,this.dom,this)),b&&!this.trackWrites&&(y=!0)}y||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&pR(this))?_i(this,y):(U5(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),h=="reset"?this.dom.scrollTop=0:h=="to selection"?this.scrollToSelection():g&&qA(g)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof me){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&_7(this,n.getBoundingClientRect(),e)}else _7(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new t9(e.slice,e.move,i<0?void 0:me.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let l=0;l<this.directPlugins.length;l++){let c=this.directPlugins[l].props[e];if(c!=null&&(i=n?n(c):c))return i}let o=this.state.plugins;if(o)for(let l=0;l<o.length;l++){let c=o[l].props[e];if(c!=null&&(i=n?n(c):c))return i}}hasFocus(){if(Pn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&ZA(this.dom),_i(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return XA(this,e)}coordsAtPos(e,n=1){return L5(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return nR(this,n||this.state,e)}pasteHTML(e,n){return Gc(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Gc(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return L2(this,e)}destroy(){this.docView&&(OR(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],ag(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,LA())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return LR(this,e)}domSelectionRange(){let e=this.domSelection();return e?Mn&&this.root.nodeType===11&&BA(this.dom.ownerDocument)==this.dom&&nN(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}s9.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function sC(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[zt.node(0,t.state.doc.content.size,e)]}function lC(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:zt.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function aC(t){return!t.someProp("editable",e=>e(t.state)===!1)}function fN(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function cC(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function dN(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function uC(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Io={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Vd={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},hN=typeof navigator<"u"&&/Mac/.test(navigator.platform),pN=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var an=0;an<10;an++)Io[48+an]=Io[96+an]=String(an);for(var an=1;an<=24;an++)Io[an+111]="F"+an;for(var an=65;an<=90;an++)Io[an]=String.fromCharCode(an+32),Vd[an]=String.fromCharCode(an);for(var ug in Io)Vd.hasOwnProperty(ug)||(Vd[ug]=Io[ug]);function mN(t){var e=hN&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||pN&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Vd:Io)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const gN=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),yN=typeof navigator<"u"&&/Win/.test(navigator.platform);function vN(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,l;for(let c=0;c<e.length-1;c++){let f=e[c];if(/^(cmd|meta|m)$/i.test(f))l=!0;else if(/^a(lt)?$/i.test(f))r=!0;else if(/^(c|ctrl|control)$/i.test(f))i=!0;else if(/^s(hift)?$/i.test(f))o=!0;else if(/^mod$/i.test(f))gN?l=!0:i=!0;else throw new Error("Unrecognized modifier name: "+f)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),l&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function bN(t){let e=Object.create(null);for(let n in t)e[vN(n)]=t[n];return e}function fg(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function CN(t){return new Be({props:{handleKeyDown:V2(t)}})}function V2(t){let e=bN(t);return function(n,r){let i=mN(r),o,l=e[fg(i,r)];if(l&&l(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let c=e[fg(i,r,!1)];if(c&&c(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(yN&&r.ctrlKey&&r.altKey)&&(o=Io[r.keyCode])&&o!=i){let c=e[fg(o,r)];if(c&&c(n.state,n.dispatch,n))return!0}}return!1}}var wN=Object.defineProperty,j2=(t,e)=>{for(var n in e)wN(t,n,{get:e[n],enumerable:!0})};function qh(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}var Zh=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,o=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...d)=>{const h=c(...d)(o);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,l=[],c=!!t,f=t||i.tr,d=()=>(!c&&e&&!f.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(f),l.every(m=>m===!0)),h={...Object.fromEntries(Object.entries(n).map(([m,g])=>[m,(...b)=>{const w=this.buildProps(f,e),x=g(...b)(w);return l.push(x),h}])),run:d};return h}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,o=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([c,f])=>[c,(...d)=>f(...d)({...o,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,l={tr:t,editor:r,view:o,state:qh({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([c,f])=>[c,(...d)=>f(...d)(l)]))}};return l}},l9={};j2(l9,{blur:()=>xN,clearContent:()=>SN,clearNodes:()=>TN,command:()=>kN,createParagraphNear:()=>MN,cut:()=>EN,deleteCurrentNode:()=>AN,deleteNode:()=>RN,deleteRange:()=>NN,deleteSelection:()=>ON,enter:()=>DN,exitCode:()=>LN,extendMarkRange:()=>_N,first:()=>HN,focus:()=>IN,forEach:()=>zN,insertContent:()=>BN,insertContentAt:()=>UN,joinBackward:()=>$N,joinDown:()=>FN,joinForward:()=>qN,joinItemBackward:()=>ZN,joinItemForward:()=>KN,joinTextblockBackward:()=>GN,joinTextblockForward:()=>YN,joinUp:()=>PN,keyboardShortcut:()=>XN,lift:()=>JN,liftEmptyBlock:()=>QN,liftListItem:()=>eO,newlineInCode:()=>tO,resetAttributes:()=>nO,scrollIntoView:()=>rO,selectAll:()=>iO,selectNodeBackward:()=>oO,selectNodeForward:()=>sO,selectParentNode:()=>lO,selectTextblockEnd:()=>aO,selectTextblockStart:()=>cO,setContent:()=>uO,setMark:()=>MO,setMeta:()=>EO,setNode:()=>AO,setNodeSelection:()=>RO,setTextDirection:()=>NO,setTextSelection:()=>OO,sinkListItem:()=>DO,splitBlock:()=>LO,splitListItem:()=>_O,toggleList:()=>HO,toggleMark:()=>IO,toggleNode:()=>zO,toggleWrap:()=>BO,undoInputRule:()=>VO,unsetAllMarks:()=>jO,unsetMark:()=>UO,unsetTextDirection:()=>PO,updateAttributes:()=>FO,wrapIn:()=>$O,wrapInList:()=>qO});var xN=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),SN=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),TN=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:l})=>{t.doc.nodesBetween(o.pos,l.pos,(c,f)=>{if(c.type.isText)return;const{doc:d,mapping:h}=e,m=d.resolve(h.map(f)),g=d.resolve(h.map(f+c.nodeSize)),y=m.blockRange(g);if(!y)return;const b=ha(y);if(c.type.isTextblock){const{defaultType:w}=m.parent.contentMatchAt(m.index());e.setNodeMarkup(y.start,w)}(b||b===0)&&e.lift(y,b)})}),!0},kN=t=>e=>t(e),MN=()=>({state:t,dispatch:e})=>S5(t,e),EN=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const l=r.mapping.map(e);return r.insert(l,o.content),r.setSelection(new ce(r.doc.resolve(Math.max(l-1,0)))),!0},AN=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const c=i.before(o),f=i.after(o);t.delete(c,f).scrollIntoView()}return!0}return!1};function Bt(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var RN=t=>({tr:e,state:n,dispatch:r})=>{const i=Bt(t,n.schema),o=e.selection.$anchor;for(let l=o.depth;l>0;l-=1)if(o.node(l).type===i){if(r){const f=o.before(l),d=o.after(l);e.delete(f,d).scrollIntoView()}return!0}return!1},NN=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},ON=()=>({state:t,dispatch:e})=>k2(t,e),DN=()=>({commands:t})=>t.keyboardShortcut("Enter"),LN=()=>({state:t,dispatch:e})=>vA(t,e);function U2(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function jd(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:U2(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function a9(t,e,n={}){return t.find(r=>r.type===e&&jd(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function fC(t,e,n={}){return!!a9(t,e,n)}function P2(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(h=>h.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(h=>h.type===e)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!a9([...i.node.marks],e,n)))return;let l=i.index,c=t.start()+i.offset,f=l+1,d=c+i.node.nodeSize;for(;l>0&&fC([...t.parent.child(l-1).marks],e,n);)l-=1,c-=t.parent.child(l).nodeSize;for(;f<t.parent.childCount&&fC([...t.parent.child(f).marks],e,n);)d+=t.parent.child(f).nodeSize,f+=1;return{from:c,to:d}}function ji(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var _N=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=ji(t,r.schema),{doc:l,selection:c}=n,{$from:f,from:d,to:h}=c;if(i){const m=P2(f,o,e);if(m&&m.from<=d&&m.to>=h){const g=ce.create(l,m.from,m.to);n.setSelection(g)}}return!0},HN=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function F2(t){return t instanceof ce}function Di(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function c9(t,e=null){if(!e)return null;const n=we.atStart(t),r=we.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?ce.create(t,Di(0,i,o),Di(t.content.size,i,o)):ce.create(t,Di(e,i,o),Di(e,i,o))}function u9(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Kh(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var IN=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const l=()=>{(Kh()||u9())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!F2(n.state.selection))return l(),!0;const c=c9(i.doc,t)||n.state.selection,f=n.state.selection.eq(c);return o&&(f||i.setSelection(c),f&&i.storedMarks&&i.setStoredMarks(i.storedMarks),l()),!0},zN=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),BN=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),f9=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&f9(r)}return t};function qf(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return f9(n)}function Wc(t,e,n){if(t instanceof jn||t instanceof Q)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return Q.fromArray(t.map(c=>e.nodeFromJSON(c)));const l=e.nodeFromJSON(t);return n.errorOnInvalidContent&&l.check(),l}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),Wc("",e,n)}if(i){if(n.errorOnInvalidContent){let l=!1,c="";const f=new X6({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(l=!0,c=typeof d=="string"?d:d.outerHTML,null)}]}})});if(n.slice?Rc.fromSchema(f).parseSlice(qf(t),n.parseOptions):Rc.fromSchema(f).parse(qf(t),n.parseOptions),n.errorOnInvalidContent&&l)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${c}`)})}const o=Rc.fromSchema(e);return n.slice?o.parseSlice(qf(t),n.parseOptions).content:o.parse(qf(t),n.parseOptions)}return Wc("",e,n)}function VN(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Yt||i instanceof Wt))return;const o=t.mapping.maps[r];let l=0;o.forEach((c,f,d,h)=>{l===0&&(l=h)}),t.setSelection(we.near(t.doc.resolve(l),n))}var jN=t=>!("type"in t),UN=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{var l;if(i){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let c;const f=x=>{o.emit("contentError",{editor:o,error:x,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},d={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Wc(e,o.schema,{parseOptions:d,errorOnInvalidContent:!0})}catch(x){f(x)}try{c=Wc(e,o.schema,{parseOptions:d,errorOnInvalidContent:(l=n.errorOnInvalidContent)!=null?l:o.options.enableContentCheck})}catch(x){return f(x),!1}let{from:h,to:m}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},g=!0,y=!0;if((jN(c)?c:[c]).forEach(x=>{x.check(),g=g?x.isText&&x.marks.length===0:!1,y=y?x.isBlock:!1}),h===m&&y){const{parent:x}=r.doc.resolve(h);x.isTextblock&&!x.type.spec.code&&!x.childCount&&(h-=1,m+=1)}let w;if(g){if(Array.isArray(e))w=e.map(x=>x.text||"").join("");else if(e instanceof Q){let x="";e.forEach(k=>{k.text&&(x+=k.text)}),w=x}else typeof e=="object"&&e&&e.text?w=e.text:w=e;r.insertText(w,h,m)}else{w=c;const x=r.doc.resolve(h),k=x.node(),A=x.parentOffset===0,N=k.isText||k.isTextblock,D=k.content.size>0;A&&N&&D&&(h=Math.max(0,h-1)),r.replaceWith(h,m,w)}n.updateSelection&&VN(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:h,text:w}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:h,text:w})}return!0},PN=()=>({state:t,dispatch:e})=>mA(t,e),FN=()=>({state:t,dispatch:e})=>gA(t,e),$N=()=>({state:t,dispatch:e})=>g5(t,e),qN=()=>({state:t,dispatch:e})=>C5(t,e),ZN=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Vh(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},KN=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Vh(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},GN=()=>({state:t,dispatch:e})=>hA(t,e),YN=()=>({state:t,dispatch:e})=>pA(t,e);function d9(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function WN(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,l;for(let c=0;c<e.length-1;c+=1){const f=e[c];if(/^(cmd|meta|m)$/i.test(f))l=!0;else if(/^a(lt)?$/i.test(f))r=!0;else if(/^(c|ctrl|control)$/i.test(f))i=!0;else if(/^s(hift)?$/i.test(f))o=!0;else if(/^mod$/i.test(f))Kh()||d9()?l=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${f}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),l&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}var XN=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=WN(t).split(/-(?!$)/),l=o.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),c=new KeyboardEvent("keydown",{key:l==="Space"?" ":l,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),f=e.captureTransaction(()=>{n.someProp("handleKeyDown",d=>d(n,c))});return f?.steps.forEach(d=>{const h=d.map(r.mapping);h&&i&&r.maybeStep(h)}),!0};function zo(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,l=e?Bt(e,t.schema):null,c=[];t.doc.nodesBetween(r,i,(m,g)=>{if(m.isText)return;const y=Math.max(r,g),b=Math.min(i,g+m.nodeSize);c.push({node:m,from:y,to:b})});const f=i-r,d=c.filter(m=>l?l.name===m.node.type.name:!0).filter(m=>jd(m.node.attrs,n,{strict:!1}));return o?!!d.length:d.reduce((m,g)=>m+g.to-g.from,0)>=f}var JN=(t,e={})=>({state:n,dispatch:r})=>{const i=Bt(t,n.schema);return zo(n,i,e)?yA(n,r):!1},QN=()=>({state:t,dispatch:e})=>T5(t,e),eO=t=>({state:e,dispatch:n})=>{const r=Bt(t,e.schema);return RA(r)(e,n)},tO=()=>({state:t,dispatch:e})=>x5(t,e);function Gh(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function dC(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}var nO=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,l=null;const c=Gh(typeof t=="string"?t:t.name,r.schema);if(!c)return!1;c==="node"&&(o=Bt(t,r.schema)),c==="mark"&&(l=ji(t,r.schema));let f=!1;return n.selection.ranges.forEach(d=>{r.doc.nodesBetween(d.$from.pos,d.$to.pos,(h,m)=>{o&&o===h.type&&(f=!0,i&&n.setNodeMarkup(m,void 0,dC(h.attrs,e))),l&&h.marks.length&&h.marks.forEach(g=>{l===g.type&&(f=!0,i&&n.addMark(m,m+h.nodeSize,l.create(dC(g.attrs,e))))})})}),f},rO=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),iO=()=>({tr:t,dispatch:e})=>{if(e){const n=new Un(t.doc);t.setSelection(n)}return!0},oO=()=>({state:t,dispatch:e})=>v5(t,e),sO=()=>({state:t,dispatch:e})=>w5(t,e),lO=()=>({state:t,dispatch:e})=>wA(t,e),aO=()=>({state:t,dispatch:e})=>TA(t,e),cO=()=>({state:t,dispatch:e})=>SA(t,e);function v0(t,e,n={},r={}){return Wc(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var uO=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:o,dispatch:l,commands:c})=>{const{doc:f}=o;if(r.preserveWhitespace!=="full"){const d=v0(t,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return l&&o.replaceWith(0,f.content.size,d).setMeta("preventUpdate",!n),!0}return l&&o.setMeta("preventUpdate",!n),c.insertContentAt({from:0,to:f.content.size},t,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function h9(t,e){const n=ji(e,t.schema),{from:r,to:i,empty:o}=t.selection,l=[];o?(t.storedMarks&&l.push(...t.storedMarks),l.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,f=>{l.push(...f.marks)});const c=l.find(f=>f.type.name===n.name);return c?{...c.attrs}:{}}function p9(t,e){const n=new x2(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function fO(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function m9(t,e){const n=[];return t.descendants((r,i)=>{e(r)&&n.push({node:r,pos:i})}),n}function dO(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,o)=>{n(i)&&r.push({node:i,pos:o})}),r}function g9(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Mt(t){return e=>g9(e.$from,t)}function be(t,e,n){return t.config[e]===void 0&&t.parent?be(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?be(t.parent,e,n):null}):t.config[e]}function $2(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=be(e,"addExtensions",n);return r?[e,...$2(r())]:e}).flat(10)}function q2(t,e){const n=Ps.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function y9(t){return typeof t=="function"}function Ke(t,e=void 0,...n){return y9(t)?e?t.bind(e)(...n):t(...n):t}function hO(t={}){return Object.keys(t).length===0&&t.constructor===Object}function ta(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function v9(t){const e=[],{nodeExtensions:n,markExtensions:r}=ta(t),i=[...n,...r],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(l=>{const c={name:l.name,options:l.options,storage:l.storage,extensions:i},f=be(l,"addGlobalAttributes",c);if(!f)return;f().forEach(h=>{h.types.forEach(m=>{Object.entries(h.attributes).forEach(([g,y])=>{e.push({type:m,name:g,attribute:{...o,...y}})})})})}),i.forEach(l=>{const c={name:l.name,options:l.options,storage:l.storage},f=be(l,"addAttributes",c);if(!f)return;const d=f();Object.entries(d).forEach(([h,m])=>{const g={...o,...m};typeof g?.default=="function"&&(g.default=g.default()),g?.isRequired&&g?.default===void 0&&delete g.default,e.push({type:l.name,name:h,attribute:g})})}),e}function je(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const c=o?String(o).split(" "):[],f=r[i]?r[i].split(" "):[],d=c.filter(h=>!f.includes(h));r[i]=[...f,...d].join(" ")}else if(i==="style"){const c=o?o.split(";").map(h=>h.trim()).filter(Boolean):[],f=r[i]?r[i].split(";").map(h=>h.trim()).filter(Boolean):[],d=new Map;f.forEach(h=>{const[m,g]=h.split(":").map(y=>y.trim());d.set(m,g)}),c.forEach(h=>{const[m,g]=h.split(":").map(y=>y.trim());d.set(m,g)}),r[i]=Array.from(d.entries()).map(([h,m])=>`${h}: ${m}`).join("; ")}else r[i]=o}),r},{})}function Xc(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>je(n,r),{})}function pO(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function hC(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((o,l)=>{const c=l.attribute.parseHTML?l.attribute.parseHTML(n):pO(n.getAttribute(l.name));return c==null?o:{...o,[l.name]:c}},{});return{...r,...i}}}}function pC(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&hO(n)?!1:n!=null))}function mC(t){var e,n;const r={};return!((e=t?.attribute)!=null&&e.isRequired)&&"default"in(t?.attribute||{})&&(r.default=t.attribute.default),((n=t?.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=t.attribute.validate),[t.name,r]}function mO(t,e){var n;const r=v9(t),{nodeExtensions:i,markExtensions:o}=ta(t),l=(n=i.find(d=>be(d,"topNode")))==null?void 0:n.name,c=Object.fromEntries(i.map(d=>{const h=r.filter(k=>k.type===d.name),m={name:d.name,options:d.options,storage:d.storage,editor:e},g=t.reduce((k,A)=>{const N=be(A,"extendNodeSchema",m);return{...k,...N?N(d):{}}},{}),y=pC({...g,content:Ke(be(d,"content",m)),marks:Ke(be(d,"marks",m)),group:Ke(be(d,"group",m)),inline:Ke(be(d,"inline",m)),atom:Ke(be(d,"atom",m)),selectable:Ke(be(d,"selectable",m)),draggable:Ke(be(d,"draggable",m)),code:Ke(be(d,"code",m)),whitespace:Ke(be(d,"whitespace",m)),linebreakReplacement:Ke(be(d,"linebreakReplacement",m)),defining:Ke(be(d,"defining",m)),isolating:Ke(be(d,"isolating",m)),attrs:Object.fromEntries(h.map(mC))}),b=Ke(be(d,"parseHTML",m));b&&(y.parseDOM=b.map(k=>hC(k,h)));const w=be(d,"renderHTML",m);w&&(y.toDOM=k=>w({node:k,HTMLAttributes:Xc(k,h)}));const x=be(d,"renderText",m);return x&&(y.toText=x),[d.name,y]})),f=Object.fromEntries(o.map(d=>{const h=r.filter(x=>x.type===d.name),m={name:d.name,options:d.options,storage:d.storage,editor:e},g=t.reduce((x,k)=>{const A=be(k,"extendMarkSchema",m);return{...x,...A?A(d):{}}},{}),y=pC({...g,inclusive:Ke(be(d,"inclusive",m)),excludes:Ke(be(d,"excludes",m)),group:Ke(be(d,"group",m)),spanning:Ke(be(d,"spanning",m)),code:Ke(be(d,"code",m)),attrs:Object.fromEntries(h.map(mC))}),b=Ke(be(d,"parseHTML",m));b&&(y.parseDOM=b.map(x=>hC(x,h)));const w=be(d,"renderHTML",m);return w&&(y.toDOM=x=>w({mark:x,HTMLAttributes:Xc(x,h)})),[d.name,y]}));return new X6({topNode:l,nodes:c,marks:f})}function gO(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function Z2(t){return t.sort((n,r)=>{const i=be(n,"priority")||100,o=be(r,"priority")||100;return i>o?-1:i<o?1:0})}function b9(t){const e=Z2($2(t)),n=gO(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function C9(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:l={}}=n||{};let c="";return t.nodesBetween(r,i,(f,d,h,m)=>{var g;f.isBlock&&d>r&&(c+=o);const y=l?.[f.type.name];if(y)return h&&(c+=y({node:f,pos:d,parent:h,index:m,range:e})),!1;f.isText&&(c+=(g=f?.text)==null?void 0:g.slice(Math.max(r,d)-d,i-d))}),c}function w9(t,e){const n={from:0,to:t.content.size};return C9(t,n,e)}function K2(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function yO(t,e){const n=Bt(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,c=>{o.push(c)});const l=o.reverse().find(c=>c.type.name===n.name);return l?{...l.attrs}:{}}function x9(t,e){const n=Gh(typeof e=="string"?e:e.name,t.schema);return n==="node"?yO(t,e):n==="mark"?h9(t,e):{}}function vO(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function bO(t){const e=vO(t);return e.length===1?e:e.filter((n,r)=>!e.filter((o,l)=>l!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function S9(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,o)=>{const l=[];if(i.ranges.length)i.forEach((c,f)=>{l.push({from:c,to:f})});else{const{from:c,to:f}=n[o];if(c===void 0||f===void 0)return;l.push({from:c,to:f})}l.forEach(({from:c,to:f})=>{const d=e.slice(o).map(c,-1),h=e.slice(o).map(f),m=e.invert().map(d,-1),g=e.invert().map(h);r.push({oldRange:{from:m,to:g},newRange:{from:d,to:h}})})}),bO(r)}function G2(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const o=n.resolve(t),l=P2(o,i.type);l&&r.push({mark:i,...l})}):n.nodesBetween(t,e,(i,o)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(l=>({from:o,to:o+i.nodeSize,mark:l})))}),r}var CO=(t,e,n,r=20)=>{const i=t.doc.resolve(n);let o=r,l=null;for(;o>0&&l===null;){const c=i.node(o);c?.type.name===e?l=c:o-=1}return[l,o]};function dg(t,e){return e.nodes[t]||e.marks[t]||null}function yd(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}var wO=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,o,l,c)=>{var f,d;const h=((d=(f=i.type.spec).toText)==null?void 0:d.call(f,{node:i,pos:o,parent:l,index:c}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?h:h.slice(0,Math.max(0,r-o))}),n};function b0(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?ji(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(m=>o?o.name===m.type.name:!0).find(m=>jd(m.attrs,n,{strict:!1}));let l=0;const c=[];if(i.forEach(({$from:m,$to:g})=>{const y=m.pos,b=g.pos;t.doc.nodesBetween(y,b,(w,x)=>{if(!w.isText&&!w.marks.length)return;const k=Math.max(y,x),A=Math.min(b,x+w.nodeSize),N=A-k;l+=N,c.push(...w.marks.map(D=>({mark:D,from:k,to:A})))})}),l===0)return!1;const f=c.filter(m=>o?o.name===m.mark.type.name:!0).filter(m=>jd(m.mark.attrs,n,{strict:!1})).reduce((m,g)=>m+g.to-g.from,0),d=c.filter(m=>o?m.mark.type!==o&&m.mark.type.excludes(o):!0).reduce((m,g)=>m+g.to-g.from,0);return(f>0?f+d:f)>=l}function xO(t,e,n={}){if(!e)return zo(t,null,n)||b0(t,null,n);const r=Gh(e,t.schema);return r==="node"?zo(t,e,n):r==="mark"?b0(t,e,n):!1}var SO=(t,e)=>{const{$from:n,$to:r,$anchor:i}=t.selection;if(e){const o=Mt(c=>c.type.name===e)(t.selection);if(!o)return!1;const l=t.doc.resolve(o.pos+1);return i.pos+1===l.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},TO=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function gC(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function yC(t,e){const{nodeExtensions:n}=ta(e),r=n.find(l=>l.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=Ke(be(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function Yh(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(o=>{i!==!1&&(Yh(o,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function Y2(t){return t instanceof me}function T9(t,e,n){const i=t.state.doc.content.size,o=Di(e,0,i),l=Di(n,0,i),c=t.coordsAtPos(o),f=t.coordsAtPos(l,-1),d=Math.min(c.top,f.top),h=Math.max(c.bottom,f.bottom),m=Math.min(c.left,f.left),g=Math.max(c.right,f.right),y=g-m,b=h-d,k={top:d,bottom:h,left:m,right:g,width:y,height:b,x:m,y:d};return{...k,toJSON:()=>k}}function kO(t,e,n){var r;const{selection:i}=e;let o=null;if(F2(i)&&(o=i.$cursor),o){const c=(r=t.storedMarks)!=null?r:o.marks();return o.parent.type.allowsMarkType(n)&&(!!n.isInSet(c)||!c.some(d=>d.type.excludes(n)))}const{ranges:l}=i;return l.some(({$from:c,$to:f})=>{let d=c.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(c.pos,f.pos,(h,m,g)=>{if(d)return!1;if(h.isInline){const y=!g||g.type.allowsMarkType(n),b=!!n.isInSet(h.marks)||!h.marks.some(w=>w.type.excludes(n));d=y&&b}return!d}),d})}var MO=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:l,ranges:c}=o,f=ji(t,r.schema);if(i)if(l){const d=h9(r,f);n.addStoredMark(f.create({...d,...e}))}else c.forEach(d=>{const h=d.$from.pos,m=d.$to.pos;r.doc.nodesBetween(h,m,(g,y)=>{const b=Math.max(y,h),w=Math.min(y+g.nodeSize,m);g.marks.find(k=>k.type===f)?g.marks.forEach(k=>{f===k.type&&n.addMark(b,w,f.create({...k.attrs,...e}))}):n.addMark(b,w,f.create(e))})});return kO(r,n,f)},EO=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),AO=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=Bt(t,n.schema);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:c})=>O7(o,{...l,...e})(n)?!0:c.clearNodes()).command(({state:c})=>O7(o,{...l,...e})(c,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},RO=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Di(t,0,r.content.size),o=me.create(r,i);e.setSelection(o)}return!0},NO=(t,e)=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=r;let l,c;return typeof e=="number"?(l=e,c=e):e&&"from"in e&&"to"in e?(l=e.from,c=e.to):(l=o.from,c=o.to),i&&n.doc.nodesBetween(l,c,(f,d)=>{f.isText||n.setNodeMarkup(d,void 0,{...f.attrs,dir:t})}),!0},OO=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,l=ce.atStart(r).from,c=ce.atEnd(r).to,f=Di(i,l,c),d=Di(o,l,c),h=ce.create(r,f,d);e.setSelection(h)}return!0},DO=t=>({state:e,dispatch:n})=>{const r=Bt(t,e.schema);return DA(r)(e,n)};function vC(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e?.includes(i.type.name));t.tr.ensureMarks(r)}}var LO=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:l}=e,{$from:c,$to:f}=o,d=i.extensionManager.attributes,h=yd(d,c.node().type.name,c.node().attrs);if(o instanceof me&&o.node.isBlock)return!c.parentOffset||!Li(l,c.pos)?!1:(r&&(t&&vC(n,i.extensionManager.splittableMarks),e.split(c.pos).scrollIntoView()),!0);if(!c.parent.isBlock)return!1;const m=f.parentOffset===f.parent.content.size,g=c.depth===0?void 0:fO(c.node(-1).contentMatchAt(c.indexAfter(-1)));let y=m&&g?[{type:g,attrs:h}]:void 0,b=Li(e.doc,e.mapping.map(c.pos),1,y);if(!y&&!b&&Li(e.doc,e.mapping.map(c.pos),1,g?[{type:g}]:void 0)&&(b=!0,y=g?[{type:g,attrs:h}]:void 0),r){if(b&&(o instanceof ce&&e.deleteSelection(),e.split(e.mapping.map(c.pos),1,y),g&&!m&&!c.parentOffset&&c.parent.type!==g)){const w=e.mapping.map(c.before()),x=e.doc.resolve(w);c.node(-1).canReplaceWith(x.index(),x.index()+1,g)&&e.setNodeMarkup(e.mapping.map(c.before()),g)}t&&vC(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return b},_O=(t,e={})=>({tr:n,state:r,dispatch:i,editor:o})=>{var l;const c=Bt(t,r.schema),{$from:f,$to:d}=r.selection,h=r.selection.node;if(h&&h.isBlock||f.depth<2||!f.sameParent(d))return!1;const m=f.node(-1);if(m.type!==c)return!1;const g=o.extensionManager.attributes;if(f.parent.content.size===0&&f.node(-1).childCount===f.indexAfter(-1)){if(f.depth===2||f.node(-3).type!==c||f.index(-2)!==f.node(-2).childCount-1)return!1;if(i){let k=Q.empty;const A=f.index(-1)?1:f.index(-2)?2:3;for(let j=f.depth-A;j>=f.depth-3;j-=1)k=Q.from(f.node(j).copy(k));const N=f.indexAfter(-1)<f.node(-2).childCount?1:f.indexAfter(-2)<f.node(-3).childCount?2:3,D={...yd(g,f.node().type.name,f.node().attrs),...e},L=((l=c.contentMatch.defaultType)==null?void 0:l.createAndFill(D))||void 0;k=k.append(Q.from(c.createAndFill(null,L)||void 0));const z=f.before(f.depth-(A-1));n.replace(z,f.after(-N),new le(k,4-A,0));let q=-1;n.doc.nodesBetween(z,n.doc.content.size,(j,ee)=>{if(q>-1)return!1;j.isTextblock&&j.content.size===0&&(q=ee+1)}),q>-1&&n.setSelection(ce.near(n.doc.resolve(q))),n.scrollIntoView()}return!0}const y=d.pos===f.end()?m.contentMatchAt(0).defaultType:null,b={...yd(g,m.type.name,m.attrs),...e},w={...yd(g,f.node().type.name,f.node().attrs),...e};n.delete(f.pos,d.pos);const x=y?[{type:c,attrs:b},{type:y,attrs:w}]:[{type:c,attrs:b}];if(!Li(n.doc,f.pos,2))return!1;if(i){const{selection:k,storedMarks:A}=r,{splittableMarks:N}=o.extensionManager,D=A||k.$to.parentOffset&&k.$from.marks();if(n.split(f.pos,2,x).scrollIntoView(),!D||!i)return!0;const L=D.filter(z=>N.includes(z.type.name));n.ensureMarks(L)}return!0},hg=(t,e)=>{const n=Mt(l=>l.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&Fo(t.doc,n.pos)&&t.join(n.pos),!0},pg=(t,e)=>{const n=Mt(l=>l.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&Fo(t.doc,r)&&t.join(r),!0},HO=(t,e,n,r={})=>({editor:i,tr:o,state:l,dispatch:c,chain:f,commands:d,can:h})=>{const{extensions:m,splittableMarks:g}=i.extensionManager,y=Bt(t,l.schema),b=Bt(e,l.schema),{selection:w,storedMarks:x}=l,{$from:k,$to:A}=w,N=k.blockRange(A),D=x||w.$to.parentOffset&&w.$from.marks();if(!N)return!1;const L=Mt(z=>yC(z.type.name,m))(w);if(N.depth>=1&&L&&N.depth-L.depth<=1){if(L.node.type===y)return d.liftListItem(b);if(yC(L.node.type.name,m)&&y.validContent(L.node.content)&&c)return f().command(()=>(o.setNodeMarkup(L.pos,y),!0)).command(()=>hg(o,y)).command(()=>pg(o,y)).run()}return!n||!D||!c?f().command(()=>h().wrapInList(y,r)?!0:d.clearNodes()).wrapInList(y,r).command(()=>hg(o,y)).command(()=>pg(o,y)).run():f().command(()=>{const z=h().wrapInList(y,r),q=D.filter(j=>g.includes(j.type.name));return o.ensureMarks(q),z?!0:d.clearNodes()}).wrapInList(y,r).command(()=>hg(o,y)).command(()=>pg(o,y)).run()},IO=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,l=ji(t,r.schema);return b0(r,l,e)?i.unsetMark(l,{extendEmptyMarkRange:o}):i.setMark(l,e)},zO=(t,e,n={})=>({state:r,commands:i})=>{const o=Bt(t,r.schema),l=Bt(e,r.schema),c=zo(r,o,n);let f;return r.selection.$anchor.sameParent(r.selection.$head)&&(f=r.selection.$anchor.parent.attrs),c?i.setNode(l,f):i.setNode(o,{...f,...n})},BO=(t,e={})=>({state:n,commands:r})=>{const i=Bt(t,n.schema);return zo(n,i,e)?r.lift(i):r.wrapIn(i,e)},VO=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const l=t.tr,c=o.transform;for(let f=c.steps.length-1;f>=0;f-=1)l.step(c.steps[f].invert(c.docs[f]));if(o.text){const f=l.doc.resolve(o.from).marks();l.replaceWith(o.from,o.to,t.schema.text(o.text,f))}else l.delete(o.from,o.to)}return!0}}return!1},jO=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},UO=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:l=!1}=e,{selection:c}=n,f=ji(t,r.schema),{$from:d,empty:h,ranges:m}=c;if(!i)return!0;if(h&&l){let{from:g,to:y}=c;const b=(o=d.marks().find(x=>x.type===f))==null?void 0:o.attrs,w=P2(d,f,b);w&&(g=w.from,y=w.to),n.removeMark(g,y,f)}else m.forEach(g=>{n.removeMark(g.$from.pos,g.$to.pos,f)});return n.removeStoredMark(f),!0},PO=t=>({tr:e,state:n,dispatch:r})=>{const{selection:i}=n;let o,l;return typeof t=="number"?(o=t,l=t):t&&"from"in t&&"to"in t?(o=t.from,l=t.to):(o=i.from,l=i.to),r&&e.doc.nodesBetween(o,l,(c,f)=>{if(c.isText)return;const d={...c.attrs};delete d.dir,e.setNodeMarkup(f,void 0,d)}),!0},FO=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,l=null;const c=Gh(typeof t=="string"?t:t.name,r.schema);if(!c)return!1;c==="node"&&(o=Bt(t,r.schema)),c==="mark"&&(l=ji(t,r.schema));let f=!1;return n.selection.ranges.forEach(d=>{const h=d.$from.pos,m=d.$to.pos;let g,y,b,w;n.selection.empty?r.doc.nodesBetween(h,m,(x,k)=>{o&&o===x.type&&(f=!0,b=Math.max(k,h),w=Math.min(k+x.nodeSize,m),g=k,y=x)}):r.doc.nodesBetween(h,m,(x,k)=>{k<h&&o&&o===x.type&&(f=!0,b=Math.max(k,h),w=Math.min(k+x.nodeSize,m),g=k,y=x),k>=h&&k<=m&&(o&&o===x.type&&(f=!0,i&&n.setNodeMarkup(k,void 0,{...x.attrs,...e})),l&&x.marks.length&&x.marks.forEach(A=>{if(l===A.type&&(f=!0,i)){const N=Math.max(k,h),D=Math.min(k+x.nodeSize,m);n.addMark(N,D,l.create({...A.attrs,...e}))}}))}),y&&(g!==void 0&&i&&n.setNodeMarkup(g,void 0,{...y.attrs,...e}),l&&y.marks.length&&y.marks.forEach(x=>{l===x.type&&i&&n.addMark(b,w,l.create({...x.attrs,...e}))}))}),f},$O=(t,e={})=>({state:n,dispatch:r})=>{const i=Bt(t,n.schema);return kA(i,e)(n,r)},qO=(t,e={})=>({state:n,dispatch:r})=>{const i=Bt(t,n.schema);return MA(i,e)(n,r)},ZO=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},gu=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},KO=(t,e)=>{if(U2(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Zf(t){var e;const{editor:n,from:r,to:i,text:o,rules:l,plugin:c}=t,{view:f}=n;if(f.composing)return!1;const d=f.state.doc.resolve(r);if(d.parent.type.spec.code||(e=d.nodeBefore||d.nodeAfter)!=null&&e.marks.find(g=>g.type.spec.code))return!1;let h=!1;const m=wO(d)+o;return l.forEach(g=>{if(h)return;const y=KO(m,g.find);if(!y)return;const b=f.state.tr,w=qh({state:f.state,transaction:b}),x={from:r-(y[0].length-o.length),to:i},{commands:k,chain:A,can:N}=new Zh({editor:n,state:w});g.handler({state:w,range:x,match:y,commands:k,chain:A,can:N})===null||!b.steps.length||(g.undoable&&b.setMeta(c,{transform:b,from:r,to:i,text:o}),f.dispatch(b),h=!0)}),h}function GO(t){const{editor:e,rules:n}=t,r=new Be({state:{init(){return null},apply(i,o,l){const c=i.getMeta(r);if(c)return c;const f=i.getMeta("applyInputRules");return!!f&&setTimeout(()=>{let{text:h}=f;typeof h=="string"?h=h:h=q2(Q.from(h),l.schema);const{from:m}=f,g=m+h.length;Zf({editor:e,from:m,to:g,text:h,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,l,c){return Zf({editor:e,from:o,to:l,text:c,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&Zf({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:l}=i.state.selection;return l?Zf({editor:e,from:l.pos,to:l.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function YO(t){return Object.prototype.toString.call(t).slice(8,-1)}function Kf(t){return YO(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function k9(t,e){const n={...t};return Kf(t)&&Kf(e)&&Object.keys(e).forEach(r=>{Kf(e[r])&&Kf(t[r])?n[r]=k9(t[r],e[r]):n[r]=e[r]}),n}var W2=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...Ke(be(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Ke(be(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>k9(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},Ui=class M9 extends W2{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new M9(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const l=i.marks();if(!!!l.find(d=>d?.type.name===n.name))return!1;const f=l.find(d=>d?.type.name===n.name);return f&&r.removeStoredMark(f),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function WO(t){return typeof t=="number"}var XO=class{constructor(t){this.find=t.find,this.handler=t.handler}},JO=(t,e,n)=>{if(U2(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=t,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function QO(t){const{editor:e,state:n,from:r,to:i,rule:o,pasteEvent:l,dropEvent:c}=t,{commands:f,chain:d,can:h}=new Zh({editor:e,state:n}),m=[];return n.doc.nodesBetween(r,i,(y,b)=>{var w,x,k,A,N;if((x=(w=y.type)==null?void 0:w.spec)!=null&&x.code||!(y.isText||y.isTextblock||y.isInline))return;const D=(N=(A=(k=y.content)==null?void 0:k.size)!=null?A:y.nodeSize)!=null?N:0,L=Math.max(r,b),z=Math.min(i,b+D);if(L>=z)return;const q=y.isText?y.text||"":y.textBetween(L-b,z-b,void 0,"");JO(q,o.find,l).forEach(ee=>{if(ee.index===void 0)return;const $=L+ee.index+1,re=$+ee[0].length,se={from:n.tr.mapping.map($),to:n.tr.mapping.map(re)},ue=o.handler({state:n,range:se,match:ee,commands:f,chain:d,can:h,pasteEvent:l,dropEvent:c});m.push(ue)})}),m.every(y=>y!==null)}var Gf=null,eD=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function tD(t){const{editor:e,rules:n}=t;let r=null,i=!1,o=!1,l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,c;try{c=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{c=null}const f=({state:h,from:m,to:g,rule:y,pasteEvt:b})=>{const w=h.tr,x=qh({state:h,transaction:w});if(!(!QO({editor:e,state:x,from:Math.max(m-1,0),to:g.b-1,rule:y,pasteEvent:b,dropEvent:c})||!w.steps.length)){try{c=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{c=null}return l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,w}};return n.map(h=>new Be({view(m){const g=b=>{var w;r=(w=m.dom.parentElement)!=null&&w.contains(b.target)?m.dom.parentElement:null,r&&(Gf=e)},y=()=>{Gf&&(Gf=null)};return window.addEventListener("dragstart",g),window.addEventListener("dragend",y),{destroy(){window.removeEventListener("dragstart",g),window.removeEventListener("dragend",y)}}},props:{handleDOMEvents:{drop:(m,g)=>{if(o=r===m.dom.parentElement,c=g,!o){const y=Gf;y?.isEditable&&setTimeout(()=>{const b=y.state.selection;b&&y.commands.deleteRange({from:b.from,to:b.to})},10)}return!1},paste:(m,g)=>{var y;const b=(y=g.clipboardData)==null?void 0:y.getData("text/html");return l=g,i=!!b?.includes("data-pm-slice"),!1}}},appendTransaction:(m,g,y)=>{const b=m[0],w=b.getMeta("uiEvent")==="paste"&&!i,x=b.getMeta("uiEvent")==="drop"&&!o,k=b.getMeta("applyPasteRules"),A=!!k;if(!w&&!x&&!A)return;if(A){let{text:L}=k;typeof L=="string"?L=L:L=q2(Q.from(L),y.schema);const{from:z}=k,q=z+L.length,j=eD(L);return f({rule:h,state:y,from:z,to:{b:q},pasteEvt:j})}const N=g.doc.content.findDiffStart(y.doc.content),D=g.doc.content.findDiffEnd(y.doc.content);if(!(!WO(N)||!D||N===D.b))return f({rule:h,state:y,from:N,to:D,pasteEvt:l})}}))}var Wh=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=b9(t),this.schema=mO(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:dg(e.name,this.schema)},r=be(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return Z2([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:dg(r.name,this.schema)},o=[],l=be(r,"addKeyboardShortcuts",i);let c={};if(r.type==="mark"&&be(r,"exitable",i)&&(c.ArrowRight=()=>Ui.handleExit({editor:t,mark:r})),l){const g=Object.fromEntries(Object.entries(l()).map(([y,b])=>[y,()=>b({editor:t})]));c={...c,...g}}const f=CN(c);o.push(f);const d=be(r,"addInputRules",i);if(gC(r,t.options.enableInputRules)&&d){const g=d();if(g&&g.length){const y=GO({editor:t,rules:g}),b=Array.isArray(y)?y:[y];o.push(...b)}}const h=be(r,"addPasteRules",i);if(gC(r,t.options.enablePasteRules)&&h){const g=h();if(g&&g.length){const y=tD({editor:t,rules:g});o.push(...y)}}const m=be(r,"addProseMirrorPlugins",i);if(m){const g=m();o.push(...g)}return o})}get attributes(){return v9(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=ta(this.extensions);return Object.fromEntries(e.filter(n=>!!be(n,"addNodeView")).map(n=>{const r=this.attributes.filter(f=>f.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Bt(n.name,this.schema)},o=be(n,"addNodeView",i);if(!o)return[];const l=o();if(!l)return[];const c=(f,d,h,m,g)=>{const y=Xc(f,r);return l({node:f,view:d,getPos:h,decorations:m,innerDecorations:g,editor:t,extension:n,HTMLAttributes:y})};return[n.name,c]}))}get markViews(){const{editor:t}=this,{markExtensions:e}=ta(this.extensions);return Object.fromEntries(e.filter(n=>!!be(n,"addMarkView")).map(n=>{const r=this.attributes.filter(c=>c.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:ji(n.name,this.schema)},o=be(n,"addMarkView",i);if(!o)return[];const l=(c,f,d)=>{const h=Xc(c,r);return o()({mark:c,view:f,inline:d,editor:t,extension:n,HTMLAttributes:h,updateAttributes:m=>{gD(c,t,m)}})};return[n.name,l]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:dg(e.name,this.schema)};e.type==="mark"&&((n=Ke(be(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const i=be(e,"onBeforeCreate",r),o=be(e,"onCreate",r),l=be(e,"onUpdate",r),c=be(e,"onSelectionUpdate",r),f=be(e,"onTransaction",r),d=be(e,"onFocus",r),h=be(e,"onBlur",r),m=be(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),l&&this.editor.on("update",l),c&&this.editor.on("selectionUpdate",c),f&&this.editor.on("transaction",f),d&&this.editor.on("focus",d),h&&this.editor.on("blur",h),m&&this.editor.on("destroy",m)})}};Wh.resolve=b9;Wh.sort=Z2;Wh.flatten=$2;var nD={};j2(nD,{ClipboardTextSerializer:()=>A9,Commands:()=>R9,Delete:()=>N9,Drop:()=>O9,Editable:()=>D9,FocusEvents:()=>_9,Keymap:()=>H9,Paste:()=>I9,Tabindex:()=>z9,TextDirection:()=>B9,focusEventsPluginKey:()=>L9});var Fe=class E9 extends W2{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new E9(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},A9=Fe.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Be({key:new Pe("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,l=Math.min(...o.map(h=>h.$from.pos)),c=Math.max(...o.map(h=>h.$to.pos)),f=K2(n);return C9(r,{from:l,to:c},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:f})}}})]}}),R9=Fe.create({name:"commands",addCommands(){return{...l9}}}),N9=Fe.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,i;const o=()=>{var l,c,f,d;if((d=(f=(c=(l=this.editor.options.coreExtensionOptions)==null?void 0:l.delete)==null?void 0:c.filterTransaction)==null?void 0:f.call(c,t))!=null?d:t.getMeta("y-sync$"))return;const h=p9(t.before,[t,...e]);S9(h).forEach(y=>{h.mapping.mapResult(y.oldRange.from).deletedAfter&&h.mapping.mapResult(y.oldRange.to).deletedBefore&&h.before.nodesBetween(y.oldRange.from,y.oldRange.to,(b,w)=>{const x=w+b.nodeSize-2,k=y.oldRange.from<=w&&x<=y.oldRange.to;this.editor.emit("delete",{type:"node",node:b,from:w,to:x,newFrom:h.mapping.map(w),newTo:h.mapping.map(x),deletedRange:y.oldRange,newRange:y.newRange,partial:!k,editor:this.editor,transaction:t,combinedTransform:h})})});const g=h.mapping;h.steps.forEach((y,b)=>{var w,x;if(y instanceof Nr){const k=g.slice(b).map(y.from,-1),A=g.slice(b).map(y.to),N=g.invert().map(k,-1),D=g.invert().map(A),L=(w=h.doc.nodeAt(k-1))==null?void 0:w.marks.some(q=>q.eq(y.mark)),z=(x=h.doc.nodeAt(A))==null?void 0:x.marks.some(q=>q.eq(y.mark));this.editor.emit("delete",{type:"mark",mark:y.mark,from:y.from,to:y.to,deletedRange:{from:N,to:D},newRange:{from:k,to:A},partial:!!(z||L),editor:this.editor,transaction:t,combinedTransform:h})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(o,0):o()}}),O9=Fe.create({name:"drop",addProseMirrorPlugins(){return[new Be({key:new Pe("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),D9=Fe.create({name:"editable",addProseMirrorPlugins(){return[new Be({key:new Pe("editable"),props:{editable:()=>this.editor.options.editable}})]}}),L9=new Pe("focusEvents"),_9=Fe.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Be({key:L9,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),H9=Fe.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:l})=>[()=>l.undoInputRule(),()=>l.command(({tr:c})=>{const{selection:f,doc:d}=c,{empty:h,$anchor:m}=f,{pos:g,parent:y}=m,b=m.parent.isTextblock&&g>0?c.doc.resolve(g-1):m,w=b.parent.type.spec.isolating,x=m.pos-m.parentOffset,k=w&&b.parent.childCount===1?x===m.pos:we.atStart(d).from===g;return!h||!y.type.isTextblock||y.textContent.length||!k||k&&m.parent.type.name==="paragraph"?!1:l.clearNodes()}),()=>l.deleteSelection(),()=>l.joinBackward(),()=>l.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:l})=>[()=>l.deleteSelection(),()=>l.deleteCurrentNode(),()=>l.joinForward(),()=>l.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:l})=>[()=>l.newlineInCode(),()=>l.createParagraphNear(),()=>l.liftEmptyBlock(),()=>l.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Kh()||d9()?o:i},addProseMirrorPlugins(){return[new Be({key:new Pe("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(w=>w.getMeta("composition")))return;const r=t.some(w=>w.docChanged)&&!e.doc.eq(n.doc),i=t.some(w=>w.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:l,to:c}=e.selection,f=we.atStart(e.doc).from,d=we.atEnd(e.doc).to;if(o||!(l===f&&c===d)||!Yh(n.doc))return;const g=n.tr,y=qh({state:n,transaction:g}),{commands:b}=new Zh({editor:this.editor,state:y});if(b.clearNodes(),!!g.steps.length)return g}})]}}),I9=Fe.create({name:"paste",addProseMirrorPlugins(){return[new Be({key:new Pe("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),z9=Fe.create({name:"tabindex",addProseMirrorPlugins(){return[new Be({key:new Pe("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),B9=Fe.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=ta(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new Be({key:new Pe("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),rD=class Vl{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Vl(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Vl(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Vl(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,l=this.pos+r+(o?0:1);if(l<0||l>this.resolvedPos.doc.nodeSize-2)return;const c=this.resolvedPos.doc.resolve(l);if(!i&&c.depth<=this.depth)return;const f=new Vl(c,this.editor,i,i?n:null);i&&(f.actualDepth=this.depth+1),e.push(new Vl(c,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const o=i.node.attrs,l=Object.keys(n);for(let c=0;c<l.length;c+=1){const f=l[c];if(o[f]!==n[f])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(n);return this.children.forEach(l=>{r&&i.length>0||(l.node.type.name===e&&o.every(f=>n[f]===l.node.attrs[f])&&i.push(l),!(r&&i.length>0)&&(i=i.concat(l.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},iD=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function oD(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var sD=class extends ZO{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:o})=>this.options.onDrop(r,i,o)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=c9(e,this.options.autofocus);this.editorState=Ul.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t?.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=oD(iD,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=y9(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(i=>{const o=typeof i=="string"?`${i}$`:i.key;n=n.filter(l=>!l.key.startsWith(o))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[D9,A9.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),R9,_9,H9,z9,O9,I9,N9,B9.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new Wh(r,this)}createCommandManager(){this.commandManager=new Zh({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=v0(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=v0(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){var e;this.editorView=new s9(t,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(d=>{var h;return(h=this.capturedTransaction)==null?void 0:h.step(d)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),i=n.includes(t),o=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const l=n.findLast(d=>d.getMeta("focus")||d.getMeta("blur")),c=l?.getMeta("focus"),f=l?.getMeta("blur");c&&this.emit("focus",{editor:this,event:c.event,transaction:l}),f&&this.emit("blur",{editor:this,event:f.event,transaction:l}),!(t.getMeta("preventUpdate")||!n.some(d=>d.docChanged)||o.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return x9(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return xO(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return q2(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return w9(this.state.doc,{blockSeparator:e,textSerializers:{...K2(this.schema),...n}})}get isEmpty(){return Yh(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new rD(e,this)}get $doc(){return this.$pos(0)}};function na(t){return new gu({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Ke(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,l=r[r.length-1],c=r[0];if(l){const f=c.search(/\S/),d=n.from+c.indexOf(l),h=d+l.length;if(G2(n.from,n.to,e.doc).filter(y=>y.mark.type.excluded.find(w=>w===t.type&&w!==y.mark.type)).filter(y=>y.to>d).length)return null;h<n.to&&o.delete(h,n.to),d>n.from&&o.delete(n.from+f,d);const g=n.from+f+l.length;o.addMark(n.from+f,g,t.type.create(i||{})),o.removeStoredMark(t.type)}},undoable:t.undoable})}function lD(t){return new gu({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Ke(t.getAttributes,void 0,r)||{},{tr:o}=e,l=n.from;let c=n.to;const f=t.type.create(i);if(r[1]){const d=r[0].lastIndexOf(r[1]);let h=l+d;h>c?h=c:c=h+r[1].length;const m=r[0][r[0].length-1];o.insertText(m,l+r[0].length-1),o.replaceWith(h,c,f)}else if(r[0]){const d=t.type.isInline?l:l-1;o.insert(d,t.type.create(i)).delete(o.mapping.map(l),o.mapping.map(c))}o.scrollIntoView()},undoable:t.undoable})}function C0(t){return new gu({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),o=Ke(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)},undoable:t.undoable})}function Et(t){return new gu({find:t.find,handler:({state:e,range:n,match:r})=>{let i=t.replace,o=n.from;const l=n.to;if(r[1]){const c=r[0].lastIndexOf(r[1]);i+=r[0].slice(c+r[1].length),o+=c;const f=o-l;f>0&&(i=r[0].slice(c-f,c)+i,o=l)}e.tr.insertText(i,o,l)},undoable:t.undoable})}function ra(t){return new gu({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const o=Ke(t.getAttributes,void 0,r)||{},l=e.tr.delete(n.from,n.to),f=l.doc.resolve(n.from).blockRange(),d=f&&w2(f,t.type,o);if(!d)return null;if(l.wrap(f,d),t.keepMarks&&t.editor){const{selection:m,storedMarks:g}=e,{splittableMarks:y}=t.editor.extensionManager,b=g||m.$to.parentOffset&&m.$from.marks();if(b){const w=b.filter(x=>y.includes(x.type.name));l.ensureMarks(w)}}if(t.keepAttributes){const m=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(m,o).run()}const h=l.doc.resolve(n.from-1).nodeBefore;h&&h.type===t.type&&Fo(l.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,h))&&l.join(n.from-1)},undoable:t.undoable})}function aD(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof me){const o=r.index();return r.parent.canReplaceWith(o,o+1,e)}let i=r.depth;for(;i>=0;){const o=r.index(i);if(r.node(i).contentMatchAt(o).matchType(e))return!0;i-=1}return!1}function cD(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}var uD={};j2(uD,{createAtomBlockMarkdownSpec:()=>fD,createBlockMarkdownSpec:()=>dD,createInlineMarkdownSpec:()=>mD,parseAttributes:()=>X2,parseIndentedBlocks:()=>w0,renderNestedMarkdownContent:()=>Q2,serializeAttributes:()=>J2});function X2(t){if(!t?.trim())return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,d=>(n.push(d),`__QUOTED_${n.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const d=i.map(h=>h.trim().slice(1));e.class=d.join(" ")}const o=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(e.id=o[1]);const l=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(l)).forEach(([,d,h])=>{var m;const g=parseInt(((m=h.match(/__QUOTED_(\d+)__/))==null?void 0:m[1])||"0",10),y=n[g];y&&(e[d]=y.slice(1,-1))});const f=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return f&&f.split(/\s+/).filter(Boolean).forEach(h=>{h.match(/^[a-zA-Z][\w-]*$/)&&(e[h]=!0)}),e}function J2(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function fD(t){const{nodeName:e,name:n,parseAttributes:r=X2,serializeAttributes:i=J2,defaultAttributes:o={},requiredAttributes:l=[],allowedAttributes:c}=t,f=n||e,d=h=>{if(!c)return h;const m={};return c.forEach(g=>{g in h&&(m[g]=h[g])}),m};return{parseMarkdown:(h,m)=>{const g={...o,...h.attributes};return m.createNode(e,g,[])},markdownTokenizer:{name:e,level:"block",start(h){var m;const g=new RegExp(`^:::${f}(?:\\s|$)`,"m"),y=(m=h.match(g))==null?void 0:m.index;return y!==void 0?y:-1},tokenize(h,m,g){const y=new RegExp(`^:::${f}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),b=h.match(y);if(!b)return;const w=b[1]||"",x=r(w);if(!l.find(A=>!(A in x)))return{type:e,raw:b[0],attributes:x}}},renderMarkdown:h=>{const m=d(h.attrs||{}),g=i(m),y=g?` {${g}}`:"";return`:::${f}${y} :::`}}}function dD(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=X2,serializeAttributes:o=J2,defaultAttributes:l={},content:c="block",allowedAttributes:f}=t,d=n||e,h=m=>{if(!f)return m;const g={};return f.forEach(y=>{y in m&&(g[y]=m[y])}),g};return{parseMarkdown:(m,g)=>{let y;if(r){const w=r(m);y=typeof w=="string"?[{type:"text",text:w}]:w}else c==="block"?y=g.parseChildren(m.tokens||[]):y=g.parseInline(m.tokens||[]);const b={...l,...m.attributes};return g.createNode(e,b,y)},markdownTokenizer:{name:e,level:"block",start(m){var g;const y=new RegExp(`^:::${d}`,"m"),b=(g=m.match(y))==null?void 0:g.index;return b!==void 0?b:-1},tokenize(m,g,y){var b;const w=new RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),x=m.match(w);if(!x)return;const[k,A=""]=x,N=i(A);let D=1;const L=k.length;let z="";const q=/^:::([\w-]*)(\s.*)?/gm,j=m.slice(L);for(q.lastIndex=0;;){const ee=q.exec(j);if(ee===null)break;const $=ee.index,re=ee[1];if(!((b=ee[2])!=null&&b.endsWith(":::"))){if(re)D+=1;else if(D-=1,D===0){const se=j.slice(0,$);z=se.trim();const ue=m.slice(0,L+$+ee[0].length);let G=[];if(z)if(c==="block")for(G=y.blockTokens(se),G.forEach(P=>{P.text&&(!P.tokens||P.tokens.length===0)&&(P.tokens=y.inlineTokens(P.text))});G.length>0;){const P=G[G.length-1];if(P.type==="paragraph"&&(!P.text||P.text.trim()===""))G.pop();else break}else G=y.inlineTokens(z);return{type:e,raw:ue,attributes:N,content:z,tokens:G}}}}}},renderMarkdown:(m,g)=>{const y=h(m.attrs||{}),b=o(y),w=b?` {${b}}`:"",x=g.renderChildren(m.content||[],`

`);return`:::${d}${w}

${x}

:::`}}}function hD(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,i,o,l]=r;e[i]=o||l,r=n.exec(t)}return e}function pD(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function mD(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=hD,serializeAttributes:o=pD,defaultAttributes:l={},selfClosing:c=!1,allowedAttributes:f}=t,d=n||e,h=g=>{if(!f)return g;const y={};return f.forEach(b=>{b in g&&(y[b]=g[b])}),y},m=d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(g,y)=>{const b={...l,...g.attributes};if(c)return y.createNode(e,b);const w=r?r(g):g.content||"";return w?y.createNode(e,b,[y.createTextNode(w)]):y.createNode(e,b,[])},markdownTokenizer:{name:e,level:"inline",start(g){const y=c?new RegExp(`\\[${m}\\s*[^\\]]*\\]`):new RegExp(`\\[${m}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${m}\\]`),b=g.match(y),w=b?.index;return w!==void 0?w:-1},tokenize(g,y,b){const w=c?new RegExp(`^\\[${m}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${m}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${m}\\]`),x=g.match(w);if(!x)return;let k="",A="";if(c){const[,D]=x;A=D}else{const[,D,L]=x;A=D,k=L||""}const N=i(A.trim());return{type:e,raw:x[0],content:k.trim(),attributes:N}}},renderMarkdown:g=>{let y="";r?y=r(g):g.content&&g.content.length>0&&(y=g.content.filter(k=>k.type==="text").map(k=>k.text).join(""));const b=h(g.attrs||{}),w=o(b),x=w?` ${w}`:"";return c?`[${d}${x}]`:`[${d}${x}]${y}[/${d}]`}}}function w0(t,e,n){var r,i,o,l;const c=t.split(`
`),f=[];let d="",h=0;const m=e.baseIndentSize||2;for(;h<c.length;){const g=c[h],y=g.match(e.itemPattern);if(!y){if(f.length>0)break;if(g.trim()===""){h+=1,d=`${d}${g}
`;continue}else return}const b=e.extractItemData(y),{indentLevel:w,mainContent:x}=b;d=`${d}${g}
`;const k=[x];for(h+=1;h<c.length;){const L=c[h];if(L.trim()===""){const q=c.slice(h+1).findIndex($=>$.trim()!=="");if(q===-1)break;if((((i=(r=c[h+1+q].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>w){k.push(L),d=`${d}${L}
`,h+=1;continue}else break}if((((l=(o=L.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:l.length)||0)>w)k.push(L),d=`${d}${L}
`,h+=1;else break}let A;const N=k.slice(1);if(N.length>0){const L=N.map(z=>z.slice(w+m)).join(`
`);L.trim()&&(e.customNestedParser?A=e.customNestedParser(L):A=n.blockTokens(L))}const D=e.createToken(b,A);f.push(D)}if(f.length!==0)return{items:f,raw:d}}function Q2(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const i=typeof n=="function"?n(r):n,[o,...l]=t.content,c=e.renderChildren([o]),f=[`${i}${c}`];return l&&l.length>0&&l.forEach(d=>{const h=e.renderChildren([d]);if(h){const m=h.split(`
`).map(g=>g?e.indent(g):"").join(`
`);f.push(m)}}),f.join(`
`)}function gD(t,e,n={}){const{state:r}=e,{doc:i,tr:o}=r,l=t;i.descendants((c,f)=>{const d=o.mapping.map(f),h=o.mapping.map(f)+c.nodeSize;let m=null;if(c.marks.forEach(y=>{if(y!==l)return!1;m=y}),!m)return;let g=!1;if(Object.keys(n).forEach(y=>{n[y]!==m.attrs[y]&&(g=!0)}),g){const y=t.type.create({...t.attrs,...n});o.removeMark(d,h,t.type),o.addMark(d,h,y)}}),o.docChanged&&e.view.dispatch(o)}var st=class V9 extends W2{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new V9(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},yD=class{constructor(t,e,n){this.isDragging=!1,this.component=t,this.editor=e.editor,this.options={stopEvent:null,ignoreMutation:null,...n},this.extension=e.extension,this.node=e.node,this.decorations=e.decorations,this.innerDecorations=e.innerDecorations,this.view=e.view,this.HTMLAttributes=e.HTMLAttributes,this.getPos=e.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(t){var e,n,r,i,o,l,c;const{view:f}=this.editor,d=t.target,h=d.nodeType===3?(e=d.parentElement)==null?void 0:e.closest("[data-drag-handle]"):d.closest("[data-drag-handle]");if(!this.dom||(n=this.contentDOM)!=null&&n.contains(d)||!h)return;let m=0,g=0;if(this.dom!==h){const A=this.dom.getBoundingClientRect(),N=h.getBoundingClientRect(),D=(i=t.offsetX)!=null?i:(r=t.nativeEvent)==null?void 0:r.offsetX,L=(l=t.offsetY)!=null?l:(o=t.nativeEvent)==null?void 0:o.offsetY;m=N.x-A.x+D,g=N.y-A.y+L}const y=this.dom.cloneNode(!0);try{const A=this.dom.getBoundingClientRect();y.style.width=`${Math.round(A.width)}px`,y.style.height=`${Math.round(A.height)}px`,y.style.boxSizing="border-box",y.style.pointerEvents="none"}catch{}let b=null;try{b=document.createElement("div"),b.style.position="absolute",b.style.top="-9999px",b.style.left="-9999px",b.style.pointerEvents="none",b.appendChild(y),document.body.appendChild(b),(c=t.dataTransfer)==null||c.setDragImage(y,m,g)}finally{b&&setTimeout(()=>{try{b?.remove()}catch{}},0)}const w=this.getPos();if(typeof w!="number")return;const x=me.create(f.state.doc,w),k=f.state.tr.setSelection(x);f.dispatch(k)}stopEvent(t){var e;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:t});const n=t.target;if(!(this.dom.contains(n)&&!((e=this.contentDOM)!=null&&e.contains(n))))return!1;const i=t.type.startsWith("drag"),o=t.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable)&&!o&&!i)return!0;const{isEditable:c}=this.editor,{isDragging:f}=this,d=!!this.node.type.spec.draggable,h=me.isSelectable(this.node),m=t.type==="copy",g=t.type==="paste",y=t.type==="cut",b=t.type==="mousedown";if(!d&&h&&i&&t.target===this.dom&&t.preventDefault(),d&&i&&!f&&t.target===this.dom)return t.preventDefault(),!1;if(d&&c&&!f&&b){const w=n.closest("[data-drag-handle]");w&&(this.dom===w||this.dom.contains(w))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(f||o||m||g||y||b&&h)}ignoreMutation(t){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:t}):this.node.isLeaf||this.node.isAtom?!0:t.type==="selection"||this.dom.contains(t.target)&&t.type==="childList"&&(Kh()||u9())&&this.editor.isFocused&&[...Array.from(t.addedNodes),...Array.from(t.removedNodes)].every(n=>n.isContentEditable)?!1:this.contentDOM===t.target&&t.type==="attributes"?!0:!this.contentDOM.contains(t.target)}updateAttributes(t){this.editor.commands.command(({tr:e})=>{const n=this.getPos();return typeof n!="number"?!1:(e.setNodeMarkup(n,void 0,{...this.node.attrs,...t}),!0)})}deleteNode(){const t=this.getPos();if(typeof t!="number")return;const e=t+this.node.nodeSize;this.editor.commands.deleteRange({from:t,to:e})}};function _s(t){return new XO({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const o=Ke(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:l}=e,c=r[r.length-1],f=r[0];let d=n.to;if(c){const h=f.search(/\S/),m=n.from+f.indexOf(c),g=m+c.length;if(G2(n.from,n.to,e.doc).filter(b=>b.mark.type.excluded.find(x=>x===t.type&&x!==b.mark.type)).filter(b=>b.to>m).length)return null;g<n.to&&l.delete(g,n.to),m>n.from&&l.delete(n.from+h,m),d=n.from+h+c.length,l.addMark(n.from+h,d,t.type.create(o||{})),l.removeStoredMark(t.type)}}})}var mg,bC;function vD(){return bC||(bC=1,mg=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var l=o[i];if(!(l==="_owner"&&e.$$typeof)&&!t(e[l],n[l]))return!1}return!0}return e!==e&&n!==n}),mg}var bD=vD();const CD=v2(bD);var gg={exports:{}},yg={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CC;function wD(){if(CC)return yg;CC=1;var t=du(),e=_6();function n(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,l=t.useEffect,c=t.useMemo,f=t.useDebugValue;return yg.useSyncExternalStoreWithSelector=function(d,h,m,g,y){var b=o(null);if(b.current===null){var w={hasValue:!1,value:null};b.current=w}else w=b.current;b=c(function(){function k(z){if(!A){if(A=!0,N=z,z=g(z),y!==void 0&&w.hasValue){var q=w.value;if(y(q,z))return D=q}return D=z}if(q=D,r(N,z))return q;var j=g(z);return y!==void 0&&y(q,j)?(N=z,q):(N=z,D=j)}var A=!1,N,D,L=m===void 0?null:m;return[function(){return k(h())},L===null?void 0:function(){return k(L())}]},[h,m,g,y]);var x=i(d,b[0],b[1]);return l(function(){w.hasValue=!0,w.value=x},[x]),f(x),x},yg}var wC;function xD(){return wC||(wC=1,gg.exports=wD()),gg.exports}var SD=xD(),TD=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},kD=({contentComponent:t})=>{const e=H6.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return S.jsx(S.Fragment,{children:Object.values(e)})};function MD(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:yE.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}var ED=class extends ht.Component{constructor(t){var e;super(t),this.editorContentRef=ht.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const t=this.props.editor;if(t&&!t.isDestroyed&&t.options.element){if(t.contentComponent)return;const e=this.editorContentRef.current;e.append(t.view.dom),t.setOptions({element:e}),t.contentComponent=MD(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.firstChild))return;const n=document.createElement("div");n.append(e.view.dom),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return S.jsxs(S.Fragment,{children:[S.jsx("div",{ref:TD(e,this.editorContentRef),...n}),t?.contentComponent&&S.jsx(kD,{contentComponent:t.contentComponent})]})}},AD=M.forwardRef((t,e)=>{const n=ht.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return ht.createElement(ED,{key:n,innerRef:e,...t})}),RD=ht.memo(AD),ND=typeof window<"u"?M.useLayoutEffect:M.useEffect,OD=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function j9(t){var e;const[n]=M.useState(()=>new OD(t.editor)),r=SD.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:CD);return ND(()=>n.watch(t.editor),[t.editor,n]),M.useDebugValue(r),r}var DD=!1,x0=typeof window>"u",LD=x0||!!(typeof window<"u"&&window.next),_D=class U9{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?x0||LD?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onBeforeCreate)==null?void 0:o.call(i,...r)},onBlur:(...r)=>{var i,o;return(o=(i=this.options.current).onBlur)==null?void 0:o.call(i,...r)},onCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onCreate)==null?void 0:o.call(i,...r)},onDestroy:(...r)=>{var i,o;return(o=(i=this.options.current).onDestroy)==null?void 0:o.call(i,...r)},onFocus:(...r)=>{var i,o;return(o=(i=this.options.current).onFocus)==null?void 0:o.call(i,...r)},onSelectionUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onSelectionUpdate)==null?void 0:o.call(i,...r)},onTransaction:(...r)=>{var i,o;return(o=(i=this.options.current).onTransaction)==null?void 0:o.call(i,...r)},onUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onUpdate)==null?void 0:o.call(i,...r)},onContentError:(...r)=>{var i,o;return(o=(i=this.options.current).onContentError)==null?void 0:o.call(i,...r)},onDrop:(...r)=>{var i,o;return(o=(i=this.options.current).onDrop)==null?void 0:o.call(i,...r)},onPaste:(...r)=>{var i,o;return(o=(i=this.options.current).onPaste)==null?void 0:o.call(i,...r)},onDelete:(...r)=>{var i,o;return(o=(i=this.options.current).onDelete)==null?void 0:o.call(i,...r)}};return new sD(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,o)=>{var l;return i===((l=n.extensions)==null?void 0:l[o])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?U9.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function HD(t={},e=[]){const n=M.useRef(t);n.current=t;const[r]=M.useState(()=>new _D(n)),i=H6.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return M.useDebugValue(i),M.useEffect(r.onRender(e)),j9({editor:i,selector:({transactionNumber:o})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&o===0?0:o+1}),i}var ey=M.createContext({editor:null});ey.Consumer;var ty=()=>M.useContext(ey),P9=M.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),F9=()=>M.useContext(P9);function pa({as:t="div",...e}){const{nodeViewContentRef:n,nodeViewContentChildren:r}=F9();return S.jsx(t,{...e,ref:n,"data-node-view-content":"",style:{whiteSpace:"pre-wrap",...e.style},children:r})}var qo=ht.forwardRef((t,e)=>{const{onDragStart:n}=F9(),r=t.as||"div";return S.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});function xC(t){return!!(typeof t=="function"&&t.prototype&&t.prototype.isReactComponent)}function SC(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.forward_ref)"||t.$$typeof.description==="react.forward_ref"))}function ID(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.memo)"||t.$$typeof.description==="react.memo"))}function zD(t){if(xC(t)||SC(t))return!0;if(ID(t)){const e=t.type;if(e)return xC(e)||SC(e)}return!1}function BD(){try{if(M.version)return parseInt(M.version.split(".")[0],10)>=19}catch{}return!1}var S0=class{constructor(t,{editor:e,props:n={},as:r="div",className:i=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=t,this.editor=e,this.props=n,this.element=document.createElement(r),this.element.classList.add("react-renderer"),i&&this.element.classList.add(...i.split(" ")),this.editor.isInitialized?da.flushSync(()=>{this.render()}):queueMicrotask(()=>{this.render()})}render(){var t;const e=this.component,n=this.props,r=this.editor,i=BD(),o=zD(e),l={...n};l.ref&&!(i||o)&&delete l.ref,!l.ref&&(i||o)&&(l.ref=c=>{this.ref=c}),this.reactElement=S.jsx(e,{...l}),(t=r?.contentComponent)==null||t.setRenderer(this.id,this)}updateProps(t={}){this.props={...this.props,...t},this.render()}destroy(){var t;const e=this.editor;(t=e?.contentComponent)==null||t.removeRenderer(this.id);try{this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}catch{}}updateAttributes(t){Object.keys(t).forEach(e=>{this.element.setAttribute(e,t[e])})}};ht.createContext({markViewContentRef:()=>{}});var VD=class extends yD{constructor(t,e,n){if(super(t,e,n),!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";const r=this.dom.querySelector("[data-node-view-content]");if(!r)return;r.appendChild(this.contentDOMElement)}}mount(){const t={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(f={})=>this.updateAttributes(f),deleteNode:()=>this.deleteNode(),ref:M.createRef()};if(!this.component.displayName){const f=d=>d.charAt(0).toUpperCase()+d.substring(1);this.component.displayName=f(this.extension.name)}const r={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:f=>{f&&this.contentDOMElement&&f.firstChild!==this.contentDOMElement&&(f.hasAttribute("data-node-view-wrapper")&&f.removeAttribute("data-node-view-wrapper"),f.appendChild(this.contentDOMElement))}},i=this.component,o=M.memo(f=>S.jsx(P9.Provider,{value:r,children:M.createElement(i,f)}));o.displayName="ReactNodeView";let l=this.node.isInline?"span":"div";this.options.as&&(l=this.options.as);const{className:c=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new S0(o,{editor:this.editor,props:t,as:l,className:`node-${this.node.type.name} ${c}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var t;if(this.renderer.element.firstElementChild&&!((t=this.renderer.element.firstElementChild)!=null&&t.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:t,to:e}=this.editor.state.selection,n=this.getPos();if(typeof n=="number")if(t<=n&&e>=n+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(t,e,n){const r=i=>{this.renderer.updateProps(i),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(t.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const i=this.node,o=this.decorations,l=this.innerDecorations;return this.node=t,this.decorations=e,this.innerDecorations=n,this.options.update({oldNode:i,oldDecorations:o,newNode:t,newDecorations:e,oldInnerDecorations:l,innerDecorations:n,updateProps:()=>r({node:t,decorations:e,innerDecorations:n})})}return t===this.node&&this.decorations===e&&this.innerDecorations===n||(this.node=t,this.decorations=e,this.innerDecorations=n,r({node:t,decorations:e,innerDecorations:n})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let t={};if(typeof this.options.attrs=="function"){const e=this.editor.extensionManager.attributes,n=Xc(this.node,e);t=this.options.attrs({node:this.node,HTMLAttributes:n})}else t=this.options.attrs;this.renderer.updateAttributes(t)}}};function Zo(t,e){return n=>n.editor.contentComponent?new VD(t,n,e):{}}var Ud=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},jD=/^\s*>\s$/,UD=st.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return Ud("blockquote",{...je(this.options.HTMLAttributes,t),children:Ud("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(i=>{const c=e.renderChildren([i]).split(`
`).map(f=>f.trim()===""?n:`${n} ${f}`);r.push(c.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ra({find:jD,type:this.type})]}}),PD=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,FD=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,$D=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,qD=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,ZD=Ui.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return Ud("strong",{...je(this.options.HTMLAttributes,t),children:Ud("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[na({find:PD,type:this.type}),na({find:$D,type:this.type})]},addPasteRules(){return[_s({find:FD,type:this.type}),_s({find:qD,type:this.type})]}}),KD=/(^|[^`])`([^`]+)`(?!`)$/,GD=/(^|[^`])`([^`]+)`(?!`)/g,YD=Ui.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",je(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[na({find:KD,type:this.type})]},addPasteRules(){return[_s({find:GD,type:this.type})]}}),vg=4,WD=/^```([a-z]+)?[\s\n]$/,XD=/^~~~([a-z]+)?[\s\n]$/,JD=st.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:vg,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const o=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(l=>l.startsWith(n)).map(l=>l.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",je(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const i=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:vg,{state:r}=t,{selection:i}=r,{$from:o,empty:l}=i;if(o.parent.type!==this.type)return!1;const c=" ".repeat(n);return l?t.commands.insertContent(c):t.commands.command(({tr:f})=>{const{from:d,to:h}=i,y=r.doc.textBetween(d,h,`
`,`
`).split(`
`).map(b=>c+b).join(`
`);return f.replaceWith(d,h,r.schema.text(y)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:vg,{state:r}=t,{selection:i}=r,{$from:o,empty:l}=i;return o.parent.type!==this.type?!1:l?t.commands.command(({tr:c})=>{var f;const{pos:d}=o,h=o.start(),m=o.end(),y=r.doc.textBetween(h,m,`
`,`
`).split(`
`);let b=0,w=0;const x=d-h;for(let z=0;z<y.length;z+=1){if(w+y[z].length>=x){b=z;break}w+=y[z].length+1}const A=((f=y[b].match(/^ */))==null?void 0:f[0])||"",N=Math.min(A.length,n);if(N===0)return!0;let D=h;for(let z=0;z<b;z+=1)D+=y[z].length+1;return c.delete(D,D+N),d-D<=N&&c.setSelection(ce.create(c.doc,D)),!0}):t.commands.command(({tr:c})=>{const{from:f,to:d}=i,g=r.doc.textBetween(f,d,`
`,`
`).split(`
`).map(y=>{var b;const w=((b=y.match(/^ */))==null?void 0:b[0])||"",x=Math.min(w.length,n);return y.slice(x)}).join(`
`);return c.replaceWith(f,d,r.schema.text(g)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,l=r.parent.textContent.endsWith(`

`);return!o||!l?!1:t.chain().command(({tr:c})=>(c.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const c=i.after();return c===void 0?!1:r.nodeAt(c)?t.commands.command(({tr:d})=>(d.setSelection(we.near(r.resolve(c))),!0)):t.commands.exitCode()}}},addInputRules(){return[C0({find:WD,type:this.type,getAttributes:t=>({language:t[1]})}),C0({find:XD,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Be({key:new Pe("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i?.mode;if(!n||!o)return!1;const{tr:l,schema:c}=t.state,f=c.text(n.replace(/\r\n?/g,`
`));return l.replaceSelectionWith(this.type.create({language:o},f)),l.selection.$from.parent.type!==this.type&&l.setSelection(ce.near(l.doc.resolve(Math.max(0,l.selection.from-2)))),l.setMeta("paste",!0),t.dispatch(l),!0}}})]}}),QD=st.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),eL=st.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",je(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:l}=this.options,{splittableMarks:c}=r.extensionManager,f=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:d,dispatch:h})=>{if(h&&f&&l){const m=f.filter(g=>c.includes(g.type.name));d.ensureMarks(m)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),tL=st.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,je(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,i="#".repeat(r);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>C0({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),nL=st.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",je(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!aD(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,i=t();return Y2(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:o,tr:l,dispatch:c})=>{if(c){const{$to:f}=l.selection,d=f.end();if(f.nodeAfter)f.nodeAfter.isTextblock?l.setSelection(ce.create(l.doc,f.pos+1)):f.nodeAfter.isBlock?l.setSelection(me.create(l.doc,f.pos)):l.setSelection(ce.create(l.doc,f.pos));else{const h=o.schema.nodes[this.options.nextNodeType]||f.parent.type.contentMatch.defaultType,m=h?.create();m&&(l.insert(d,m),l.setSelection(ce.create(l.doc,d+1)))}l.scrollIntoView()}return!0}).run()}}},addInputRules(){return[lD({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),rL=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,iL=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,oL=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,sL=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,lL=Ui.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",je(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[na({find:rL,type:this.type}),na({find:oL,type:this.type})]},addPasteRules(){return[_s({find:iL,type:this.type}),_s({find:sL,type:this.type})]}});const aL="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",cL="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",T0="numeric",k0="ascii",M0="alpha",Lc="asciinumeric",Ec="alphanumeric",E0="domain",$9="emoji",uL="scheme",fL="slashscheme",bg="whitespace";function dL(t,e){return t in e||(e[t]=[]),e[t]}function xs(t,e,n){e[T0]&&(e[Lc]=!0,e[Ec]=!0),e[k0]&&(e[Lc]=!0,e[M0]=!0),e[Lc]&&(e[Ec]=!0),e[M0]&&(e[Ec]=!0),e[Ec]&&(e[E0]=!0),e[$9]&&(e[E0]=!0);for(const r in e){const i=dL(r,n);i.indexOf(t)<0&&i.push(t)}}function hL(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function zn(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}zn.groups={};zn.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],o=e.jr[r][1];if(o&&i.test(t))return o}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||zn.groups;let i;return e&&e.j?i=e:(i=new zn(e),n&&r&&xs(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const o=t.length;if(!o)return i;for(let l=0;l<o-1;l++)i=i.tt(t[l]);return i.tt(t[o-1],e,n,r)},tt(t,e,n,r){r=r||zn.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const o=e;let l,c=i.go(t);if(c?(l=new zn,Object.assign(l.j,c.j),l.jr.push.apply(l.jr,c.jr),l.jd=c.jd,l.t=c.t):l=new zn,o){if(r)if(l.t&&typeof l.t=="string"){const f=Object.assign(hL(l.t,r),n);xs(o,f,r)}else n&&xs(o,n,r);l.t=o}return i.j[t]=l,l}};const Re=(t,e,n,r,i)=>t.ta(e,n,r,i),wt=(t,e,n,r,i)=>t.tr(e,n,r,i),TC=(t,e,n,r,i)=>t.ts(e,n,r,i),oe=(t,e,n,r,i)=>t.tt(e,n,r,i),Ei="WORD",A0="UWORD",q9="ASCIINUMERICAL",Z9="ALPHANUMERICAL",Jc="LOCALHOST",R0="TLD",N0="UTLD",vd="SCHEME",jl="SLASH_SCHEME",ny="NUM",O0="WS",ry="NL",_c="OPENBRACE",Hc="CLOSEBRACE",Pd="OPENBRACKET",Fd="CLOSEBRACKET",$d="OPENPAREN",qd="CLOSEPAREN",Zd="OPENANGLEBRACKET",Kd="CLOSEANGLEBRACKET",Gd="FULLWIDTHLEFTPAREN",Yd="FULLWIDTHRIGHTPAREN",Wd="LEFTCORNERBRACKET",Xd="RIGHTCORNERBRACKET",Jd="LEFTWHITECORNERBRACKET",Qd="RIGHTWHITECORNERBRACKET",eh="FULLWIDTHLESSTHAN",th="FULLWIDTHGREATERTHAN",nh="AMPERSAND",rh="APOSTROPHE",ih="ASTERISK",Co="AT",oh="BACKSLASH",sh="BACKTICK",lh="CARET",To="COLON",iy="COMMA",ah="DOLLAR",Wr="DOT",ch="EQUALS",oy="EXCLAMATION",gr="HYPHEN",Ic="PERCENT",uh="PIPE",fh="PLUS",dh="POUND",zc="QUERY",sy="QUOTE",K9="FULLWIDTHMIDDLEDOT",ly="SEMI",Xr="SLASH",Bc="TILDE",hh="UNDERSCORE",G9="EMOJI",ph="SYM";var Y9=Object.freeze({__proto__:null,ALPHANUMERICAL:Z9,AMPERSAND:nh,APOSTROPHE:rh,ASCIINUMERICAL:q9,ASTERISK:ih,AT:Co,BACKSLASH:oh,BACKTICK:sh,CARET:lh,CLOSEANGLEBRACKET:Kd,CLOSEBRACE:Hc,CLOSEBRACKET:Fd,CLOSEPAREN:qd,COLON:To,COMMA:iy,DOLLAR:ah,DOT:Wr,EMOJI:G9,EQUALS:ch,EXCLAMATION:oy,FULLWIDTHGREATERTHAN:th,FULLWIDTHLEFTPAREN:Gd,FULLWIDTHLESSTHAN:eh,FULLWIDTHMIDDLEDOT:K9,FULLWIDTHRIGHTPAREN:Yd,HYPHEN:gr,LEFTCORNERBRACKET:Wd,LEFTWHITECORNERBRACKET:Jd,LOCALHOST:Jc,NL:ry,NUM:ny,OPENANGLEBRACKET:Zd,OPENBRACE:_c,OPENBRACKET:Pd,OPENPAREN:$d,PERCENT:Ic,PIPE:uh,PLUS:fh,POUND:dh,QUERY:zc,QUOTE:sy,RIGHTCORNERBRACKET:Xd,RIGHTWHITECORNERBRACKET:Qd,SCHEME:vd,SEMI:ly,SLASH:Xr,SLASH_SCHEME:jl,SYM:ph,TILDE:Bc,TLD:R0,UNDERSCORE:hh,UTLD:N0,UWORD:A0,WORD:Ei,WS:O0});const Ti=/[a-z]/,bc=/\p{L}/u,Cg=/\p{Emoji}/u,ki=/\d/,wg=/\s/,kC="\r",xg=`
`,pL="",mL="",Sg="";let Yf=null,Wf=null;function gL(t=[]){const e={};zn.groups=e;const n=new zn;Yf==null&&(Yf=MC(aL)),Wf==null&&(Wf=MC(cL)),oe(n,"'",rh),oe(n,"{",_c),oe(n,"}",Hc),oe(n,"[",Pd),oe(n,"]",Fd),oe(n,"(",$d),oe(n,")",qd),oe(n,"<",Zd),oe(n,">",Kd),oe(n,"",Gd),oe(n,"",Yd),oe(n,"",Wd),oe(n,"",Xd),oe(n,"",Jd),oe(n,"",Qd),oe(n,"",eh),oe(n,"",th),oe(n,"&",nh),oe(n,"*",ih),oe(n,"@",Co),oe(n,"`",sh),oe(n,"^",lh),oe(n,":",To),oe(n,",",iy),oe(n,"$",ah),oe(n,".",Wr),oe(n,"=",ch),oe(n,"!",oy),oe(n,"-",gr),oe(n,"%",Ic),oe(n,"|",uh),oe(n,"+",fh),oe(n,"#",dh),oe(n,"?",zc),oe(n,'"',sy),oe(n,"/",Xr),oe(n,";",ly),oe(n,"~",Bc),oe(n,"_",hh),oe(n,"\\",oh),oe(n,"",K9);const r=wt(n,ki,ny,{[T0]:!0});wt(r,ki,r);const i=wt(r,Ti,q9,{[Lc]:!0}),o=wt(r,bc,Z9,{[Ec]:!0}),l=wt(n,Ti,Ei,{[k0]:!0});wt(l,ki,i),wt(l,Ti,l),wt(i,ki,i),wt(i,Ti,i);const c=wt(n,bc,A0,{[M0]:!0});wt(c,Ti),wt(c,ki,o),wt(c,bc,c),wt(o,ki,o),wt(o,Ti),wt(o,bc,o);const f=oe(n,xg,ry,{[bg]:!0}),d=oe(n,kC,O0,{[bg]:!0}),h=wt(n,wg,O0,{[bg]:!0});oe(n,Sg,h),oe(d,xg,f),oe(d,Sg,h),wt(d,wg,h),oe(h,kC),oe(h,xg),wt(h,wg,h),oe(h,Sg,h);const m=wt(n,Cg,G9,{[$9]:!0});oe(m,"#"),wt(m,Cg,m),oe(m,pL,m);const g=oe(m,mL);oe(g,"#"),wt(g,Cg,m);const y=[[Ti,l],[ki,i]],b=[[Ti,null],[bc,c],[ki,o]];for(let w=0;w<Yf.length;w++)po(n,Yf[w],R0,Ei,y);for(let w=0;w<Wf.length;w++)po(n,Wf[w],N0,A0,b);xs(R0,{tld:!0,ascii:!0},e),xs(N0,{utld:!0,alpha:!0},e),po(n,"file",vd,Ei,y),po(n,"mailto",vd,Ei,y),po(n,"http",jl,Ei,y),po(n,"https",jl,Ei,y),po(n,"ftp",jl,Ei,y),po(n,"ftps",jl,Ei,y),xs(vd,{scheme:!0,ascii:!0},e),xs(jl,{slashscheme:!0,ascii:!0},e),t=t.sort((w,x)=>w[0]>x[0]?1:-1);for(let w=0;w<t.length;w++){const x=t[w][0],A=t[w][1]?{[uL]:!0}:{[fL]:!0};x.indexOf("-")>=0?A[E0]=!0:Ti.test(x)?ki.test(x)?A[Lc]=!0:A[k0]=!0:A[T0]=!0,TC(n,x,x,A)}return TC(n,"localhost",Jc,{ascii:!0}),n.jd=new zn(ph),{start:n,tokens:Object.assign({groups:e},Y9)}}function W9(t,e){const n=yL(e.replace(/[A-Z]/g,c=>c.toLowerCase())),r=n.length,i=[];let o=0,l=0;for(;l<r;){let c=t,f=null,d=0,h=null,m=-1,g=-1;for(;l<r&&(f=c.go(n[l]));)c=f,c.accepts()?(m=0,g=0,h=c):m>=0&&(m+=n[l].length,g++),d+=n[l].length,o+=n[l].length,l++;o-=m,l-=g,d-=m,i.push({t:h.t,v:e.slice(o-d,o),s:o-d,e:o})}return i}function yL(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),o,l=i<55296||i>56319||r+1===n||(o=t.charCodeAt(r+1))<56320||o>57343?t[r]:t.slice(r,r+2);e.push(l),r+=l.length}return e}function po(t,e,n,r,i){let o;const l=e.length;for(let c=0;c<l-1;c++){const f=e[c];t.j[f]?o=t.j[f]:(o=new zn(r),o.jr=i.slice(),t.j[f]=o),t=o}return o=new zn(n),o.jr=i.slice(),t.j[e[l-1]]=o,o}function MC(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let o=0;for(;i.indexOf(t[r+o])>=0;)o++;if(o>0){e.push(n.join(""));for(let l=parseInt(t.substring(r,r+o),10);l>0;l--)n.pop();r+=o}else n.push(t[r]),r++}return e}const Qc={defaultProtocol:"http",events:null,format:EC,formatHref:EC,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function ay(t,e=null){let n=Object.assign({},Qc);t&&(n=Object.assign(n,t instanceof ay?t.o:t));const r=n.ignoreTags,i=[];for(let o=0;o<r.length;o++)i.push(r[o].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}ay.prototype={o:Qc,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Qc[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function EC(t){return t}function X9(t,e){this.t="token",this.v=t,this.tk=e}X9.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Qc.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),o=this.toFormattedString(t),l={},c=t.get("className",n,e),f=t.get("target",n,e),d=t.get("rel",n,e),h=t.getObj("attributes",n,e),m=t.getObj("events",n,e);return l.href=r,c&&(l.class=c),f&&(l.target=f),d&&(l.rel=d),h&&Object.assign(l,h),{tagName:i,attributes:l,content:o,eventListeners:m}}};function Xh(t,e){class n extends X9{constructor(i,o){super(i,o),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const AC=Xh("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),RC=Xh("text"),vL=Xh("nl"),Xf=Xh("url",{isLink:!0,toHref(t=Qc.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Jc&&t[1].t===To}}),pr=t=>new zn(t);function bL({groups:t}){const e=t.domain.concat([nh,ih,Co,oh,sh,lh,ah,ch,gr,ny,Ic,uh,fh,dh,Xr,ph,Bc,hh]),n=[rh,To,iy,Wr,oy,Ic,zc,sy,ly,Zd,Kd,_c,Hc,Fd,Pd,$d,qd,Gd,Yd,Wd,Xd,Jd,Qd,eh,th],r=[nh,rh,ih,oh,sh,lh,ah,ch,gr,_c,Hc,Ic,uh,fh,dh,zc,Xr,ph,Bc,hh],i=pr(),o=oe(i,Bc);Re(o,r,o),Re(o,t.domain,o);const l=pr(),c=pr(),f=pr();Re(i,t.domain,l),Re(i,t.scheme,c),Re(i,t.slashscheme,f),Re(l,r,o),Re(l,t.domain,l);const d=oe(l,Co);oe(o,Co,d),oe(c,Co,d),oe(f,Co,d);const h=oe(o,Wr);Re(h,r,o),Re(h,t.domain,o);const m=pr();Re(d,t.domain,m),Re(m,t.domain,m);const g=oe(m,Wr);Re(g,t.domain,m);const y=pr(AC);Re(g,t.tld,y),Re(g,t.utld,y),oe(d,Jc,y);const b=oe(m,gr);oe(b,gr,b),Re(b,t.domain,m),Re(y,t.domain,m),oe(y,Wr,g),oe(y,gr,b);const w=oe(y,To);Re(w,t.numeric,AC);const x=oe(l,gr),k=oe(l,Wr);oe(x,gr,x),Re(x,t.domain,l),Re(k,r,o),Re(k,t.domain,l);const A=pr(Xf);Re(k,t.tld,A),Re(k,t.utld,A),Re(A,t.domain,l),Re(A,r,o),oe(A,Wr,k),oe(A,gr,x),oe(A,Co,d);const N=oe(A,To),D=pr(Xf);Re(N,t.numeric,D);const L=pr(Xf),z=pr();Re(L,e,L),Re(L,n,z),Re(z,e,L),Re(z,n,z),oe(A,Xr,L),oe(D,Xr,L);const q=oe(c,To),j=oe(f,To),ee=oe(j,Xr),$=oe(ee,Xr);Re(c,t.domain,l),oe(c,Wr,k),oe(c,gr,x),Re(f,t.domain,l),oe(f,Wr,k),oe(f,gr,x),Re(q,t.domain,L),oe(q,Xr,L),oe(q,zc,L),Re($,t.domain,L),Re($,e,L),oe($,Xr,L);const re=[[_c,Hc],[Pd,Fd],[$d,qd],[Zd,Kd],[Gd,Yd],[Wd,Xd],[Jd,Qd],[eh,th]];for(let se=0;se<re.length;se++){const[ue,G]=re[se],P=oe(L,ue);oe(z,ue,P),oe(P,G,L);const H=pr(Xf);Re(P,e,H);const V=pr();Re(P,n),Re(H,e,H),Re(H,n,V),Re(V,e,H),Re(V,n,V),oe(H,G,L),oe(V,G,L)}return oe(i,Jc,A),oe(i,ry,vL),{start:i,tokens:Y9}}function CL(t,e,n){let r=n.length,i=0,o=[],l=[];for(;i<r;){let c=t,f=null,d=null,h=0,m=null,g=-1;for(;i<r&&!(f=c.go(n[i].t));)l.push(n[i++]);for(;i<r&&(d=f||c.go(n[i].t));)f=null,c=d,c.accepts()?(g=0,m=c):g>=0&&g++,i++,h++;if(g<0)i-=h,i<r&&(l.push(n[i]),i++);else{l.length>0&&(o.push(Tg(RC,e,l)),l=[]),i-=g,h-=g;const y=m.t,b=n.slice(i-h,i);o.push(Tg(y,e,b))}}return l.length>0&&o.push(Tg(RC,e,l)),o}function Tg(t,e,n){const r=n[0].s,i=n[n.length-1].e,o=e.slice(r,i);return new t(o,n)}const wL=typeof console<"u"&&console&&console.warn||(()=>{}),xL="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",ft={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function SL(){return zn.groups={},ft.scanner=null,ft.parser=null,ft.tokenQueue=[],ft.pluginQueue=[],ft.customSchemes=[],ft.initialized=!1,ft}function NC(t,e=!1){if(ft.initialized&&wL(`linkifyjs: already initialized - will not register custom scheme "${t}" ${xL}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);ft.customSchemes.push([t,e])}function TL(){ft.scanner=gL(ft.customSchemes);for(let t=0;t<ft.tokenQueue.length;t++)ft.tokenQueue[t][1]({scanner:ft.scanner});ft.parser=bL(ft.scanner.tokens);for(let t=0;t<ft.pluginQueue.length;t++)ft.pluginQueue[t][1]({scanner:ft.scanner,parser:ft.parser});return ft.initialized=!0,ft}function cy(t){return ft.initialized||TL(),CL(ft.parser.start,t,W9(ft.scanner.start,t))}cy.scan=W9;function J9(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new ay(n),i=cy(t),o=[];for(let l=0;l<i.length;l++){const c=i[l];c.isLink&&(!e||c.t===e)&&r.check(c)&&o.push(c.toFormattedObject(r))}return o}var uy="[\0- -\u2029]",kL=new RegExp(uy),ML=new RegExp(`${uy}$`),EL=new RegExp(uy,"g");function AL(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function RL(t){return new Be({key:new Pe("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(d=>d.docChanged)&&!n.doc.eq(r.doc),o=e.some(d=>d.getMeta("preventAutolink"));if(!i||o)return;const{tr:l}=r,c=p9(n.doc,[...e]);if(S9(c).forEach(({newRange:d})=>{const h=dO(r.doc,d,y=>y.isTextblock);let m,g;if(h.length>1)m=h[0],g=r.doc.textBetween(m.pos,m.pos+m.node.nodeSize,void 0," ");else if(h.length){const y=r.doc.textBetween(d.from,d.to," "," ");if(!ML.test(y))return;m=h[0],g=r.doc.textBetween(m.pos,d.to,void 0," ")}if(m&&g){const y=g.split(kL).filter(Boolean);if(y.length<=0)return!1;const b=y[y.length-1],w=m.pos+g.lastIndexOf(b);if(!b)return!1;const x=cy(b).map(k=>k.toObject(t.defaultProtocol));if(!AL(x))return!1;x.filter(k=>k.isLink).map(k=>({...k,from:w+k.start+1,to:w+k.end+1})).filter(k=>r.schema.marks.code?!r.doc.rangeHasMark(k.from,k.to,r.schema.marks.code):!0).filter(k=>t.validate(k.value)).filter(k=>t.shouldAutoLink(k.value)).forEach(k=>{G2(k.from,k.to,r.doc).some(A=>A.mark.type===t.type)||l.addMark(k.from,k.to,t.type.create({href:k.href}))})}}),!!l.steps.length)return l}})}function NL(t){return new Be({key:new Pe("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,o;if(r.button!==0||!e.editable)return!1;let l=null;if(r.target instanceof HTMLAnchorElement)l=r.target;else{let h=r.target;const m=[];for(;h.nodeName!=="DIV";)m.push(h),h=h.parentNode;l=m.find(g=>g.nodeName==="A")}if(!l)return!1;const c=x9(e.state,t.type.name),f=(i=l?.href)!=null?i:c.href,d=(o=l?.target)!=null?o:c.target;return t.enableClickSelection&&t.editor.commands.extendMarkRange(t.type.name),l&&f?(window.open(f,d),!0):!1}}})}function OL(t){return new Be({key:new Pe("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:i}=t,{state:o}=e,{selection:l}=o,{empty:c}=l;if(c)return!1;let f="";r.content.forEach(h=>{f+=h.textContent});const d=J9(f,{defaultProtocol:t.defaultProtocol}).find(h=>h.isLink&&h.value===f);return!f||!d||i!==void 0&&!i(d.href)?!1:t.editor.commands.setMark(t.type,{href:d.href})}}})}function ps(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(EL,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var DL=Ui.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){NC(t);return}NC(t.scheme,t.optionalSlashes)})},onDestroy(){SL()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!ps(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!ps(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!ps(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",je(this.options.HTMLAttributes,t),0]:["a",je(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!ps(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!ps(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[_s({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,i=J9(t).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:l=>!!ps(l,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(o=>{this.options.shouldAutoLink(o.value)&&e.push({text:o.value,data:{href:o.href},index:o.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(RL({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!ps(i,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(NL({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(OL({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),LL=Object.defineProperty,_L=(t,e)=>{for(var n in e)LL(t,n,{get:e[n],enumerable:!0})},HL="listItem",OC="textStyle",DC=/^\s*([-+*])\s$/,Q9=st.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",je(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(HL,this.editor.getAttributes(OC)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=ra({find:DC,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ra({find:DC,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(OC),editor:this.editor})),[t]}}),ex=st.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",je(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))n=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const l=t.tokens.slice(1),c=e.parseChildren(l);n.push(...c)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>Q2(t,e,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),IL={};_L(IL,{findListItemPos:()=>yu,getNextListDepth:()=>fy,handleBackspace:()=>D0,handleDelete:()=>L0,hasListBefore:()=>tx,hasListItemAfter:()=>zL,hasListItemBefore:()=>nx,listItemHasSubList:()=>rx,nextListIsDeeper:()=>ix,nextListIsHigher:()=>ox});var yu=(t,e)=>{const{$from:n}=e.selection,r=Bt(t,e.schema);let i=null,o=n.depth,l=n.pos,c=null;for(;o>0&&c===null;)i=n.node(o),i.type===r?c=o:(o-=1,l-=1);return c===null?null:{$pos:e.doc.resolve(l),depth:c}},fy=(t,e)=>{const n=yu(t,e);if(!n)return!1;const[,r]=CO(e,t,n.$pos.pos+4);return r},tx=(t,e,n)=>{const{$anchor:r}=t.selection,i=Math.max(0,r.pos-2),o=t.doc.resolve(i).node();return!(!o||!n.includes(o.type.name))},nx=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==t)},rx=(t,e,n)=>{if(!n)return!1;const r=Bt(t,e.schema);let i=!1;return n.descendants(o=>{o.type===r&&(i=!0)}),i},D0=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!zo(t.state,e)&&tx(t.state,e,n)){const{$anchor:c}=t.state.selection,f=t.state.doc.resolve(c.before()-1),d=[];f.node().descendants((g,y)=>{g.type.name===e&&d.push({node:g,pos:y})});const h=d.at(-1);if(!h)return!1;const m=t.state.doc.resolve(f.start()+h.pos+1);return t.chain().cut({from:c.start()-1,to:c.end()+1},m.end()).joinForward().run()}if(!zo(t.state,e)||!TO(t.state))return!1;const r=yu(e,t.state);if(!r)return!1;const o=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),l=rx(e,t.state,o);return nx(e,t.state)&&!l?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},ix=(t,e)=>{const n=fy(t,e),r=yu(t,e);return!r||!n?!1:n>r.depth},ox=(t,e)=>{const n=fy(t,e),r=yu(t,e);return!r||!n?!1:n<r.depth},L0=(t,e)=>{if(!zo(t.state,e)||!SO(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:ix(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():ox(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},zL=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==t)},sx=Fe.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&L0(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&L0(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&D0(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&D0(t,n,r)&&(e=!0)}),e}}}}),LC=/^(\s*)(\d+)\.\s+(.*)$/,BL=/^\s/;function VL(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n],o=i.match(LC);if(!o)break;const[,l,c,f]=o,d=l.length;let h=f,m=n+1;const g=[i];for(;m<t.length;){const y=t[m];if(y.match(LC))break;if(y.trim()==="")g.push(y),h+=`
`,m+=1;else if(y.match(BL))g.push(y),h+=`
${y.slice(d+2)}`,m+=1;else break}e.push({indent:d,number:parseInt(c,10),content:h.trim(),raw:g.join(`
`)}),r=m,n=m}return[e,r]}function lx(t,e,n){var r;const i=[];let o=0;for(;o<t.length;){const l=t[o];if(l.indent===e){const c=l.content.split(`
`),f=((r=c[0])==null?void 0:r.trim())||"",d=[];f&&d.push({type:"paragraph",raw:f,tokens:n.inlineTokens(f)});const h=c.slice(1).join(`
`).trim();if(h){const y=n.blockTokens(h);d.push(...y)}let m=o+1;const g=[];for(;m<t.length&&t[m].indent>e;)g.push(t[m]),m+=1;if(g.length>0){const y=Math.min(...g.map(w=>w.indent)),b=lx(g,y,n);d.push({type:"list",ordered:!0,start:g[0].number,items:b,raw:g.map(w=>w.raw).join(`
`)})}i.push({type:"list_item",raw:l.raw,tokens:d}),o=m}else o+=1}return i}function jL(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const o=e.parseChildren([i]);r.push({type:"paragraph",content:o})}else{const o=e.parseChildren([i]);o.length>0&&r.push(...o)}}),{type:"listItem",content:r}})}var UL="listItem",_C="textStyle",HC=/^(\d+)\.\s$/,ax=st.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",je(this.options.HTMLAttributes,n),0]:["ol",je(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?jL(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e?.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const i=t.split(`
`),[o,l]=VL(i);if(o.length===0)return;const c=lx(o,0,n);return c.length===0?void 0:{type:"list",ordered:!0,start:((r=o[0])==null?void 0:r.number)||1,items:c,raw:i.slice(0,l).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(UL,this.editor.getAttributes(_C)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=ra({find:HC,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ra({find:HC,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(_C)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),PL=/^\s*(\[([( |x])?\])\s$/,FL=st.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",je(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const i=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return Q2(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),o=document.createElement("label"),l=document.createElement("span"),c=document.createElement("input"),f=document.createElement("div"),d=h=>{var m,g;c.ariaLabel=((g=(m=this.options.a11y)==null?void 0:m.checkboxLabel)==null?void 0:g.call(m,h,c.checked))||`Task item checkbox for ${h.textContent||"empty task item"}`};return d(t),o.contentEditable="false",c.type="checkbox",c.addEventListener("mousedown",h=>h.preventDefault()),c.addEventListener("change",h=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){c.checked=!c.checked;return}const{checked:m}=h.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:g})=>{const y=n();if(typeof y!="number")return!1;const b=g.doc.nodeAt(y);return g.setNodeMarkup(y,void 0,{...b?.attrs,checked:m}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,m)||(c.checked=!c.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([h,m])=>{i.setAttribute(h,m)}),i.dataset.checked=t.attrs.checked,c.checked=t.attrs.checked,o.append(c,l),i.append(o,f),Object.entries(e).forEach(([h,m])=>{i.setAttribute(h,m)}),{dom:i,contentDOM:f,update:h=>h.type!==this.type?!1:(i.dataset.checked=h.attrs.checked,c.checked=h.attrs.checked,d(h),!0)}}},addInputRules(){return[ra({find:PL,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),$L=st.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",je(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=o=>{const l=w0(o,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:c=>({indentLevel:c[1].length,mainContent:c[4],checked:c[3].toLowerCase()==="x"}),createToken:(c,f)=>({type:"taskItem",raw:"",mainContent:c.mainContent,indentLevel:c.indentLevel,checked:c.checked,text:c.mainContent,tokens:n.inlineTokens(c.mainContent),nestedTokens:f}),customNestedParser:r},n);return l?[{type:"taskList",raw:l.raw,items:l.items}]:n.blockTokens(o)},i=w0(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,l)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:n.inlineTokens(o.mainContent),nestedTokens:l}),customNestedParser:r},n);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Fe.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(Q9.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(ex.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(sx.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(ax.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(FL.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push($L.configure(this.options.taskList)),t}});var cx=st.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",je(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];return n.length===1&&n[0].type==="image"?e.parseChildren([n[0]]):e.createNode("paragraph",void 0,e.parseInline(n))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),qL=cx,ZL=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,KL=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,GL=Ui.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",je(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[na({find:ZL,type:this.type})]},addPasteRules(){return[_s({find:KL,type:this.type})]}}),YL=st.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),WL=Ui.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",je(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const o=i[2].trim();return{type:"underline",raw:i[0],text:o,tokens:n.inlineTokens(o)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function XL(t={}){return new Be({view(e){return new JL(e,t)}})}class JL{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=l=>{this[i](l)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,o=i.getBoundingClientRect(),l=o.width/i.offsetWidth,c=o.height/i.offsetHeight;if(n){let m=e.nodeBefore,g=e.nodeAfter;if(m||g){let y=this.editorView.nodeDOM(this.cursorPos-(m?m.nodeSize:0));if(y){let b=y.getBoundingClientRect(),w=m?b.bottom:b.top;m&&g&&(w=(w+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let x=this.width/2*c;r={left:b.left,right:b.right,top:w-x,bottom:w+x}}}}if(!r){let m=this.editorView.coordsAtPos(this.cursorPos),g=this.width/2*l;r={left:m.left-g,right:m.left+g,top:m.top,bottom:m.bottom}}let f=this.editorView.dom.offsetParent;this.element||(this.element=f.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let d,h;if(!f||f==document.body&&getComputedStyle(f).position=="static")d=-pageXOffset,h=-pageYOffset;else{let m=f.getBoundingClientRect(),g=m.width/f.offsetWidth,y=m.height/f.offsetHeight;d=m.left-f.scrollLeft*g,h=m.top-f.scrollTop*y}this.element.style.left=(r.left-d)/l+"px",this.element.style.top=(r.top-h)/c+"px",this.element.style.width=(r.right-r.left)/l+"px",this.element.style.height=(r.bottom-r.top)/c+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!o){let l=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let c=a5(this.editorView.state.doc,l,this.editorView.dragging.slice);c!=null&&(l=c)}this.setCursor(l),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class St extends we{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return St.valid(r)?new St(r):we.near(r)}content(){return le.empty}eq(e){return e instanceof St&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new St(e.resolve(n.pos))}getBookmark(){return new dy(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!QL(e)||!e_(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&St.valid(e))return e;let i=e.pos,o=null;for(let l=e.depth;;l--){let c=e.node(l);if(n>0?e.indexAfter(l)<c.childCount:e.index(l)>0){o=c.child(n>0?e.indexAfter(l):e.index(l)-1);break}else if(l==0)return null;i+=n;let f=e.doc.resolve(i);if(St.valid(f))return f}for(;;){let l=n>0?o.firstChild:o.lastChild;if(!l){if(o.isAtom&&!o.isText&&!me.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=l,i+=n;let c=e.doc.resolve(i);if(St.valid(c))return c}return null}}}St.prototype.visible=!1;St.findFrom=St.findGapCursorFrom;we.jsonID("gapcursor",St);class dy{constructor(e){this.pos=e}map(e){return new dy(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return St.valid(n)?new St(n):we.near(n)}}function QL(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function e_(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function t_(){return new Be({props:{decorations:o_,createSelectionBetween(t,e,n){return e.pos==n.pos&&St.valid(n)?new St(n):null},handleClick:r_,handleKeyDown:n_,handleDOMEvents:{beforeinput:i_}}})}const n_=V2({ArrowLeft:Jf("horiz",-1),ArrowRight:Jf("horiz",1),ArrowUp:Jf("vert",-1),ArrowDown:Jf("vert",1)});function Jf(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let l=r.selection,c=e>0?l.$to:l.$from,f=l.empty;if(l instanceof ce){if(!o.endOfTextblock(n)||c.depth==0)return!1;f=!1,c=r.doc.resolve(e>0?c.after():c.before())}let d=St.findGapCursorFrom(c,e,f);return d?(i&&i(r.tr.setSelection(new St(d))),!0):!1}}function r_(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!St.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&me.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new St(r))),!0)}function i_(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof St))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=Q.empty;for(let l=r.length-1;l>=0;l--)i=Q.from(r[l].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new le(i,0,0));return o.setSelection(ce.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function o_(t){if(!(t.selection instanceof St))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Xe.create(t.doc,[zt.widget(t.selection.head,e,{key:"gapcursor"})])}var mh=200,Xt=function(){};Xt.prototype.append=function(e){return e.length?(e=Xt.from(e),!this.length&&e||e.length<mh&&this.leafAppend(e)||this.length<mh&&e.leafPrepend(this)||this.appendInner(e)):this};Xt.prototype.prepend=function(e){return e.length?Xt.from(e).append(this):this};Xt.prototype.appendInner=function(e){return new s_(this,e)};Xt.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Xt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Xt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Xt.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Xt.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,l){return i.push(e(o,l))},n,r),i};Xt.from=function(e){return e instanceof Xt?e:e&&e.length?new ux(e):Xt.empty};var ux=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,l,c){for(var f=o;f<l;f++)if(i(this.values[f],c+f)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,l,c){for(var f=o-1;f>=l;f--)if(i(this.values[f],c+f)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=mh)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=mh)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Xt);Xt.empty=new ux([]);var s_=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,l){var c=this.left.length;if(i<c&&this.left.forEachInner(r,i,Math.min(o,c),l)===!1||o>c&&this.right.forEachInner(r,Math.max(i-c,0),Math.min(this.length,o)-c,l+c)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,l){var c=this.left.length;if(i>c&&this.right.forEachInvertedInner(r,i-c,Math.max(o,c)-c,l+c)===!1||o<c&&this.left.forEachInvertedInner(r,Math.min(i,c),o,l)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Xt);const l_=500;class Ar{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let l=e.tr,c,f,d=[],h=[];return this.items.forEach((m,g)=>{if(!m.step){i||(i=this.remapping(r,g+1),o=i.maps.length),o--,h.push(m);return}if(i){h.push(new mo(m.map));let y=m.step.map(i.slice(o)),b;y&&l.maybeStep(y).doc&&(b=l.mapping.maps[l.mapping.maps.length-1],d.push(new mo(b,void 0,void 0,d.length+h.length))),o--,b&&i.appendMap(b,o)}else l.maybeStep(m.step);if(m.selection)return c=i?m.selection.map(i.slice(o)):m.selection,f=new Ar(this.items.slice(0,r).append(h.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:f,transform:l,selection:c}}addTransform(e,n,r,i){let o=[],l=this.eventCount,c=this.items,f=!i&&c.length?c.get(c.length-1):null;for(let h=0;h<e.steps.length;h++){let m=e.steps[h].invert(e.docs[h]),g=new mo(e.mapping.maps[h],m,n),y;(y=f&&f.merge(g))&&(g=y,h?o.pop():c=c.slice(0,c.length-1)),o.push(g),n&&(l++,n=void 0),i||(f=g)}let d=l-r.depth;return d>c_&&(c=a_(c,d),l-=d),new Ar(c.append(o),l)}remapping(e,n){let r=new qc;return this.items.forEach((i,o)=>{let l=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,l)},e,n),r}addMaps(e){return this.eventCount==0?this:new Ar(this.items.append(e.map(n=>new mo(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,l=e.steps.length,c=this.eventCount;this.items.forEach(g=>{g.selection&&c--},i);let f=n;this.items.forEach(g=>{let y=o.getMirror(--f);if(y==null)return;l=Math.min(l,y);let b=o.maps[y];if(g.step){let w=e.steps[y].invert(e.docs[y]),x=g.selection&&g.selection.map(o.slice(f+1,y));x&&c++,r.push(new mo(b,w,x))}else r.push(new mo(b))},i);let d=[];for(let g=n;g<l;g++)d.push(new mo(o.maps[g]));let h=this.items.slice(0,i).append(d).append(r),m=new Ar(h,c);return m.emptyItemCount()>l_&&(m=m.compress(this.items.length-r.length)),m}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((l,c)=>{if(c>=e)i.push(l),l.selection&&o++;else if(l.step){let f=l.step.map(n.slice(r)),d=f&&f.getMap();if(r--,d&&n.appendMap(d,r),f){let h=l.selection&&l.selection.map(n.slice(r));h&&o++;let m=new mo(d.invert(),f,h),g,y=i.length-1;(g=i.length&&i[y].merge(m))?i[y]=g:i.push(m)}}else l.map&&r--},this.items.length,0),new Ar(Xt.from(i.reverse()),o)}}Ar.empty=new Ar(Xt.empty,0);function a_(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}let mo=class fx{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new fx(n.getMap().invert(),n,this.selection)}}};class wo{constructor(e,n,r,i,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const c_=20;function u_(t,e,n,r){let i=n.getMeta(Es),o;if(i)return i.historyState;n.getMeta(h_)&&(t=new wo(t.done,t.undone,null,0,-1));let l=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(l&&l.getMeta(Es))return l.getMeta(Es).redo?new wo(t.done.addTransform(n,void 0,r,bd(e)),t.undone,IC(n.mapping.maps),t.prevTime,t.prevComposition):new wo(t.done,t.undone.addTransform(n,void 0,r,bd(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let c=n.getMeta("composition"),f=t.prevTime==0||!l&&t.prevComposition!=c&&(t.prevTime<(n.time||0)-r.newGroupDelay||!f_(n,t.prevRanges)),d=l?kg(t.prevRanges,n.mapping):IC(n.mapping.maps);return new wo(t.done.addTransform(n,f?e.selection.getBookmark():void 0,r,bd(e)),Ar.empty,d,n.time,c??t.prevComposition)}else return(o=n.getMeta("rebased"))?new wo(t.done.rebased(n,o),t.undone.rebased(n,o),kg(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new wo(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),kg(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function f_(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function IC(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,o,l)=>e.push(o,l));return e}function kg(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function d_(t,e,n){let r=bd(e),i=Es.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let l=o.selection.resolve(o.transform.doc),c=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),f=new wo(n?c:o.remaining,n?o.remaining:c,null,0,-1);return o.transform.setSelection(l).setMeta(Es,{redo:n,historyState:f})}let Mg=!1,zC=null;function bd(t){let e=t.plugins;if(zC!=e){Mg=!1,zC=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Mg=!0;break}}return Mg}const Es=new Pe("history"),h_=new Pe("closeHistory");function p_(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Be({key:Es,state:{init(){return new wo(Ar.empty,Ar.empty,null,0,-1)},apply(e,n,r){return u_(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?hx:r=="historyRedo"?px:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function dx(t,e){return(n,r)=>{let i=Es.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let o=d_(i,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const hx=dx(!1,!0),px=dx(!0,!0);Fe.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=t?.node||this.editor.state.doc;if((t?.mode||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=t?.node||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new Be({key:new Pe("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const o=this.storage.characters({node:r.doc});if(o>i){const l=o-i,c=0,f=l;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const d=r.tr.deleteRange(c,f);return t=!0,d}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),o=this.storage.characters({node:e.doc});if(o<=r||i>r&&o>r&&o<=i)return!0;if(i>r&&o>r&&o>i||!e.getMeta("paste"))return!1;const c=e.selection.$head.pos,f=o-r,d=c-f,h=c;return e.deleteRange(d,h),!(this.storage.characters({node:e.doc})>r)}})]}});var m_=Fe.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[XL(this.options)]}});Fe.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Be({key:new Pe("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=e,o=[];if(!n||!r)return Xe.create(t,[]);let l=0;this.options.mode==="deepest"&&t.descendants((f,d)=>{if(f.isText)return;if(!(i>=d&&i<=d+f.nodeSize-1))return!1;l+=1});let c=0;return t.descendants((f,d)=>{if(f.isText||!(i>=d&&i<=d+f.nodeSize-1))return!1;if(c+=1,this.options.mode==="deepest"&&l-c>0||this.options.mode==="shallowest"&&c>1)return this.options.mode==="deepest";o.push(zt.node(d,d+f.nodeSize,{class:this.options.className}))}),Xe.create(t,o)}}})]}});var g_=Fe.create({name:"gapCursor",addProseMirrorPlugins(){return[t_()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Ke(be(t,"allowGapCursor",n)))!=null?e:null}}}),y_=Fe.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Be({key:new Pe("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const o=this.editor.isEmpty;return t.descendants((l,c)=>{const f=r>=c&&r<=c+l.nodeSize,d=!l.isLeaf&&Yh(l);if((f||!this.options.showOnlyCurrent)&&d){const h=[this.options.emptyNodeClass];o&&h.push(this.options.emptyEditorClass);const m=zt.node(c,c+l.nodeSize,{class:h.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:l,pos:c,hasAnchor:f}):this.options.placeholder});i.push(m)}return this.options.includeChildren}),Xe.create(t,i)}}})]}});Fe.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Be({key:new Pe("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||Y2(n.selection)||t.view.dragging?null:Xe.create(n.doc,[zt.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function BC({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||e?.type===t}var v_=Fe.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Pe(this.name),n=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(n).includes(i.name));return[new Be({key:e,appendTransaction:(i,o,l)=>{const{doc:c,tr:f,schema:d}=l,h=e.getState(l),m=c.content.size,g=d.nodes[n];if(h)return f.insert(m,g.create())},state:{init:(i,o)=>{const l=o.tr.doc.lastChild;return!BC({node:l,types:r})},apply:(i,o)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return o;const l=i.doc.lastChild;return!BC({node:l,types:r})}}})]}}),b_=Fe.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>hx(t,e),redo:()=>({state:t,dispatch:e})=>px(t,e)}},addProseMirrorPlugins(){return[p_(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),C_=Fe.create({name:"starterKit",addExtensions(){var t,e,n,r;const i=[];return this.options.bold!==!1&&i.push(ZD.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(UD.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(Q9.configure(this.options.bulletList)),this.options.code!==!1&&i.push(YD.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(JD.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(QD.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(m_.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(g_.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(eL.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(tL.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(b_.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(nL.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(lL.configure(this.options.italic)),this.options.listItem!==!1&&i.push(ex.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(sx.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(DL.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(ax.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(cx.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(GL.configure(this.options.strike)),this.options.text!==!1&&i.push(YL.configure(this.options.text)),this.options.underline!==!1&&i.push(WL.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(v_.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),w_=Fe.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(n=>e.updateAttributes(n,{textAlign:t})).some(n=>n):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).some(e=>e),toggleTextAlign:t=>({editor:e,commands:n})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?n.unsetTextAlign():n.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),x_=Ui.create({name:"subscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sub"},{style:"vertical-align",getAttrs(t){return t!=="sub"?!1:null}}]},renderHTML({HTMLAttributes:t}){return["sub",je(this.options.HTMLAttributes,t),0]},addCommands(){return{setSubscript:()=>({commands:t})=>t.setMark(this.name),toggleSubscript:()=>({commands:t})=>t.toggleMark(this.name),unsetSubscript:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-,":()=>this.editor.commands.toggleSubscript()}}}),S_=t=>Et({find:/--$/,replace:t??""}),T_=t=>Et({find:/\.\.\.$/,replace:t??""}),k_=t=>Et({find:/(?:^|[\s{[(<'"\u2018\u201C])(")$/,replace:t??""}),M_=t=>Et({find:/"$/,replace:t??""}),E_=t=>Et({find:/(?:^|[\s{[(<'"\u2018\u201C])(')$/,replace:t??""}),A_=t=>Et({find:/'$/,replace:t??""}),R_=t=>Et({find:/<-$/,replace:t??""}),N_=t=>Et({find:/->$/,replace:t??""}),O_=t=>Et({find:/\(c\)$/,replace:t??""}),D_=t=>Et({find:/\(tm\)$/,replace:t??""}),L_=t=>Et({find:/\(sm\)$/,replace:t??""}),__=t=>Et({find:/\(r\)$/,replace:t??""}),H_=t=>Et({find:/(?:^|\s)(1\/2)\s$/,replace:t??""}),I_=t=>Et({find:/\+\/-$/,replace:t??""}),z_=t=>Et({find:/!=$/,replace:t??""}),B_=t=>Et({find:/<<$/,replace:t??""}),V_=t=>Et({find:/>>$/,replace:t??""}),j_=t=>Et({find:/\d+\s?([*x])\s?\d+$/,replace:t??""}),U_=t=>Et({find:/\^2$/,replace:t??""}),P_=t=>Et({find:/\^3$/,replace:t??""}),F_=t=>Et({find:/(?:^|\s)(1\/4)\s$/,replace:t??""}),$_=t=>Et({find:/(?:^|\s)(3\/4)\s$/,replace:t??""}),VC=Fe.create({name:"typography",addOptions(){return{closeDoubleQuote:"",closeSingleQuote:"",copyright:"",ellipsis:"",emDash:"",laquo:"",leftArrow:"",multiplication:"",notEqual:"",oneHalf:"",oneQuarter:"",openDoubleQuote:"",openSingleQuote:"",plusMinus:"",raquo:"",registeredTrademark:"",rightArrow:"",servicemark:"",superscriptThree:"",superscriptTwo:"",threeQuarters:"",trademark:""}},addInputRules(){const t=[];return this.options.emDash!==!1&&t.push(S_(this.options.emDash)),this.options.ellipsis!==!1&&t.push(T_(this.options.ellipsis)),this.options.openDoubleQuote!==!1&&t.push(k_(this.options.openDoubleQuote)),this.options.closeDoubleQuote!==!1&&t.push(M_(this.options.closeDoubleQuote)),this.options.openSingleQuote!==!1&&t.push(E_(this.options.openSingleQuote)),this.options.closeSingleQuote!==!1&&t.push(A_(this.options.closeSingleQuote)),this.options.leftArrow!==!1&&t.push(R_(this.options.leftArrow)),this.options.rightArrow!==!1&&t.push(N_(this.options.rightArrow)),this.options.copyright!==!1&&t.push(O_(this.options.copyright)),this.options.trademark!==!1&&t.push(D_(this.options.trademark)),this.options.servicemark!==!1&&t.push(L_(this.options.servicemark)),this.options.registeredTrademark!==!1&&t.push(__(this.options.registeredTrademark)),this.options.oneHalf!==!1&&t.push(H_(this.options.oneHalf)),this.options.plusMinus!==!1&&t.push(I_(this.options.plusMinus)),this.options.notEqual!==!1&&t.push(z_(this.options.notEqual)),this.options.laquo!==!1&&t.push(B_(this.options.laquo)),this.options.raquo!==!1&&t.push(V_(this.options.raquo)),this.options.multiplication!==!1&&t.push(j_(this.options.multiplication)),this.options.superscriptTwo!==!1&&t.push(U_(this.options.superscriptTwo)),this.options.superscriptThree!==!1&&t.push(P_(this.options.superscriptThree)),this.options.oneQuarter!==!1&&t.push(F_(this.options.oneQuarter)),this.options.threeQuarters!==!1&&t.push($_(this.options.threeQuarters)),t}});function q_(){const t=document.documentElement.lang||"en";return t.startsWith("cs")||t.startsWith("cz")?VC.configure({openDoubleQuote:"",closeDoubleQuote:"",openSingleQuote:"",closeSingleQuote:""}):VC}var Z_=Ui.create({name:"superscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sup"},{style:"vertical-align",getAttrs(t){return t!=="super"?!1:null}}]},renderHTML({HTMLAttributes:t}){return["sup",je(this.options.HTMLAttributes,t),0]},addCommands(){return{setSuperscript:()=>({commands:t})=>t.setMark(this.name),toggleSuperscript:()=>({commands:t})=>t.toggleMark(this.name),unsetSuperscript:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-.":()=>this.editor.commands.toggleSuperscript()}}}),_0,H0;if(typeof WeakMap<"u"){let t=new WeakMap;_0=e=>t.get(e),H0=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;_0=r=>{for(let i=0;i<t.length;i+=2)if(t[i]==r)return t[i+1]},H0=(r,i)=>(n==10&&(n=0),t[n++]=r,t[n++]=i)}var Tt=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,i=e/this.width|0;let o=r+1,l=i+1;for(let c=1;o<this.width&&this.map[e+c]==n;c++)o++;for(let c=1;l<this.height&&this.map[e+this.width*c]==n;c++)l++;return{left:r,top:i,right:o,bottom:l}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:i,top:o,bottom:l}=this.findCell(t);return e=="horiz"?(n<0?r==0:i==this.width)?null:this.map[o*this.width+(n<0?r-1:i)]:(n<0?o==0:l==this.height)?null:this.map[r+this.width*(n<0?o-1:l)]}rectBetween(t,e){const{left:n,right:r,top:i,bottom:o}=this.findCell(t),{left:l,right:c,top:f,bottom:d}=this.findCell(e);return{left:Math.min(n,l),top:Math.min(i,f),right:Math.max(r,c),bottom:Math.max(o,d)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let i=t.left;i<t.right;i++){const o=r*this.width+i,l=this.map[o];n[l]||(n[l]=!0,!(i==t.left&&i&&this.map[o-1]==l||r==t.top&&r&&this.map[o-this.width]==l)&&e.push(l))}return e}positionAt(t,e,n){for(let r=0,i=0;;r++){const o=i+n.child(r).nodeSize;if(r==t){let l=e+t*this.width;const c=(t+1)*this.width;for(;l<c&&this.map[l]<i;)l++;return l==c?o-1:this.map[l]}i=o}}static get(t){return _0(t)||H0(t,K_(t))}};function K_(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=G_(t),n=t.childCount,r=[];let i=0,o=null;const l=[];for(let d=0,h=e*n;d<h;d++)r[d]=0;for(let d=0,h=0;d<n;d++){const m=t.child(d);h++;for(let b=0;;b++){for(;i<r.length&&r[i]!=0;)i++;if(b==m.childCount)break;const w=m.child(b),{colspan:x,rowspan:k,colwidth:A}=w.attrs;for(let N=0;N<k;N++){if(N+d>=n){(o||(o=[])).push({type:"overlong_rowspan",pos:h,n:k-N});break}const D=i+N*e;for(let L=0;L<x;L++){r[D+L]==0?r[D+L]=h:(o||(o=[])).push({type:"collision",row:d,pos:h,n:x-L});const z=A&&A[L];if(z){const q=(D+L)%e*2,j=l[q];j==null||j!=z&&l[q+1]==1?(l[q]=z,l[q+1]=1):j==z&&l[q+1]++}}}i+=x,h+=w.nodeSize}const g=(d+1)*e;let y=0;for(;i<g;)r[i++]==0&&y++;y&&(o||(o=[])).push({type:"missing",row:d,n:y}),h++}(e===0||n===0)&&(o||(o=[])).push({type:"zero_sized"});const c=new Tt(e,n,r,o);let f=!1;for(let d=0;!f&&d<l.length;d+=2)l[d]!=null&&l[d+1]<n&&(f=!0);return f&&Y_(c,l,t),c}function G_(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const i=t.child(r);let o=0;if(n)for(let l=0;l<r;l++){const c=t.child(l);for(let f=0;f<c.childCount;f++){const d=c.child(f);l+d.attrs.rowspan>r&&(o+=d.attrs.colspan)}}for(let l=0;l<i.childCount;l++){const c=i.child(l);o+=c.attrs.colspan,c.attrs.rowspan>1&&(n=!0)}e==-1?e=o:e!=o&&(e=Math.max(e,o))}return e}function Y_(t,e,n){t.problems||(t.problems=[]);const r={};for(let i=0;i<t.map.length;i++){const o=t.map[i];if(r[o])continue;r[o]=!0;const l=n.nodeAt(o);if(!l)throw new RangeError(`No cell with offset ${o} found`);let c=null;const f=l.attrs;for(let d=0;d<f.colspan;d++){const h=(i+d)%t.width,m=e[h*2];m!=null&&(!f.colwidth||f.colwidth[d]!=m)&&((c||(c=W_(f)))[d]=m)}c&&t.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:c})}}function W_(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function bn(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],i=r.spec.tableRole;i&&(e[i]=r)}}return e}var ko=new Pe("selectingCells");function ma(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function X_(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function Ur(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function Jh(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=ma(e.$head)||J_(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function J_(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function I0(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function Q_(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function hy(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function mx(t,e,n){const r=t.node(-1),i=Tt.get(r),o=t.start(-1),l=i.nextCell(t.pos-o,e,n);return l==null?null:t.node(0).resolve(o+l)}function Hs(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function gx(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<n;i++)r.colwidth.splice(e,0,0)}return r}function eH(t,e,n){const r=bn(e.type.schema).header_cell;for(let i=0;i<t.height;i++)if(e.nodeAt(t.map[n+i*t.width]).type!=r)return!1;return!0}var ot=class Ai extends we{constructor(e,n=e){const r=e.node(-1),i=Tt.get(r),o=e.start(-1),l=i.rectBetween(e.pos-o,n.pos-o),c=e.node(0),f=i.cellsInRect(l).filter(h=>h!=n.pos-o);f.unshift(n.pos-o);const d=f.map(h=>{const m=r.nodeAt(h);if(!m)throw RangeError(`No cell with offset ${h} found`);const g=o+h+1;return new S2(c.resolve(g),c.resolve(g+m.content.size))});super(d[0].$from,d[0].$to,d),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),i=e.resolve(n.map(this.$headCell.pos));if(I0(r)&&I0(i)&&hy(r,i)){const o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?Ai.rowSelection(r,i):o&&this.isColSelection()?Ai.colSelection(r,i):new Ai(r,i)}return ce.between(r,i)}content(){const e=this.$anchorCell.node(-1),n=Tt.get(e),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),o={},l=[];for(let f=i.top;f<i.bottom;f++){const d=[];for(let h=f*n.width+i.left,m=i.left;m<i.right;m++,h++){const g=n.map[h];if(o[g])continue;o[g]=!0;const y=n.findCell(g);let b=e.nodeAt(g);if(!b)throw RangeError(`No cell with offset ${g} found`);const w=i.left-y.left,x=y.right-i.right;if(w>0||x>0){let k=b.attrs;if(w>0&&(k=Hs(k,0,w)),x>0&&(k=Hs(k,k.colspan-x,x)),y.left<i.left){if(b=b.type.createAndFill(k),!b)throw RangeError(`Could not create cell with attrs ${JSON.stringify(k)}`)}else b=b.type.create(k,b.content)}if(y.top<i.top||y.bottom>i.bottom){const k={...b.attrs,rowspan:Math.min(y.bottom,i.bottom)-Math.max(y.top,i.top)};y.top<i.top?b=b.type.createAndFill(k):b=b.type.create(k,b.content)}d.push(b)}l.push(e.child(f).copy(Q.from(d)))}const c=this.isColSelection()&&this.isRowSelection()?e:l;return new le(Q.from(c),1,1)}replace(e,n=le.empty){const r=e.steps.length,i=this.ranges;for(let l=0;l<i.length;l++){const{$from:c,$to:f}=i[l],d=e.mapping.slice(r);e.replace(d.map(c.pos),d.map(f.pos),l?le.empty:n)}const o=we.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);o&&e.setSelection(o)}replaceWith(e,n){this.replace(e,new le(Q.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=Tt.get(n),i=this.$anchorCell.start(-1),o=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let l=0;l<o.length;l++)e(n.nodeAt(o[l]),i+o[l])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),i=Tt.get(r),o=e.start(-1),l=i.findCell(e.pos-o),c=i.findCell(n.pos-o),f=e.node(0);return l.top<=c.top?(l.top>0&&(e=f.resolve(o+i.map[l.left])),c.bottom<i.height&&(n=f.resolve(o+i.map[i.width*(i.height-1)+c.right-1]))):(c.top>0&&(n=f.resolve(o+i.map[c.left])),l.bottom<i.height&&(e=f.resolve(o+i.map[i.width*(i.height-1)+l.right-1]))),new Ai(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=Tt.get(e),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),o=n.colCount(this.$headCell.pos-r);if(Math.min(i,o)>0)return!1;const l=i+this.$anchorCell.nodeAfter.attrs.colspan,c=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(l,c)==n.width}eq(e){return e instanceof Ai&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),i=Tt.get(r),o=e.start(-1),l=i.findCell(e.pos-o),c=i.findCell(n.pos-o),f=e.node(0);return l.left<=c.left?(l.left>0&&(e=f.resolve(o+i.map[l.top*i.width])),c.right<i.width&&(n=f.resolve(o+i.map[i.width*(c.top+1)-1]))):(c.left>0&&(n=f.resolve(o+i.map[c.top*i.width])),l.right<i.width&&(e=f.resolve(o+i.map[i.width*(l.top+1)-1]))),new Ai(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new Ai(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new Ai(e.resolve(n),e.resolve(r))}getBookmark(){return new tH(this.$anchorCell.pos,this.$headCell.pos)}};ot.prototype.visible=!1;we.jsonID("cell",ot);var tH=class yx{constructor(e,n){this.anchor=e,this.head=n}map(e){return new yx(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&hy(n,r)?new ot(n,r):we.near(r,1)}};function nH(t){if(!(t.selection instanceof ot))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(zt.node(r,r+n.nodeSize,{class:"selectedCell"}))}),Xe.create(t.doc,e)}function rH({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,i=t.depth;for(;i>=0&&!(t.after(i+1)<t.end(i));i--,n++);for(let o=e.depth;o>=0&&!(e.before(o+1)>e.start(o));o--,r--);return n==r&&/row|table/.test(t.node(i).type.spec.tableRole)}function iH({$from:t,$to:e}){let n,r;for(let i=t.depth;i>0;i--){const o=t.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){n=o;break}}for(let i=e.depth;i>0;i--){const o=e.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){r=o;break}}return n!==r&&e.parentOffset===0}function oH(t,e,n){const r=(e||t).selection,i=(e||t).doc;let o,l;if(r instanceof me&&(l=r.node.type.spec.tableRole)){if(l=="cell"||l=="header_cell")o=ot.create(i,r.from);else if(l=="row"){const c=i.resolve(r.from+1);o=ot.rowSelection(c,c)}else if(!n){const c=Tt.get(r.node),f=r.from+1,d=f+c.map[c.width*c.height-1];o=ot.create(i,f+1,d)}}else r instanceof ce&&rH(r)?o=ce.create(i,r.from):r instanceof ce&&iH(r)&&(o=ce.create(i,r.$from.start(),r.$from.end()));return o&&(e||(e=t.tr)).setSelection(o),e}var sH=new Pe("fix-tables");function vx(t,e,n,r){const i=t.childCount,o=e.childCount;e:for(let l=0,c=0;l<o;l++){const f=e.child(l);for(let d=c,h=Math.min(i,l+3);d<h;d++)if(t.child(d)==f){c=d+1,n+=f.nodeSize;continue e}r(f,n),c<i&&t.child(c).sameMarkup(f)?vx(t.child(c),f,n+1,r):f.nodesBetween(0,f.content.size,r,n+1),n+=f.nodeSize}}function bx(t,e){let n;const r=(i,o)=>{i.type.spec.tableRole=="table"&&(n=lH(t,i,o,n))};return e?e.doc!=t.doc&&vx(e.doc,t.doc,0,r):t.doc.descendants(r),n}function lH(t,e,n,r){const i=Tt.get(e);if(!i.problems)return r;r||(r=t.tr);const o=[];for(let f=0;f<i.height;f++)o.push(0);for(let f=0;f<i.problems.length;f++){const d=i.problems[f];if(d.type=="collision"){const h=e.nodeAt(d.pos);if(!h)continue;const m=h.attrs;for(let g=0;g<m.rowspan;g++)o[d.row+g]+=d.n;r.setNodeMarkup(r.mapping.map(n+1+d.pos),null,Hs(m,m.colspan-d.n,d.n))}else if(d.type=="missing")o[d.row]+=d.n;else if(d.type=="overlong_rowspan"){const h=e.nodeAt(d.pos);if(!h)continue;r.setNodeMarkup(r.mapping.map(n+1+d.pos),null,{...h.attrs,rowspan:h.attrs.rowspan-d.n})}else if(d.type=="colwidth mismatch"){const h=e.nodeAt(d.pos);if(!h)continue;r.setNodeMarkup(r.mapping.map(n+1+d.pos),null,{...h.attrs,colwidth:d.colwidth})}else if(d.type=="zero_sized"){const h=r.mapping.map(n);r.delete(h,h+e.nodeSize)}}let l,c;for(let f=0;f<o.length;f++)o[f]&&(l==null&&(l=f),c=f);for(let f=0,d=n+1;f<i.height;f++){const h=e.child(f),m=d+h.nodeSize,g=o[f];if(g>0){let y="cell";h.firstChild&&(y=h.firstChild.type.spec.tableRole);const b=[];for(let x=0;x<g;x++){const k=bn(t.schema)[y].createAndFill();k&&b.push(k)}const w=(f==0||l==f-1)&&c==f?d+1:m-1;r.insert(r.mapping.map(w),b)}d=m}return r.setMeta(sH,{fixTables:!0})}function ri(t){const e=t.selection,n=Jh(t),r=n.node(-1),i=n.start(-1),o=Tt.get(r);return{...e instanceof ot?o.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):o.findCell(n.pos-i),tableStart:i,map:o,table:r}}function Cx(t,{map:e,tableStart:n,table:r},i){let o=i>0?-1:0;eH(e,r,i+o)&&(o=i==0||i==e.width?null:0);for(let l=0;l<e.height;l++){const c=l*e.width+i;if(i>0&&i<e.width&&e.map[c-1]==e.map[c]){const f=e.map[c],d=r.nodeAt(f);t.setNodeMarkup(t.mapping.map(n+f),null,gx(d.attrs,i-e.colCount(f))),l+=d.attrs.rowspan-1}else{const f=o==null?bn(r.type.schema).cell:r.nodeAt(e.map[c+o]).type,d=e.positionAt(l,i,r);t.insert(t.mapping.map(n+d),f.createAndFill())}}return t}function aH(t,e){if(!Ur(t))return!1;if(e){const n=ri(t);e(Cx(t.tr,n,n.left))}return!0}function cH(t,e){if(!Ur(t))return!1;if(e){const n=ri(t);e(Cx(t.tr,n,n.right))}return!0}function uH(t,{map:e,table:n,tableStart:r},i){const o=t.mapping.maps.length;for(let l=0;l<e.height;){const c=l*e.width+i,f=e.map[c],d=n.nodeAt(f),h=d.attrs;if(i>0&&e.map[c-1]==f||i<e.width-1&&e.map[c+1]==f)t.setNodeMarkup(t.mapping.slice(o).map(r+f),null,Hs(h,i-e.colCount(f)));else{const m=t.mapping.slice(o).map(r+f);t.delete(m,m+d.nodeSize)}l+=h.rowspan}}function fH(t,e){if(!Ur(t))return!1;if(e){const n=ri(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let i=n.right-1;uH(r,n,i),i!=n.left;i--){const o=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!o)throw RangeError("No table found");n.table=o,n.map=Tt.get(o)}e(r)}return!0}function dH(t,e,n){var r;const i=bn(e.type.schema).header_cell;for(let o=0;o<t.width;o++)if(((r=e.nodeAt(t.map[o+n*t.width]))==null?void 0:r.type)!=i)return!1;return!0}function wx(t,{map:e,tableStart:n,table:r},i){var o;let l=n;for(let d=0;d<i;d++)l+=r.child(d).nodeSize;const c=[];let f=i>0?-1:0;dH(e,r,i+f)&&(f=i==0||i==e.height?null:0);for(let d=0,h=e.width*i;d<e.width;d++,h++)if(i>0&&i<e.height&&e.map[h]==e.map[h-e.width]){const m=e.map[h],g=r.nodeAt(m).attrs;t.setNodeMarkup(n+m,null,{...g,rowspan:g.rowspan+1}),d+=g.colspan-1}else{const m=f==null?bn(r.type.schema).cell:(o=r.nodeAt(e.map[h+f*e.width]))==null?void 0:o.type,g=m?.createAndFill();g&&c.push(g)}return t.insert(l,bn(r.type.schema).row.create(null,c)),t}function hH(t,e){if(!Ur(t))return!1;if(e){const n=ri(t);e(wx(t.tr,n,n.top))}return!0}function pH(t,e){if(!Ur(t))return!1;if(e){const n=ri(t);e(wx(t.tr,n,n.bottom))}return!0}function mH(t,{map:e,table:n,tableStart:r},i){let o=0;for(let d=0;d<i;d++)o+=n.child(d).nodeSize;const l=o+n.child(i).nodeSize,c=t.mapping.maps.length;t.delete(o+r,l+r);const f=new Set;for(let d=0,h=i*e.width;d<e.width;d++,h++){const m=e.map[h];if(!f.has(m)){if(f.add(m),i>0&&m==e.map[h-e.width]){const g=n.nodeAt(m).attrs;t.setNodeMarkup(t.mapping.slice(c).map(m+r),null,{...g,rowspan:g.rowspan-1}),d+=g.colspan-1}else if(i<e.height&&m==e.map[h+e.width]){const g=n.nodeAt(m),y=g.attrs,b=g.type.create({...y,rowspan:g.attrs.rowspan-1},g.content),w=e.positionAt(i+1,d,n);t.insert(t.mapping.slice(c).map(r+w),b),d+=y.colspan-1}}}}function gH(t,e){if(!Ur(t))return!1;if(e){const n=ri(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let i=n.bottom-1;mH(r,n,i),i!=n.top;i--){const o=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!o)throw RangeError("No table found");n.table=o,n.map=Tt.get(n.table)}e(r)}return!0}function jC(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function yH({width:t,height:e,map:n},r){let i=r.top*t+r.left,o=i,l=(r.bottom-1)*t+r.left,c=i+(r.right-r.left-1);for(let f=r.top;f<r.bottom;f++){if(r.left>0&&n[o]==n[o-1]||r.right<t&&n[c]==n[c+1])return!0;o+=t,c+=t}for(let f=r.left;f<r.right;f++){if(r.top>0&&n[i]==n[i-t]||r.bottom<e&&n[l]==n[l+t])return!0;i++,l++}return!1}function UC(t,e){const n=t.selection;if(!(n instanceof ot)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=ri(t),{map:i}=r;if(yH(i,r))return!1;if(e){const o=t.tr,l={};let c=Q.empty,f,d;for(let h=r.top;h<r.bottom;h++)for(let m=r.left;m<r.right;m++){const g=i.map[h*i.width+m],y=r.table.nodeAt(g);if(!(l[g]||!y))if(l[g]=!0,f==null)f=g,d=y;else{jC(y)||(c=c.append(y.content));const b=o.mapping.map(g+r.tableStart);o.delete(b,b+y.nodeSize)}}if(f==null||d==null)return!0;if(o.setNodeMarkup(f+r.tableStart,null,{...gx(d.attrs,d.attrs.colspan,r.right-r.left-d.attrs.colspan),rowspan:r.bottom-r.top}),c.size){const h=f+1+d.content.size,m=jC(d)?f+1:h;o.replaceWith(m+r.tableStart,h+r.tableStart,c)}o.setSelection(new ot(o.doc.resolve(f+r.tableStart))),e(o)}return!0}function PC(t,e){const n=bn(t.schema);return vH(({node:r})=>n[r.type.spec.tableRole])(t,e)}function vH(t){return(e,n)=>{var r;const i=e.selection;let o,l;if(i instanceof ot){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;o=i.$anchorCell.nodeAfter,l=i.$anchorCell.pos}else{if(o=X_(i.$from),!o)return!1;l=(r=ma(i.$from))==null?void 0:r.pos}if(o==null||l==null||o.attrs.colspan==1&&o.attrs.rowspan==1)return!1;if(n){let c=o.attrs;const f=[],d=c.colwidth;c.rowspan>1&&(c={...c,rowspan:1}),c.colspan>1&&(c={...c,colspan:1});const h=ri(e),m=e.tr;for(let y=0;y<h.right-h.left;y++)f.push(d?{...c,colwidth:d&&d[y]?[d[y]]:null}:c);let g;for(let y=h.top;y<h.bottom;y++){let b=h.map.positionAt(y,h.left,h.table);y==h.top&&(b+=o.nodeSize);for(let w=h.left,x=0;w<h.right;w++,x++)w==h.left&&y==h.top||m.insert(g=m.mapping.map(b+h.tableStart,1),t({node:o,row:y,col:w}).createAndFill(f[x]))}m.setNodeMarkup(l,t({node:o,row:h.top,col:h.left}),f[0]),i instanceof ot&&m.setSelection(new ot(m.doc.resolve(i.$anchorCell.pos),g?m.doc.resolve(g):void 0)),n(m)}return!0}}function bH(t,e){return function(n,r){if(!Ur(n))return!1;const i=Jh(n);if(i.nodeAfter.attrs[t]===e)return!1;if(r){const o=n.tr;n.selection instanceof ot?n.selection.forEachCell((l,c)=>{l.attrs[t]!==e&&o.setNodeMarkup(c,null,{...l.attrs,[t]:e})}):o.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[t]:e}),r(o)}return!0}}function CH(t){return function(e,n){if(!Ur(e))return!1;if(n){const r=bn(e.schema),i=ri(e),o=e.tr,l=i.map.cellsInRect(t=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:t=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),c=l.map(f=>i.table.nodeAt(f));for(let f=0;f<l.length;f++)c[f].type==r.header_cell&&o.setNodeMarkup(i.tableStart+l[f],r.cell,c[f].attrs);if(o.steps.length==0)for(let f=0;f<l.length;f++)o.setNodeMarkup(i.tableStart+l[f],r.header_cell,c[f].attrs);n(o)}return!0}}function FC(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const o=e.table.nodeAt(r[i]);if(o&&o.type!==n.header_cell)return!1}return!0}function eu(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?CH(t):function(n,r){if(!Ur(n))return!1;if(r){const i=bn(n.schema),o=ri(n),l=n.tr,c=FC("row",o,i),f=FC("column",o,i),h=(t==="column"?c:t==="row"?f:!1)?1:0,m=t=="column"?{left:0,top:h,right:1,bottom:o.map.height}:t=="row"?{left:h,top:0,right:o.map.width,bottom:1}:o,g=t=="column"?f?i.cell:i.header_cell:t=="row"?c?i.cell:i.header_cell:i.cell;o.map.cellsInRect(m).forEach(y=>{const b=y+o.tableStart,w=l.doc.nodeAt(b);w&&l.setNodeMarkup(b,g,w.attrs)}),r(l)}return!0}}eu("row",{useDeprecatedLogic:!0});eu("column",{useDeprecatedLogic:!0});var wH=eu("cell",{useDeprecatedLogic:!0});function xH(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,i=t.before();r>=0;r--){const o=t.node(-1).child(r),l=o.lastChild;if(l)return i-1-l.nodeSize;i-=o.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),i=t.after();r<n.childCount;r++){const o=n.child(r);if(o.childCount)return i+1;i+=o.nodeSize}}return null}function $C(t){return function(e,n){if(!Ur(e))return!1;const r=xH(Jh(e),t);if(r==null)return!1;if(n){const i=e.doc.resolve(r);n(e.tr.setSelection(ce.between(i,Q_(i))).scrollIntoView())}return!0}}function SH(t,e){const n=t.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function Qf(t,e){const n=t.selection;if(!(n instanceof ot))return!1;if(e){const r=t.tr,i=bn(t.schema).cell.createAndFill().content;n.forEachCell((o,l)=>{o.content.eq(i)||r.replace(r.mapping.map(l+1),r.mapping.map(l+o.nodeSize-1),new le(i,0,0))}),r.docChanged&&e(r)}return!0}function TH(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const i=e.child(0),o=i.type.spec.tableRole,l=i.type.schema,c=[];if(o=="row")for(let f=0;f<e.childCount;f++){let d=e.child(f).content;const h=f?0:Math.max(0,n-1),m=f<e.childCount-1?0:Math.max(0,r-1);(h||m)&&(d=z0(bn(l).row,new le(d,h,m)).content),c.push(d)}else if(o=="cell"||o=="header_cell")c.push(n||r?z0(bn(l).row,new le(e,n,r)).content:e);else return null;return kH(l,c)}function kH(t,e){const n=[];for(let i=0;i<e.length;i++){const o=e[i];for(let l=o.childCount-1;l>=0;l--){const{rowspan:c,colspan:f}=o.child(l).attrs;for(let d=i;d<i+c;d++)n[d]=(n[d]||0)+f}}let r=0;for(let i=0;i<n.length;i++)r=Math.max(r,n[i]);for(let i=0;i<n.length;i++)if(i>=e.length&&e.push(Q.empty),n[i]<r){const o=bn(t).cell.createAndFill(),l=[];for(let c=n[i];c<r;c++)l.push(o);e[i]=e[i].append(Q.from(l))}return{height:e.length,width:r,rows:e}}function z0(t,e){const n=t.createAndFill();return new x2(n).replace(0,n.content.size,e).doc}function MH({width:t,height:e,rows:n},r,i){if(t!=r){const o=[],l=[];for(let c=0;c<n.length;c++){const f=n[c],d=[];for(let h=o[c]||0,m=0;h<r;m++){let g=f.child(m%f.childCount);h+g.attrs.colspan>r&&(g=g.type.createChecked(Hs(g.attrs,g.attrs.colspan,h+g.attrs.colspan-r),g.content)),d.push(g),h+=g.attrs.colspan;for(let y=1;y<g.attrs.rowspan;y++)o[c+y]=(o[c+y]||0)+g.attrs.colspan}l.push(Q.from(d))}n=l,t=r}if(e!=i){const o=[];for(let l=0,c=0;l<i;l++,c++){const f=[],d=n[c%e];for(let h=0;h<d.childCount;h++){let m=d.child(h);l+m.attrs.rowspan>i&&(m=m.type.create({...m.attrs,rowspan:Math.max(1,i-m.attrs.rowspan)},m.content)),f.push(m)}o.push(Q.from(f))}n=o,e=i}return{width:t,height:e,rows:n}}function EH(t,e,n,r,i,o,l){const c=t.doc.type.schema,f=bn(c);let d,h;if(i>e.width)for(let m=0,g=0;m<e.height;m++){const y=n.child(m);g+=y.nodeSize;const b=[];let w;y.lastChild==null||y.lastChild.type==f.cell?w=d||(d=f.cell.createAndFill()):w=h||(h=f.header_cell.createAndFill());for(let x=e.width;x<i;x++)b.push(w);t.insert(t.mapping.slice(l).map(g-1+r),b)}if(o>e.height){const m=[];for(let b=0,w=(e.height-1)*e.width;b<Math.max(e.width,i);b++){const x=b>=e.width?!1:n.nodeAt(e.map[w+b]).type==f.header_cell;m.push(x?h||(h=f.header_cell.createAndFill()):d||(d=f.cell.createAndFill()))}const g=f.row.create(null,Q.from(m)),y=[];for(let b=e.height;b<o;b++)y.push(g);t.insert(t.mapping.slice(l).map(r+n.nodeSize-2),y)}return!!(d||h)}function qC(t,e,n,r,i,o,l,c){if(l==0||l==e.height)return!1;let f=!1;for(let d=i;d<o;d++){const h=l*e.width+d,m=e.map[h];if(e.map[h-e.width]==m){f=!0;const g=n.nodeAt(m),{top:y,left:b}=e.findCell(m);t.setNodeMarkup(t.mapping.slice(c).map(m+r),null,{...g.attrs,rowspan:l-y}),t.insert(t.mapping.slice(c).map(e.positionAt(l,b,n)),g.type.createAndFill({...g.attrs,rowspan:y+g.attrs.rowspan-l})),d+=g.attrs.colspan-1}}return f}function ZC(t,e,n,r,i,o,l,c){if(l==0||l==e.width)return!1;let f=!1;for(let d=i;d<o;d++){const h=d*e.width+l,m=e.map[h];if(e.map[h-1]==m){f=!0;const g=n.nodeAt(m),y=e.colCount(m),b=t.mapping.slice(c).map(m+r);t.setNodeMarkup(b,null,Hs(g.attrs,l-y,g.attrs.colspan-(l-y))),t.insert(b+g.nodeSize,g.type.createAndFill(Hs(g.attrs,0,l-y))),d+=g.attrs.rowspan-1}}return f}function KC(t,e,n,r,i){let o=n?t.doc.nodeAt(n-1):t.doc;if(!o)throw new Error("No table found");let l=Tt.get(o);const{top:c,left:f}=r,d=f+i.width,h=c+i.height,m=t.tr;let g=0;function y(){if(o=n?m.doc.nodeAt(n-1):m.doc,!o)throw new Error("No table found");l=Tt.get(o),g=m.mapping.maps.length}EH(m,l,o,n,d,h,g)&&y(),qC(m,l,o,n,f,d,c,g)&&y(),qC(m,l,o,n,f,d,h,g)&&y(),ZC(m,l,o,n,c,h,f,g)&&y(),ZC(m,l,o,n,c,h,d,g)&&y();for(let b=c;b<h;b++){const w=l.positionAt(b,f,o),x=l.positionAt(b,d,o);m.replace(m.mapping.slice(g).map(w+n),m.mapping.slice(g).map(x+n),new le(i.rows[b-c],0,0))}y(),m.setSelection(new ot(m.doc.resolve(n+l.positionAt(c,f,o)),m.doc.resolve(n+l.positionAt(h-1,d-1,o)))),e(m)}var AH=V2({ArrowLeft:ed("horiz",-1),ArrowRight:ed("horiz",1),ArrowUp:ed("vert",-1),ArrowDown:ed("vert",1),"Shift-ArrowLeft":td("horiz",-1),"Shift-ArrowRight":td("horiz",1),"Shift-ArrowUp":td("vert",-1),"Shift-ArrowDown":td("vert",1),Backspace:Qf,"Mod-Backspace":Qf,Delete:Qf,"Mod-Delete":Qf});function Cd(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function ed(t,e){return(n,r,i)=>{if(!i)return!1;const o=n.selection;if(o instanceof ot)return Cd(n,r,we.near(o.$headCell,e));if(t!="horiz"&&!o.empty)return!1;const l=xx(i,t,e);if(l==null)return!1;if(t=="horiz")return Cd(n,r,we.near(n.doc.resolve(o.head+e),e));{const c=n.doc.resolve(l),f=mx(c,t,e);let d;return f?d=we.near(f,1):e<0?d=we.near(n.doc.resolve(c.before(-1)),-1):d=we.near(n.doc.resolve(c.after(-1)),1),Cd(n,r,d)}}}function td(t,e){return(n,r,i)=>{if(!i)return!1;const o=n.selection;let l;if(o instanceof ot)l=o;else{const f=xx(i,t,e);if(f==null)return!1;l=new ot(n.doc.resolve(f))}const c=mx(l.$headCell,t,e);return c?Cd(n,r,new ot(l.$anchorCell,c)):!1}}function RH(t,e){const n=t.state.doc,r=ma(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new ot(r))),!0):!1}function NH(t,e,n){if(!Ur(t.state))return!1;let r=TH(n);const i=t.state.selection;if(i instanceof ot){r||(r={width:1,height:1,rows:[Q.from(z0(bn(t.state.schema).cell,n))]});const o=i.$anchorCell.node(-1),l=i.$anchorCell.start(-1),c=Tt.get(o).rectBetween(i.$anchorCell.pos-l,i.$headCell.pos-l);return r=MH(r,c.right-c.left,c.bottom-c.top),KC(t.state,t.dispatch,l,c,r),!0}else if(r){const o=Jh(t.state),l=o.start(-1);return KC(t.state,t.dispatch,l,Tt.get(o.node(-1)).findCell(o.pos-l),r),!0}else return!1}function OH(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=GC(t,e.target);let i;if(e.shiftKey&&t.state.selection instanceof ot)o(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(i=ma(t.state.selection.$anchor))!=null&&((n=Eg(t,e))==null?void 0:n.pos)!=i.pos)o(i,e),e.preventDefault();else if(!r)return;function o(f,d){let h=Eg(t,d);const m=ko.getState(t.state)==null;if(!h||!hy(f,h))if(m)h=f;else return;const g=new ot(f,h);if(m||!t.state.selection.eq(g)){const y=t.state.tr.setSelection(g);m&&y.setMeta(ko,f.pos),t.dispatch(y)}}function l(){t.root.removeEventListener("mouseup",l),t.root.removeEventListener("dragstart",l),t.root.removeEventListener("mousemove",c),ko.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(ko,-1))}function c(f){const d=f,h=ko.getState(t.state);let m;if(h!=null)m=t.state.doc.resolve(h);else if(GC(t,d.target)!=r&&(m=Eg(t,e),!m))return l();m&&o(m,d)}t.root.addEventListener("mouseup",l),t.root.addEventListener("dragstart",l),t.root.addEventListener("mousemove",c)}function xx(t,e,n){if(!(t.state.selection instanceof ce))return null;const{$head:r}=t.state.selection;for(let i=r.depth-1;i>=0;i--){const o=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:o.childCount))return null;if(o.type.spec.tableRole=="cell"||o.type.spec.tableRole=="header_cell"){const c=r.before(i),f=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(f)?c:null}}return null}function GC(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function Eg(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?ma(t.state.doc.resolve(n.pos)):null}var DH=class{constructor(e,n){this.node=e,this.defaultCellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${n}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),B0(e,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,B0(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function B0(t,e,n,r,i,o){var l;let c=0,f=!0,d=e.firstChild;const h=t.firstChild;if(h){for(let m=0,g=0;m<h.childCount;m++){const{colspan:y,colwidth:b}=h.child(m).attrs;for(let w=0;w<y;w++,g++){const x=i==g?o:b&&b[w],k=x?x+"px":"";if(c+=x||r,x||(f=!1),d)d.style.width!=k&&(d.style.width=k),d=d.nextSibling;else{const A=document.createElement("col");A.style.width=k,e.appendChild(A)}}}for(;d;){const m=d.nextSibling;(l=d.parentNode)==null||l.removeChild(d),d=m}f?(n.style.width=c+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=c+"px")}}var rr=new Pe("tableColumnResizing");function LH({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=DH,lastColumnResizable:i=!0}={}){const o=new Be({key:rr,state:{init(l,c){var f,d;const h=(d=(f=o.spec)==null?void 0:f.props)==null?void 0:d.nodeViews,m=bn(c.schema).table.name;return r&&h&&(h[m]=(g,y)=>new r(g,n,y)),new _H(-1,!1)},apply(l,c){return c.apply(l)}},props:{attributes:l=>{const c=rr.getState(l);return c&&c.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(l,c)=>{HH(l,c,t,i)},mouseleave:l=>{IH(l)},mousedown:(l,c)=>{zH(l,c,e,n)}},decorations:l=>{const c=rr.getState(l);if(c&&c.activeHandle>-1)return PH(l,c.activeHandle)},nodeViews:{}}});return o}var _H=class wd{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(rr);if(r&&r.setHandle!=null)return new wd(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new wd(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let i=e.mapping.map(n.activeHandle,-1);return I0(e.doc.resolve(i))||(i=-1),new wd(i,n.dragging)}return n}};function HH(t,e,n,r){if(!t.editable)return;const i=rr.getState(t.state);if(i&&!i.dragging){const o=VH(e.target);let l=-1;if(o){const{left:c,right:f}=o.getBoundingClientRect();e.clientX-c<=n?l=YC(t,e,"left",n):f-e.clientX<=n&&(l=YC(t,e,"right",n))}if(l!=i.activeHandle){if(!r&&l!==-1){const c=t.state.doc.resolve(l),f=c.node(-1),d=Tt.get(f),h=c.start(-1);if(d.colCount(c.pos-h)+c.nodeAfter.attrs.colspan-1==d.width-1)return}Sx(t,l)}}}function IH(t){if(!t.editable)return;const e=rr.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&Sx(t,-1)}function zH(t,e,n,r){var i;if(!t.editable)return!1;const o=(i=t.dom.ownerDocument.defaultView)!=null?i:window,l=rr.getState(t.state);if(!l||l.activeHandle==-1||l.dragging)return!1;const c=t.state.doc.nodeAt(l.activeHandle),f=BH(t,l.activeHandle,c.attrs);t.dispatch(t.state.tr.setMeta(rr,{setDragging:{startX:e.clientX,startWidth:f}}));function d(m){o.removeEventListener("mouseup",d),o.removeEventListener("mousemove",h);const g=rr.getState(t.state);g?.dragging&&(jH(t,g.activeHandle,WC(g.dragging,m,n)),t.dispatch(t.state.tr.setMeta(rr,{setDragging:null})))}function h(m){if(!m.which)return d(m);const g=rr.getState(t.state);if(g&&g.dragging){const y=WC(g.dragging,m,n);XC(t,g.activeHandle,y,r)}}return XC(t,l.activeHandle,f,r),o.addEventListener("mouseup",d),o.addEventListener("mousemove",h),e.preventDefault(),!0}function BH(t,e,{colspan:n,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const o=t.domAtPos(e);let c=o.node.childNodes[o.offset].offsetWidth,f=n;if(r)for(let d=0;d<n;d++)r[d]&&(c-=r[d],f--);return c/f}function VH(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function YC(t,e,n,r){const i=n=="right"?-r:r,o=t.posAtCoords({left:e.clientX+i,top:e.clientY});if(!o)return-1;const{pos:l}=o,c=ma(t.state.doc.resolve(l));if(!c)return-1;if(n=="right")return c.pos;const f=Tt.get(c.node(-1)),d=c.start(-1),h=f.map.indexOf(c.pos-d);return h%f.width==0?-1:d+f.map[h-1]}function WC(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function Sx(t,e){t.dispatch(t.state.tr.setMeta(rr,{setHandle:e}))}function jH(t,e,n){const r=t.state.doc.resolve(e),i=r.node(-1),o=Tt.get(i),l=r.start(-1),c=o.colCount(r.pos-l)+r.nodeAfter.attrs.colspan-1,f=t.state.tr;for(let d=0;d<o.height;d++){const h=d*o.width+c;if(d&&o.map[h]==o.map[h-o.width])continue;const m=o.map[h],g=i.nodeAt(m).attrs,y=g.colspan==1?0:c-o.colCount(m);if(g.colwidth&&g.colwidth[y]==n)continue;const b=g.colwidth?g.colwidth.slice():UH(g.colspan);b[y]=n,f.setNodeMarkup(l+m,null,{...g,colwidth:b})}f.docChanged&&t.dispatch(f)}function XC(t,e,n,r){const i=t.state.doc.resolve(e),o=i.node(-1),l=i.start(-1),c=Tt.get(o).colCount(i.pos-l)+i.nodeAfter.attrs.colspan-1;let f=t.domAtPos(i.start(-1)).node;for(;f&&f.nodeName!="TABLE";)f=f.parentNode;f&&B0(o,f.firstChild,f,r,c,n)}function UH(t){return Array(t).fill(0)}function PH(t,e){var n;const r=[],i=t.doc.resolve(e),o=i.node(-1);if(!o)return Xe.empty;const l=Tt.get(o),c=i.start(-1),f=l.colCount(i.pos-c)+i.nodeAfter.attrs.colspan-1;for(let d=0;d<l.height;d++){const h=f+d*l.width;if((f==l.width-1||l.map[h]!=l.map[h+1])&&(d==0||l.map[h]!=l.map[h-l.width])){const m=l.map[h],g=c+m+o.nodeAt(m).nodeSize-1,y=document.createElement("div");y.className="column-resize-handle",(n=rr.getState(t))!=null&&n.dragging&&r.push(zt.node(c+m,c+m+o.nodeAt(m).nodeSize,{class:"column-resize-dragging"})),r.push(zt.widget(g,y))}}return Xe.create(t.doc,r)}function FH({allowTableNodeSelection:t=!1}={}){return new Be({key:ko,state:{init(){return null},apply(e,n){const r=e.getMeta(ko);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:i,pos:o}=e.mapping.mapResult(n);return i?null:o}},props:{decorations:nH,handleDOMEvents:{mousedown:OH},createSelectionBetween(e){return ko.getState(e.state)!=null?e.state.selection:null},handleTripleClick:RH,handleKeyDown:AH,handlePaste:NH},appendTransaction(e,n,r){return oH(r,bx(r,n),t)}})}var $H=st.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{var e,n;const r=t.getAttribute("colwidth"),i=r?r.split(",").map(o=>parseInt(o,10)):null;if(!i){const o=(e=t.closest("table"))==null?void 0:e.querySelectorAll("colgroup > col"),l=Array.from(((n=t.parentElement)==null?void 0:n.children)||[]).indexOf(t);if(l&&l>-1&&o&&o[l]){const c=o[l].getAttribute("width");return c?[parseInt(c,10)]:null}}return i}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",je(this.options.HTMLAttributes,t),0]}}),qH=st.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",je(this.options.HTMLAttributes,t),0]}}),ZH=st.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",je(this.options.HTMLAttributes,t),0]}});function V0(t,e){return e?["width",`${Math.max(e,t)}px`]:["min-width",`${t}px`]}function JC(t,e,n,r,i,o){var l;let c=0,f=!0,d=e.firstChild;const h=t.firstChild;if(h!==null)for(let g=0,y=0;g<h.childCount;g+=1){const{colspan:b,colwidth:w}=h.child(g).attrs;for(let x=0;x<b;x+=1,y+=1){const k=i===y?o:w&&w[x],A=k?`${k}px`:"";if(c+=k||r,k||(f=!1),d){if(d.style.width!==A){const[N,D]=V0(r,k);d.style.setProperty(N,D)}d=d.nextSibling}else{const N=document.createElement("col"),[D,L]=V0(r,k);N.style.setProperty(D,L),e.appendChild(N)}}}for(;d;){const g=d.nextSibling;(l=d.parentNode)==null||l.removeChild(d),d=g}const m=t.attrs.style&&typeof t.attrs.style=="string"&&/\bwidth\s*:/i.test(t.attrs.style);f&&!m?(n.style.width=`${c}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${c}px`)}var KH=class{constructor(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),t.attrs.style&&(this.table.style.cssText=t.attrs.style),this.colgroup=this.table.appendChild(document.createElement("colgroup")),JC(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!==this.node.type?!1:(this.node=t,JC(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){const e=t.target,n=this.dom.contains(e),r=this.contentDOM.contains(e);return!!(n&&!r&&(t.type==="attributes"||t.type==="childList"||t.type==="characterData"))}};function GH(t,e,n,r){let i=0,o=!0;const l=[],c=t.firstChild;if(!c)return{};for(let m=0,g=0;m<c.childCount;m+=1){const{colspan:y,colwidth:b}=c.child(m).attrs;for(let w=0;w<y;w+=1,g+=1){const x=n===g?r:b&&b[w];i+=x||e,x||(o=!1);const[k,A]=V0(e,x);l.push(["col",{style:`${k}: ${A}`}])}}const f=o?`${i}px`:"",d=o?"":`${i}px`;return{colgroup:["colgroup",{},...l],tableWidth:f,tableMinWidth:d}}function QC(t,e){return t.createAndFill()}function YH(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;const e={};return Object.keys(t.nodes).forEach(n=>{const r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),t.cached.tableNodeTypes=e,e}function WH(t,e,n,r,i){const o=YH(t),l=[],c=[];for(let d=0;d<n;d+=1){const h=QC(o.cell);if(h&&c.push(h),r){const m=QC(o.header_cell);m&&l.push(m)}}const f=[];for(let d=0;d<e;d+=1)f.push(o.row.createChecked(null,r&&d===0?l:c));return o.table.createChecked(null,f)}function XH(t){return t instanceof ot}var nd=({editor:t})=>{const{selection:e}=t.state;if(!XH(e))return!1;let n=0;const r=g9(e.ranges[0].$from,o=>o.type.name==="table");return r?.node.descendants(o=>{if(o.type.name==="table")return!1;["tableCell","tableHeader"].includes(o.type.name)&&(n+=1)}),n===e.ranges.length?(t.commands.deleteTable(),!0):!1},JH="";function QH(t){return(t||"").replace(/\s+/g," ").trim()}function eI(t,e,n={}){var r;const i=(r=n.cellLineSeparator)!=null?r:JH;if(!t||!t.content||t.content.length===0)return"";const o=[];t.content.forEach(b=>{const w=[];b.content&&b.content.forEach(x=>{let k="";x.content&&Array.isArray(x.content)&&x.content.length>1?k=x.content.map(L=>e.renderChildren(L)).join(i):k=x.content?e.renderChildren(x.content):"";const A=QH(k),N=x.type==="tableHeader";w.push({text:A,isHeader:N})}),o.push(w)});const l=o.reduce((b,w)=>Math.max(b,w.length),0);if(l===0)return"";const c=new Array(l).fill(0);o.forEach(b=>{var w;for(let x=0;x<l;x+=1){const A=(((w=b[x])==null?void 0:w.text)||"").length;A>c[x]&&(c[x]=A),c[x]<3&&(c[x]=3)}});const f=(b,w)=>b+" ".repeat(Math.max(0,w-b.length)),d=o[0],h=d.some(b=>b.isHeader);let m=`
`;const g=new Array(l).fill(0).map((b,w)=>h&&d[w]&&d[w].text||"");return m+=`| ${g.map((b,w)=>f(b,c[w])).join(" | ")} |
`,m+=`| ${c.map(b=>"-".repeat(Math.max(3,b))).join(" | ")} |
`,(h?o.slice(1):o).forEach(b=>{m+=`| ${new Array(l).fill(0).map((w,x)=>f(b[x]&&b[x].text||"",c[x])).join(" | ")} |
`}),m}var tI=eI,Tx=st.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,renderWrapper:!1,handleWidth:5,cellMinWidth:25,View:KH,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:t,HTMLAttributes:e}){const{colgroup:n,tableWidth:r,tableMinWidth:i}=GH(t,this.options.cellMinWidth),o=e.style;function l(){return o||(r?`width: ${r}`:`min-width: ${i}`)}const c=["table",je(this.options.HTMLAttributes,e,{style:l()}),n,["tbody",0]];return this.options.renderWrapper?["div",{class:"tableWrapper"},c]:c},parseMarkdown:(t,e)=>{const n=[];if(t.header){const r=[];t.header.forEach(i=>{r.push(e.createNode("tableHeader",{},[{type:"paragraph",content:e.parseInline(i.tokens)}]))}),n.push(e.createNode("tableRow",{},r))}return t.rows&&t.rows.forEach(r=>{const i=[];r.forEach(o=>{i.push(e.createNode("tableCell",{},[{type:"paragraph",content:e.parseInline(o.tokens)}]))}),n.push(e.createNode("tableRow",{},i))}),e.createNode("table",void 0,n)},renderMarkdown:(t,e)=>tI(t,e),addCommands(){return{insertTable:({rows:t=3,cols:e=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:i,editor:o})=>{const l=WH(o.schema,t,e,n);if(i){const c=r.selection.from+1;r.replaceSelectionWith(l).scrollIntoView().setSelection(ce.near(r.doc.resolve(c)))}return!0},addColumnBefore:()=>({state:t,dispatch:e})=>aH(t,e),addColumnAfter:()=>({state:t,dispatch:e})=>cH(t,e),deleteColumn:()=>({state:t,dispatch:e})=>fH(t,e),addRowBefore:()=>({state:t,dispatch:e})=>hH(t,e),addRowAfter:()=>({state:t,dispatch:e})=>pH(t,e),deleteRow:()=>({state:t,dispatch:e})=>gH(t,e),deleteTable:()=>({state:t,dispatch:e})=>SH(t,e),mergeCells:()=>({state:t,dispatch:e})=>UC(t,e),splitCell:()=>({state:t,dispatch:e})=>PC(t,e),toggleHeaderColumn:()=>({state:t,dispatch:e})=>eu("column")(t,e),toggleHeaderRow:()=>({state:t,dispatch:e})=>eu("row")(t,e),toggleHeaderCell:()=>({state:t,dispatch:e})=>wH(t,e),mergeOrSplit:()=>({state:t,dispatch:e})=>UC(t,e)?!0:PC(t,e),setCellAttribute:(t,e)=>({state:n,dispatch:r})=>bH(t,e)(n,r),goToNextCell:()=>({state:t,dispatch:e})=>$C(1)(t,e),goToPreviousCell:()=>({state:t,dispatch:e})=>$C(-1)(t,e),fixTables:()=>({state:t,dispatch:e})=>(e&&bx(t),!0),setCellSelection:t=>({tr:e,dispatch:n})=>{if(n){const r=ot.create(e.doc,t.anchorCell,t.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:nd,"Mod-Backspace":nd,Delete:nd,"Mod-Delete":nd}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[LH({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],FH({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:Ke(be(t,"tableRole",e))}}}),nI=Fe.create({name:"tableKit",addExtensions(){const t=[];return this.options.table!==!1&&t.push(Tx.configure(this.options.table)),this.options.tableCell!==!1&&t.push($H.configure(this.options.tableCell)),this.options.tableHeader!==!1&&t.push(qH.configure(this.options.tableHeader)),this.options.tableRow!==!1&&t.push(ZH.configure(this.options.tableRow)),t}});let rI=1;const xo=()=>`folioTiptapNode-${rI++}`,j0=(t,e)=>{window.parent.postMessage({type:"f-tiptap-node:click",attrs:t,uniqueId:e},"*")},kx=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[S.jsx("rect",{width:"10",height:"20",x:"2",y:"2",rx:"2"}),S.jsx("path",{d:"M21.593 11.998H15.19M18.39 15.201V8.8"})]}));kx.displayName="AddColumnAfter";const Mx=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:S.jsxs("g",{transform:"rotate(180 12 12)",children:[S.jsx("rect",{width:"10",height:"20",x:"2",y:"2",rx:"2"}),S.jsx("path",{d:"M21.593 11.998H15.19M18.39 15.201V8.8"})]})}));Mx.displayName="AddColumnBefore";const Ex=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2ZM4 12C4 7.58172 7.58172 4 12 4C16.4183 4 20 7.58172 20 12C20 16.4183 16.4183 20 12 20C7.58172 20 4 16.4183 4 12Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 7C12.5523 7 13 7.44772 13 8V12C13 12.5523 12.5523 13 12 13C11.4477 13 11 12.5523 11 12V8C11 7.44772 11.4477 7 12 7Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 15C12.5523 15 13 15.4477 13 16C13 16.5523 12.5523 17 12 17C11.4477 17 11 16.5523 11 16C11 15.4477 11.4477 15 12 15Z",fill:"currentColor"})]}));Ex.displayName="AlertCircleIcon";const Ax=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 6C2 5.44772 2.44772 5 3 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H3C2.44772 7 2 6.55228 2 6Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 12C6 11.4477 6.44772 11 7 11H17C17.5523 11 18 11.4477 18 12C18 12.5523 17.5523 13 17 13H7C6.44772 13 6 12.5523 6 12Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 18C4 17.4477 4.44772 17 5 17H19C19.5523 17 20 17.4477 20 18C20 18.5523 19.5523 19 19 19H5C4.44772 19 4 18.5523 4 18Z",fill:"currentColor"})]}));Ax.displayName="AlignCenterIcon";const iI=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 6C2 5.44772 2.44772 5 3 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H3C2.44772 7 2 6.55228 2 6Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 12C2 11.4477 2.44772 11 3 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H3C2.44772 13 2 12.5523 2 12Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 18C2 17.4477 2.44772 17 3 17H21C21.5523 17 22 17.4477 22 18C22 18.5523 21.5523 19 21 19H3C2.44772 19 2 18.5523 2 18Z",fill:"currentColor"})]}));iI.displayName="AlignJustifyIcon";const py=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 6C2 5.44772 2.44772 5 3 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H3C2.44772 7 2 6.55228 2 6Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 12C2 11.4477 2.44772 11 3 11H15C15.5523 11 16 11.4477 16 12C16 12.5523 15.5523 13 15 13H3C2.44772 13 2 12.5523 2 12Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 18C2 17.4477 2.44772 17 3 17H17C17.5523 17 18 17.4477 18 18C18 18.5523 17.5523 19 17 19H3C2.44772 19 2 18.5523 2 18Z",fill:"currentColor"})]}));py.displayName="AlignLeftIcon";const Rx=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 6C2 5.44772 2.44772 5 3 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H3C2.44772 7 2 6.55228 2 6Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 12C8 11.4477 8.44772 11 9 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H9C8.44772 13 8 12.5523 8 12Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 18C6 17.4477 6.44772 17 7 17H21C21.5523 17 22 17.4477 22 18C22 18.5523 21.5523 19 21 19H7C6.44772 19 6 18.5523 6 18Z",fill:"currentColor"})]}));Rx.displayName="AlignRightIcon";const Nx=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{d:"M11.92 19.92L4 12L11.92 4.08L13.33 5.5L7.83 11H22V13H7.83L13.34 18.5L11.92 19.92ZM4 12V2H2V22H4V12Z",fill:"currentColor"})}));Nx.displayName="ArrowCollapseLeft";const Ox=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{d:"M12.08 4.08L20 12L12.08 19.92L10.67 18.5L16.17 13H2V11H16.17L10.67 5.5L12.08 4.08ZM20 12V22H22V2H20V12Z",fill:"currentColor"})}));Ox.displayName="ArrowCollapseRight";const my=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{d:"M11.0001 4H13.0001V16L18.5001 10.5L19.9201 11.92L12.0001 19.84L4.08008 11.92L5.50008 10.5L11.0001 16V4Z",fill:"currentColor"})}));my.displayName="ArrowDownIcon";const oI=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{d:"M12.7071 5.70711C13.0976 5.31658 13.0976 4.68342 12.7071 4.29289C12.3166 3.90237 11.6834 3.90237 11.2929 4.29289L4.29289 11.2929C3.90237 11.6834 3.90237 12.3166 4.29289 12.7071L11.2929 19.7071C11.6834 20.0976 12.3166 20.0976 12.7071 19.7071C13.0976 19.3166 13.0976 18.6834 12.7071 18.2929L7.41421 13L19 13C19.5523 13 20 12.5523 20 12C20 11.4477 19.5523 11 19 11L7.41421 11L12.7071 5.70711Z",fill:"currentColor"})}));oI.displayName="ArrowLeftIcon";const Dx=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{d:"M18 16V13H15V22H13V2H15V11H18V8L22 12L18 16ZM2 12L6 16V13H9V22H11V2H9V11H6V8L2 12Z",fill:"currentColor"})}));Dx.displayName="ArrowSplitVerticalIcon";const gy=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{d:"M13.0001 20H11.0001V8.00003L5.50008 13.5L4.08008 12.08L12.0001 4.16003L19.9201 12.08L18.5001 13.5L13.0001 8.00003V20Z",fill:"currentColor"})}));gy.displayName="ArrowUpIcon";const sI=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.43471 4.01458C4.34773 4.06032 4.26607 4.11977 4.19292 4.19292C4.11977 4.26607 4.06032 4.34773 4.01458 4.43471C2.14611 6.40628 1 9.0693 1 12C1 18.0751 5.92487 23 12 23C14.9306 23 17.5936 21.854 19.5651 19.9856C19.6522 19.9398 19.7339 19.8803 19.8071 19.8071C19.8803 19.7339 19.9398 19.6522 19.9856 19.5651C21.854 17.5936 23 14.9306 23 12C23 5.92487 18.0751 1 12 1C9.0693 1 6.40628 2.14611 4.43471 4.01458ZM6.38231 4.9681C7.92199 3.73647 9.87499 3 12 3C16.9706 3 21 7.02944 21 12C21 14.125 20.2635 16.078 19.0319 17.6177L6.38231 4.9681ZM17.6177 19.0319C16.078 20.2635 14.125 21 12 21C7.02944 21 3 16.9706 3 12C3 9.87499 3.73647 7.92199 4.9681 6.38231L17.6177 19.0319Z",fill:"currentColor"})}));sI.displayName="BanIcon";const lI=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 6C8 5.44772 8.44772 5 9 5H16C16.5523 5 17 5.44772 17 6C17 6.55228 16.5523 7 16 7H9C8.44772 7 8 6.55228 8 6Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 3C4.55228 3 5 3.44772 5 4L5 20C5 20.5523 4.55229 21 4 21C3.44772 21 3 20.5523 3 20L3 4C3 3.44772 3.44772 3 4 3Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 12C8 11.4477 8.44772 11 9 11H20C20.5523 11 21 11.4477 21 12C21 12.5523 20.5523 13 20 13H9C8.44772 13 8 12.5523 8 12Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 18C8 17.4477 8.44772 17 9 17H16C16.5523 17 17 17.4477 17 18C17 18.5523 16.5523 19 16 19H9C8.44772 19 8 18.5523 8 18Z",fill:"currentColor"})]}));lI.displayName="BlockQuoteIcon";const Lx=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 2.5C5.17157 2.5 4.5 3.17157 4.5 4V20C4.5 20.8284 5.17157 21.5 6 21.5H15C16.4587 21.5 17.8576 20.9205 18.8891 19.8891C19.9205 18.8576 20.5 17.4587 20.5 16C20.5 14.5413 19.9205 13.1424 18.8891 12.1109C18.6781 11.9 18.4518 11.7079 18.2128 11.5359C19.041 10.5492 19.5 9.29829 19.5 8C19.5 6.54131 18.9205 5.14236 17.8891 4.11091C16.8576 3.07946 15.4587 2.5 14 2.5H6ZM14 10.5C14.663 10.5 15.2989 10.2366 15.7678 9.76777C16.2366 9.29893 16.5 8.66304 16.5 8C16.5 7.33696 16.2366 6.70107 15.7678 6.23223C15.2989 5.76339 14.663 5.5 14 5.5H7.5V10.5H14ZM7.5 18.5V13.5H15C15.663 13.5 16.2989 13.7634 16.7678 14.2322C17.2366 14.7011 17.5 15.337 17.5 16C17.5 16.663 17.2366 17.2989 16.7678 17.7678C16.2989 18.2366 15.663 18.5 15 18.5H7.5Z",fill:"currentColor"})}));Lx.displayName="BoldIcon";const aI=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.7071 6.29289C21.0976 6.68342 21.0976 7.31658 20.7071 7.70711L10.7071 17.7071C10.3166 18.0976 9.68342 18.0976 9.29289 17.7071L4.29289 12.7071C3.90237 12.3166 3.90237 11.6834 4.29289 11.2929C4.68342 10.9024 5.31658 10.9024 5.70711 11.2929L10 15.5858L19.2929 6.29289C19.6834 5.90237 20.3166 5.90237 20.7071 6.29289Z",fill:"currentColor"})}));aI.displayName="CheckIcon";const _x=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.29289 8.29289C5.68342 7.90237 6.31658 7.90237 6.70711 8.29289L12 13.5858L17.2929 8.29289C17.6834 7.90237 18.3166 7.90237 18.7071 8.29289C19.0976 8.68342 19.0976 9.31658 18.7071 9.70711L12.7071 15.7071C12.3166 16.0976 11.6834 16.0976 11.2929 15.7071L5.29289 9.70711C4.90237 9.31658 4.90237 8.68342 5.29289 8.29289Z",fill:"currentColor"})}));_x.displayName="ChevronDownIcon";const Qh=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z",fill:"currentColor"})}));Qh.displayName="CloseIcon";const cI=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.70711 2.29289C7.09763 2.68342 7.09763 3.31658 6.70711 3.70711L4.41421 6L6.70711 8.29289C7.09763 8.68342 7.09763 9.31658 6.70711 9.70711C6.31658 10.0976 5.68342 10.0976 5.29289 9.70711L2.29289 6.70711C1.90237 6.31658 1.90237 5.68342 2.29289 5.29289L5.29289 2.29289C5.68342 1.90237 6.31658 1.90237 6.70711 2.29289Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.2929 2.29289C10.6834 1.90237 11.3166 1.90237 11.7071 2.29289L14.7071 5.29289C15.0976 5.68342 15.0976 6.31658 14.7071 6.70711L11.7071 9.70711C11.3166 10.0976 10.6834 10.0976 10.2929 9.70711C9.90237 9.31658 9.90237 8.68342 10.2929 8.29289L12.5858 6L10.2929 3.70711C9.90237 3.31658 9.90237 2.68342 10.2929 2.29289Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17 4C17 3.44772 17.4477 3 18 3H19C20.6569 3 22 4.34315 22 6V18C22 19.6569 20.6569 21 19 21H5C3.34315 21 2 19.6569 2 18V12C2 11.4477 2.44772 11 3 11C3.55228 11 4 11.4477 4 12V18C4 18.5523 4.44772 19 5 19H19C19.5523 19 20 18.5523 20 18V6C20 5.44772 19.5523 5 19 5H18C17.4477 5 17 4.55228 17 4Z",fill:"currentColor"})]}));cI.displayName="CodeBlockIcon";const Hx=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{d:"M15.4545 4.2983C15.6192 3.77115 15.3254 3.21028 14.7983 3.04554C14.2712 2.88081 13.7103 3.1746 13.5455 3.70175L8.54554 19.7017C8.38081 20.2289 8.6746 20.7898 9.20175 20.9545C9.72889 21.1192 10.2898 20.8254 10.4545 20.2983L15.4545 4.2983Z",fill:"currentColor"}),S.jsx("path",{d:"M6.70711 7.29289C7.09763 7.68342 7.09763 8.31658 6.70711 8.70711L3.41421 12L6.70711 15.2929C7.09763 15.6834 7.09763 16.3166 6.70711 16.7071C6.31658 17.0976 5.68342 17.0976 5.29289 16.7071L1.29289 12.7071C0.902369 12.3166 0.902369 11.6834 1.29289 11.2929L5.29289 7.29289C5.68342 6.90237 6.31658 6.90237 6.70711 7.29289Z",fill:"currentColor"}),S.jsx("path",{d:"M17.2929 7.29289C17.6834 6.90237 18.3166 6.90237 18.7071 7.29289L22.7071 11.2929C23.0976 11.6834 23.0976 12.3166 22.7071 12.7071L18.7071 16.7071C18.3166 17.0976 17.6834 17.0976 17.2929 16.7071C16.9024 16.3166 16.9024 15.6834 17.2929 15.2929L20.5858 12L17.2929 8.70711C16.9024 8.31658 16.9024 7.68342 17.2929 7.29289Z",fill:"currentColor"})]}));Hx.displayName="Code2Icon";const Ix=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21 4C21 3.44772 20.5523 3 20 3C19.4477 3 19 3.44772 19 4V11C19 11.7956 18.6839 12.5587 18.1213 13.1213C17.5587 13.6839 16.7956 14 16 14H6.41421L9.70711 10.7071C10.0976 10.3166 10.0976 9.68342 9.70711 9.29289C9.31658 8.90237 8.68342 8.90237 8.29289 9.29289L3.29289 14.2929C2.90237 14.6834 2.90237 15.3166 3.29289 15.7071L8.29289 20.7071C8.68342 21.0976 9.31658 21.0976 9.70711 20.7071C10.0976 20.3166 10.0976 19.6834 9.70711 19.2929L6.41421 16H16C17.3261 16 18.5979 15.4732 19.5355 14.5355C20.4732 13.5979 21 12.3261 21 11V4Z",fill:"currentColor"})}));Ix.displayName="CornerDownLeftIcon";const zx=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{d:"M20.71 7.04006C21.1 6.65006 21.1 6.00006 20.71 5.63006L18.37 3.29006C18 2.90006 17.35 2.90006 16.96 3.29006L15.12 5.12006L18.87 8.87006M3 17.2501V21.0001H6.75L17.81 9.93006L14.06 6.18006L3 17.2501Z",fill:"currentColor"})}));zx.displayName="EditIcon";const Bx=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{d:"M14 3C14 2.44772 14.4477 2 15 2H21C21.5523 2 22 2.44772 22 3V9C22 9.55228 21.5523 10 21 10C20.4477 10 20 9.55228 20 9V5.41421L10.7071 14.7071C10.3166 15.0976 9.68342 15.0976 9.29289 14.7071C8.90237 14.3166 8.90237 13.6834 9.29289 13.2929L18.5858 4H15C14.4477 4 14 3.55228 14 3Z",fill:"currentColor"}),S.jsx("path",{d:"M4.29289 7.29289C4.48043 7.10536 4.73478 7 5 7H11C11.5523 7 12 6.55228 12 6C12 5.44772 11.5523 5 11 5H5C4.20435 5 3.44129 5.31607 2.87868 5.87868C2.31607 6.44129 2 7.20435 2 8V19C2 19.7957 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H16C16.7957 22 17.5587 21.6839 18.1213 21.1213C18.6839 20.5587 19 19.7957 19 19V13C19 12.4477 18.5523 12 18 12C17.4477 12 17 12.4477 17 13V19C17 19.2652 16.8946 19.5196 16.7071 19.7071C16.5196 19.8946 16.2652 20 16 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V8C4 7.73478 4.10536 7.48043 4.29289 7.29289Z",fill:"currentColor"})]}));Bx.displayName="ExternalLinkIcon";const Vx=M.memo(({className:t,...e})=>S.jsx("svg",{width:"17",height:"16",className:t,viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{d:"M16.1789 8.32686L11.616 3.76343C11.4016 3.54914 11.1109 3.42877 10.8077 3.42877C10.5046 3.42877 10.2139 3.54914 9.99944 3.76343L6.93773 6.82514L4.50001 0H3.35715L0.5 8H1.64286L2.21372 6.28571H5.64229L6.10115 7.66171L1.97772 11.7851C1.87154 11.8913 1.78732 12.0173 1.72986 12.156C1.67239 12.2947 1.64282 12.4433 1.64282 12.5934C1.64282 12.7435 1.67239 12.8922 1.72986 13.0309C1.78732 13.1696 1.87154 13.2956 1.97772 13.4017L4.57544 16H10.0554L16.1789 9.876C16.2807 9.77427 16.3614 9.65348 16.4165 9.52052C16.4716 9.38757 16.5 9.24506 16.5 9.10114C16.5 8.95722 16.4716 8.81472 16.4165 8.68176C16.3614 8.54881 16.2807 8.42859 16.1789 8.32686ZM2.59429 5.14286L3.92629 1.14286L5.26115 5.14286H2.59429ZM9.58287 14.8571H5.04858L2.78572 12.5931L6.39258 8.98686L10.9229 13.5166L9.58287 14.8571ZM11.7314 12.7086L7.20115 8.17886L10.808 4.57143L15.3377 9.10114L11.7314 12.7086Z",fill:"currentColor"})}));Vx.displayName="FormatEraseIcon";const jx=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 -960 960 960",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{d:"M120-280v-400h400v400H120Zm80-80h240v-240H200v240Zm-80-400v-80h720v80H120Zm480 160v-80h240v80H600Zm0 160v-80h240v80H600Zm0 160v-80h240v80H600ZM120-120v-80h720v80H120Z",fill:"currentColor"})}));jx.displayName="FormatImageLeft";const Ux=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{d:"M5 6C5 5.44772 4.55228 5 4 5C3.44772 5 3 5.44772 3 6V18C3 18.5523 3.44772 19 4 19C4.55228 19 5 18.5523 5 18V13H11V18C11 18.5523 11.4477 19 12 19C12.5523 19 13 18.5523 13 18V6C13 5.44772 12.5523 5 12 5C11.4477 5 11 5.44772 11 6V11H5V6Z",fill:"currentColor"}),S.jsx("path",{d:"M16 10C16 9.44772 16.4477 9 17 9H21C21.5523 9 22 9.44772 22 10C22 10.5523 21.5523 11 21 11H18V12H18.3C20.2754 12 22 13.4739 22 15.5C22 17.5261 20.2754 19 18.3 19C17.6457 19 17.0925 18.8643 16.5528 18.5944C16.0588 18.3474 15.8586 17.7468 16.1055 17.2528C16.3525 16.7588 16.9532 16.5586 17.4472 16.8056C17.7074 16.9357 17.9542 17 18.3 17C19.3246 17 20 16.2739 20 15.5C20 14.7261 19.3246 14 18.3 14H17C16.4477 14 16 13.5523 16 13L16 12.9928V10Z",fill:"currentColor"})]}));Ux.displayName="HeadingFiveIcon";const yy=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{d:"M4 5C4.55228 5 5 5.44772 5 6V11H11V6C11 5.44772 11.4477 5 12 5C12.5523 5 13 5.44772 13 6V18C13 18.5523 12.5523 19 12 19C11.4477 19 11 18.5523 11 18V13H5V18C5 18.5523 4.55228 19 4 19C3.44772 19 3 18.5523 3 18V6C3 5.44772 3.44772 5 4 5Z",fill:"currentColor"}),S.jsx("path",{d:"M17 9C17.5523 9 18 9.44772 18 10V13H20V10C20 9.44772 20.4477 9 21 9C21.5523 9 22 9.44772 22 10V18C22 18.5523 21.5523 19 21 19C20.4477 19 20 18.5523 20 18V15H17C16.4477 15 16 14.5523 16 14V10C16 9.44772 16.4477 9 17 9Z",fill:"currentColor"})]}));yy.displayName="HeadingFourIcon";const Px=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{d:"M6 3C6.55228 3 7 3.44772 7 4V11H17V4C17 3.44772 17.4477 3 18 3C18.5523 3 19 3.44772 19 4V20C19 20.5523 18.5523 21 18 21C17.4477 21 17 20.5523 17 20V13H7V20C7 20.5523 6.55228 21 6 21C5.44772 21 5 20.5523 5 20V4C5 3.44772 5.44772 3 6 3Z",fill:"currentColor"})}));Px.displayName="HeadingIcon";const Fx=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{d:"M5 6C5 5.44772 4.55228 5 4 5C3.44772 5 3 5.44772 3 6V18C3 18.5523 3.44772 19 4 19C4.55228 19 5 18.5523 5 18V13H11V18C11 18.5523 11.4477 19 12 19C12.5523 19 13 18.5523 13 18V6C13 5.44772 12.5523 5 12 5C11.4477 5 11 5.44772 11 6V11H5V6Z",fill:"currentColor"}),S.jsx("path",{d:"M21.0001 10C21.0001 9.63121 20.7971 9.29235 20.472 9.11833C20.1468 8.94431 19.7523 8.96338 19.4454 9.16795L16.4454 11.168C15.9859 11.4743 15.8617 12.0952 16.1681 12.5547C16.4744 13.0142 17.0953 13.1384 17.5548 12.8321L19.0001 11.8685V18C19.0001 18.5523 19.4478 19 20.0001 19C20.5524 19 21.0001 18.5523 21.0001 18V10Z",fill:"currentColor"})]}));Fx.displayName="HeadingOneIcon";const $x=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{d:"M5 6C5 5.44772 4.55228 5 4 5C3.44772 5 3 5.44772 3 6V18C3 18.5523 3.44772 19 4 19C4.55228 19 5 18.5523 5 18V13H11V18C11 18.5523 11.4477 19 12 19C12.5523 19 13 18.5523 13 18V6C13 5.44772 12.5523 5 12 5C11.4477 5 11 5.44772 11 6V11H5V6Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.7071 9.29289C21.0976 9.68342 21.0976 10.3166 20.7071 10.7071C19.8392 11.575 19.2179 12.2949 18.7889 13.0073C18.8587 13.0025 18.929 13 19 13C20.6569 13 22 14.3431 22 16C22 17.6569 20.6569 19 19 19C17.3431 19 16 17.6569 16 16C16 14.6007 16.2837 13.4368 16.8676 12.3419C17.4384 11.2717 18.2728 10.3129 19.2929 9.29289C19.6834 8.90237 20.3166 8.90237 20.7071 9.29289ZM19 17C18.4477 17 18 16.5523 18 16C18 15.4477 18.4477 15 19 15C19.5523 15 20 15.4477 20 16C20 16.5523 19.5523 17 19 17Z",fill:"currentColor"})]}));$x.displayName="HeadingSixIcon";const vy=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{d:"M4 5C4.55228 5 5 5.44772 5 6V11H11V6C11 5.44772 11.4477 5 12 5C12.5523 5 13 5.44772 13 6V18C13 18.5523 12.5523 19 12 19C11.4477 19 11 18.5523 11 18V13H5V18C5 18.5523 4.55228 19 4 19C3.44772 19 3 18.5523 3 18V6C3 5.44772 3.44772 5 4 5Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.4608 11.2169C19.1135 11.0531 18.5876 11.0204 18.0069 11.3619C17.5309 11.642 16.918 11.4831 16.638 11.007C16.358 10.531 16.5169 9.91809 16.9929 9.63807C18.1123 8.97962 19.3364 8.94691 20.314 9.40808C21.2839 9.86558 21.9999 10.818 21.9999 12C21.9999 12.7957 21.6838 13.5587 21.1212 14.1213C20.5586 14.6839 19.7956 15 18.9999 15C18.4476 15 17.9999 14.5523 17.9999 14C17.9999 13.4477 18.4476 13 18.9999 13C19.2651 13 19.5195 12.8947 19.707 12.7071C19.8946 12.5196 19.9999 12.2652 19.9999 12C19.9999 11.6821 19.8159 11.3844 19.4608 11.2169Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.0001 14C18.0001 13.4477 18.4478 13 19.0001 13C19.7957 13 20.5588 13.3161 21.1214 13.8787C21.684 14.4413 22.0001 15.2043 22.0001 16C22.0001 17.2853 21.2767 18.3971 20.1604 18.8994C19.0257 19.41 17.642 19.2315 16.4001 18.3C15.9582 17.9686 15.8687 17.3418 16.2001 16.9C16.5314 16.4582 17.1582 16.3686 17.6001 16.7C18.3581 17.2685 18.9744 17.24 19.3397 17.0756C19.7234 16.9029 20.0001 16.5147 20.0001 16C20.0001 15.7348 19.8947 15.4804 19.7072 15.2929C19.5196 15.1054 19.2653 15 19.0001 15C18.4478 15 18.0001 14.5523 18.0001 14Z",fill:"currentColor"})]}));vy.displayName="HeadingThreeIcon";const by=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{d:"M5 6C5 5.44772 4.55228 5 4 5C3.44772 5 3 5.44772 3 6V18C3 18.5523 3.44772 19 4 19C4.55228 19 5 18.5523 5 18V13H11V18C11 18.5523 11.4477 19 12 19C12.5523 19 13 18.5523 13 18V6C13 5.44772 12.5523 5 12 5C11.4477 5 11 5.44772 11 6V11H5V6Z",fill:"currentColor"}),S.jsx("path",{d:"M22.0001 12C22.0001 10.7611 21.1663 9.79297 20.0663 9.42632C18.9547 9.05578 17.6171 9.28724 16.4001 10.2C15.9582 10.5314 15.8687 11.1582 16.2001 11.6C16.5314 12.0418 17.1582 12.1314 17.6001 11.8C18.383 11.2128 19.0455 11.1942 19.4338 11.3237C19.8339 11.457 20.0001 11.7389 20.0001 12C20.0001 12.4839 19.8554 12.7379 19.6537 12.9481C19.4275 13.1837 19.1378 13.363 18.7055 13.6307C18.6313 13.6767 18.553 13.7252 18.4701 13.777C17.9572 14.0975 17.3128 14.5261 16.8163 15.2087C16.3007 15.9177 16.0001 16.8183 16.0001 18C16.0001 18.5523 16.4478 19 17.0001 19H21.0001C21.5523 19 22.0001 18.5523 22.0001 18C22.0001 17.4477 21.5523 17 21.0001 17H18.131C18.21 16.742 18.3176 16.5448 18.4338 16.385C18.6873 16.0364 19.0429 15.7775 19.5301 15.473C19.5898 15.4357 19.6536 15.3966 19.7205 15.3556C20.139 15.0992 20.6783 14.7687 21.0964 14.3332C21.6447 13.7621 22.0001 13.0161 22.0001 12Z",fill:"currentColor"})]}));by.displayName="HeadingTwoIcon";const uI=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.7072 4.70711C15.0977 4.31658 15.0977 3.68342 14.7072 3.29289C14.3167 2.90237 13.6835 2.90237 13.293 3.29289L8.69294 7.89286L8.68594 7.9C8.13626 8.46079 7.82837 9.21474 7.82837 10C7.82837 10.2306 7.85491 10.4584 7.90631 10.6795L2.29289 16.2929C2.10536 16.4804 2 16.7348 2 17V20C2 20.5523 2.44772 21 3 21H12C12.2652 21 12.5196 20.8946 12.7071 20.7071L15.3205 18.0937C15.5416 18.1452 15.7695 18.1717 16.0001 18.1717C16.7853 18.1717 17.5393 17.8639 18.1001 17.3142L22.7072 12.7071C23.0977 12.3166 23.0977 11.6834 22.7072 11.2929C22.3167 10.9024 21.6835 10.9024 21.293 11.2929L16.6971 15.8887C16.5105 16.0702 16.2605 16.1717 16.0001 16.1717C15.7397 16.1717 15.4897 16.0702 15.303 15.8887L10.1113 10.697C9.92992 10.5104 9.82837 10.2604 9.82837 10C9.82837 9.73963 9.92992 9.48958 10.1113 9.30297L14.7072 4.70711ZM13.5858 17L9.00004 12.4142L4 17.4142V19H11.5858L13.5858 17Z",fill:"currentColor"})}));uI.displayName="HighlighterIcon";const fI=M.memo(({className:t,...e})=>S.jsx("svg",{width:"17",height:"16",className:t,viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{d:"M13.8333 1.33317C13.8333 0.964984 13.5348 0.666504 13.1666 0.666504C12.7984 0.666504 12.4999 0.964984 12.4999 1.33317V2.6665H11.1666C10.7984 2.6665 10.4999 2.96498 10.4999 3.33317C10.4999 3.70136 10.7984 3.99984 11.1666 3.99984H12.4999V5.33317C12.4999 5.70136 12.7984 5.99984 13.1666 5.99984C13.5348 5.99984 13.8333 5.70136 13.8333 5.33317V3.99984H15.1666C15.5348 3.99984 15.8333 3.70136 15.8333 3.33317C15.8333 2.96498 15.5348 2.6665 15.1666 2.6665H13.8333V1.33317ZM3.83325 2.6665C3.65644 2.6665 3.48687 2.73674 3.36185 2.86176C3.23683 2.98679 3.16659 3.15636 3.16659 3.33317V12.6665C3.16659 12.8433 3.23683 13.0129 3.36185 13.1379C3.48687 13.2629 3.65644 13.3332 3.83325 13.3332H4.22378L10.0859 7.47104C10.461 7.0961 10.9696 6.88544 11.4999 6.88544C12.0303 6.88544 12.5389 7.0961 12.9139 7.47104L13.8333 8.39037V7.99984C13.8333 7.63164 14.1317 7.33317 14.4999 7.33317C14.8681 7.33317 15.1666 7.63164 15.1666 7.99984V9.9985V10.0012V12.6665C15.1666 13.197 14.9559 13.7056 14.5808 14.0807C14.2057 14.4558 13.6971 14.6665 13.1666 14.6665H4.50138H4.49846H3.83325C3.30282 14.6665 2.79411 14.4558 2.41904 14.0807C2.04397 13.7056 1.83325 13.197 1.83325 12.6665V3.33317C1.83325 2.80274 2.04397 2.29403 2.41904 1.91896C2.79411 1.54388 3.30282 1.33317 3.83325 1.33317H8.49992C8.86812 1.33317 9.16659 1.63165 9.16659 1.99984C9.16659 2.36802 8.86812 2.6665 8.49992 2.6665H3.83325ZM6.1094 13.3332H13.1666C13.3434 13.3332 13.513 13.2629 13.638 13.1379C13.763 13.0129 13.8333 12.8433 13.8333 12.6665V10.276L11.9713 8.41397C11.8463 8.28904 11.6767 8.21877 11.4999 8.21877C11.3232 8.21877 11.1537 8.28897 11.0287 8.4139L6.1094 13.3332ZM5.08571 4.58562C5.46078 4.21055 5.96949 3.99984 6.49992 3.99984C7.03035 3.99984 7.53905 4.21055 7.91412 4.58562C8.28919 4.9607 8.49992 5.4694 8.49992 5.99984C8.49992 6.53027 8.28919 7.03897 7.91412 7.41404C7.53905 7.7891 7.03035 7.99984 6.49992 7.99984C5.96949 7.99984 5.46078 7.7891 5.08571 7.41404C4.71063 7.03897 4.49992 6.53027 4.49992 5.99984C4.49992 5.4694 4.71063 4.9607 5.08571 4.58562ZM6.49992 5.33317C6.32311 5.33317 6.15354 5.40341 6.02851 5.52843C5.90349 5.65346 5.83325 5.82302 5.83325 5.99984C5.83325 6.17665 5.90349 6.34622 6.02851 6.47124C6.15354 6.59626 6.32311 6.6665 6.49992 6.6665C6.67673 6.6665 6.8463 6.59626 6.97133 6.47124C7.09635 6.34622 7.16659 6.17665 7.16659 5.99984C7.16659 5.82302 7.09635 5.65346 6.97133 5.52843C6.8463 5.40341 6.67673 5.33317 6.49992 5.33317Z",fill:"currentColor"})}));fI.displayName="ImageIcon";const ep=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{d:"M15.0222 3H19C19.5523 3 20 3.44772 20 4C20 4.55228 19.5523 5 19 5H15.693L10.443 19H14C14.5523 19 15 19.4477 15 20C15 20.5523 14.5523 21 14 21H9.02418C9.00802 21.0004 8.99181 21.0004 8.97557 21H5C4.44772 21 4 20.5523 4 20C4 19.4477 4.44772 19 5 19H8.30704L13.557 5H10C9.44772 5 9 4.55228 9 4C9 3.44772 9.44772 3 10 3H14.9782C14.9928 2.99968 15.0075 2.99967 15.0222 3Z",fill:"currentColor"})}));ep.displayName="ItalicIcon";const qx=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{d:"M16.9958 1.06669C15.4226 1.05302 13.907 1.65779 12.7753 2.75074L12.765 2.76086L11.045 4.47086C10.6534 4.86024 10.6515 5.49341 11.0409 5.88507C11.4303 6.27673 12.0634 6.27858 12.4551 5.88919L14.1697 4.18456C14.9236 3.45893 15.9319 3.05752 16.9784 3.06662C18.0272 3.07573 19.0304 3.49641 19.772 4.23804C20.5137 4.97967 20.9344 5.98292 20.9435 7.03171C20.9526 8.07776 20.5515 9.08563 19.8265 9.83941L16.833 12.8329C16.4274 13.2386 15.9393 13.5524 15.4019 13.7529C14.8645 13.9533 14.2903 14.0359 13.7181 13.9949C13.146 13.9539 12.5894 13.7904 12.0861 13.5154C11.5827 13.2404 11.1444 12.8604 10.8008 12.401C10.47 11.9588 9.84333 11.8685 9.40108 12.1993C8.95883 12.5301 8.86849 13.1568 9.1993 13.599C9.71464 14.288 10.3721 14.858 11.1272 15.2705C11.8822 15.683 12.7171 15.9283 13.5753 15.9898C14.4334 16.0513 15.2948 15.9274 16.1009 15.6267C16.907 15.326 17.639 14.8555 18.2473 14.247L21.2472 11.2471L21.2593 11.2347C22.3523 10.1031 22.9571 8.58751 22.9434 7.01433C22.9297 5.44115 22.2987 3.93628 21.1863 2.82383C20.0738 1.71138 18.5689 1.08036 16.9958 1.06669Z",fill:"currentColor"}),S.jsx("path",{d:"M10.4247 8.0102C9.56657 7.94874 8.70522 8.07256 7.89911 8.37326C7.09305 8.67395 6.36096 9.14458 5.75272 9.753L2.75285 12.7529L2.74067 12.7653C1.64772 13.8969 1.04295 15.4125 1.05662 16.9857C1.07029 18.5589 1.70131 20.0637 2.81376 21.1762C3.9262 22.2886 5.43108 22.9196 7.00426 22.9333C8.57744 22.947 10.0931 22.3422 11.2247 21.2493L11.2371 21.2371L12.9471 19.5271C13.3376 19.1366 13.3376 18.5034 12.9471 18.1129C12.5565 17.7223 11.9234 17.7223 11.5328 18.1129L9.82932 19.8164C9.07555 20.5414 8.06768 20.9425 7.02164 20.9334C5.97285 20.9243 4.9696 20.5036 4.22797 19.762C3.48634 19.0203 3.06566 18.0171 3.05655 16.9683C3.04746 15.9222 3.44851 14.9144 4.17355 14.1606L7.16719 11.167C7.5727 10.7613 8.06071 10.4476 8.59811 10.2471C9.13552 10.0467 9.70976 9.96412 10.2819 10.0051C10.854 10.0461 11.4106 10.2096 11.9139 10.4846C12.4173 10.7596 12.8556 11.1397 13.1992 11.599C13.53 12.0412 14.1567 12.1316 14.5989 11.8007C15.0412 11.4699 15.1315 10.8433 14.8007 10.401C14.2854 9.71205 13.6279 9.14198 12.8729 8.72948C12.1178 8.31697 11.2829 8.07166 10.4247 8.0102Z",fill:"currentColor"})]}));qx.displayName="LinkIcon";const Cy=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 6C7 5.44772 7.44772 5 8 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H8C7.44772 7 7 6.55228 7 6Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 12C7 11.4477 7.44772 11 8 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H8C7.44772 13 7 12.5523 7 12Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 18C7 17.4477 7.44772 17 8 17H21C21.5523 17 22 17.4477 22 18C22 18.5523 21.5523 19 21 19H8C7.44772 19 7 18.5523 7 18Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 6C2 5.44772 2.44772 5 3 5H3.01C3.56228 5 4.01 5.44772 4.01 6C4.01 6.55228 3.56228 7 3.01 7H3C2.44772 7 2 6.55228 2 6Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 12C2 11.4477 2.44772 11 3 11H3.01C3.56228 11 4.01 11.4477 4.01 12C4.01 12.5523 3.56228 13 3.01 13H3C2.44772 13 2 12.5523 2 12Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 18C2 17.4477 2.44772 17 3 17H3.01C3.56228 17 4.01 17.4477 4.01 18C4.01 18.5523 3.56228 19 3.01 19H3C2.44772 19 2 18.5523 2 18Z",fill:"currentColor"})]}));Cy.displayName="ListIcon";const Zx=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 6C9 5.44772 9.44772 5 10 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H10C9.44772 7 9 6.55228 9 6Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 12C9 11.4477 9.44772 11 10 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H10C9.44772 13 9 12.5523 9 12Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 18C9 17.4477 9.44772 17 10 17H21C21.5523 17 22 17.4477 22 18C22 18.5523 21.5523 19 21 19H10C9.44772 19 9 18.5523 9 18Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 6C3 5.44772 3.44772 5 4 5H5C5.55228 5 6 5.44772 6 6V10C6 10.5523 5.55228 11 5 11C4.44772 11 4 10.5523 4 10V7C3.44772 7 3 6.55228 3 6Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 10C3 9.44772 3.44772 9 4 9H6C6.55228 9 7 9.44772 7 10C7 10.5523 6.55228 11 6 11H4C3.44772 11 3 10.5523 3 10Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.82219 13.0431C6.54543 13.4047 6.99997 14.1319 6.99997 15C6.99997 15.5763 6.71806 16.0426 6.48747 16.35C6.31395 16.5814 6.1052 16.8044 5.91309 17H5.99997C6.55226 17 6.99997 17.4477 6.99997 18C6.99997 18.5523 6.55226 19 5.99997 19H3.99997C3.44769 19 2.99997 18.5523 2.99997 18C2.99997 17.4237 3.28189 16.9575 3.51247 16.65C3.74323 16.3424 4.03626 16.0494 4.26965 15.8161C4.27745 15.8083 4.2852 15.8006 4.29287 15.7929C4.55594 15.5298 4.75095 15.3321 4.88748 15.15C4.96287 15.0495 4.99021 14.9922 4.99911 14.9714C4.99535 14.9112 4.9803 14.882 4.9739 14.8715C4.96613 14.8588 4.95382 14.845 4.92776 14.8319C4.87723 14.8067 4.71156 14.7623 4.44719 14.8944C3.95321 15.1414 3.35254 14.9412 3.10555 14.4472C2.85856 13.9533 3.05878 13.3526 3.55276 13.1056C4.28839 12.7378 5.12272 12.6934 5.82219 13.0431Z",fill:"currentColor"})]}));Zx.displayName="ListOrderedIcon";const dI=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C12.5523 2 13 2.44772 13 3V6C13 6.55228 12.5523 7 12 7C11.4477 7 11 6.55228 11 6V3C11 2.44772 11.4477 2 12 2Z",fill:"currentColor",opacity:"0.2"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.9497 4.22183C17.3402 4.61236 17.3402 5.24552 16.9497 5.63604L14.8284 7.75736C14.4379 8.14789 13.8047 8.14789 13.4142 7.75736C13.0237 7.36684 13.0237 6.73367 13.4142 6.34315L15.5355 4.22183C15.926 3.8313 16.5592 3.8313 16.9497 4.22183Z",fill:"currentColor",opacity:"0.3"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22 12C22 12.5523 21.5523 13 21 13H18C17.4477 13 17 12.5523 17 12C17 11.4477 17.4477 11 18 11H21C21.5523 11 22 11.4477 22 12Z",fill:"currentColor",opacity:"0.4"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.7782 16.9497C20.1687 16.5592 20.1687 15.926 19.7782 15.5355L17.6569 13.4142C17.2663 13.0237 16.6332 13.0237 16.2426 13.4142C15.8521 13.8047 15.8521 14.4379 16.2426 14.8284L18.364 16.9497C18.7545 17.3402 19.3876 17.3402 19.7782 16.9497Z",fill:"currentColor",opacity:"0.5"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 17C12.5523 17 13 17.4477 13 18V21C13 21.5523 12.5523 22 12 22C11.4477 22 11 21.5523 11 21V18C11 17.4477 11.4477 17 12 17Z",fill:"currentColor",opacity:"0.6"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.05025 19.7782C7.44078 20.1687 7.44078 20.8019 7.05025 21.1924C6.65973 21.5829 6.02656 21.5829 5.63604 21.1924L3.51472 19.0711C3.12419 18.6805 3.12419 18.0474 3.51472 17.6569C3.90524 17.2663 4.53841 17.2663 4.92893 17.6569L7.05025 19.7782Z",fill:"currentColor",opacity:"0.7"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 12C7 12.5523 6.55228 13 6 13H3C2.44772 13 2 12.5523 2 12C2 11.4477 2.44772 11 3 11H6C6.55228 11 7 11.4477 7 12Z",fill:"currentColor",opacity:"0.8"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.22183 7.05025C4.61236 7.44078 5.24552 7.44078 5.63604 7.05025L7.75736 4.92893C8.14789 4.53841 8.14789 3.90524 7.75736 3.51472C7.36684 3.12419 6.73367 3.12419 6.34315 3.51472L4.22183 5.63604C3.8313 6.02656 3.8313 6.65973 4.22183 7.05025Z",fill:"currentColor",opacity:"0.9"})]}));dI.displayName="LoaderIcon";const Kx=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{d:"M7 10L12 15L17 10H7Z",fill:"currentColor"})}));Kx.displayName="MenuDownIcon";const Gx=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{d:"M7 15L12 10L17 15H7Z",fill:"currentColor"})}));Gx.displayName="MenuUpIcon";const Yx=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"16",height:"16",className:t,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.66669 2.66634C2.2985 2.66634 2.00002 2.96482 2.00002 3.33301V9.99967C2.00002 10.3679 2.2985 10.6663 2.66669 10.6663H13.3334C13.7015 10.6663 14 10.3679 14 9.99967V3.33301C14 2.96482 13.7015 2.66634 13.3334 2.66634H2.66669ZM0.666687 3.33301C0.666687 2.22844 1.56212 1.33301 2.66669 1.33301H13.3334C14.4379 1.33301 15.3334 2.22844 15.3334 3.33301V9.99967C15.3334 11.1042 14.4379 11.9997 13.3334 11.9997H2.66669C1.56212 11.9997 0.666687 11.1042 0.666687 9.99967V3.33301Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.66669 13.9997C4.66669 13.6315 4.96516 13.333 5.33335 13.333H10.6667C11.0349 13.333 11.3334 13.6315 11.3334 13.9997C11.3334 14.3679 11.0349 14.6663 10.6667 14.6663H5.33335C4.96516 14.6663 4.66669 14.3679 4.66669 13.9997Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99998 10.667C8.36817 10.667 8.66665 10.9655 8.66665 11.3337V14.0003C8.66665 14.3685 8.36817 14.667 7.99998 14.667C7.63179 14.667 7.33331 14.3685 7.33331 14.0003V11.3337C7.33331 10.9655 7.63179 10.667 7.99998 10.667Z",fill:"currentColor"})]}));Yx.displayName="MonitorIcon";const hI=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 11.5955 21.7564 11.2309 21.3827 11.0761C21.009 10.9213 20.5789 11.0069 20.2929 11.2929C19.287 12.2988 17.9226 12.864 16.5 12.864C15.0774 12.864 13.713 12.2988 12.7071 11.2929C11.7012 10.287 11.136 8.92261 11.136 7.5C11.136 6.07739 11.7012 4.71304 12.7071 3.70711C12.9931 3.42111 13.0787 2.99099 12.9239 2.61732C12.7691 2.24364 12.4045 2 12 2ZM7.55544 5.34824C8.27036 4.87055 9.05353 4.51389 9.87357 4.28778C9.39271 5.27979 9.13604 6.37666 9.13604 7.5C9.13604 9.45304 9.91189 11.3261 11.2929 12.7071C12.6739 14.0881 14.547 14.864 16.5 14.864C17.6233 14.864 18.7202 14.6073 19.7122 14.1264C19.4861 14.9465 19.1295 15.7296 18.6518 16.4446C17.7727 17.7602 16.5233 18.7855 15.0615 19.391C13.5997 19.9965 11.9911 20.155 10.4393 19.8463C8.88743 19.5376 7.46197 18.7757 6.34315 17.6569C5.22433 16.538 4.4624 15.1126 4.15372 13.5607C3.84504 12.0089 4.00347 10.4003 4.60897 8.93853C5.21447 7.47672 6.23985 6.22729 7.55544 5.34824Z",fill:"currentColor"}),S.jsx("path",{d:"M19 2C19.5523 2 20 2.44772 20 3V4H21C21.5523 4 22 4.44772 22 5C22 5.55228 21.5523 6 21 6H20V7C20 7.55228 19.5523 8 19 8C18.4477 8 18 7.55228 18 7V6H17C16.4477 6 16 5.55228 16 5C16 4.44772 16.4477 4 17 4H18V3C18 2.44772 18.4477 2 19 2Z",fill:"currentColor"})]}));hI.displayName="MoonStarIcon";const Wx=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{d:"M13 14L11 14L11 17L8 17L8 19L11 19L11 22L13 22L13 19L16 19L16 17L13 17L13 14Z",fill:"currentColor"}),S.jsx("path",{d:"M2.58579 10.4142C2.21071 10.0391 2 9.53043 2 9L2 3L4 3L4 9L20 9L20 3L22 3L22 9C22 9.53043 21.7893 10.0391 21.4142 10.4142C21.0391 10.7893 20.5304 11 20 11L4 11C3.46957 11 2.96086 10.7893 2.58579 10.4142Z",fill:"currentColor"})]}));Wx.displayName="PaginatedPlusAfterIcon";const Xx=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{d:"M11 10H13V7H16V5H13V2H11V5H8V7H11V10Z",fill:"currentColor"}),S.jsx("path",{d:"M21.4142 13.5858C21.7893 13.9609 22 14.4696 22 15V21H20V15H4V21H2V15C2 14.4696 2.21071 13.9609 2.58579 13.5858C2.96086 13.2107 3.46957 13 4 13H20C20.5304 13 21.0391 13.2107 21.4142 13.5858Z",fill:"currentColor"})]}));Xx.displayName="PaginatedPlusBeforeIcon";const Jx=M.memo(({className:t,...e})=>S.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,...e,children:S.jsx("path",{d:"M12.6667 2C13.0203 2 13.3594 2.14048 13.6095 2.39052C13.8595 2.64057 14 2.97971 14 3.33333V12.6667C14 13.4067 13.4 14 12.6667 14H3.33333C2.97971 14 2.64057 13.8595 2.39052 13.6095C2.14048 13.3594 2 13.0203 2 12.6667V3.33333C2 2.97971 2.14048 2.64057 2.39052 2.39052C2.64057 2.14048 2.97971 2 3.33333 2H12.6667ZM11.1333 6.23333C11.28 6.09333 11.28 5.86 11.1333 5.72L10.28 4.86667C10.14 4.72 9.90667 4.72 9.76667 4.86667L9.1 5.53333L10.4667 6.9L11.1333 6.23333ZM4.66667 9.96V11.3333H6.04L10.08 7.29333L8.70667 5.92L4.66667 9.96Z",fill:"currentColor"})}));Jx.displayName="PencilBoxIcon";const Qx=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.7071 2.29289C15.3166 1.90237 14.6834 1.90237 14.2929 2.29289C13.9024 2.68342 13.9024 3.31658 14.2929 3.70711L17.5858 7H9.5C7.77609 7 6.12279 7.68482 4.90381 8.90381C3.68482 10.1228 3 11.7761 3 13.5C3 14.3536 3.16813 15.1988 3.49478 15.9874C3.82144 16.7761 4.30023 17.4926 4.90381 18.0962C6.12279 19.3152 7.77609 20 9.5 20H13C13.5523 20 14 19.5523 14 19C14 18.4477 13.5523 18 13 18H9.5C8.30653 18 7.16193 17.5259 6.31802 16.682C5.90016 16.2641 5.56869 15.768 5.34254 15.2221C5.1164 14.6761 5 14.0909 5 13.5C5 12.3065 5.47411 11.1619 6.31802 10.318C7.16193 9.47411 8.30653 9 9.5 9H17.5858L14.2929 12.2929C13.9024 12.6834 13.9024 13.3166 14.2929 13.7071C14.6834 14.0976 15.3166 14.0976 15.7071 13.7071L20.7071 8.70711C21.0976 8.31658 21.0976 7.68342 20.7071 7.29289L15.7071 2.29289Z",fill:"currentColor"})}));Qx.displayName="Redo2Icon";const pI=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.8159 21H11.1841C10.9072 21 10.6478 20.8616 10.4969 20.6343C10.346 20.407 10.3244 20.1188 10.4394 19.8708L10.8045 19.0156C11.0696 18.4636 11.0186 17.8184 10.6683 17.3164C10.3181 16.8145 9.72183 16.5364 9.09901 16.5734C8.476 16.6104 7.91775 16.9571 7.63604 17.4938L7.36396 18.0062C7.24896 18.2542 6.98962 18.4221 6.70219 18.4518C6.41477 18.4815 6.12535 18.3695 5.94721 18.1514L4.84869 16.8486C4.67054 16.6305 4.62917 16.3367 4.73916 16.0797C4.84915 15.8227 5.09135 15.6422 5.36827 15.6062L6.24173 15.4938C6.86455 15.4071 7.40265 14.9929 7.68436 14.4062C7.96608 13.8196 7.94604 13.1304 7.63604 12.5562C7.32604 11.9821 6.76392 11.6105 6.14099 11.5734C5.518 11.5364 4.91871 11.8428 4.63604 12.3438L4.30396 12.9062C4.18896 13.1542 3.92962 13.3221 3.64219 13.3518C3.35477 13.3815 3.06535 13.2695 2.88721 13.0514L1.94869 11.8486C1.77054 11.6305 1.72917 11.3367 1.83916 11.0797C1.94915 10.8227 2.19135 10.6422 2.46827 10.6062L3.34173 10.4938C3.96455 10.4071 4.50265 9.99294 4.78436 9.40625C5.06608 8.81956 5.04604 8.13044 4.73604 7.55625C4.42604 6.98206 3.86392 6.61044 3.24099 6.57344C2.618 6.53644 2.01871 6.84279 1.73604 7.34375L1.46396 7.85625C1.34896 8.10425 1.08962 8.27213 0.802186 8.30181C0.514754 8.33148 0.225332 8.21948 0.0471854 8.00135L-0.85134 6.69865C-1.02949 6.48052 -1.07086 6.18669 -1.03916 5.92972C-1.00747 5.67274 -0.826704 5.49213 -0.549206 5.45622L0.324236 5.34375C0.947054 5.257 1.48516 4.84283 1.76687 4.25614C2.04858 3.66945 2.02854 2.98033 1.71854 2.40614C1.40854 1.83195 0.846424 1.46033 0.223493 1.42333C-0.399496 1.38633 -0.998788 1.69268 -1.28146 2.19364L-1.5533 2.70614C-1.6683 2.95414 -1.92764 3.122 -2.21507 3.15168C-2.5025 3.18135 -2.79192 3.06935 -2.97006 2.85122L-3.86858 1.54849C-4.04673 1.33036 -4.0881 1.03653 -4.0564 0.779558C-4.02471 0.522582 -3.84931 0.341969 -3.57182 0.305993L-2.69838 0.193524C-2.07556 0.106778 -1.53746 -0.307387 -1.25574 -0.894082C-0.974032 -1.48078 -0.994072 -2.1699 -1.30407 -2.74408C-1.61407 -3.31827 -2.17619 -3.68989 -2.79912 -3.72689C-3.42211 -3.76389 -4.0214 -3.45754 -4.30407 -2.95658L-4.57595 -2.44408C-4.69095 -2.19608 -4.95029 -2.0282 -5.23772 -1.99852C-5.52515 -1.96885 -5.81457 -2.08085 -5.99272 -2.29898L-6.89124 -3.60171C-7.06939 -3.81984 -7.11076 -4.11366 -7.07906 -4.37064C-7.04737 -4.62762 -6.87197 -4.80823 -6.59448 -4.84421L-5.72104 -4.95668C-5.09822 -5.04343 -4.56012 -5.4576 -4.2784 -6.04429C-3.99669 -6.63098 -4.01673 -7.3201 -4.32673 -7.89429C-4.63673 -8.46848 -5.19885 -8.8401 -5.82178 -8.8771C-6.44477 -8.9141 -7.04406 -8.60775 -7.32673 -8.10679L-7.59861 -7.59429C-7.71361 -7.34629 -7.97295 -7.17841 -8.26038 -7.14873C-8.54781 -7.11906 -8.83723 -7.23106 -9.01538 -7.44919L-9.9139 -8.75192C-10.091 -8.97005 -10.1324 -9.26388 -10.1007 -9.52085C-10.069 -9.77783 -9.89363 -9.95844 -9.61614 -9.99442L-8.7427 -10.1069C-8.11988 -10.1936 -7.58178 -10.6078 -7.30006 -11.1945C-7.01835 -11.7812 -7.03839 -12.4703 -7.34839 -13.0445C-7.65839 -13.6187 -8.22051 -13.9903 -8.84344 -14.0273C-9.46643 -14.0643 -10.0657 -13.758 -10.3484 -13.2571L-10.6203 -12.7446C-10.7353 -12.4966 -10.9946 -12.3287 -11.282 -12.299C-11.5695 -12.2693 -11.8589 -12.3813 -12.037 -12.5995L-12.9356 -13.9022C-13.1137 -14.1203 -13.1551 -14.4142 -13.1234 -14.6711C-13.0917 -14.9281 -12.9163 -15.1087 -12.6388 -15.1447L-11.7654 -15.2572C-11.1425 -15.3439 -10.6044 -15.7581 -10.3227 -16.3448C-10.041 -16.9315 -10.061 -17.6206 -10.371 -18.1948C-10.681 -18.769 -11.2432 -19.1406 -11.8661 -19.1776C-12.4891 -19.2146 -13.0884 -18.9083 -13.371 -18.4073L-13.6429 -17.8948C-13.7579 -17.6468 -14.0173 -17.4789 -14.3047 -17.4492C-14.5921 -17.4195 -14.8815 -17.5315 -15.0597 -17.7497L-15.9582 -19.0524C-16.1363 -19.2705 -16.1777 -19.5644 -16.146 -19.8213C-16.1143 -20.0783 -15.9389 -20.2589 -15.6614 -20.2949L-14.788 -20.4074C-14.1651 -20.4941 -13.627 -20.9083 -13.3453 -21.495C-13.0636 -22.0817 -13.0836 -22.7708 -13.3936 -23.345C-13.7036 -23.9192 -14.2657 -24.2908 -14.8887 -24.3278C-15.5117 -24.3648 -16.111 -24.0585 -16.3936 -23.5575L-16.6655 -23.045C-16.7805 -22.797 -17.0398 -22.6291 -17.3273 -22.5994C-17.6147 -22.5697 -17.9041 -22.6817 -18.0823 -22.8999L-18.9808 -24.2026C-19.1589 -24.4207 -19.2003 -24.7145 -19.1686 -24.9715C-19.1369 -25.2285 -18.9615 -25.4091 -18.684 -25.4451L-17.8106 -25.5576C-17.1877 -25.6443 -16.6496 -26.0585 -16.3679 -26.6452C-16.0862 -27.2319 -16.1062 -27.921 -16.4162 -28.4952C-16.7262 -29.0694 -17.2883 -29.441 -17.9113 -29.478C-18.5343 -29.515 -19.1336 -29.2087 -19.4162 -28.7077L-19.6881 -28.1952C-19.8031 -27.9472 -20.0624 -27.7793 -20.3499 -27.7496C-20.6373 -27.7199 -20.9267 -27.8319 -21.1049 -28.0501L-22.0034 -29.3528C-22.1815 -29.5709 -22.2229 -29.8647 -22.1912 -30.1217C-22.1595 -30.3787 -21.9841 -30.5593 -21.7066 -30.5953L-20.8332 -30.7078Z",fill:"currentColor"}),S.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"currentColor"})]}));pI.displayName="SettingsIcon";const eS=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{d:"M9 7V17H15V15H11V7H9Z",fill:"currentColor"})}));eS.displayName="SizeLIcon";const tS=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{d:"M9 7C7.9 7 7 7.9 7 9V17H9V9H11V16H13V9H15V17H17V9C17 7.9 16.11 7 15 7H9Z",fill:"currentColor"})}));tS.displayName="SizeMIcon";const nS=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{d:"M11 7C9.9 7 9 7.9 9 9V11C9 12.11 9.9 13 11 13H13V15H9V17H13C14.11 17 15 16.11 15 15V13C15 11.9 14.11 11 13 11H11V9H15V7H11Z",fill:"currentColor"})}));nS.displayName="SizeSIcon";const rS=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"16",height:"16",className:t,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.66669 2.00033C4.2985 2.00033 4.00002 2.2988 4.00002 2.66699V13.3337C4.00002 13.7018 4.2985 14.0003 4.66669 14.0003H11.3334C11.7015 14.0003 12 13.7018 12 13.3337V2.66699C12 2.2988 11.7015 2.00033 11.3334 2.00033H4.66669ZM2.66669 2.66699C2.66669 1.56242 3.56212 0.666992 4.66669 0.666992H11.3334C12.4379 0.666992 13.3334 1.56242 13.3334 2.66699V13.3337C13.3334 14.4382 12.4379 15.3337 11.3334 15.3337H4.66669C3.56212 15.3337 2.66669 14.4382 2.66669 13.3337V2.66699Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.33331 11.9997C7.33331 11.6315 7.63179 11.333 7.99998 11.333H8.00665C8.37484 11.333 8.67331 11.6315 8.67331 11.9997C8.67331 12.3679 8.37484 12.6663 8.00665 12.6663H7.99998C7.63179 12.6663 7.33331 12.3679 7.33331 11.9997Z",fill:"currentColor"})]}));rS.displayName="SmartphoneIcon";const wy=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{d:"M9.00039 3H16.0001C16.5524 3 17.0001 3.44772 17.0001 4C17.0001 4.55229 16.5524 5 16.0001 5H9.00011C8.68006 4.99983 8.36412 5.07648 8.07983 5.22349C7.79555 5.37051 7.55069 5.5836 7.36585 5.84487C7.181 6.10614 7.06155 6.40796 7.01754 6.72497C6.97352 7.04198 7.00623 7.36492 7.11292 7.66667C7.29701 8.18737 7.02414 8.75872 6.50344 8.94281C5.98274 9.1269 5.4114 8.85403 5.2273 8.33333C5.01393 7.72984 4.94851 7.08396 5.03654 6.44994C5.12456 5.81592 5.36346 5.21229 5.73316 4.68974C6.10285 4.1672 6.59256 3.74101 7.16113 3.44698C7.72955 3.15303 8.36047 2.99975 9.00039 3Z",fill:"currentColor"}),S.jsx("path",{d:"M18 13H20C20.5523 13 21 12.5523 21 12C21 11.4477 20.5523 11 20 11H4C3.44772 11 3 11.4477 3 12C3 12.5523 3.44772 13 4 13H14C14.7956 13 15.5587 13.3161 16.1213 13.8787C16.6839 14.4413 17 15.2044 17 16C17 16.7956 16.6839 17.5587 16.1213 18.1213C15.5587 18.6839 14.7956 19 14 19H6C5.44772 19 5 19.4477 5 20C5 20.5523 5.44772 21 6 21H14C15.3261 21 16.5979 20.4732 17.5355 19.5355C18.4732 18.5979 19 17.3261 19 16C19 14.9119 18.6453 13.8604 18 13Z",fill:"currentColor"})]}));wy.displayName="StrikeIcon";const xy=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.29289 7.29289C3.68342 6.90237 4.31658 6.90237 4.70711 7.29289L12.7071 15.2929C13.0976 15.6834 13.0976 16.3166 12.7071 16.7071C12.3166 17.0976 11.6834 17.0976 11.2929 16.7071L3.29289 8.70711C2.90237 8.31658 2.90237 7.68342 3.29289 7.29289Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.7071 7.29289C13.0976 7.68342 13.0976 8.31658 12.7071 8.70711L4.70711 16.7071C4.31658 17.0976 3.68342 17.0976 3.29289 16.7071C2.90237 16.3166 2.90237 15.6834 3.29289 15.2929L11.2929 7.29289C11.6834 6.90237 12.3166 6.90237 12.7071 7.29289Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.4079 14.3995C18.0284 14.0487 18.7506 13.9217 19.4536 14.0397C20.1566 14.1578 20.7977 14.5138 21.2696 15.0481L21.2779 15.0574L21.2778 15.0575C21.7439 15.5988 22 16.2903 22 17C22 18.0823 21.3962 18.8401 20.7744 19.3404C20.194 19.8073 19.4858 20.141 18.9828 20.378C18.9638 20.387 18.9451 20.3958 18.9266 20.4045C18.4473 20.6306 18.2804 20.7817 18.1922 20.918C18.1773 20.9412 18.1619 20.9681 18.1467 21H21C21.5523 21 22 21.4477 22 22C22 22.5523 21.5523 23 21 23H17C16.4477 23 16 22.5523 16 22C16 21.1708 16.1176 20.4431 16.5128 19.832C16.9096 19.2184 17.4928 18.8695 18.0734 18.5956C18.6279 18.334 19.138 18.0901 19.5207 17.7821C19.8838 17.49 20 17.2477 20 17C20 16.7718 19.9176 16.5452 19.7663 16.3672C19.5983 16.1792 19.3712 16.0539 19.1224 16.0121C18.8722 15.9701 18.6152 16.015 18.3942 16.1394C18.1794 16.2628 18.0205 16.4549 17.9422 16.675C17.7572 17.1954 17.1854 17.4673 16.665 17.2822C16.1446 17.0972 15.8728 16.5254 16.0578 16.005C16.2993 15.3259 16.7797 14.7584 17.4039 14.4018L17.4079 14.3995L17.4079 14.3995Z",fill:"currentColor"})]}));xy.displayName="SubscriptIcon";const mI=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{d:"M12 1C12.5523 1 13 1.44772 13 2V4C13 4.55228 12.5523 5 12 5C11.4477 5 11 4.55228 11 4V2C11 1.44772 11.4477 1 12 1Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12ZM12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9Z",fill:"currentColor"}),S.jsx("path",{d:"M13 20C13 19.4477 12.5523 19 12 19C11.4477 19 11 19.4477 11 20V22C11 22.5523 11.4477 23 12 23C12.5523 23 13 22.5523 13 22V20Z",fill:"currentColor"}),S.jsx("path",{d:"M4.22282 4.22289C4.61335 3.83236 5.24651 3.83236 5.63704 4.22289L7.04704 5.63289C7.43756 6.02341 7.43756 6.65658 7.04704 7.0471C6.65651 7.43762 6.02335 7.43762 5.63283 7.0471L4.22282 5.6371C3.8323 5.24658 3.8323 4.61341 4.22282 4.22289Z",fill:"currentColor"}),S.jsx("path",{d:"M18.367 16.9529C17.9765 16.5623 17.3433 16.5623 16.9528 16.9529C16.5623 17.3434 16.5623 17.9766 16.9528 18.3671L18.3628 19.7771C18.7533 20.1676 19.3865 20.1676 19.777 19.7771C20.1675 19.3866 20.1675 18.7534 19.777 18.3629L18.367 16.9529Z",fill:"currentColor"}),S.jsx("path",{d:"M1 12C1 11.4477 1.44772 11 2 11H4C4.55228 11 5 11.4477 5 12C5 12.5523 4.55228 13 4 13H2C1.44772 13 1 12.5523 1 12Z",fill:"currentColor"}),S.jsx("path",{d:"M20 11C19.4477 11 19 11.4477 19 12C19 12.5523 19.4477 13 20 13H22C22.5523 13 23 12.5523 23 12C23 11.4477 22.5523 11 22 11H20Z",fill:"currentColor"}),S.jsx("path",{d:"M7.04704 16.9529C7.43756 17.3434 7.43756 17.9766 7.04704 18.3671L5.63704 19.7771C5.24651 20.1676 4.61335 20.1676 4.22282 19.7771C3.8323 19.3866 3.8323 18.7534 4.22283 18.3629L5.63283 16.9529C6.02335 16.5623 6.65651 16.5623 7.04704 16.9529Z",fill:"currentColor"}),S.jsx("path",{d:"M19.777 5.6371C20.1675 5.24657 20.1675 4.61341 19.777 4.22289C19.3865 3.83236 18.7533 3.83236 18.3628 4.22289L16.9528 5.63289C16.5623 6.02341 16.5623 6.65658 16.9528 7.0471C17.3433 7.43762 17.9765 7.43762 18.367 7.0471L19.777 5.6371Z",fill:"currentColor"})]}));mI.displayName="SunIcon";const Sy=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.7071 7.29289C13.0976 7.68342 13.0976 8.31658 12.7071 8.70711L4.70711 16.7071C4.31658 17.0976 3.68342 17.0976 3.29289 16.7071C2.90237 16.3166 2.90237 15.6834 3.29289 15.2929L11.2929 7.29289C11.6834 6.90237 12.3166 6.90237 12.7071 7.29289Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.29289 7.29289C3.68342 6.90237 4.31658 6.90237 4.70711 7.29289L12.7071 15.2929C13.0976 15.6834 13.0976 16.3166 12.7071 16.7071C12.3166 17.0976 11.6834 17.0976 11.2929 16.7071L3.29289 8.70711C2.90237 8.31658 2.90237 7.68342 3.29289 7.29289Z",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.405 1.40657C18.0246 1.05456 18.7463 0.92634 19.4492 1.04344C20.1521 1.16054 20.7933 1.51583 21.2652 2.0497L21.2697 2.05469L21.2696 2.05471C21.7431 2.5975 22 3.28922 22 4.00203C22 5.08579 21.3952 5.84326 20.7727 6.34289C20.1966 6.80531 19.4941 7.13675 18.9941 7.37261C18.9714 7.38332 18.9491 7.39383 18.9273 7.40415C18.4487 7.63034 18.2814 7.78152 18.1927 7.91844C18.1778 7.94155 18.1625 7.96834 18.1473 8.00003H21C21.5523 8.00003 22 8.44774 22 9.00003C22 9.55231 21.5523 10 21 10H17C16.4477 10 16 9.55231 16 9.00003C16 8.17007 16.1183 7.44255 16.5138 6.83161C16.9107 6.21854 17.4934 5.86971 18.0728 5.59591C18.6281 5.33347 19.1376 5.09075 19.5208 4.78316C19.8838 4.49179 20 4.25026 20 4.00203C20 3.77192 19.9178 3.54865 19.7646 3.37182C19.5968 3.18324 19.3696 3.05774 19.1205 3.01625C18.8705 2.97459 18.6137 3.02017 18.3933 3.14533C18.1762 3.26898 18.0191 3.45826 17.9406 3.67557C17.7531 4.19504 17.18 4.46414 16.6605 4.27662C16.141 4.0891 15.8719 3.51596 16.0594 2.99649C16.303 2.3219 16.7817 1.76125 17.4045 1.40689L17.405 1.40657Z",fill:"currentColor"})]}));Sy.displayName="SuperscriptIcon";const iS=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,...e,children:S.jsx("path",{d:"M11 2C11.5304 2 12.0391 2.21071 12.4142 2.58579C12.7893 2.96086 13 3.46957 13 4V20C13 20.5304 12.7893 21.0391 12.4142 21.4142C12.0391 21.7893 11.5304 22 11 22H2V2H11ZM4 10V14H11V10H4ZM4 16V20H11V16H4ZM4 4V8H11V4H4ZM15 11H18V8H20V11H23V13H20V16H18V13H15V11Z",fill:"currentColor"})}));iS.displayName="TableAddColumnAfter";const oS=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,...e,children:S.jsx("path",{d:"M13 2C12.4696 2 11.9609 2.21071 11.5858 2.58579C11.2107 2.96086 11 3.46957 11 4V20C11 20.5304 11.2107 21.0391 11.5858 21.4142C11.9609 21.7893 12.4696 22 13 22H22V2H13ZM20 10V14H13V10H20ZM20 16V20H13V16H20ZM20 4V8H13V4H20ZM9 11H6V8H4V11H1V13H4V16H6V13H9V11Z",fill:"currentColor"})}));oS.displayName="TableAddColumnBefore";const sS=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{d:"M22 10C22 10.5304 21.7893 11.0391 21.4142 11.4142C21.0391 11.7893 20.5304 12 20 12H4C3.46957 12 2.96086 11.7893 2.58579 11.4142C2.21071 11.0391 2 10.5304 2 10V3H4V5H8V3H10V5H14V3H16V5H20V3H22V10ZM4 10H8V7H4V10ZM10 10H14V7H10V10ZM20 10V7H16V10H20ZM11 14H13V17H16V19H13V22H11V19H8V17H11V14Z",fill:"currentColor"})}));sS.displayName="TableAddRowAfter";const lS=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,...e,children:S.jsx("path",{d:"M22 14C22 13.4696 21.7893 12.9609 21.4142 12.5858C21.0391 12.2107 20.5304 12 20 12H4C3.46957 12 2.96086 12.2107 2.58579 12.5858C2.21071 12.9609 2 13.4696 2 14V21H4V19H8V21H10V19H14V21H16V19H20V21H22V14ZM4 14H8V17H4V14ZM10 14H14V17H10V14ZM20 14V17H16V14H20ZM11 10H13V7H16V5H13V2H11V5H8V7H11V10Z",fill:"currentColor"})}));lS.displayName="TableAddRowBefore";const aS=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{d:"M4 2H11C11.5304 2 12.0391 2.21071 12.4142 2.58579C12.7893 2.96086 13 3.46957 13 4V20C13 20.5304 12.7893 21.0391 12.4142 21.4142C12.0391 21.7893 11.5304 22 11 22H4C3.46957 22 2.96086 21.7893 2.58579 21.4142C2.21071 21.0391 2 20.5304 2 20V4C2 3.46957 2.21071 2.96086 2.58579 2.58579C2.96086 2.21071 3.46957 2 4 2ZM4 10V14H11V10H4ZM4 16V20H11V16H4ZM4 4V8H11V4H4ZM17.59 12L15 9.41L16.41 8L19 10.59L21.59 8L23 9.41L20.41 12L23 14.59L21.59 16L19 13.41L16.41 16L15 14.59L17.59 12Z",fill:"currentColor"})}));aS.displayName="TableDeleteColumn";const cS=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,...e,children:S.jsx("path",{d:"M9.41 13L12 15.59L14.59 13L16 14.41L13.41 17L16 19.59L14.59 21L12 18.41L9.41 21L8 19.59L10.59 17L8 14.41L9.41 13ZM22 9C22 9.53043 21.7893 10.0391 21.4142 10.4142C21.0391 10.7893 20.5304 11 20 11H4C3.46957 11 2.96086 10.7893 2.58579 10.4142C2.21071 10.0391 2 9.53043 2 9V6C2 5.46957 2.21071 4.96086 2.58579 4.58579C2.96086 4.21071 3.46957 4 4 4H20C20.5304 4 21.0391 4.21071 21.4142 4.58579C21.7893 4.96086 22 5.46957 22 6V9ZM4 9H8V6H4V9ZM10 9H14V6H10V9ZM16 9H20V6H16V9Z",fill:"currentColor"})}));cS.displayName="TableDeleteRow";const uS=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{d:"M15.46 15.88L16.88 14.46L19 16.59L21.12 14.46L22.54 15.88L20.41 18L22.54 20.12L21.12 21.54L19 19.41L16.88 21.54L15.46 20.12L17.59 18L15.46 15.88ZM4 3H18C18.5304 3 19.0391 3.21071 19.4142 3.58579C19.7893 3.96086 20 4.46957 20 5V12.08C18.45 11.82 16.92 12.18 15.68 13H12V17H13.08C12.97 17.68 12.97 18.35 13.08 19H4C3.46957 19 2.96086 18.7893 2.58579 18.4142C2.21071 18.0391 2 17.5304 2 17V5C2 4.46957 2.21071 3.96086 2.58579 3.58579C2.96086 3.21071 3.46957 3 4 3ZM4 7V11H10V7H4ZM12 7V11H18V7H12ZM4 13V17H10V13H4Z",fill:"currentColor"})}));uS.displayName="TableDeleteTable";const Ty=M.memo(({className:t,...e})=>S.jsx("svg",{width:"17",height:"16",className:t,viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{d:"M13.8333 8.66683H9.16659V13.3335H13.1666C13.5348 13.3335 13.8333 13.035 13.8333 12.6668V8.66683ZM3.16659 12.6668C3.16659 13.035 3.46506 13.3335 3.83325 13.3335H7.83325V8.66683H3.16659V12.6668ZM13.8333 3.3335C13.8333 2.96531 13.5348 2.66683 13.1666 2.66683H9.16659V7.3335H13.8333V3.3335ZM3.16659 7.3335H7.83325V2.66683H3.83325C3.46506 2.66683 3.16659 2.96531 3.16659 3.3335V7.3335ZM15.1666 12.6668C15.1666 13.7714 14.2712 14.6668 13.1666 14.6668H3.83325C2.72868 14.6668 1.83325 13.7714 1.83325 12.6668V3.3335C1.83325 2.22893 2.72868 1.3335 3.83325 1.3335H13.1666C14.2712 1.3335 15.1666 2.22893 15.1666 3.3335V12.6668Z",fill:"currentColor"})}));Ty.displayName="TableIcon";const fS=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,...e,children:S.jsx("path",{d:"M5 10H3V4H11V6H5V10ZM19 18H13V20H21V14H19V18ZM5 18V14H3V20H11V18H5ZM21 4H13V6H19V10H21V4ZM8 13V15L11 12L8 9V11H3V13H8ZM16 11V9L13 12L16 15V13H21V11H16Z",fill:"currentColor"})}));fS.displayName="TableMergeCells";const dS=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,...e,children:S.jsx("path",{d:"M19 14H21V20H3V14H5V18H19V14ZM3 4V10H5V6H19V10H21V4H3ZM11 11V13H8V15L5 12L8 9V11H11ZM16 11V9L19 12L16 15V13H13V11H16Z",fill:"currentColor"})}));dS.displayName="TableSplitCell";const hS=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[S.jsx("rect",{x:"6",y:"7",width:"4",height:"3",fill:"currentColor"}),S.jsx("path",{d:"M19 4C20.1046 4 21 4.89543 21 6V18C21 19.0357 20.2128 19.887 19.2041 19.9893L19 20H5L4.7959 19.9893C3.78722 19.887 3 19.0357 3 18V6C3 4.89543 3.89543 4 5 4H19ZM5 18H11V13H5V18ZM13 18H19V13H13V18ZM5 11H11V6H5V11ZM13 11H19V6H13V11Z",fill:"currentColor"})]}));hS.displayName="TableToggleHeaderCell";const pS=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,...e,children:[S.jsx("rect",{x:"6",y:"7",width:"4",height:"3",fill:"currentColor"}),S.jsx("rect",{x:"6",y:"14",width:"4",height:"3",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19 4C20.1046 4 21 4.89543 21 6V18C21 19.0357 20.2128 19.887 19.2041 19.9893L19 20H5L4.7959 19.9893C3.78722 19.887 3 19.0357 3 18V6C3 4.89543 3.89543 4 5 4H19ZM5 18H11V13H5V18ZM13 13V18H19V13H13ZM13 11H19V6H13V11ZM5 11H11V6H5V11Z",fill:"currentColor"})]}));pS.displayName="TableToggleHeaderColumn";const mS=M.memo(({className:t,...e})=>S.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,...e,children:[S.jsx("rect",{x:"6",y:"7",width:"4",height:"3",fill:"currentColor"}),S.jsx("rect",{x:"14",y:"7",width:"4",height:"3",fill:"currentColor"}),S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19 4C20.1046 4 21 4.89543 21 6V18C21 19.0357 20.2128 19.887 19.2041 19.9893L19 20H5L4.7959 19.9893C3.78722 19.887 3 19.0357 3 18V6C3 4.89543 3.89543 4 5 4H19ZM5 18H11V13H5V18ZM13 13V18H19V13H13ZM13 11H19V6H13V11ZM5 11H11V6H5V11Z",fill:"currentColor"})]}));mS.displayName="TableToggleHeaderRow";const gS=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 5V4C7 3.17477 7.40255 2.43324 7.91789 1.91789C8.43324 1.40255 9.17477 1 10 1H14C14.8252 1 15.5668 1.40255 16.0821 1.91789C16.5975 2.43324 17 3.17477 17 4V5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H20V20C20 20.8252 19.5975 21.5668 19.0821 22.0821C18.5668 22.5975 17.8252 23 17 23H7C6.17477 23 5.43324 22.5975 4.91789 22.0821C4.40255 21.5668 4 20.8252 4 20V7H3C2.44772 7 2 6.55228 2 6C2 5.44772 2.44772 5 3 5H7ZM9 4C9 3.82523 9.09745 3.56676 9.33211 3.33211C9.56676 3.09745 9.82523 3 10 3H14C14.1748 3 14.4332 3.09745 14.6679 3.33211C14.9025 3.56676 15 3.82523 15 4V5H9V4ZM6 7V20C6 20.1748 6.09745 20.4332 6.33211 20.6679C6.56676 20.9025 6.82523 21 7 21H17C17.1748 21 17.4332 20.9025 17.6679 20.6679C17.9025 20.4332 18 20.1748 18 20V7H6Z",fill:"currentColor"})}));gS.displayName="TrashIcon";const ky=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 4C7 3.44772 6.55228 3 6 3C5.44772 3 5 3.44772 5 4V10C5 11.8565 5.7375 13.637 7.05025 14.9497C8.36301 16.2625 10.1435 17 12 17C13.8565 17 15.637 16.2625 16.9497 14.9497C18.2625 13.637 19 11.8565 19 10V4C19 3.44772 18.5523 3 18 3C17.4477 3 17 3.44772 17 4V10C17 11.3261 16.4732 12.5979 15.5355 13.5355C14.5979 14.4732 13.3261 15 12 15C10.6739 15 9.40215 14.4732 8.46447 13.5355C7.52678 12.5979 7 11.3261 7 10V4ZM4 19C3.44772 19 3 19.4477 3 20C3 20.5523 3.44772 21 4 21H20C20.5523 21 21 20.5523 21 20C21 19.4477 20.5523 19 20 19H4Z",fill:"currentColor"})}));ky.displayName="UnderlineIcon";const yS=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.70711 3.70711C10.0976 3.31658 10.0976 2.68342 9.70711 2.29289C9.31658 1.90237 8.68342 1.90237 8.29289 2.29289L3.29289 7.29289C2.90237 7.68342 2.90237 8.31658 3.29289 8.70711L8.29289 13.7071C8.68342 14.0976 9.31658 14.0976 9.70711 13.7071C10.0976 13.3166 10.0976 12.6834 9.70711 12.2929L6.41421 9H14.5C15.0909 9 15.6761 9.1164 16.2221 9.34254C16.768 9.56869 17.2641 9.90016 17.682 10.318C18.0998 10.7359 18.4313 11.232 18.6575 11.7779C18.8836 12.3239 19 12.9091 19 13.5C19 14.0909 18.8836 14.6761 18.6575 15.2221C18.4313 15.768 18.0998 16.2641 17.682 16.682C17.2641 17.0998 16.768 17.4313 16.2221 17.6575C15.6761 17.8836 15.0909 18 14.5 18H11C10.4477 18 10 18.4477 10 19C10 19.5523 10.4477 20 11 20H14.5C15.3536 20 16.1988 19.8319 16.9874 19.5052C17.7761 19.1786 18.4926 18.6998 19.0962 18.0962C19.6998 17.4926 20.1786 16.7761 20.5052 15.9874C20.8319 15.1988 21 14.3536 21 13.5C21 12.6464 20.8319 11.8012 20.5052 11.0126C20.1786 10.2239 19.6998 9.50739 19.0962 8.90381C18.4926 8.30022 17.7761 7.82144 16.9874 7.49478C16.1988 7.16813 15.3536 7 14.5 7H6.41421L9.70711 3.70711Z",fill:"currentColor"})}));yS.displayName="Undo2Icon";const gI=M.memo(({className:t,...e})=>S.jsx("svg",{width:"24",height:"24",className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.7071 5.29289C19.0976 5.68342 19.0976 6.31658 18.7071 6.70711L13.4142 12L18.7071 17.2929C19.0976 17.6834 19.0976 18.3166 18.7071 18.7071C18.3166 19.0976 17.6834 19.0976 17.2929 18.7071L12 13.4142L6.70711 18.7071C6.31658 19.0976 5.68342 19.0976 5.29289 18.7071C4.90237 18.3166 4.90237 17.6834 5.29289 17.2929L10.5858 12L5.29289 6.70711C4.90237 6.31658 4.90237 5.68342 5.29289 5.29289C5.68342 4.90237 6.31658 4.90237 6.70711 5.29289L12 10.5858L17.2929 5.29289C17.6834 4.90237 18.3166 4.90237 18.7071 5.29289Z",fill:"currentColor"})}));gI.displayName="XIcon";const pe=(t,e)=>(t[document.documentElement.lang]||t.en)[e]||e,Cc="f-tiptap-invalid-node-indicator",ew={cs:{title:"Nevalidn obsah",errorMessageHint:"Chyba"},en:{title:"Invalid content",errorMessageHint:"Error"}},yI={type:"Unknown type"},My=({invalidNodeHash:t,message:e,errorMessage:n})=>S.jsxs("div",{className:Cc,children:[S.jsxs("h4",{className:`${Cc}__title`,children:[S.jsx(Ex,{}),pe(ew,"title")]}),e&&S.jsx("p",{className:`${Cc}__message`,children:e}),n&&S.jsxs("p",{className:`${Cc}__message`,children:[S.jsxs("strong",{children:[pe(ew,"errorMessageHint"),":"]})," ",n]}),S.jsx("pre",{className:`${Cc}__pre`,children:S.jsx("code",{children:JSON.stringify(t||yI,null,2)})})]});My.displayName="InvalidNodeIndicator";const vI={cs:{remove:"Odstranit",edit:"Upravit",errorMessage:"Tento obsah nebude veejn zobrazen, protoe pi jeho zobrazen dolo k chyb. Mete ho zkusit upravit nebo odstranit.",invalidMessage:"Tento obsah nebude veejn zobrazen. Mete ho upravit nebo odstranit."},en:{remove:"Remove",edit:"Edit",errorMessage:"This content will not be publicly displayed because an error occurred while rendering it. You can try to edit or remove it.",invalidMessage:"This content will not be publicly displayed. You can edit or remove it."}};let U0=[];const bI=({html:t,serializedAttrs:e})=>{U0=[{html:t,serializedAttrs:e},...U0.slice(0,9)]},CI=t=>{try{const e=sessionStorage.getItem(`f-tiptap-node-height:${t}`);return e?parseInt(e,10):null}catch{return null}},wI=(t,e)=>{try{sessionStorage.setItem(`f-tiptap-node-height:${t}`,e.toString())}catch{}},xI=t=>{const{uniqueId:e,...n}=t.node.attrs,{updateAttributes:r}=t,i=M.useCallback(b=>r(b),[r]),[o,l]=M.useState("initial"),[c,f]=M.useState({}),d=M.useRef(null),h=M.useRef(null),m=M.useCallback(b=>{b.defaultPrevented||j0(n,e)},[n,e]),g=M.useCallback(()=>{j0(n,e)},[n,e]);M.useEffect(()=>{e||i({uniqueId:xo()})},[e,i]),M.useEffect(()=>{if(o==="initial"&&e){const b=JSON.stringify(n),w=U0.find(x=>x.serializedAttrs===b);if(w){l("loaded"),f({html:w.html});return}else l("loading"),window.parent.postMessage({type:"f-tiptap-node:render",uniqueId:e,attrs:n},"*")}},[o,e,n]),M.useEffect(()=>{if(d&&d.current){const b=d.current;return b.addEventListener("f-tiptap-node:edit",g),()=>{b.removeEventListener("f-tiptap-node:edit",g)}}},[d,g]),M.useEffect(()=>{const b=w=>{w.origin===window.origin&&(w.data.type==="f-input-tiptap:render-nodes"?w.data.nodes.forEach(x=>{if(x.unique_id===e)if(x.html){const k=JSON.stringify(n);bI({html:x.html,serializedAttrs:k}),f({html:x.html}),l("loaded")}else f({invalid:!0,errorMessage:x.error_message}),l("loaded")}):w.data&&w.data.type==="f-c-tiptap-overlay:saved"&&w.data.uniqueId===e&&w.data.node&&w.data.node.attrs&&(f({}),l("initial"),i(w.data.node.attrs)))};return window.addEventListener("message",b),()=>{window.removeEventListener("message",b)}},[e,n,o,i]),M.useEffect(()=>{if(c.html&&h.current){const b=JSON.stringify(n),w=h.current.offsetHeight;w>0&&wI(b,w)}},[c.html,n]);const y=M.useMemo(()=>{if(c.html)return{__html:c.html}},[c.html]);return e?S.jsx(qo,{className:"f-tiptap-node",tabIndex:0,"data-drag-handle":"","data-folio-tiptap-node-version":t.node.attrs.version,"data-folio-tiptap-node-type":t.node.attrs.type,"data-folio-tiptap-node-data":JSON.stringify(t.node.attrs.data),"data-folio-tiptap-node-unique-id":t.node.attrs.uniqueId,onDoubleClick:m,ref:d,children:c.html?S.jsx("div",{ref:h,className:"f-tiptap-node__html",dangerouslySetInnerHTML:y}):c.invalid?S.jsx(My,{invalidNodeHash:t.node.toJSON(),message:pe(vI,c.errorMessage?"errorMessage":"invalidMessage"),errorMessage:c.errorMessage}):S.jsx("div",{className:"f-tiptap-node__loader-wrap rounded",style:(()=>{const b=JSON.stringify(n),w=CI(b);return w?{height:`${w}px`}:void 0})(),children:S.jsx("span",{className:"folio-loader"})})}):null},tw=({direction:t,state:e,dispatch:n})=>{if(e.selection.from!==e.selection.to-1)return!1;const r=e.selection.node;if(!r||r.type.name!=="folioTiptapNode")return!1;let i;if(t==="up"){const o=e.doc.resolve(e.selection.from).nodeBefore;if(!o)return!1;i=e.selection.from-o.nodeSize}else{const o=e.doc.resolve(e.selection.to).nodeAfter;if(!o)return!1;i=e.selection.to+o.nodeSize-1}if(n){const o=e.tr;o.deleteRange(e.selection.from,e.selection.to),o.insert(i,r),o.setSelection(ce.near(o.doc.resolve(i))),n(o)}return!0},SI="^https://(?:www\\.)?instagram\\.com/(?:p|reel)/([a-zA-Z0-9\\-_]+)/?",TI="^https://(?:\\w+\\.)?pinterest\\.com/pin/([a-zA-Z0-9\\-_]+)/?",kI="^https://(?:www\\.)?(?:twitter\\.com|x\\.com)/([a-zA-Z0-9\\-_]+)(?:/.*)?/?",MI="^https://(?:www\\.youtube\\.com/watch\\?v=|youtu\\.be/)([a-zA-Z0-9\\-_]+)/?",EI={instagram:SI,pinterest:TI,twitter:kI,youtube:MI},AI=Object.entries(EI).reduce((t,[e,n])=>(t[e]=new RegExp(n),t),{});function RI(t){for(const[e,n]of Object.entries(AI))if(n.test(t))return e;return null}function nw(t){return/<iframe[^>]*src="https:\/\/www\.facebook\.com\/plugins\/[^"]*"[^>]*>/.test(t)}const vS=st.create({name:"folioTiptapNode",group:"block",draggable:!0,selectable:!0,atom:!0,addAttributes(){return{version:{default:1,parseHTML:t=>{let e;try{const n=t.dataset.folioTiptapNodeVersion||"1";e=parseInt(n,10)}catch(n){console.error("Error parsing folioTiptapNode version:",n),e=1}return e}},type:{default:"",parseHTML:t=>t.dataset.folioTiptapNodeType||""},data:{default:{},parseHTML:t=>{const e=t.dataset.folioTiptapNodeData||"{}";try{return JSON.parse(e)}catch(n){return console.error("Error parsing folioTiptapNode data:",n),{}}}},uniqueId:{default:"",parseHTML:()=>xo()}}},parseHTML(){return[{tag:"div.f-tiptap-node",getAttrs:t=>{if(typeof t=="string")return!1;const e=t.dataset.folioTiptapNodeType||"";return this.options.nodes&&this.options.nodes.length>0&&!this.options.nodes.map(r=>r.type).includes(e)?!1:{version:parseInt(t.dataset.folioTiptapNodeVersion||"1",10),type:e,data:(()=>{try{return JSON.parse(t.dataset.folioTiptapNodeData||"{}")}catch(n){return console.error("Error parsing folioTiptapNode data:",n),{}}})(),uniqueId:xo()}}}]},renderHTML({HTMLAttributes:t}){return["div",{class:"f-tiptap-node","data-folio-tiptap-node-version":t.version,"data-folio-tiptap-node-type":t.type,"data-folio-tiptap-node-data":JSON.stringify(t.data)}]},addNodeView(){return Zo(xI)},addProseMirrorPlugins(){const t={transformPastedHTML:e=>{if(!this.options.nodes||this.options.nodes.length===0)return e;const n=this.options.nodes.map(o=>o.type),r=document.createElement("div");return r.innerHTML=e,r.querySelectorAll("div.f-tiptap-node").forEach(o=>{const l=o.getAttribute("data-folio-tiptap-node-type")||"";n.includes(l)||o.remove()}),r.innerHTML}};return this.options.embedNodeClassName&&(t.handlePaste=(e,n,r)=>{const i=n.clipboardData?.getData("text/plain"),o=n.clipboardData?.getData("text/html");if(i){const l=i.trim(),c=RI(l);if(c)return e.dispatch(e.state.tr.replaceSelectionWith(this.type.create({type:this.options.embedNodeClassName,version:1,uniqueId:xo(),data:{folio_embed_data:{active:!0,type:c,url:l}}}))),!0;if(nw(l))return e.dispatch(e.state.tr.replaceSelectionWith(this.type.create({type:this.options.embedNodeClassName,version:1,uniqueId:xo(),data:{folio_embed_data:{active:!0,html:l}}}))),!0}return o&&nw(o)?(e.dispatch(e.state.tr.replaceSelectionWith(this.type.create({type:this.options.embedNodeClassName,version:1,uniqueId:xo(),data:{folio_embed_data:{active:!0,html:o}}}))),!0):!1}),[new Be({props:t})]},addCommands(){return{insertFolioTiptapNode:t=>({tr:e,dispatch:n,editor:r})=>{const i=r.schema.nodes.folioTiptapNode.createChecked({...t.attrs,uniqueId:t.attrs.uniqueId||xo()},null);if(n){r.view.dom.focus();const o=e.selection,l=e.doc.resolve(o.anchor);if(l.depth>2&&l.pos+1===l.end(l.depth-1)){const f=r.schema.nodes.paragraph.create(),d=Q.from([i,f]),h=l.start(l.depth)-1,m=l.end(l.depth)+1;e.replaceWith(h,m,d);const g=h+1;e.setSelection(ce.near(e.doc.resolve(g+1)))}else{e.replaceSelectionWith(i);const f=e.selection.anchor;e.setSelection(ce.near(e.doc.resolve(f)))}e.scrollIntoView(),n(e)}return!0},moveFolioTiptapNodeDown:()=>({state:t,dispatch:e})=>tw({direction:"down",state:t,dispatch:e}),moveFolioTiptapNodeUp:()=>({state:t,dispatch:e})=>tw({direction:"up",state:t,dispatch:e}),editFolioTipapNode:()=>({state:t})=>{const e=t.selection.node;if(!e||e.type.name!==this.name)return!1;const{uniqueId:n,...r}=e.attrs;return j0(r,n),!0},removeFolioTiptapNode:()=>({state:t,dispatch:e})=>{const n=t.selection.node;if(!n||n.type.name!==this.name)return!1;const r=t.tr;return r.deleteRange(t.selection.from,t.selection.to),e(r),!0}}}}),rd={cs:{moveFolioTiptapNodeUp:"Posunout nahoru",moveFolioTiptapNodeDown:"Posunout dol",editFolioTipapNode:"Upravit",removeFolioTiptapNode:"Odstranit"},en:{moveFolioTiptapNodeUp:"Move up",moveFolioTiptapNodeDown:"Move down",editFolioTipapNode:"Edit",removeFolioTiptapNode:"Remove"}},NI={pluginKey:"folioTiptapNodeBubbleMenu",priority:1,offset:({rects:t})=>-t.reference.height/2-t.floating.height/2,shouldShow:({editor:t})=>t.isActive(vS.name),disabledKeys:({state:t})=>{const e=[];return t.doc.resolve(t.selection.from).nodeBefore||e.push("moveFolioTiptapNodeUp"),t.doc.resolve(t.selection.to).nodeAfter||e.push("moveFolioTiptapNodeDown"),e},items:[[{key:"moveFolioTiptapNodeUp",title:pe(rd,"moveFolioTiptapNodeUp"),icon:gy,command:({editor:t})=>{t.chain().focus().moveFolioTiptapNodeUp().run()}},{key:"moveFolioTiptapNodeDown",title:pe(rd,"moveFolioTiptapNodeDown"),icon:my,command:({editor:t})=>{t.chain().focus().moveFolioTiptapNodeDown().run()}},{key:"editFolioTipapNode",title:pe(rd,"editFolioTipapNode"),icon:zx,command:({editor:t})=>{t.chain().focus().editFolioTipapNode().run()}},{key:"removeFolioTiptapNode",title:pe(rd,"removeFolioTiptapNode"),icon:Qh,command:({editor:t})=>{t.chain().focus().removeFolioTiptapNode().run()}}]]},bS=t=>{const e={...t};return e.type==="folioTiptapNode"&&(e.attrs={...e.attrs,uniqueId:xo()}),e.content&&Array.isArray(e.content)&&(e.content=e.content.map(n=>bS(n))),e},P0=t=>{const e={...t};return e.type==="folioTiptapNode"&&(e.attrs={...e.attrs},delete e.attrs.uniqueId),e.content&&Array.isArray(e.content)&&(e.content=e.content.map(n=>P0(n))),e},OI=Fe.create({name:"folioTiptapColumnsExtension"});function DI(t,e=null){return e?t.createChecked({},e):t.createAndFill({})}function LI(t){if(t.cached.columnsNodeTypes)return t.cached.columnsNodeTypes;const e={columns:t.nodes.folioTiptapColumns,column:t.nodes.folioTiptapColumn};return t.cached.columnsNodeTypes=e,e}function _I(t,e,n=null){const r=LI(t),i=[];for(let o=0;o<e;o+=1){const l=DI(r.column,n);l&&i.push(l)}return r.columns.createChecked({},i)}function Ag({state:t,dispatch:e,type:n}){const r=Mt(o=>o.type.name===wp.name)(t.selection),i=Mt(o=>o.type.name===kh.name)(t.selection);if(!r||!i)return!1;if(e){const o=r.node;let l=null;if(o.content.forEach((g,y,b)=>{if(l===null&&g===i.node){l=b;return}}),l===null)return console.warn("Current page not found in cols node"),!1;const c=o.toJSON();let f=l;if(n==="delete"){if(c.content.length<=2){const x=[];c.content.forEach(A=>{A.content&&A.content.length>0&&x.push(...A.content)}),x.length===0&&x.push({type:"paragraph"});const k=t.tr;return k.replaceWith(r.pos,r.pos+r.node.nodeSize,x.map(A=>jn.fromJSON(t.schema,A))),k.setSelection(ce.near(k.doc.resolve(r.pos+1))),e(k),!0}const y=c.content[l].content||[],b=l>0?l-1:l+1,w=c.content[b];y.length>0&&(w.content||(w.content=[]),w.content.push(...y)),c.content.splice(l,1),f=l>0?l-1:0}else f=n==="addBefore"?l:l+1,c.content.splice(f,0,{type:kh.name,content:[{type:"paragraph"}]});const d=jn.fromJSON(t.schema,c);let h=r.pos;d.content.forEach((g,y,b)=>{b<f&&(h+=g.nodeSize)});const m=t.tr;m.replaceWith(r.pos,r.pos+r.node.nodeSize,d).setSelection(ce.near(m.doc.resolve(h))),e(m)}return!0}function rw({state:t,dispatch:e,type:n}){const r=Mt(o=>o.type.name===wp.name)(t.selection),i=Mt(o=>o.type.name===kh.name)(t.selection);if(e&&r&&i){const o=r.node,l=i.node;let c=null;if(o.content.forEach((m,g,y)=>{if(c===null&&m===l){c=y;return}}),c===null)return console.warn("Current col not found in cols node"),!1;let f=0;n==="before"?f=(c-1+o.childCount)%o.childCount:f=(c+1)%o.childCount;let d=r.pos;o.content.forEach((m,g,y)=>{y<f&&(d+=m.nodeSize)});const h=t.tr;return h.setSelection(ce.near(h.doc.resolve(d))),e(h),!0}return!1}function tp(){return typeof window<"u"}function Ko(t){return Ey(t)?(t.nodeName||"").toLowerCase():"#document"}function Fn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ii(t){var e;return(e=(Ey(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Ey(t){return tp()?t instanceof Node||t instanceof Fn(t).Node:!1}function dt(t){return tp()?t instanceof Element||t instanceof Fn(t).Element:!1}function Nt(t){return tp()?t instanceof HTMLElement||t instanceof Fn(t).HTMLElement:!1}function F0(t){return!tp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Fn(t).ShadowRoot}const HI=new Set(["inline","contents"]);function vu(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=xr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!HI.has(i)}const II=new Set(["table","td","th"]);function zI(t){return II.has(Ko(t))}const BI=[":popover-open",":modal"];function np(t){return BI.some(e=>{try{return t.matches(e)}catch{return!1}})}const VI=["transform","translate","scale","rotate","perspective"],jI=["transform","translate","scale","rotate","perspective","filter"],UI=["paint","layout","strict","content"];function Ay(t){const e=rp(),n=dt(t)?xr(t):t;return VI.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||jI.some(r=>(n.willChange||"").includes(r))||UI.some(r=>(n.contain||"").includes(r))}function PI(t){let e=Bi(t);for(;Nt(e)&&!Hi(e);){if(Ay(e))return e;if(np(e))return null;e=Bi(e)}return null}function rp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const FI=new Set(["html","body","#document"]);function Hi(t){return FI.has(Ko(t))}function xr(t){return Fn(t).getComputedStyle(t)}function ip(t){return dt(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Bi(t){if(Ko(t)==="html")return t;const e=t.assignedSlot||t.parentNode||F0(t)&&t.host||ii(t);return F0(e)?e.host:e}function CS(t){const e=Bi(t);return Hi(e)?t.ownerDocument?t.ownerDocument.body:t.body:Nt(e)&&vu(e)?e:CS(e)}function Ho(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=CS(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),l=Fn(i);if(o){const c=$0(l);return e.concat(l,l.visualViewport||[],vu(i)?i:[],c&&n?Ho(c):[])}return e.concat(i,Ho(i,[],n))}function $0(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}const wS=["top","right","bottom","left"],iw=["start","end"],ow=wS.reduce((t,e)=>t.concat(e,e+"-"+iw[0],e+"-"+iw[1]),[]),zr=Math.min,mn=Math.max,gh=Math.round,Pl=Math.floor,Qr=t=>({x:t,y:t}),$I={left:"right",right:"left",bottom:"top",top:"bottom"},qI={start:"end",end:"start"};function q0(t,e,n){return mn(t,zr(e,n))}function Br(t,e){return typeof t=="function"?t(e):t}function ir(t){return t.split("-")[0]}function Lr(t){return t.split("-")[1]}function Ry(t){return t==="x"?"y":"x"}function Ny(t){return t==="y"?"height":"width"}const ZI=new Set(["top","bottom"]);function Or(t){return ZI.has(ir(t))?"y":"x"}function Oy(t){return Ry(Or(t))}function xS(t,e,n){n===void 0&&(n=!1);const r=Lr(t),i=Oy(t),o=Ny(i);let l=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(l=vh(l)),[l,vh(l)]}function KI(t){const e=vh(t);return[yh(t),e,yh(e)]}function yh(t){return t.replace(/start|end/g,e=>qI[e])}const sw=["left","right"],lw=["right","left"],GI=["top","bottom"],YI=["bottom","top"];function WI(t,e,n){switch(t){case"top":case"bottom":return n?e?lw:sw:e?sw:lw;case"left":case"right":return e?GI:YI;default:return[]}}function XI(t,e,n,r){const i=Lr(t);let o=WI(ir(t),n==="start",r);return i&&(o=o.map(l=>l+"-"+i),e&&(o=o.concat(o.map(yh)))),o}function vh(t){return t.replace(/left|right|bottom|top/g,e=>$I[e])}function JI(t){return{top:0,right:0,bottom:0,left:0,...t}}function Dy(t){return typeof t!="number"?JI(t):{top:t,right:t,bottom:t,left:t}}function ia(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var QI=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],bh=QI.join(","),SS=typeof Element>"u",oa=SS?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Ch=!SS&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t?.ownerDocument},wh=function t(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),o=i===""||i==="true",l=o||n&&e&&t(e.parentNode);return l},ez=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},TS=function(e,n,r){if(wh(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(bh));return n&&oa.call(e,bh)&&i.unshift(e),i=i.filter(r),i},kS=function t(e,n,r){for(var i=[],o=Array.from(e);o.length;){var l=o.shift();if(!wh(l,!1))if(l.tagName==="SLOT"){var c=l.assignedElements(),f=c.length?c:l.children,d=t(f,!0,r);r.flatten?i.push.apply(i,d):i.push({scopeParent:l,candidates:d})}else{var h=oa.call(l,bh);h&&r.filter(l)&&(n||!e.includes(l))&&i.push(l);var m=l.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(l),g=!wh(m,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(l));if(m&&g){var y=t(m===!0?l.children:m.children,!0,r);r.flatten?i.push.apply(i,y):i.push({scopeParent:l,candidates:y})}else o.unshift.apply(o,l.children)}}return i},MS=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},ES=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||ez(e))&&!MS(e)?0:e.tabIndex},tz=function(e,n){var r=ES(e);return r<0&&n&&!MS(e)?0:r},nz=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},AS=function(e){return e.tagName==="INPUT"},rz=function(e){return AS(e)&&e.type==="hidden"},iz=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},oz=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},sz=function(e){if(!e.name)return!0;var n=e.form||Ch(e),r=function(c){return n.querySelectorAll('input[type="radio"][name="'+c+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var o=oz(i,e.form);return!o||o===e},lz=function(e){return AS(e)&&e.type==="radio"},az=function(e){return lz(e)&&!sz(e)},cz=function(e){var n,r=e&&Ch(e),i=(n=r)===null||n===void 0?void 0:n.host,o=!1;if(r&&r!==e){var l,c,f;for(o=!!((l=i)!==null&&l!==void 0&&(c=l.ownerDocument)!==null&&c!==void 0&&c.contains(i)||e!=null&&(f=e.ownerDocument)!==null&&f!==void 0&&f.contains(e));!o&&i;){var d,h,m;r=Ch(i),i=(d=r)===null||d===void 0?void 0:d.host,o=!!((h=i)!==null&&h!==void 0&&(m=h.ownerDocument)!==null&&m!==void 0&&m.contains(i))}}return o},aw=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},uz=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var o=oa.call(e,"details>summary:first-of-type"),l=o?e.parentElement:e;if(oa.call(l,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var c=e;e;){var f=e.parentElement,d=Ch(e);if(f&&!f.shadowRoot&&i(f)===!0)return aw(e);e.assignedSlot?e=e.assignedSlot:!f&&d!==e.ownerDocument?e=d.host:e=f}e=c}if(cz(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return aw(e);return!1},fz=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return oa.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},Z0=function(e,n){return!(n.disabled||wh(n)||rz(n)||uz(n,e)||iz(n)||fz(n))},K0=function(e,n){return!(az(n)||ES(n)<0||!Z0(e,n))},dz=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},hz=function t(e){var n=[],r=[];return e.forEach(function(i,o){var l=!!i.scopeParent,c=l?i.scopeParent:i,f=tz(c,l),d=l?t(i.candidates):c;f===0?l?n.push.apply(n,d):n.push(c):r.push({documentOrder:o,tabIndex:f,item:i,isScope:l,content:d})}),r.sort(nz).reduce(function(i,o){return o.isScope?i.push.apply(i,o.content):i.push(o.content),i},[]).concat(n)},op=function(e,n){n=n||{};var r;return n.getShadowRoot?r=kS([e],n.includeContainer,{filter:K0.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:dz}):r=TS(e,n.includeContainer,K0.bind(null,n)),hz(r)},pz=function(e,n){n=n||{};var r;return n.getShadowRoot?r=kS([e],n.includeContainer,{filter:Z0.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=TS(e,n.includeContainer,Z0.bind(null,n)),r},RS=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return oa.call(e,bh)===!1?!1:K0(n,e)};function NS(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function OS(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function DS(){return/apple/i.test(navigator.vendor)}function G0(){const t=/android/i;return t.test(NS())||t.test(OS())}function mz(){return NS().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function LS(){return OS().includes("jsdom/")}const cw="data-floating-ui-focusable",gz="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])",Rg="ArrowLeft",Ng="ArrowRight",yz="ArrowUp",vz="ArrowDown";function Jr(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function on(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&F0(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function Ni(t){return"composedPath"in t?t.composedPath()[0]:t.target}function Og(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function bz(t){return t.matches("html,body")}function cn(t){return t?.ownerDocument||document}function Ly(t){return Nt(t)&&t.matches(gz)}function Y0(t){return t?t.getAttribute("role")==="combobox"&&Ly(t):!1}function Cz(t){if(!t||LS())return!0;try{return t.matches(":focus-visible")}catch{return!0}}function xh(t){return t?t.hasAttribute(cw)?t:t.querySelector("["+cw+"]")||t:null}function As(t,e,n){return n===void 0&&(n=!0),t.filter(i=>{var o;return i.parentId===e&&(!n||((o=i.context)==null?void 0:o.open))}).flatMap(i=>[i,...As(t,i.id,n)])}function wz(t,e){let n,r=-1;function i(o,l){l>r&&(n=o,r=l),As(t,o).forEach(f=>{i(f.id,l+1)})}return i(e,0),t.find(o=>o.id===n)}function uw(t,e){var n;let r=[],i=(n=t.find(o=>o.id===e))==null?void 0:n.parentId;for(;i;){const o=t.find(l=>l.id===i);i=o?.parentId,o&&(r=r.concat(o))}return r}function sn(t){t.preventDefault(),t.stopPropagation()}function xz(t){return"nativeEvent"in t}function _S(t){return t.mozInputSource===0&&t.isTrusted?!0:G0()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function HS(t){return LS()?!1:!G0()&&t.width===0&&t.height===0||G0()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function tu(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}var Sz=typeof document<"u",Tz=function(){},ut=Sz?M.useLayoutEffect:Tz;const kz={...D6};function Bn(t){const e=M.useRef(t);return ut(()=>{e.current=t}),e}const Mz=kz.useInsertionEffect,Ez=Mz||(t=>t());function Ot(t){const e=M.useRef(()=>{});return Ez(()=>{e.current=t}),M.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function id(t,e,n){return Math.floor(t/e)!==n}function Vc(t,e){return e<0||e>=t.current.length}function Dg(t,e){return pn(t,{disabledIndices:e})}function fw(t,e){return pn(t,{decrement:!0,startingIndex:t.current.length,disabledIndices:e})}function pn(t,e){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:i,amount:o=1}=e===void 0?{}:e,l=n;do l+=r?-o:o;while(l>=0&&l<=t.current.length-1&&xd(t,l,i));return l}function Az(t,e){let{event:n,orientation:r,loop:i,rtl:o,cols:l,disabledIndices:c,minIndex:f,maxIndex:d,prevIndex:h,stopEvent:m=!1}=e,g=h;if(n.key===yz){if(m&&sn(n),h===-1)g=d;else if(g=pn(t,{startingIndex:g,amount:l,decrement:!0,disabledIndices:c}),i&&(h-l<f||g<0)){const y=h%l,b=d%l,w=d-(b-y);b===y?g=d:g=b>y?w:w-l}Vc(t,g)&&(g=h)}if(n.key===vz&&(m&&sn(n),h===-1?g=f:(g=pn(t,{startingIndex:h,amount:l,disabledIndices:c}),i&&h+l>d&&(g=pn(t,{startingIndex:h%l-l,amount:l,disabledIndices:c}))),Vc(t,g)&&(g=h)),r==="both"){const y=Pl(h/l);n.key===(o?Rg:Ng)&&(m&&sn(n),h%l!==l-1?(g=pn(t,{startingIndex:h,disabledIndices:c}),i&&id(g,l,y)&&(g=pn(t,{startingIndex:h-h%l-1,disabledIndices:c}))):i&&(g=pn(t,{startingIndex:h-h%l-1,disabledIndices:c})),id(g,l,y)&&(g=h)),n.key===(o?Ng:Rg)&&(m&&sn(n),h%l!==0?(g=pn(t,{startingIndex:h,decrement:!0,disabledIndices:c}),i&&id(g,l,y)&&(g=pn(t,{startingIndex:h+(l-h%l),decrement:!0,disabledIndices:c}))):i&&(g=pn(t,{startingIndex:h+(l-h%l),decrement:!0,disabledIndices:c})),id(g,l,y)&&(g=h));const b=Pl(d/l)===y;Vc(t,g)&&(i&&b?g=n.key===(o?Ng:Rg)?d:pn(t,{startingIndex:h-h%l-1,disabledIndices:c}):g=h)}return g}function Rz(t,e,n){const r=[];let i=0;return t.forEach((o,l)=>{let{width:c,height:f}=o,d=!1;for(n&&(i=0);!d;){const h=[];for(let m=0;m<c;m++)for(let g=0;g<f;g++)h.push(i+m+g*e);i%e+c<=e&&h.every(m=>r[m]==null)?(h.forEach(m=>{r[m]=l}),d=!0):i++}}),[...r]}function Nz(t,e,n,r,i){if(t===-1)return-1;const o=n.indexOf(t),l=e[t];switch(i){case"tl":return o;case"tr":return l?o+l.width-1:o;case"bl":return l?o+(l.height-1)*r:o;case"br":return n.lastIndexOf(t)}}function Oz(t,e){return e.flatMap((n,r)=>t.includes(n)?[r]:[])}function xd(t,e,n){if(typeof n=="function")return n(e);if(n)return n.includes(e);const r=t.current[e];return r==null||r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true"}const bu=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function IS(t,e){const n=op(t,bu()),r=n.length;if(r===0)return;const i=Jr(cn(t)),o=n.indexOf(i),l=o===-1?e===1?0:r-1:o+e;return n[l]}function zS(t){return IS(cn(t).body,1)||t}function BS(t){return IS(cn(t).body,-1)||t}function jc(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!on(n,r)}function Dz(t){op(t,bu()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function dw(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}function hw(t,e,n){let{reference:r,floating:i}=t;const o=Or(e),l=Oy(e),c=Ny(l),f=ir(e),d=o==="y",h=r.x+r.width/2-i.width/2,m=r.y+r.height/2-i.height/2,g=r[c]/2-i[c]/2;let y;switch(f){case"top":y={x:h,y:r.y-i.height};break;case"bottom":y={x:h,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:m};break;case"left":y={x:r.x-i.width,y:m};break;default:y={x:r.x,y:r.y}}switch(Lr(e)){case"start":y[l]-=g*(n&&d?-1:1);break;case"end":y[l]+=g*(n&&d?-1:1);break}return y}const Lz=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:l}=n,c=o.filter(Boolean),f=await(l.isRTL==null?void 0:l.isRTL(e));let d=await l.getElementRects({reference:t,floating:e,strategy:i}),{x:h,y:m}=hw(d,r,f),g=r,y={},b=0;for(let w=0;w<c.length;w++){const{name:x,fn:k}=c[w],{x:A,y:N,data:D,reset:L}=await k({x:h,y:m,initialPlacement:r,placement:g,strategy:i,middlewareData:y,rects:d,platform:l,elements:{reference:t,floating:e}});h=A??h,m=N??m,y={...y,[x]:{...y[x],...D}},L&&b<=50&&(b++,typeof L=="object"&&(L.placement&&(g=L.placement),L.rects&&(d=L.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:i}):L.rects),{x:h,y:m}=hw(d,g,f)),w=-1)}return{x:h,y:m,placement:g,strategy:i,middlewareData:y}};async function sa(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:l,elements:c,strategy:f}=t,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:m="floating",altBoundary:g=!1,padding:y=0}=Br(e,t),b=Dy(y),x=c[g?m==="floating"?"reference":"floating":m],k=ia(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(x)))==null||n?x:x.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(c.floating)),boundary:d,rootBoundary:h,strategy:f})),A=m==="floating"?{x:r,y:i,width:l.floating.width,height:l.floating.height}:l.reference,N=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c.floating)),D=await(o.isElement==null?void 0:o.isElement(N))?await(o.getScale==null?void 0:o.getScale(N))||{x:1,y:1}:{x:1,y:1},L=ia(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:A,offsetParent:N,strategy:f}):A);return{top:(k.top-L.top+b.top)/D.y,bottom:(L.bottom-k.bottom+b.bottom)/D.y,left:(k.left-L.left+b.left)/D.x,right:(L.right-k.right+b.right)/D.x}}const _z=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:o,platform:l,elements:c,middlewareData:f}=e,{element:d,padding:h=0}=Br(t,e)||{};if(d==null)return{};const m=Dy(h),g={x:n,y:r},y=Oy(i),b=Ny(y),w=await l.getDimensions(d),x=y==="y",k=x?"top":"left",A=x?"bottom":"right",N=x?"clientHeight":"clientWidth",D=o.reference[b]+o.reference[y]-g[y]-o.floating[b],L=g[y]-o.reference[y],z=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d));let q=z?z[N]:0;(!q||!await(l.isElement==null?void 0:l.isElement(z)))&&(q=c.floating[N]||o.floating[b]);const j=D/2-L/2,ee=q/2-w[b]/2-1,$=zr(m[k],ee),re=zr(m[A],ee),se=$,ue=q-w[b]-re,G=q/2-w[b]/2+j,P=q0(se,G,ue),H=!f.arrow&&Lr(i)!=null&&G!==P&&o.reference[b]/2-(G<se?$:re)-w[b]/2<0,V=H?G<se?G-se:G-ue:0;return{[y]:g[y]+V,data:{[y]:P,centerOffset:G-P-V,...H&&{alignmentOffset:V}},reset:H}}});function Hz(t,e,n){return(t?[...n.filter(i=>Lr(i)===t),...n.filter(i=>Lr(i)!==t)]:n.filter(i=>ir(i)===i)).filter(i=>t?Lr(i)===t||(e?yh(i)!==i:!1):!0)}const Iz=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,r,i;const{rects:o,middlewareData:l,placement:c,platform:f,elements:d}=e,{crossAxis:h=!1,alignment:m,allowedPlacements:g=ow,autoAlignment:y=!0,...b}=Br(t,e),w=m!==void 0||g===ow?Hz(m||null,y,g):g,x=await sa(e,b),k=((n=l.autoPlacement)==null?void 0:n.index)||0,A=w[k];if(A==null)return{};const N=xS(A,o,await(f.isRTL==null?void 0:f.isRTL(d.floating)));if(c!==A)return{reset:{placement:w[0]}};const D=[x[ir(A)],x[N[0]],x[N[1]]],L=[...((r=l.autoPlacement)==null?void 0:r.overflows)||[],{placement:A,overflows:D}],z=w[k+1];if(z)return{data:{index:k+1,overflows:L},reset:{placement:z}};const q=L.map($=>{const re=Lr($.placement);return[$.placement,re&&h?$.overflows.slice(0,2).reduce((se,ue)=>se+ue,0):$.overflows[0],$.overflows]}).sort(($,re)=>$[1]-re[1]),ee=((i=q.filter($=>$[2].slice(0,Lr($[0])?2:3).every(re=>re<=0))[0])==null?void 0:i[0])||q[0][0];return ee!==c?{data:{index:k+1,overflows:L},reset:{placement:ee}}:{}}}},zz=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:l,initialPlacement:c,platform:f,elements:d}=e,{mainAxis:h=!0,crossAxis:m=!0,fallbackPlacements:g,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:w=!0,...x}=Br(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const k=ir(i),A=Or(c),N=ir(c)===c,D=await(f.isRTL==null?void 0:f.isRTL(d.floating)),L=g||(N||!w?[vh(c)]:KI(c)),z=b!=="none";!g&&z&&L.push(...XI(c,w,b,D));const q=[c,...L],j=await sa(e,x),ee=[];let $=((r=o.flip)==null?void 0:r.overflows)||[];if(h&&ee.push(j[k]),m){const G=xS(i,l,D);ee.push(j[G[0]],j[G[1]])}if($=[...$,{placement:i,overflows:ee}],!ee.every(G=>G<=0)){var re,se;const G=(((re=o.flip)==null?void 0:re.index)||0)+1,P=q[G];if(P&&(!(m==="alignment"?A!==Or(P):!1)||$.every(I=>Or(I.placement)===A?I.overflows[0]>0:!0)))return{data:{index:G,overflows:$},reset:{placement:P}};let H=(se=$.filter(V=>V.overflows[0]<=0).sort((V,I)=>V.overflows[1]-I.overflows[1])[0])==null?void 0:se.placement;if(!H)switch(y){case"bestFit":{var ue;const V=(ue=$.filter(I=>{if(z){const ie=Or(I.placement);return ie===A||ie==="y"}return!0}).map(I=>[I.placement,I.overflows.filter(ie=>ie>0).reduce((ie,R)=>ie+R,0)]).sort((I,ie)=>I[1]-ie[1])[0])==null?void 0:ue[0];V&&(H=V);break}case"initialPlacement":H=c;break}if(i!==H)return{reset:{placement:H}}}return{}}}};function pw(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function mw(t){return wS.some(e=>t[e]>=0)}const Bz=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Br(t,e);switch(r){case"referenceHidden":{const o=await sa(e,{...i,elementContext:"reference"}),l=pw(o,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:mw(l)}}}case"escaped":{const o=await sa(e,{...i,altBoundary:!0}),l=pw(o,n.floating);return{data:{escapedOffsets:l,escaped:mw(l)}}}default:return{}}}}};function VS(t){const e=zr(...t.map(o=>o.left)),n=zr(...t.map(o=>o.top)),r=mn(...t.map(o=>o.right)),i=mn(...t.map(o=>o.bottom));return{x:e,y:n,width:r-e,height:i-n}}function Vz(t){const e=t.slice().sort((i,o)=>i.y-o.y),n=[];let r=null;for(let i=0;i<e.length;i++){const o=e[i];!r||o.y-r.y>r.height/2?n.push([o]):n[n.length-1].push(o),r=o}return n.map(i=>ia(VS(i)))}const jz=function(t){return t===void 0&&(t={}),{name:"inline",options:t,async fn(e){const{placement:n,elements:r,rects:i,platform:o,strategy:l}=e,{padding:c=2,x:f,y:d}=Br(t,e),h=Array.from(await(o.getClientRects==null?void 0:o.getClientRects(r.reference))||[]),m=Vz(h),g=ia(VS(h)),y=Dy(c);function b(){if(m.length===2&&m[0].left>m[1].right&&f!=null&&d!=null)return m.find(x=>f>x.left-y.left&&f<x.right+y.right&&d>x.top-y.top&&d<x.bottom+y.bottom)||g;if(m.length>=2){if(Or(n)==="y"){const $=m[0],re=m[m.length-1],se=ir(n)==="top",ue=$.top,G=re.bottom,P=se?$.left:re.left,H=se?$.right:re.right,V=H-P,I=G-ue;return{top:ue,bottom:G,left:P,right:H,width:V,height:I,x:P,y:ue}}const x=ir(n)==="left",k=mn(...m.map($=>$.right)),A=zr(...m.map($=>$.left)),N=m.filter($=>x?$.left===A:$.right===k),D=N[0].top,L=N[N.length-1].bottom,z=A,q=k,j=q-z,ee=L-D;return{top:D,bottom:L,left:z,right:q,width:j,height:ee,x:z,y:D}}return g}const w=await o.getElementRects({reference:{getBoundingClientRect:b},floating:r.floating,strategy:l});return i.reference.x!==w.reference.x||i.reference.y!==w.reference.y||i.reference.width!==w.reference.width||i.reference.height!==w.reference.height?{reset:{rects:w}}:{}}}},jS=new Set(["left","top"]);async function Uz(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),l=ir(n),c=Lr(n),f=Or(n)==="y",d=jS.has(l)?-1:1,h=o&&f?-1:1,m=Br(e,t);let{mainAxis:g,crossAxis:y,alignmentAxis:b}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return c&&typeof b=="number"&&(y=c==="end"?b*-1:b),f?{x:y*h,y:g*d}:{x:g*d,y:y*h}}const Pz=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:l,middlewareData:c}=e,f=await Uz(e,t);return l===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:i+f.x,y:o+f.y,data:{...f,placement:l}}}}},Fz=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:l=!1,limiter:c={fn:x=>{let{x:k,y:A}=x;return{x:k,y:A}}},...f}=Br(t,e),d={x:n,y:r},h=await sa(e,f),m=Or(ir(i)),g=Ry(m);let y=d[g],b=d[m];if(o){const x=g==="y"?"top":"left",k=g==="y"?"bottom":"right",A=y+h[x],N=y-h[k];y=q0(A,y,N)}if(l){const x=m==="y"?"top":"left",k=m==="y"?"bottom":"right",A=b+h[x],N=b-h[k];b=q0(A,b,N)}const w=c.fn({...e,[g]:y,[m]:b});return{...w,data:{x:w.x-n,y:w.y-r,enabled:{[g]:o,[m]:l}}}}}},$z=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:o,middlewareData:l}=e,{offset:c=0,mainAxis:f=!0,crossAxis:d=!0}=Br(t,e),h={x:n,y:r},m=Or(i),g=Ry(m);let y=h[g],b=h[m];const w=Br(c,e),x=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(f){const N=g==="y"?"height":"width",D=o.reference[g]-o.floating[N]+x.mainAxis,L=o.reference[g]+o.reference[N]-x.mainAxis;y<D?y=D:y>L&&(y=L)}if(d){var k,A;const N=g==="y"?"width":"height",D=jS.has(ir(i)),L=o.reference[m]-o.floating[N]+(D&&((k=l.offset)==null?void 0:k[m])||0)+(D?0:x.crossAxis),z=o.reference[m]+o.reference[N]+(D?0:((A=l.offset)==null?void 0:A[m])||0)-(D?x.crossAxis:0);b<L?b=L:b>z&&(b=z)}return{[g]:y,[m]:b}}}},qz=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:o,platform:l,elements:c}=e,{apply:f=()=>{},...d}=Br(t,e),h=await sa(e,d),m=ir(i),g=Lr(i),y=Or(i)==="y",{width:b,height:w}=o.floating;let x,k;m==="top"||m==="bottom"?(x=m,k=g===(await(l.isRTL==null?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(k=m,x=g==="end"?"top":"bottom");const A=w-h.top-h.bottom,N=b-h.left-h.right,D=zr(w-h[x],A),L=zr(b-h[k],N),z=!e.middlewareData.shift;let q=D,j=L;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(j=N),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(q=A),z&&!g){const $=mn(h.left,0),re=mn(h.right,0),se=mn(h.top,0),ue=mn(h.bottom,0);y?j=b-2*($!==0||re!==0?$+re:mn(h.left,h.right)):q=w-2*(se!==0||ue!==0?se+ue:mn(h.top,h.bottom))}await f({...e,availableWidth:j,availableHeight:q});const ee=await l.getDimensions(c.floating);return b!==ee.width||w!==ee.height?{reset:{rects:!0}}:{}}}};function US(t){const e=xr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Nt(t),o=i?t.offsetWidth:n,l=i?t.offsetHeight:r,c=gh(n)!==o||gh(r)!==l;return c&&(n=o,r=l),{width:n,height:r,$:c}}function _y(t){return dt(t)?t:t.contextElement}function ql(t){const e=_y(t);if(!Nt(e))return Qr(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=US(e);let l=(o?gh(n.width):n.width)/r,c=(o?gh(n.height):n.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!c||!Number.isFinite(c))&&(c=1),{x:l,y:c}}const Zz=Qr(0);function PS(t){const e=Fn(t);return!rp()||!e.visualViewport?Zz:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Kz(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Fn(t)?!1:e}function Is(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=_y(t);let l=Qr(1);e&&(r?dt(r)&&(l=ql(r)):l=ql(t));const c=Kz(o,n,r)?PS(o):Qr(0);let f=(i.left+c.x)/l.x,d=(i.top+c.y)/l.y,h=i.width/l.x,m=i.height/l.y;if(o){const g=Fn(o),y=r&&dt(r)?Fn(r):r;let b=g,w=$0(b);for(;w&&r&&y!==b;){const x=ql(w),k=w.getBoundingClientRect(),A=xr(w),N=k.left+(w.clientLeft+parseFloat(A.paddingLeft))*x.x,D=k.top+(w.clientTop+parseFloat(A.paddingTop))*x.y;f*=x.x,d*=x.y,h*=x.x,m*=x.y,f+=N,d+=D,b=Fn(w),w=$0(b)}}return ia({width:h,height:m,x:f,y:d})}function sp(t,e){const n=ip(t).scrollLeft;return e?e.left+n:Is(ii(t)).left+n}function FS(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-sp(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function Gz(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",l=ii(r),c=e?np(e.floating):!1;if(r===l||c&&o)return n;let f={scrollLeft:0,scrollTop:0},d=Qr(1);const h=Qr(0),m=Nt(r);if((m||!m&&!o)&&((Ko(r)!=="body"||vu(l))&&(f=ip(r)),Nt(r))){const y=Is(r);d=ql(r),h.x=y.x+r.clientLeft,h.y=y.y+r.clientTop}const g=l&&!m&&!o?FS(l,f):Qr(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-f.scrollLeft*d.x+h.x+g.x,y:n.y*d.y-f.scrollTop*d.y+h.y+g.y}}function Yz(t){return Array.from(t.getClientRects())}function Wz(t){const e=ii(t),n=ip(t),r=t.ownerDocument.body,i=mn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=mn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+sp(t);const c=-n.scrollTop;return xr(r).direction==="rtl"&&(l+=mn(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:l,y:c}}const gw=25;function Xz(t,e){const n=Fn(t),r=ii(t),i=n.visualViewport;let o=r.clientWidth,l=r.clientHeight,c=0,f=0;if(i){o=i.width,l=i.height;const h=rp();(!h||h&&e==="fixed")&&(c=i.offsetLeft,f=i.offsetTop)}const d=sp(r);if(d<=0){const h=r.ownerDocument,m=h.body,g=getComputedStyle(m),y=h.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,b=Math.abs(r.clientWidth-m.clientWidth-y);b<=gw&&(o-=b)}else d<=gw&&(o+=d);return{width:o,height:l,x:c,y:f}}const Jz=new Set(["absolute","fixed"]);function Qz(t,e){const n=Is(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=Nt(t)?ql(t):Qr(1),l=t.clientWidth*o.x,c=t.clientHeight*o.y,f=i*o.x,d=r*o.y;return{width:l,height:c,x:f,y:d}}function yw(t,e,n){let r;if(e==="viewport")r=Xz(t,n);else if(e==="document")r=Wz(ii(t));else if(dt(e))r=Qz(e,n);else{const i=PS(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return ia(r)}function $S(t,e){const n=Bi(t);return n===e||!dt(n)||Hi(n)?!1:xr(n).position==="fixed"||$S(n,e)}function eB(t,e){const n=e.get(t);if(n)return n;let r=Ho(t,[],!1).filter(c=>dt(c)&&Ko(c)!=="body"),i=null;const o=xr(t).position==="fixed";let l=o?Bi(t):t;for(;dt(l)&&!Hi(l);){const c=xr(l),f=Ay(l);!f&&c.position==="fixed"&&(i=null),(o?!f&&!i:!f&&c.position==="static"&&!!i&&Jz.has(i.position)||vu(l)&&!f&&$S(t,l))?r=r.filter(h=>h!==l):i=c,l=Bi(l)}return e.set(t,r),r}function tB(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const l=[...n==="clippingAncestors"?np(e)?[]:eB(e,this._c):[].concat(n),r],c=l[0],f=l.reduce((d,h)=>{const m=yw(e,h,i);return d.top=mn(m.top,d.top),d.right=zr(m.right,d.right),d.bottom=zr(m.bottom,d.bottom),d.left=mn(m.left,d.left),d},yw(e,c,i));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function nB(t){const{width:e,height:n}=US(t);return{width:e,height:n}}function rB(t,e,n){const r=Nt(e),i=ii(e),o=n==="fixed",l=Is(t,!0,o,e);let c={scrollLeft:0,scrollTop:0};const f=Qr(0);function d(){f.x=sp(i)}if(r||!r&&!o)if((Ko(e)!=="body"||vu(i))&&(c=ip(e)),r){const y=Is(e,!0,o,e);f.x=y.x+e.clientLeft,f.y=y.y+e.clientTop}else i&&d();o&&!r&&i&&d();const h=i&&!r&&!o?FS(i,c):Qr(0),m=l.left+c.scrollLeft-f.x-h.x,g=l.top+c.scrollTop-f.y-h.y;return{x:m,y:g,width:l.width,height:l.height}}function Lg(t){return xr(t).position==="static"}function vw(t,e){if(!Nt(t)||xr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ii(t)===n&&(n=n.ownerDocument.body),n}function qS(t,e){const n=Fn(t);if(np(t))return n;if(!Nt(t)){let i=Bi(t);for(;i&&!Hi(i);){if(dt(i)&&!Lg(i))return i;i=Bi(i)}return n}let r=vw(t,e);for(;r&&zI(r)&&Lg(r);)r=vw(r,e);return r&&Hi(r)&&Lg(r)&&!Ay(r)?n:r||PI(t)||n}const iB=async function(t){const e=this.getOffsetParent||qS,n=this.getDimensions,r=await n(t.floating);return{reference:rB(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function oB(t){return xr(t).direction==="rtl"}const sB={convertOffsetParentRelativeRectToViewportRelativeRect:Gz,getDocumentElement:ii,getClippingRect:tB,getOffsetParent:qS,getElementRects:iB,getClientRects:Yz,getDimensions:nB,getScale:ql,isElement:dt,isRTL:oB};function ZS(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function lB(t,e){let n=null,r;const i=ii(t);function o(){var c;clearTimeout(r),(c=n)==null||c.disconnect(),n=null}function l(c,f){c===void 0&&(c=!1),f===void 0&&(f=1),o();const d=t.getBoundingClientRect(),{left:h,top:m,width:g,height:y}=d;if(c||e(),!g||!y)return;const b=Pl(m),w=Pl(i.clientWidth-(h+g)),x=Pl(i.clientHeight-(m+y)),k=Pl(h),N={rootMargin:-b+"px "+-w+"px "+-x+"px "+-k+"px",threshold:mn(0,zr(1,f))||1};let D=!0;function L(z){const q=z[0].intersectionRatio;if(q!==f){if(!D)return l();q?l(!1,q):r=setTimeout(()=>{l(!1,1e-7)},1e3)}q===1&&!ZS(d,t.getBoundingClientRect())&&l(),D=!1}try{n=new IntersectionObserver(L,{...N,root:i.ownerDocument})}catch{n=new IntersectionObserver(L,N)}n.observe(t)}return l(!0),o}function lp(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:f=!1}=r,d=_y(t),h=i||o?[...d?Ho(d):[],...Ho(e)]:[];h.forEach(k=>{i&&k.addEventListener("scroll",n,{passive:!0}),o&&k.addEventListener("resize",n)});const m=d&&c?lB(d,n):null;let g=-1,y=null;l&&(y=new ResizeObserver(k=>{let[A]=k;A&&A.target===d&&y&&(y.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var N;(N=y)==null||N.observe(e)})),n()}),d&&!f&&y.observe(d),y.observe(e));let b,w=f?Is(t):null;f&&x();function x(){const k=Is(t);w&&!ZS(w,k)&&n(),w=k,b=requestAnimationFrame(x)}return n(),()=>{var k;h.forEach(A=>{i&&A.removeEventListener("scroll",n),o&&A.removeEventListener("resize",n)}),m?.(),(k=y)==null||k.disconnect(),y=null,f&&cancelAnimationFrame(b)}}const ap=Pz,KS=Iz,Hy=Fz,cp=zz,up=qz,GS=Bz,YS=_z,WS=jz,aB=$z,Cu=(t,e,n)=>{const r=new Map,i={platform:sB,...n},o={...i.platform,_c:r};return Lz(t,e,{...i,platform:o})};var cB=typeof document<"u",uB=function(){},Sd=cB?M.useLayoutEffect:uB;function Sh(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Sh(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&t.$$typeof)&&!Sh(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function XS(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function bw(t,e){const n=XS(t);return Math.round(e*n)/n}function _g(t){const e=M.useRef(t);return Sd(()=>{e.current=t}),e}function fB(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:l}={},transform:c=!0,whileElementsMounted:f,open:d}=t,[h,m]=M.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[g,y]=M.useState(r);Sh(g,r)||y(r);const[b,w]=M.useState(null),[x,k]=M.useState(null),A=M.useCallback(I=>{I!==z.current&&(z.current=I,w(I))},[]),N=M.useCallback(I=>{I!==q.current&&(q.current=I,k(I))},[]),D=o||b,L=l||x,z=M.useRef(null),q=M.useRef(null),j=M.useRef(h),ee=f!=null,$=_g(f),re=_g(i),se=_g(d),ue=M.useCallback(()=>{if(!z.current||!q.current)return;const I={placement:e,strategy:n,middleware:g};re.current&&(I.platform=re.current),Cu(z.current,q.current,I).then(ie=>{const R={...ie,isPositioned:se.current!==!1};G.current&&!Sh(j.current,R)&&(j.current=R,da.flushSync(()=>{m(R)}))})},[g,e,n,re,se]);Sd(()=>{d===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,m(I=>({...I,isPositioned:!1})))},[d]);const G=M.useRef(!1);Sd(()=>(G.current=!0,()=>{G.current=!1}),[]),Sd(()=>{if(D&&(z.current=D),L&&(q.current=L),D&&L){if($.current)return $.current(D,L,ue);ue()}},[D,L,ue,$,ee]);const P=M.useMemo(()=>({reference:z,floating:q,setReference:A,setFloating:N}),[A,N]),H=M.useMemo(()=>({reference:D,floating:L}),[D,L]),V=M.useMemo(()=>{const I={position:n,left:0,top:0};if(!H.floating)return I;const ie=bw(H.floating,h.x),R=bw(H.floating,h.y);return c?{...I,transform:"translate("+ie+"px, "+R+"px)",...XS(H.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ie,top:R}},[n,c,H.floating,h.x,h.y]);return M.useMemo(()=>({...h,update:ue,refs:P,elements:H,floatingStyles:V}),[h,ue,P,H,V])}const fp=(t,e)=>({...ap(t),options:[t,e]}),Iy=(t,e)=>({...Hy(t),options:[t,e]}),dB=(t,e)=>({...aB(t),options:[t,e]}),zy=(t,e)=>({...cp(t),options:[t,e]}),JS=(t,e)=>({...up(t),options:[t,e]});function Fs(t){const e=M.useRef(void 0),n=M.useCallback(r=>{const i=t.map(o=>{if(o!=null){if(typeof o=="function"){const l=o,c=l(r);return typeof c=="function"?c:()=>{l(null)}}return o.current=r,()=>{o.current=null}}});return()=>{i.forEach(o=>o?.())}},t);return M.useMemo(()=>t.every(r=>r==null)?null:r=>{e.current&&(e.current(),e.current=void 0),r!=null&&(e.current=n(r))},t)}function hB(t,e){const n=t.compareDocumentPosition(e);return n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0}const QS=M.createContext({register:()=>{},unregister:()=>{},map:new Map,elementsRef:{current:[]}});function pB(t){const{children:e,elementsRef:n,labelsRef:r}=t,[i,o]=M.useState(()=>new Set),l=M.useCallback(d=>{o(h=>new Set(h).add(d))},[]),c=M.useCallback(d=>{o(h=>{const m=new Set(h);return m.delete(d),m})},[]),f=M.useMemo(()=>{const d=new Map;return Array.from(i.keys()).sort(hB).forEach((m,g)=>{d.set(m,g)}),d},[i]);return S.jsx(QS.Provider,{value:M.useMemo(()=>({register:l,unregister:c,map:f,elementsRef:n,labelsRef:r}),[l,c,f,n,r]),children:e})}function mB(t){t===void 0&&(t={});const{label:e}=t,{register:n,unregister:r,map:i,elementsRef:o,labelsRef:l}=M.useContext(QS),[c,f]=M.useState(null),d=M.useRef(null),h=M.useCallback(m=>{if(d.current=m,c!==null&&(o.current[c]=m,l)){var g;const y=e!==void 0;l.current[c]=y?e:(g=m?.textContent)!=null?g:null}},[c,o,l,e]);return ut(()=>{const m=d.current;if(m)return n(m),()=>{r(m)}},[n,r]),ut(()=>{const m=d.current?i.get(d.current):null;m!=null&&f(m)},[i]),M.useMemo(()=>({ref:h,index:c??-1}),[c,h])}const gB="data-floating-ui-focusable",Cw="active",ww="selected",wu="ArrowLeft",xu="ArrowRight",e8="ArrowUp",dp="ArrowDown",yB={...D6};let xw=!1,vB=0;const Sw=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+vB++;function bB(){const[t,e]=M.useState(()=>xw?Sw():void 0);return ut(()=>{t==null&&e(Sw())},[]),M.useEffect(()=>{xw=!0},[]),t}const CB=yB.useId,By=CB||bB;function wB(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.has(e)||t.set(e,new Set),t.get(e).add(n)},off(e,n){var r;(r=t.get(e))==null||r.delete(n)}}}const xB=M.createContext(null),SB=M.createContext(null),hp=()=>{var t;return((t=M.useContext(xB))==null?void 0:t.id)||null},Su=()=>M.useContext(SB);function zs(t){return"data-floating-ui-"+t}function Tn(t){t.current!==-1&&(clearTimeout(t.current),t.current=-1)}const Tw=zs("safe-polygon");function Hg(t,e,n){if(n&&!tu(n))return 0;if(typeof t=="number")return t;if(typeof t=="function"){const r=t();return typeof r=="number"?r:r?.[e]}return t?.[e]}function Ig(t){return typeof t=="function"?t():t}function TB(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,events:o,elements:l}=t,{enabled:c=!0,delay:f=0,handleClose:d=null,mouseOnly:h=!1,restMs:m=0,move:g=!0}=e,y=Su(),b=hp(),w=Bn(d),x=Bn(f),k=Bn(n),A=Bn(m),N=M.useRef(),D=M.useRef(-1),L=M.useRef(),z=M.useRef(-1),q=M.useRef(!0),j=M.useRef(!1),ee=M.useRef(()=>{}),$=M.useRef(!1),re=Ot(()=>{var V;const I=(V=i.current.openEvent)==null?void 0:V.type;return I?.includes("mouse")&&I!=="mousedown"});M.useEffect(()=>{if(!c)return;function V(I){let{open:ie}=I;ie||(Tn(D),Tn(z),q.current=!0,$.current=!1)}return o.on("openchange",V),()=>{o.off("openchange",V)}},[c,o]),M.useEffect(()=>{if(!c||!w.current||!n)return;function V(ie){re()&&r(!1,ie,"hover")}const I=cn(l.floating).documentElement;return I.addEventListener("mouseleave",V),()=>{I.removeEventListener("mouseleave",V)}},[l.floating,n,r,c,w,re]);const se=M.useCallback(function(V,I,ie){I===void 0&&(I=!0),ie===void 0&&(ie="hover");const R=Hg(x.current,"close",N.current);R&&!L.current?(Tn(D),D.current=window.setTimeout(()=>r(!1,V,ie),R)):I&&(Tn(D),r(!1,V,ie))},[x,r]),ue=Ot(()=>{ee.current(),L.current=void 0}),G=Ot(()=>{if(j.current){const V=cn(l.floating).body;V.style.pointerEvents="",V.removeAttribute(Tw),j.current=!1}}),P=Ot(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);M.useEffect(()=>{if(!c)return;function V(te){if(Tn(D),q.current=!1,h&&!tu(N.current)||Ig(A.current)>0&&!Hg(x.current,"open"))return;const W=Hg(x.current,"open",N.current);W?D.current=window.setTimeout(()=>{k.current||r(!0,te,"hover")},W):n||r(!0,te,"hover")}function I(te){if(P()){G();return}ee.current();const W=cn(l.floating);if(Tn(z),$.current=!1,w.current&&i.current.floatingContext){n||Tn(D),L.current=w.current({...i.current.floatingContext,tree:y,x:te.clientX,y:te.clientY,onClose(){G(),ue(),P()||se(te,!0,"safe-polygon")}});const de=L.current;W.addEventListener("mousemove",de),ee.current=()=>{W.removeEventListener("mousemove",de)};return}(N.current==="touch"?!on(l.floating,te.relatedTarget):!0)&&se(te)}function ie(te){P()||i.current.floatingContext&&(w.current==null||w.current({...i.current.floatingContext,tree:y,x:te.clientX,y:te.clientY,onClose(){G(),ue(),P()||se(te)}})(te))}function R(){Tn(D)}function Y(te){P()||se(te,!1)}if(dt(l.domReference)){const te=l.domReference,W=l.floating;return n&&te.addEventListener("mouseleave",ie),g&&te.addEventListener("mousemove",V,{once:!0}),te.addEventListener("mouseenter",V),te.addEventListener("mouseleave",I),W&&(W.addEventListener("mouseleave",ie),W.addEventListener("mouseenter",R),W.addEventListener("mouseleave",Y)),()=>{n&&te.removeEventListener("mouseleave",ie),g&&te.removeEventListener("mousemove",V),te.removeEventListener("mouseenter",V),te.removeEventListener("mouseleave",I),W&&(W.removeEventListener("mouseleave",ie),W.removeEventListener("mouseenter",R),W.removeEventListener("mouseleave",Y))}}},[l,c,t,h,g,se,ue,G,r,n,k,y,x,w,i,P,A]),ut(()=>{var V;if(c&&n&&(V=w.current)!=null&&(V=V.__options)!=null&&V.blockPointerEvents&&re()){j.current=!0;const ie=l.floating;if(dt(l.domReference)&&ie){var I;const R=cn(l.floating).body;R.setAttribute(Tw,"");const Y=l.domReference,te=y==null||(I=y.nodesRef.current.find(W=>W.id===b))==null||(I=I.context)==null?void 0:I.elements.floating;return te&&(te.style.pointerEvents=""),R.style.pointerEvents="none",Y.style.pointerEvents="auto",ie.style.pointerEvents="auto",()=>{R.style.pointerEvents="",Y.style.pointerEvents="",ie.style.pointerEvents=""}}}},[c,n,b,l,y,w,re]),ut(()=>{n||(N.current=void 0,$.current=!1,ue(),G())},[n,ue,G]),M.useEffect(()=>()=>{ue(),Tn(D),Tn(z),G()},[c,l.domReference,ue,G]);const H=M.useMemo(()=>{function V(I){N.current=I.pointerType}return{onPointerDown:V,onPointerEnter:V,onMouseMove(I){const{nativeEvent:ie}=I;function R(){!q.current&&!k.current&&r(!0,ie,"hover")}h&&!tu(N.current)||n||Ig(A.current)===0||$.current&&I.movementX**2+I.movementY**2<2||(Tn(z),N.current==="touch"?R():($.current=!0,z.current=window.setTimeout(R,Ig(A.current))))}}},[h,r,n,k,A]);return M.useMemo(()=>c?{reference:H}:{},[c,H])}const kw=()=>{},kB=M.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:kw,setState:kw,isInstantPhase:!1});function MB(t){const{children:e,delay:n,timeoutMs:r=0}=t,[i,o]=M.useReducer((f,d)=>({...f,...d}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),l=M.useRef(null),c=M.useCallback(f=>{o({currentId:f})},[]);return ut(()=>{i.currentId?l.current===null?l.current=i.currentId:i.isInstantPhase||o({isInstantPhase:!0}):(i.isInstantPhase&&o({isInstantPhase:!1}),l.current=null)},[i.currentId,i.isInstantPhase]),S.jsx(kB.Provider,{value:M.useMemo(()=>({...i,setState:o,setCurrentId:c}),[i,c]),children:e})}let Mw=0;function ys(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=e;r&&cancelAnimationFrame(Mw);const o=()=>t?.focus({preventScroll:n});i?o():Mw=requestAnimationFrame(o)}function EB(t){return t?.ownerDocument||document}const Zl={inert:new WeakMap,"aria-hidden":new WeakMap,none:new WeakMap};function Ew(t){return t==="inert"?Zl.inert:t==="aria-hidden"?Zl["aria-hidden"]:Zl.none}let od=new WeakSet,sd={},zg=0;const AB=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,t8=t=>t&&(t.host||t8(t.parentNode)),RB=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=t8(n);return t.contains(r)?r:null}).filter(n=>n!=null);function NB(t,e,n,r){const i="data-floating-ui-inert",o=r?"inert":n?"aria-hidden":null,l=RB(e,t),c=new Set,f=new Set(l),d=[];sd[i]||(sd[i]=new WeakMap);const h=sd[i];l.forEach(m),g(e),c.clear();function m(y){!y||c.has(y)||(c.add(y),y.parentNode&&m(y.parentNode))}function g(y){!y||f.has(y)||[].forEach.call(y.children,b=>{if(Ko(b)!=="script")if(c.has(b))g(b);else{const w=o?b.getAttribute(o):null,x=w!==null&&w!=="false",k=Ew(o),A=(k.get(b)||0)+1,N=(h.get(b)||0)+1;k.set(b,A),h.set(b,N),d.push(b),A===1&&x&&od.add(b),N===1&&b.setAttribute(i,""),!x&&o&&b.setAttribute(o,o==="inert"?"":"true")}})}return zg++,()=>{d.forEach(y=>{const b=Ew(o),x=(b.get(y)||0)-1,k=(h.get(y)||0)-1;b.set(y,x),h.set(y,k),x||(!od.has(y)&&o&&y.removeAttribute(o),od.delete(y)),k||y.removeAttribute(i)}),zg--,zg||(Zl.inert=new WeakMap,Zl["aria-hidden"]=new WeakMap,Zl.none=new WeakMap,od=new WeakSet,sd={})}}function Aw(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=EB(t[0]).body;return NB(t.concat(Array.from(r.querySelectorAll('[aria-live],[role="status"],output'))),r,e,n)}const pp={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},Th=M.forwardRef(function(e,n){const[r,i]=M.useState();ut(()=>{DS()&&i("button")},[]);const o={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[zs("focus-guard")]:"",style:pp};return S.jsx("span",{...e,...o})}),n8=M.createContext(null),Rw=zs("portal");function OB(t){t===void 0&&(t={});const{id:e,root:n}=t,r=By(),i=r8(),[o,l]=M.useState(null),c=M.useRef(null);return ut(()=>()=>{o?.remove(),queueMicrotask(()=>{c.current=null})},[o]),ut(()=>{if(!r||c.current)return;const f=e?document.getElementById(e):null;if(!f)return;const d=document.createElement("div");d.id=r,d.setAttribute(Rw,""),f.appendChild(d),c.current=d,l(d)},[e,r]),ut(()=>{if(n===null||!r||c.current)return;let f=n||i?.portalNode;f&&!Ey(f)&&(f=f.current),f=f||document.body;let d=null;e&&(d=document.createElement("div"),d.id=e,f.appendChild(d));const h=document.createElement("div");h.id=r,h.setAttribute(Rw,""),f=d||f,f.appendChild(h),c.current=h,l(h)},[e,n,r,i]),o}function mp(t){const{children:e,id:n,root:r,preserveTabOrder:i=!0}=t,o=OB({id:n,root:r}),[l,c]=M.useState(null),f=M.useRef(null),d=M.useRef(null),h=M.useRef(null),m=M.useRef(null),g=l?.modal,y=l?.open,b=!!l&&!l.modal&&l.open&&i&&!!(r||o);return M.useEffect(()=>{if(!o||!i||g)return;function w(x){o&&jc(x)&&(x.type==="focusin"?dw:Dz)(o)}return o.addEventListener("focusin",w,!0),o.addEventListener("focusout",w,!0),()=>{o.removeEventListener("focusin",w,!0),o.removeEventListener("focusout",w,!0)}},[o,i,g]),M.useEffect(()=>{o&&(y||dw(o))},[y,o]),S.jsxs(n8.Provider,{value:M.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:f,afterOutsideRef:d,beforeInsideRef:h,afterInsideRef:m,portalNode:o,setFocusManagerState:c}),[i,o]),children:[b&&o&&S.jsx(Th,{"data-type":"outside",ref:f,onFocus:w=>{if(jc(w,o)){var x;(x=h.current)==null||x.focus()}else{const k=l?l.domReference:null,A=BS(k);A?.focus()}}}),b&&o&&S.jsx("span",{"aria-owns":o.id,style:pp}),o&&da.createPortal(e,o),b&&o&&S.jsx(Th,{"data-type":"outside",ref:d,onFocus:w=>{if(jc(w,o)){var x;(x=m.current)==null||x.focus()}else{const k=l?l.domReference:null,A=zS(k);A?.focus(),l?.closeOnFocusOut&&l?.onOpenChange(!1,w.nativeEvent,"focus-out")}}})]})}const r8=()=>M.useContext(n8);function Nw(t){return M.useMemo(()=>e=>{t.forEach(n=>{n&&(n.current=e)})},t)}const DB=20;let Ro=[];function Vy(){Ro=Ro.filter(t=>t.isConnected)}function LB(t){Vy(),t&&Ko(t)!=="body"&&(Ro.push(t),Ro.length>DB&&(Ro=Ro.slice(-20)))}function Ow(){return Vy(),Ro[Ro.length-1]}function _B(t){const e=bu();return RS(t,e)?t:op(t,e)[0]||t}function Dw(t,e){var n;if(!e.current.includes("floating")&&!((n=t.getAttribute("role"))!=null&&n.includes("dialog")))return;const r=bu(),o=pz(t,r).filter(c=>{const f=c.getAttribute("data-tabindex")||"";return RS(c,r)||c.hasAttribute("data-tabindex")&&!f.startsWith("-")}),l=t.getAttribute("tabindex");e.current.includes("floating")||o.length===0?l!=="0"&&t.setAttribute("tabindex","0"):(l!=="-1"||t.hasAttribute("data-tabindex")&&t.getAttribute("data-tabindex")!=="-1")&&(t.setAttribute("tabindex","-1"),t.setAttribute("data-tabindex","-1"))}const HB=M.forwardRef(function(e,n){return S.jsx("button",{...e,type:"button",ref:n,tabIndex:-1,style:pp})});function i8(t){const{context:e,children:n,disabled:r=!1,order:i=["content"],guards:o=!0,initialFocus:l=0,returnFocus:c=!0,restoreFocus:f=!1,modal:d=!0,visuallyHiddenDismiss:h=!1,closeOnFocusOut:m=!0,outsideElementsInert:g=!1,getInsideElements:y=()=>[]}=t,{open:b,onOpenChange:w,events:x,dataRef:k,elements:{domReference:A,floating:N}}=e,D=Ot(()=>{var ke;return(ke=k.current.floatingContext)==null?void 0:ke.nodeId}),L=Ot(y),z=typeof l=="number"&&l<0,q=Y0(A)&&z,j=AB(),ee=j?o:!0,$=!ee||j&&g,re=Bn(i),se=Bn(l),ue=Bn(c),G=Su(),P=r8(),H=M.useRef(null),V=M.useRef(null),I=M.useRef(!1),ie=M.useRef(!1),R=M.useRef(-1),Y=M.useRef(-1),te=P!=null,W=xh(N),ae=Ot(function(ke){return ke===void 0&&(ke=W),ke?op(ke,bu()):[]}),de=Ot(ke=>{const Le=ae(ke);return re.current.map(Me=>A&&Me==="reference"?A:W&&Me==="floating"?W:Le).filter(Boolean).flat()});M.useEffect(()=>{if(r||!d)return;function ke(Me){if(Me.key==="Tab"){on(W,Jr(cn(W)))&&ae().length===0&&!q&&sn(Me);const at=de(),yt=Ni(Me);re.current[0]==="reference"&&yt===A&&(sn(Me),Me.shiftKey?ys(at[at.length-1]):ys(at[1])),re.current[1]==="floating"&&yt===W&&Me.shiftKey&&(sn(Me),ys(at[0]))}}const Le=cn(W);return Le.addEventListener("keydown",ke),()=>{Le.removeEventListener("keydown",ke)}},[r,A,W,d,re,q,ae,de]),M.useEffect(()=>{if(r||!N)return;function ke(Le){const Me=Ni(Le),yt=ae().indexOf(Me);yt!==-1&&(R.current=yt)}return N.addEventListener("focusin",ke),()=>{N.removeEventListener("focusin",ke)}},[r,N,ae]),M.useEffect(()=>{if(r||!m)return;function ke(){ie.current=!0,setTimeout(()=>{ie.current=!1})}function Le(yt){const Te=yt.relatedTarget,Qt=yt.currentTarget,Lt=Ni(yt);queueMicrotask(()=>{const jt=D(),xn=!(on(A,Te)||on(N,Te)||on(Te,N)||on(P?.portalNode,Te)||Te!=null&&Te.hasAttribute(zs("focus-guard"))||G&&(As(G.nodesRef.current,jt).find(ye=>{var Ee,ge;return on((Ee=ye.context)==null?void 0:Ee.elements.floating,Te)||on((ge=ye.context)==null?void 0:ge.elements.domReference,Te)})||uw(G.nodesRef.current,jt).find(ye=>{var Ee,ge,Ge;return[(Ee=ye.context)==null?void 0:Ee.elements.floating,xh((ge=ye.context)==null?void 0:ge.elements.floating)].includes(Te)||((Ge=ye.context)==null?void 0:Ge.elements.domReference)===Te})));if(Qt===A&&W&&Dw(W,re),f&&Qt!==A&&!(Lt!=null&&Lt.isConnected)&&Jr(cn(W))===cn(W).body){Nt(W)&&W.focus();const ye=R.current,Ee=ae(),ge=Ee[ye]||Ee[Ee.length-1]||W;Nt(ge)&&ge.focus()}if(k.current.insideReactTree){k.current.insideReactTree=!1;return}(q||!d)&&Te&&xn&&!ie.current&&Te!==Ow()&&(I.current=!0,w(!1,yt,"focus-out"))})}const Me=!!(!G&&P);function at(){Tn(Y),k.current.insideReactTree=!0,Y.current=window.setTimeout(()=>{k.current.insideReactTree=!1})}if(N&&Nt(A))return A.addEventListener("focusout",Le),A.addEventListener("pointerdown",ke),N.addEventListener("focusout",Le),Me&&N.addEventListener("focusout",at,!0),()=>{A.removeEventListener("focusout",Le),A.removeEventListener("pointerdown",ke),N.removeEventListener("focusout",Le),Me&&N.removeEventListener("focusout",at,!0)}},[r,A,N,W,d,G,P,w,m,f,ae,q,D,re,k]);const fe=M.useRef(null),lt=M.useRef(null),qe=Nw([fe,P?.beforeInsideRef]),wn=Nw([lt,P?.afterInsideRef]);M.useEffect(()=>{var ke,Le;if(r||!N)return;const Me=Array.from((P==null||(ke=P.portalNode)==null?void 0:ke.querySelectorAll("["+zs("portal")+"]"))||[]),yt=(Le=(G?uw(G.nodesRef.current,D()):[]).find(Lt=>{var jt;return Y0(((jt=Lt.context)==null?void 0:jt.elements.domReference)||null)}))==null||(Le=Le.context)==null?void 0:Le.elements.domReference,Te=[N,yt,...Me,...L(),H.current,V.current,fe.current,lt.current,P?.beforeOutsideRef.current,P?.afterOutsideRef.current,re.current.includes("reference")||q?A:null].filter(Lt=>Lt!=null),Qt=d||q?Aw(Te,!$,$):Aw(Te);return()=>{Qt()}},[r,A,N,d,re,P,q,ee,$,G,D,L]),ut(()=>{if(r||!Nt(W))return;const ke=cn(W),Le=Jr(ke);queueMicrotask(()=>{const Me=de(W),at=se.current,yt=(typeof at=="number"?Me[at]:at.current)||W,Te=on(W,Le);!z&&!Te&&b&&ys(yt,{preventScroll:yt===W})})},[r,b,W,z,de,se]),ut(()=>{if(r||!W)return;const ke=cn(W),Le=Jr(ke);LB(Le);function Me(Te){let{reason:Qt,event:Lt,nested:jt}=Te;if(["hover","safe-polygon"].includes(Qt)&&Lt.type==="mouseleave"&&(I.current=!0),Qt==="outside-press")if(jt)I.current=!1;else if(_S(Lt)||HS(Lt))I.current=!1;else{let xn=!1;document.createElement("div").focus({get preventScroll(){return xn=!0,!1}}),xn?I.current=!1:I.current=!0}}x.on("openchange",Me);const at=ke.createElement("span");at.setAttribute("tabindex","-1"),at.setAttribute("aria-hidden","true"),Object.assign(at.style,pp),te&&A&&A.insertAdjacentElement("afterend",at);function yt(){if(typeof ue.current=="boolean"){const Te=A||Ow();return Te&&Te.isConnected?Te:at}return ue.current.current||at}return()=>{x.off("openchange",Me);const Te=Jr(ke),Qt=on(N,Te)||G&&As(G.nodesRef.current,D(),!1).some(jt=>{var xn;return on((xn=jt.context)==null?void 0:xn.elements.floating,Te)}),Lt=yt();queueMicrotask(()=>{const jt=_B(Lt);ue.current&&!I.current&&Nt(jt)&&(!(jt!==Te&&Te!==ke.body)||Qt)&&jt.focus({preventScroll:!0}),at.remove()})}},[r,N,W,ue,k,x,G,te,A,D]),M.useEffect(()=>(queueMicrotask(()=>{I.current=!1}),()=>{queueMicrotask(Vy)}),[r]),ut(()=>{if(!r&&P)return P.setFocusManagerState({modal:d,closeOnFocusOut:m,open:b,onOpenChange:w,domReference:A}),()=>{P.setFocusManagerState(null)}},[r,P,d,b,w,m,A]),ut(()=>{r||W&&Dw(W,re)},[r,W,re]);function Zn(ke){return r||!h||!d?null:S.jsx(HB,{ref:ke==="start"?H:V,onClick:Le=>w(!1,Le.nativeEvent),children:typeof h=="string"?h:"Dismiss"})}const Sr=!r&&ee&&(d?!q:!0)&&(te||d);return S.jsxs(S.Fragment,{children:[Sr&&S.jsx(Th,{"data-type":"inside",ref:qe,onFocus:ke=>{if(d){const Me=de();ys(i[0]==="reference"?Me[0]:Me[Me.length-1])}else if(P!=null&&P.preserveTabOrder&&P.portalNode)if(I.current=!1,jc(ke,P.portalNode)){const Me=zS(A);Me?.focus()}else{var Le;(Le=P.beforeOutsideRef.current)==null||Le.focus()}}}),!q&&Zn("start"),n,Zn("end"),Sr&&S.jsx(Th,{"data-type":"inside",ref:wn,onFocus:ke=>{if(d)ys(de()[0]);else if(P!=null&&P.preserveTabOrder&&P.portalNode)if(m&&(I.current=!0),jc(ke,P.portalNode)){const Me=BS(A);Me?.focus()}else{var Le;(Le=P.afterOutsideRef.current)==null||Le.focus()}}})]})}function Lw(t){return Nt(t.target)&&t.target.tagName==="BUTTON"}function IB(t){return Nt(t.target)&&t.target.tagName==="A"}function _w(t){return Ly(t)}function o8(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:o}}=t,{enabled:l=!0,event:c="click",toggle:f=!0,ignoreMouse:d=!1,keyboardHandlers:h=!0,stickIfOpen:m=!0}=e,g=M.useRef(),y=M.useRef(!1),b=M.useMemo(()=>({onPointerDown(w){g.current=w.pointerType},onMouseDown(w){const x=g.current;w.button===0&&c!=="click"&&(tu(x,!0)&&d||(n&&f&&(!(i.current.openEvent&&m)||i.current.openEvent.type==="mousedown")?r(!1,w.nativeEvent,"click"):(w.preventDefault(),r(!0,w.nativeEvent,"click"))))},onClick(w){const x=g.current;if(c==="mousedown"&&g.current){g.current=void 0;return}tu(x,!0)&&d||(n&&f&&(!(i.current.openEvent&&m)||i.current.openEvent.type==="click")?r(!1,w.nativeEvent,"click"):r(!0,w.nativeEvent,"click"))},onKeyDown(w){g.current=void 0,!(w.defaultPrevented||!h||Lw(w))&&(w.key===" "&&!_w(o)&&(w.preventDefault(),y.current=!0),!IB(w)&&w.key==="Enter"&&r(!(n&&f),w.nativeEvent,"click"))},onKeyUp(w){w.defaultPrevented||!h||Lw(w)||_w(o)||w.key===" "&&y.current&&(y.current=!1,r(!(n&&f),w.nativeEvent,"click"))}}),[i,o,c,d,h,r,n,m,f]);return M.useMemo(()=>l?{reference:b}:{},[l,b])}const zB={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},BB={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Hw=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t?.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t?.outsidePress)!=null?n:!0}};function jy(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:i,dataRef:o}=t,{enabled:l=!0,escapeKey:c=!0,outsidePress:f=!0,outsidePressEvent:d="pointerdown",referencePress:h=!1,referencePressEvent:m="pointerdown",ancestorScroll:g=!1,bubbles:y,capture:b}=e,w=Su(),x=Ot(typeof f=="function"?f:()=>!1),k=typeof f=="function"?x:f,A=M.useRef(!1),{escapeKey:N,outsidePress:D}=Hw(y),{escapeKey:L,outsidePress:z}=Hw(b),q=M.useRef(!1),j=Ot(G=>{var P;if(!n||!l||!c||G.key!=="Escape"||q.current)return;const H=(P=o.current.floatingContext)==null?void 0:P.nodeId,V=w?As(w.nodesRef.current,H):[];if(!N&&(G.stopPropagation(),V.length>0)){let I=!0;if(V.forEach(ie=>{var R;if((R=ie.context)!=null&&R.open&&!ie.context.dataRef.current.__escapeKeyBubbles){I=!1;return}}),!I)return}r(!1,xz(G)?G.nativeEvent:G,"escape-key")}),ee=Ot(G=>{var P;const H=()=>{var V;j(G),(V=Ni(G))==null||V.removeEventListener("keydown",H)};(P=Ni(G))==null||P.addEventListener("keydown",H)}),$=Ot(G=>{var P;const H=o.current.insideReactTree;o.current.insideReactTree=!1;const V=A.current;if(A.current=!1,d==="click"&&V||H||typeof k=="function"&&!k(G))return;const I=Ni(G),ie="["+zs("inert")+"]",R=cn(i.floating).querySelectorAll(ie);let Y=dt(I)?I:null;for(;Y&&!Hi(Y);){const de=Bi(Y);if(Hi(de)||!dt(de))break;Y=de}if(R.length&&dt(I)&&!bz(I)&&!on(I,i.floating)&&Array.from(R).every(de=>!on(Y,de)))return;if(Nt(I)&&ue){const de=Hi(I),fe=xr(I),lt=/auto|scroll/,qe=de||lt.test(fe.overflowX),wn=de||lt.test(fe.overflowY),Zn=qe&&I.clientWidth>0&&I.scrollWidth>I.clientWidth,Sr=wn&&I.clientHeight>0&&I.scrollHeight>I.clientHeight,ke=fe.direction==="rtl",Le=Sr&&(ke?G.offsetX<=I.offsetWidth-I.clientWidth:G.offsetX>I.clientWidth),Me=Zn&&G.offsetY>I.clientHeight;if(Le||Me)return}const te=(P=o.current.floatingContext)==null?void 0:P.nodeId,W=w&&As(w.nodesRef.current,te).some(de=>{var fe;return Og(G,(fe=de.context)==null?void 0:fe.elements.floating)});if(Og(G,i.floating)||Og(G,i.domReference)||W)return;const ae=w?As(w.nodesRef.current,te):[];if(ae.length>0){let de=!0;if(ae.forEach(fe=>{var lt;if((lt=fe.context)!=null&&lt.open&&!fe.context.dataRef.current.__outsidePressBubbles){de=!1;return}}),!de)return}r(!1,G,"outside-press")}),re=Ot(G=>{var P;const H=()=>{var V;$(G),(V=Ni(G))==null||V.removeEventListener(d,H)};(P=Ni(G))==null||P.addEventListener(d,H)});M.useEffect(()=>{if(!n||!l)return;o.current.__escapeKeyBubbles=N,o.current.__outsidePressBubbles=D;let G=-1;function P(R){r(!1,R,"ancestor-scroll")}function H(){window.clearTimeout(G),q.current=!0}function V(){G=window.setTimeout(()=>{q.current=!1},rp()?5:0)}const I=cn(i.floating);c&&(I.addEventListener("keydown",L?ee:j,L),I.addEventListener("compositionstart",H),I.addEventListener("compositionend",V)),k&&I.addEventListener(d,z?re:$,z);let ie=[];return g&&(dt(i.domReference)&&(ie=Ho(i.domReference)),dt(i.floating)&&(ie=ie.concat(Ho(i.floating))),!dt(i.reference)&&i.reference&&i.reference.contextElement&&(ie=ie.concat(Ho(i.reference.contextElement)))),ie=ie.filter(R=>{var Y;return R!==((Y=I.defaultView)==null?void 0:Y.visualViewport)}),ie.forEach(R=>{R.addEventListener("scroll",P,{passive:!0})}),()=>{c&&(I.removeEventListener("keydown",L?ee:j,L),I.removeEventListener("compositionstart",H),I.removeEventListener("compositionend",V)),k&&I.removeEventListener(d,z?re:$,z),ie.forEach(R=>{R.removeEventListener("scroll",P)}),window.clearTimeout(G)}},[o,i,c,k,d,n,r,g,l,N,D,j,L,ee,$,z,re]),M.useEffect(()=>{o.current.insideReactTree=!1},[o,k,d]);const se=M.useMemo(()=>({onKeyDown:j,...h&&{[zB[m]]:G=>{r(!1,G.nativeEvent,"reference-press")},...m!=="click"&&{onClick(G){r(!1,G.nativeEvent,"reference-press")}}}}),[j,r,h,m]),ue=M.useMemo(()=>({onKeyDown:j,onMouseDown(){A.current=!0},onMouseUp(){A.current=!0},[BB[d]]:()=>{o.current.insideReactTree=!0}}),[j,d,o]);return M.useMemo(()=>l?{reference:se,floating:ue}:{},[l,se,ue])}function VB(t){const{open:e=!1,onOpenChange:n,elements:r}=t,i=By(),o=M.useRef({}),[l]=M.useState(()=>wB()),c=hp()!=null,[f,d]=M.useState(r.reference),h=Ot((y,b,w)=>{o.current.openEvent=y?b:void 0,l.emit("openchange",{open:y,event:b,reason:w,nested:c}),n?.(y,b,w)}),m=M.useMemo(()=>({setPositionReference:d}),[]),g=M.useMemo(()=>({reference:f||r.reference||null,floating:r.floating||null,domReference:r.reference}),[f,r.reference,r.floating]);return M.useMemo(()=>({dataRef:o,open:e,onOpenChange:h,elements:g,events:l,floatingId:i,refs:m}),[e,h,g,l,i,m])}function gp(t){t===void 0&&(t={});const{nodeId:e}=t,n=VB({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,i=r.elements,[o,l]=M.useState(null),[c,f]=M.useState(null),h=i?.domReference||o,m=M.useRef(null),g=Su();ut(()=>{h&&(m.current=h)},[h]);const y=fB({...t,elements:{...i,...c&&{reference:c}}}),b=M.useCallback(N=>{const D=dt(N)?{getBoundingClientRect:()=>N.getBoundingClientRect(),getClientRects:()=>N.getClientRects(),contextElement:N}:N;f(D),y.refs.setReference(D)},[y.refs]),w=M.useCallback(N=>{(dt(N)||N===null)&&(m.current=N,l(N)),(dt(y.refs.reference.current)||y.refs.reference.current===null||N!==null&&!dt(N))&&y.refs.setReference(N)},[y.refs]),x=M.useMemo(()=>({...y.refs,setReference:w,setPositionReference:b,domReference:m}),[y.refs,w,b]),k=M.useMemo(()=>({...y.elements,domReference:h}),[y.elements,h]),A=M.useMemo(()=>({...y,...r,refs:x,elements:k,nodeId:e}),[y,x,k,e,r]);return ut(()=>{r.dataRef.current.floatingContext=A;const N=g?.nodesRef.current.find(D=>D.id===e);N&&(N.context=A)}),M.useMemo(()=>({...y,context:A,refs:x,elements:k}),[y,x,k,A])}function Bg(){return mz()&&DS()}function jB(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:i,dataRef:o,elements:l}=t,{enabled:c=!0,visibleOnly:f=!0}=e,d=M.useRef(!1),h=M.useRef(-1),m=M.useRef(!0);M.useEffect(()=>{if(!c)return;const y=Fn(l.domReference);function b(){!n&&Nt(l.domReference)&&l.domReference===Jr(cn(l.domReference))&&(d.current=!0)}function w(){m.current=!0}function x(){m.current=!1}return y.addEventListener("blur",b),Bg()&&(y.addEventListener("keydown",w,!0),y.addEventListener("pointerdown",x,!0)),()=>{y.removeEventListener("blur",b),Bg()&&(y.removeEventListener("keydown",w,!0),y.removeEventListener("pointerdown",x,!0))}},[l.domReference,n,c]),M.useEffect(()=>{if(!c)return;function y(b){let{reason:w}=b;(w==="reference-press"||w==="escape-key")&&(d.current=!0)}return i.on("openchange",y),()=>{i.off("openchange",y)}},[i,c]),M.useEffect(()=>()=>{Tn(h)},[]);const g=M.useMemo(()=>({onMouseLeave(){d.current=!1},onFocus(y){if(d.current)return;const b=Ni(y.nativeEvent);if(f&&dt(b)){if(Bg()&&!y.relatedTarget){if(!m.current&&!Ly(b))return}else if(!Cz(b))return}r(!0,y.nativeEvent,"focus")},onBlur(y){d.current=!1;const b=y.relatedTarget,w=y.nativeEvent,x=dt(b)&&b.hasAttribute(zs("focus-guard"))&&b.getAttribute("data-type")==="outside";h.current=window.setTimeout(()=>{var k;const A=Jr(l.domReference?l.domReference.ownerDocument:document);!b&&A===l.domReference||on((k=o.current.floatingContext)==null?void 0:k.refs.floating.current,A)||on(l.domReference,A)||x||r(!1,w,"focus")})}}),[o,l.domReference,r,f]);return M.useMemo(()=>c?{reference:g}:{},[c,g])}function Vg(t,e,n){const r=new Map,i=n==="item";let o=t;if(i&&t){const{[Cw]:l,[ww]:c,...f}=t;o=f}return{...n==="floating"&&{tabIndex:-1,[gB]:""},...o,...e.map(l=>{const c=l?l[n]:null;return typeof c=="function"?t?c(t):null:c}).concat(t).reduce((l,c)=>(c&&Object.entries(c).forEach(f=>{let[d,h]=f;if(!(i&&[Cw,ww].includes(d)))if(d.indexOf("on")===0){if(r.has(d)||r.set(d,[]),typeof h=="function"){var m;(m=r.get(d))==null||m.push(h),l[d]=function(){for(var g,y=arguments.length,b=new Array(y),w=0;w<y;w++)b[w]=arguments[w];return(g=r.get(d))==null?void 0:g.map(x=>x(...b)).find(x=>x!==void 0)}}}else l[d]=h}),l),{})}}function yp(t){t===void 0&&(t=[]);const e=t.map(c=>c?.reference),n=t.map(c=>c?.floating),r=t.map(c=>c?.item),i=M.useCallback(c=>Vg(c,t,"reference"),e),o=M.useCallback(c=>Vg(c,t,"floating"),n),l=M.useCallback(c=>Vg(c,t,"item"),r);return M.useMemo(()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:l}),[i,o,l])}const UB="Escape";function vp(t,e,n){switch(t){case"vertical":return e;case"horizontal":return n;default:return e||n}}function ld(t,e){return vp(e,t===e8||t===dp,t===wu||t===xu)}function jg(t,e,n){return vp(e,t===dp,n?t===wu:t===xu)||t==="Enter"||t===" "||t===""}function Iw(t,e,n){return vp(e,n?t===wu:t===xu,t===dp)}function zw(t,e,n,r){const i=n?t===xu:t===wu,o=t===e8;return e==="both"||e==="horizontal"&&r&&r>1?t===UB:vp(e,i,o)}function PB(t,e){const{open:n,onOpenChange:r,elements:i,floatingId:o}=t,{listRef:l,activeIndex:c,onNavigate:f=()=>{},enabled:d=!0,selectedIndex:h=null,allowEscape:m=!1,loop:g=!1,nested:y=!1,rtl:b=!1,virtual:w=!1,focusItemOnOpen:x="auto",focusItemOnHover:k=!0,openOnArrowKeyDown:A=!0,disabledIndices:N=void 0,orientation:D="vertical",parentOrientation:L,cols:z=1,scrollItemIntoView:q=!0,virtualItemRef:j,itemSizes:ee,dense:$=!1}=e,re=xh(i.floating),se=Bn(re),ue=hp(),G=Su();ut(()=>{t.dataRef.current.orientation=D},[t,D]);const P=Ot(()=>{f(I.current===-1?null:I.current)}),H=Y0(i.domReference),V=M.useRef(x),I=M.useRef(h??-1),ie=M.useRef(null),R=M.useRef(!0),Y=M.useRef(P),te=M.useRef(!!i.floating),W=M.useRef(n),ae=M.useRef(!1),de=M.useRef(!1),fe=Bn(N),lt=Bn(n),qe=Bn(q),wn=Bn(h),[Zn,Sr]=M.useState(),[ke,Le]=M.useState(),Me=Ot(()=>{function ye(Ze){if(w){var Ie;(Ie=Ze.id)!=null&&Ie.endsWith("-fui-option")&&(Ze.id=o+"-"+Math.random().toString(16).slice(2,10)),Sr(Ze.id),G?.events.emit("virtualfocus",Ze),j&&(j.current=Ze)}else ys(Ze,{sync:ae.current,preventScroll:!0})}const Ee=l.current[I.current],ge=de.current;Ee&&ye(Ee),(ae.current?Ze=>Ze():requestAnimationFrame)(()=>{const Ze=l.current[I.current]||Ee;if(!Ze)return;Ee||ye(Ze);const Ie=qe.current;Ie&&yt&&(ge||!R.current)&&(Ze.scrollIntoView==null||Ze.scrollIntoView(typeof Ie=="boolean"?{block:"nearest",inline:"nearest"}:Ie))})});ut(()=>{d&&(n&&i.floating?V.current&&h!=null&&(de.current=!0,I.current=h,P()):te.current&&(I.current=-1,Y.current()))},[d,n,i.floating,h,P]),ut(()=>{if(d&&n&&i.floating)if(c==null){if(ae.current=!1,wn.current!=null)return;if(te.current&&(I.current=-1,Me()),(!W.current||!te.current)&&V.current&&(ie.current!=null||V.current===!0&&ie.current==null)){let ye=0;const Ee=()=>{l.current[0]==null?(ye<2&&(ye?requestAnimationFrame:queueMicrotask)(Ee),ye++):(I.current=ie.current==null||jg(ie.current,D,b)||y?Dg(l,fe.current):fw(l,fe.current),ie.current=null,P())};Ee()}}else Vc(l,c)||(I.current=c,Me(),de.current=!1)},[d,n,i.floating,c,wn,y,l,D,b,P,Me,fe]),ut(()=>{var ye;if(!d||i.floating||!G||w||!te.current)return;const Ee=G.nodesRef.current,ge=(ye=Ee.find(Ie=>Ie.id===ue))==null||(ye=ye.context)==null?void 0:ye.elements.floating,Ge=Jr(cn(i.floating)),Ze=Ee.some(Ie=>Ie.context&&on(Ie.context.elements.floating,Ge));ge&&!Ze&&R.current&&ge.focus({preventScroll:!0})},[d,i.floating,G,ue,w]),ut(()=>{if(!d||!G||!w||ue)return;function ye(Ee){Le(Ee.id),j&&(j.current=Ee)}return G.events.on("virtualfocus",ye),()=>{G.events.off("virtualfocus",ye)}},[d,G,w,ue,j]),ut(()=>{Y.current=P,W.current=n,te.current=!!i.floating}),ut(()=>{n||(ie.current=null,V.current=x)},[n,x]);const at=c!=null,yt=M.useMemo(()=>{function ye(ge){if(!lt.current)return;const Ge=l.current.indexOf(ge);Ge!==-1&&I.current!==Ge&&(I.current=Ge,P())}return{onFocus(ge){let{currentTarget:Ge}=ge;ae.current=!0,ye(Ge)},onClick:ge=>{let{currentTarget:Ge}=ge;return Ge.focus({preventScroll:!0})},onMouseMove(ge){let{currentTarget:Ge}=ge;ae.current=!0,de.current=!1,k&&ye(Ge)},onPointerLeave(ge){let{pointerType:Ge}=ge;if(!(!R.current||Ge==="touch")&&(ae.current=!0,!!k&&(I.current=-1,P(),!w))){var Ze;(Ze=se.current)==null||Ze.focus({preventScroll:!0})}}}},[lt,se,k,l,P,w]),Te=M.useCallback(()=>{var ye;return L??(G==null||(ye=G.nodesRef.current.find(Ee=>Ee.id===ue))==null||(ye=ye.context)==null||(ye=ye.dataRef)==null?void 0:ye.current.orientation)},[ue,G,L]),Qt=Ot(ye=>{if(R.current=!1,ae.current=!0,ye.which===229||!lt.current&&ye.currentTarget===se.current)return;if(y&&zw(ye.key,D,b,z)){ld(ye.key,Te())||sn(ye),r(!1,ye.nativeEvent,"list-navigation"),Nt(i.domReference)&&(w?G?.events.emit("virtualfocus",i.domReference):i.domReference.focus());return}const Ee=I.current,ge=Dg(l,N),Ge=fw(l,N);if(H||(ye.key==="Home"&&(sn(ye),I.current=ge,P()),ye.key==="End"&&(sn(ye),I.current=Ge,P())),z>1){const Ze=ee||Array.from({length:l.current.length},()=>({width:1,height:1})),Ie=Rz(Ze,z,$),Rn=Ie.findIndex(Nn=>Nn!=null&&!xd(l,Nn,N)),Ft=Ie.reduce((Nn,oi,si)=>oi!=null&&!xd(l,oi,N)?si:Nn,-1),Go=Ie[Az({current:Ie.map(Nn=>Nn!=null?l.current[Nn]:null)},{event:ye,orientation:D,loop:g,rtl:b,cols:z,disabledIndices:Oz([...(typeof N!="function"?N:null)||l.current.map((Nn,oi)=>xd(l,oi,N)?oi:void 0),void 0],Ie),minIndex:Rn,maxIndex:Ft,prevIndex:Nz(I.current>Ge?ge:I.current,Ze,Ie,z,ye.key===dp?"bl":ye.key===(b?wu:xu)?"tr":"tl"),stopEvent:!0})];if(Go!=null&&(I.current=Go,P()),D==="both")return}if(ld(ye.key,D)){if(sn(ye),n&&!w&&Jr(ye.currentTarget.ownerDocument)===ye.currentTarget){I.current=jg(ye.key,D,b)?ge:Ge,P();return}jg(ye.key,D,b)?g?I.current=Ee>=Ge?m&&Ee!==l.current.length?-1:ge:pn(l,{startingIndex:Ee,disabledIndices:N}):I.current=Math.min(Ge,pn(l,{startingIndex:Ee,disabledIndices:N})):g?I.current=Ee<=ge?m&&Ee!==-1?l.current.length:Ge:pn(l,{startingIndex:Ee,decrement:!0,disabledIndices:N}):I.current=Math.max(ge,pn(l,{startingIndex:Ee,decrement:!0,disabledIndices:N})),Vc(l,I.current)&&(I.current=-1),P()}}),Lt=M.useMemo(()=>w&&n&&at&&{"aria-activedescendant":ke||Zn},[w,n,at,ke,Zn]),jt=M.useMemo(()=>({"aria-orientation":D==="both"?void 0:D,...H?{}:Lt,onKeyDown:Qt,onPointerMove(){R.current=!0}}),[Lt,Qt,D,H]),xn=M.useMemo(()=>{function ye(ge){x==="auto"&&_S(ge.nativeEvent)&&(V.current=!0)}function Ee(ge){V.current=x,x==="auto"&&HS(ge.nativeEvent)&&(V.current=!0)}return{...Lt,onKeyDown(ge){R.current=!1;const Ge=ge.key.startsWith("Arrow"),Ze=["Home","End"].includes(ge.key),Ie=Ge||Ze,Rn=Iw(ge.key,D,b),Ft=zw(ge.key,D,b,z),Go=Iw(ge.key,Te(),b),Nn=ld(ge.key,D),oi=(y?Go:Nn)||ge.key==="Enter"||ge.key.trim()==="";if(w&&n){const li=G?.nodesRef.current.find(Zs=>Zs.parentId==null),On=G&&li?wz(G.nodesRef.current,li.id):null;if(Ie&&On&&j){const Zs=new KeyboardEvent("keydown",{key:ge.key,bubbles:!0});if(Rn||Ft){var si,Yo;const Nu=((si=On.context)==null?void 0:si.elements.domReference)===ge.currentTarget,Ca=Ft&&!Nu?(Yo=On.context)==null?void 0:Yo.elements.domReference:Rn?l.current.find(Ks=>Ks?.id===Zn):null;Ca&&(sn(ge),Ca.dispatchEvent(Zs),Le(void 0))}if((Nn||Ze)&&On.context&&On.context.open&&On.parentId&&ge.currentTarget!==On.context.elements.domReference){var Fr;sn(ge),(Fr=On.context.elements.domReference)==null||Fr.dispatchEvent(Zs);return}}return Qt(ge)}if(!(!n&&!A&&Ge)){if(oi){const li=ld(ge.key,Te());ie.current=y&&li?null:ge.key}if(y){Go&&(sn(ge),n?(I.current=Dg(l,fe.current),P()):r(!0,ge.nativeEvent,"list-navigation"));return}Nn&&(h!=null&&(I.current=h),sn(ge),!n&&A?r(!0,ge.nativeEvent,"list-navigation"):Qt(ge),n&&P())}},onFocus(){n&&!w&&(I.current=-1,P())},onPointerDown:Ee,onPointerEnter:Ee,onMouseDown:ye,onClick:ye}},[Zn,Lt,z,Qt,fe,x,l,y,P,r,n,A,D,Te,b,h,G,w,j]);return M.useMemo(()=>d?{reference:xn,floating:jt,item:yt}:{},[d,xn,jt,yt])}const FB=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Uy(t,e){var n,r;e===void 0&&(e={});const{open:i,elements:o,floatingId:l}=t,{enabled:c=!0,role:f="dialog"}=e,d=By(),h=((n=o.domReference)==null?void 0:n.id)||d,m=M.useMemo(()=>{var A;return((A=xh(o.floating))==null?void 0:A.id)||l},[o.floating,l]),g=(r=FB.get(f))!=null?r:f,b=hp()!=null,w=M.useMemo(()=>g==="tooltip"||f==="label"?{["aria-"+(f==="label"?"labelledby":"describedby")]:i?m:void 0}:{"aria-expanded":i?"true":"false","aria-haspopup":g==="alertdialog"?"dialog":g,"aria-controls":i?m:void 0,...g==="listbox"&&{role:"combobox"},...g==="menu"&&{id:h},...g==="menu"&&b&&{role:"menuitem"},...f==="select"&&{"aria-autocomplete":"none"},...f==="combobox"&&{"aria-autocomplete":"list"}},[g,m,b,i,h,f]),x=M.useMemo(()=>{const A={id:m,...g&&{role:g}};return g==="tooltip"||f==="label"?A:{...A,...g==="menu"&&{"aria-labelledby":h}}},[g,m,h,f]),k=M.useCallback(A=>{let{active:N,selected:D}=A;const L={role:"option",...N&&{id:m+"-fui-option"}};switch(f){case"select":case"combobox":return{...L,"aria-selected":D}}return{}},[m,f]);return M.useMemo(()=>c?{reference:w,floating:x,item:k}:{},[c,w,x,k])}function $B(t,e){var n;const{open:r,dataRef:i}=t,{listRef:o,activeIndex:l,onMatch:c,onTypingChange:f,enabled:d=!0,findMatch:h=null,resetMs:m=750,ignoreKeys:g=[],selectedIndex:y=null}=e,b=M.useRef(-1),w=M.useRef(""),x=M.useRef((n=y??l)!=null?n:-1),k=M.useRef(null),A=Ot(c),N=Ot(f),D=Bn(h),L=Bn(g);ut(()=>{r&&(Tn(b),k.current=null,w.current="")},[r]),ut(()=>{if(r&&w.current===""){var $;x.current=($=y??l)!=null?$:-1}},[r,y,l]);const z=Ot($=>{$?i.current.typing||(i.current.typing=$,N($)):i.current.typing&&(i.current.typing=$,N($))}),q=Ot($=>{function re(H,V,I){const ie=D.current?D.current(V,I):V.find(R=>R?.toLocaleLowerCase().indexOf(I.toLocaleLowerCase())===0);return ie?H.indexOf(ie):-1}const se=o.current;if(w.current.length>0&&w.current[0]!==" "&&(re(se,se,w.current)===-1?z(!1):$.key===" "&&sn($)),se==null||L.current.includes($.key)||$.key.length!==1||$.ctrlKey||$.metaKey||$.altKey)return;r&&$.key!==" "&&(sn($),z(!0)),se.every(H=>{var V,I;return H?((V=H[0])==null?void 0:V.toLocaleLowerCase())!==((I=H[1])==null?void 0:I.toLocaleLowerCase()):!0})&&w.current===$.key&&(w.current="",x.current=k.current),w.current+=$.key,Tn(b),b.current=window.setTimeout(()=>{w.current="",x.current=k.current,z(!1)},m);const G=x.current,P=re(se,[...se.slice((G||0)+1),...se.slice(0,(G||0)+1)],w.current);P!==-1?(A(P),k.current=P):$.key!==" "&&(w.current="",z(!1))}),j=M.useMemo(()=>({onKeyDown:q}),[q]),ee=M.useMemo(()=>({onKeyDown:q,onKeyUp($){$.key===" "&&z(!1)}}),[q,z]);return M.useMemo(()=>d?{reference:j,floating:ee}:{},[d,j,ee])}/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ZB=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Bw=t=>{const e=ZB(t);return e.charAt(0).toUpperCase()+e.slice(1)},s8=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),KB=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var GB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=M.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:l,...c},f)=>M.createElement("svg",{ref:f,...GB,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:s8("lucide",i),...!o&&!KB(c)&&{"aria-hidden":"true"},...c},[...l.map(([d,h])=>M.createElement(d,h)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=(t,e)=>{const n=M.forwardRef(({className:r,...i},o)=>M.createElement(YB,{ref:o,iconNode:e,className:s8(`lucide-${qB(Bw(t))}`,`lucide-${t}`,r),...i}));return n.displayName=Bw(t),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=[["path",{d:"M3.5 13h6",key:"p1my2r"}],["path",{d:"m2 16 4.5-9 4.5 9",key:"ndf0b3"}],["path",{d:"M18 7v9",key:"pknjwm"}],["path",{d:"m14 12 4 4 4-4",key:"buelq4"}]],XB=mt("a-arrow-down",WB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=[["path",{d:"M3.5 13h6",key:"p1my2r"}],["path",{d:"m2 16 4.5-9 4.5 9",key:"ndf0b3"}],["path",{d:"M18 16V7",key:"ty0viw"}],["path",{d:"m14 11 4-4 4 4",key:"1pu57t"}]],QB=mt("a-arrow-up",JB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eV=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M16 12h2",key:"7q9ll5"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M6 8h2",key:"30oboj"}]],tV=mt("book-open-text",eV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nV=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],rV=mt("box",nV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iV=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],oV=mt("check",iV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sV=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]],lV=mt("clipboard-copy",sV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aV=[["path",{d:"M11 14h10",key:"1w8e9d"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v1.344",key:"1e62lh"}],["path",{d:"m17 18 4-4-4-4",key:"z2g111"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 1.793-1.113",key:"bjbb7m"}],["rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",key:"ublpy"}]],cV=mt("clipboard-paste",aV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uV=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],fV=mt("code",uV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]],hV=mt("columns-2",dV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pV=[["path",{d:"m21.12 6.4-6.05-4.06a2 2 0 0 0-2.17-.05L2.95 8.41a2 2 0 0 0-.95 1.7v5.82a2 2 0 0 0 .88 1.66l6.05 4.07a2 2 0 0 0 2.17.05l9.95-6.12a2 2 0 0 0 .95-1.7V8.06a2 2 0 0 0-.88-1.66Z",key:"1u2ovd"}],["path",{d:"M10 22v-8L2.25 9.15",key:"11pn4q"}],["path",{d:"m10 14 11.77-6.87",key:"1kt1wh"}]],Vw=mt("cuboid",pV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mV=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],gV=mt("grip-vertical",mV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yV=[["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M6 20V4",key:"1w1bmo"}],["path",{d:"M18 20V4",key:"o2hl4u"}]],vV=mt("heading",yV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],CV=mt("image",bV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wV=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],xV=mt("message-circle-question-mark",wV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SV=[["path",{d:"M5 12h14",key:"1ays0h"}]],TV=mt("minus",SV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kV=[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]],MV=mt("newspaper",kV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EV=[["path",{d:"M13 4v16",key:"8vvj80"}],["path",{d:"M17 4v16",key:"7dpous"}],["path",{d:"M19 4H9.5a4.5 4.5 0 0 0 0 9H13",key:"sh4n9v"}]],AV=mt("pilcrow",EV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],bp=mt("plus",RV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NV=[["path",{d:"M13 13H8a1 1 0 0 0-1 1v7",key:"h8g396"}],["path",{d:"M14 8h1",key:"1lfen6"}],["path",{d:"M17 21v-4",key:"1yknxs"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M20.41 20.41A2 2 0 0 1 19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 .59-1.41",key:"1t4vdl"}],["path",{d:"M29.5 11.5s5 5 4 5",key:"zzn4i6"}],["path",{d:"M9 3h6.2a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V15",key:"24cby9"}]],jw=mt("save-off",NV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OV=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],DV=mt("save",OV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_V=mt("settings",LV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HV=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],IV=mt("star",HV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],BV=mt("triangle-alert",zV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],jV=mt("video",VV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Cp=mt("x",UV),PV={cs:{placeholder:"Kliknte pro pidn dalho obsahu"},en:{placeholder:"Click to add more content"}},ga=({children:t,editor:e,getPos:n,target:r,wrapperRef:i})=>{const[o,l]=M.useState(!1),[c,f]=M.useState(!1),d=M.useRef(null),h=M.useRef(null),m=M.useCallback(()=>{if(!d.current||d.current.closest(".f-tiptap-page")?.classList.contains("f-tiptap-page--collapsed"))return!1;const D=d.current.querySelector("[data-node-view-content-react]")||d.current;if(!D)return!1;const L=D.lastElementChild;return L?L.tagName.toLowerCase()==="div":!1},[]),{refs:g,floatingStyles:y}=gp({open:c,placement:"bottom",middleware:[fp({mainAxis:0}),JS({apply({rects:N,elements:D}){Object.assign(D.floating.style,{width:`${N.reference.width}px`})}})],whileElementsMounted:lp,strategy:"fixed"}),{getFloatingProps:b}=yp([]),w=M.useCallback(N=>{d.current?.contains(N.target)&&l(!0)},[]),x=M.useCallback(N=>{const D=N.relatedTarget;h.current&&D&&D instanceof Node&&(h.current.contains(D)||h.current===D)||l(!1)},[]),k=M.useCallback(()=>{l(!1)},[]);M.useEffect(()=>{if(!e||!o)return;const N=()=>{m()?(f(!0),d.current&&g.setReference(d.current)):f(!1)};return e.on("update",N),()=>{e.off("update",N)}},[e,o,m,g]),M.useEffect(()=>{o&&m()?(f(!0),d.current&&g.setReference(d.current)):f(!1)},[o,m,g]);const A=M.useCallback(()=>{if(f(!1),n){const N=n();if(typeof N=="number"){const D=e.state.doc.resolve(N+1),L=D.end(D.depth),z=e.schema.nodes.paragraph.create(),q=e.state.tr;q.insert(L,z);const j=L+1;q.setSelection(ce.create(q.doc,j)),e.view.dispatch(q),e.view.focus();return}}e.chain().focus().insertContent({type:"paragraph"}).run()},[e,n]);return!e||!e.isEditable?S.jsx(S.Fragment,{children:t}):S.jsxs(S.Fragment,{children:[S.jsx("div",{ref:N=>{d.current=N,i&&"current"in i&&(i.current=N)},onMouseEnter:w,onMouseLeave:x,onMouseOver:w,style:{position:"relative"},children:t}),c&&S.jsx(mp,{children:S.jsx("div",{ref:N=>{h.current=N,g.setFloating(N)},onMouseEnter:()=>l(!0),onMouseLeave:k,style:{...y,marginTop:0},...b(),className:"f-tiptap-paragraph-placeholder",children:S.jsxs("div",{className:"f-tiptap-paragraph-placeholder__div",onClick:A,children:[S.jsx(bp,{className:"f-tiptap-paragraph-placeholder__icon"}),pe(PV,"placeholder")]})})})]})};ga.displayName="HasParagraphPlaceholder";const FV=({editor:t,getPos:e})=>t?S.jsx(qo,{children:S.jsx(ga,{editor:t,getPos:e,target:"column",children:S.jsx(pa,{})})}):null,kh=st.create({name:"folioTiptapColumn",content:"block+",isolating:!0,addOptions(){return{HTMLAttributes:{class:"f-tiptap-column"}}},parseHTML(){return[{tag:"div.f-tiptap-column"}]},renderHTML({HTMLAttributes:t}){return["div",je(this.options.HTMLAttributes,t),0]},addNodeView(){return Zo(FV,{className:"node-folioTiptapColumn f-tiptap-column"})}}),wp=st.create({name:"folioTiptapColumns",group:"block",defining:!0,isolating:!0,allowGapCursor:!1,content:"folioTiptapColumn{1,}",draggable:!0,addOptions(){return{HTMLAttributes:{class:"f-tiptap-columns"}}},parseHTML(){return[{tag:"div.f-tiptap-columns"}]},renderHTML({HTMLAttributes:t}){return["div",je({class:"f-tiptap-columns f-tiptap-avoid-external-layout"},this.options.HTMLAttributes,t),0]},addCommands(){return{insertFolioTiptapColumns:()=>({tr:t,dispatch:e,editor:n})=>{const r=_I(n.schema,2);if(e){const i=t.selection.anchor+1;t.replaceSelectionWith(r).scrollIntoView().setSelection(ce.near(t.doc.resolve(i)))}return!0},addFolioTiptapColumnBefore:()=>({dispatch:t,state:e})=>Ag({dispatch:t,state:e,type:"addBefore"}),addFolioTiptapColumnAfter:()=>({dispatch:t,state:e})=>Ag({dispatch:t,state:e,type:"addAfter"}),deleteFolioTiptapColumn:()=>({dispatch:t,state:e})=>Ag({dispatch:t,state:e,type:"delete"})}},addKeyboardShortcuts(){return{Tab:()=>rw({state:this.editor.state,dispatch:this.editor.view.dispatch,type:"after"}),"Shift-Tab":()=>rw({state:this.editor.state,dispatch:this.editor.view.dispatch,type:"before"})}}});function $V(t,e=null,n=null){if(e)return t.createChecked({},e);if(n){const r=[n.nodes.heading.createChecked({level:2})];return t.createChecked({},r)}return t.createAndFill({})}function qV(t){if(t.cached.pagesNodeTypes)return t.cached.pagesNodeTypes;const e={pages:t.nodes.folioTiptapPages,page:t.nodes.folioTiptapPage};return t.cached.pagesNodeTypes=e,e}function ZV(t,e,n=null){const r=qV(t),i=[];for(let o=0;o<e;o+=1){const l=$V(r.page,n,t);l&&i.push(l)}return r.pages.createChecked({},i)}function Ug({state:t,dispatch:e,type:n}){const r=Mt(o=>o.type.name===Tu.name)(t.selection),i=Mt(o=>o.type.name===Bo.name)(t.selection);if(!r||!i)return!1;if(e){const o=r.node;let l=null;if(o.content.forEach((g,y,b)=>{if(l===null&&g===i.node){l=b;return}}),l===null)return console.warn("Current page not found in pages node"),!1;const c=o.toJSON();let f=l;if(n==="delete"){if(c.content.length<=2){const x=[];c.content.forEach(A=>{A.content&&A.content.length>0&&x.push(...A.content)}),x.length===0&&x.push({type:"paragraph"});const k=t.tr;return k.replaceWith(r.pos,r.pos+r.node.nodeSize,x.map(A=>jn.fromJSON(t.schema,A))),k.setSelection(ce.near(k.doc.resolve(r.pos+1))),e(k),!0}const y=c.content[l].content||[],b=l>0?l-1:l+1,w=c.content[b];y.length>0&&(w.content||(w.content=[]),w.content.push(...y)),c.content.splice(l,1),f=l>0?l-1:0}else f=n==="addBefore"?l:l+1,c.content.splice(f,0,{type:Bo.name,content:[{type:"heading",attrs:{level:2}}]});const d=jn.fromJSON(t.schema,c);let h=r.pos;d.content.forEach((g,y,b)=>{b<f&&(h+=g.nodeSize)});const m=t.tr;m.replaceWith(r.pos,r.pos+r.node.nodeSize,d).setSelection(ce.near(m.doc.resolve(h))),e(m)}return!0}function Uw({state:t,dispatch:e,type:n}){const r=Mt(o=>o.type.name===Tu.name)(t.selection),i=Mt(o=>o.type.name===Bo.name)(t.selection);if(r&&i){const o=r.node;let l=null;if(o.content.forEach((w,x,k)=>{if(l===null&&w===i.node){l=k;return}}),l===null)return console.warn("Current page not found in pages node"),!1;let c;if(n==="up"){if(l===0)return!1;c=l-1}else{if(l===o.childCount-1)return!1;c=l+1}const f=o.content.maybeChild(c);if(!f||f.type.name!==Bo.name)return!1;const d=o.toJSON(),h=d.content[l],m=d.content[c];d.content[l]=m,d.content[c]=h;const g=jn.fromJSON(t.schema,d);let y=r.pos;g.content.forEach((w,x,k)=>{k<c&&(y+=w.nodeSize)});const b=t.tr;return b.replaceWith(r.pos,r.pos+r.node.nodeSize,g).setSelection(ce.near(b.doc.resolve(y))),e&&e(b),!0}return!1}function l8({state:t,dispatch:e,node:n,getPos:r}){if(e&&n.type.name===Bo.name){const i=n.attrs.collapsed||!1,o=t.tr,l=r();return typeof l!="number"?!1:(o.setNodeMarkup(l,void 0,{...n.attrs,collapsed:!i}),e(o),!0)}return!1}function Pw({state:t,dispatch:e,type:n}){const r=Mt(o=>o.type.name===Tu.name)(t.selection),i=Mt(o=>o.type.name===Bo.name)(t.selection);if(e&&r&&i){const o=r.node,l=i.node;let c=null;if(o.content.forEach((m,g,y)=>{if(c===null&&m===l){c=y;return}}),c===null)return console.warn("Current page not found in pages node"),!1;let f=0;n==="before"?f=(c-1+o.childCount)%o.childCount:f=(c+1)%o.childCount;let d=r.pos;o.content.forEach((m,g,y)=>{y<f&&(d+=m.nodeSize)});const h=t.tr;return h.setSelection(ce.near(h.doc.resolve(d))),e(h),!0}return!1}const KV={cs:{missingHeading:"Chyb titulek strnky"},en:{missingHeading:"Missing page heading"}},GV=({editor:t,getPos:e})=>{const n=e();if(typeof n!="number")return;const r=t.schema.nodes.heading.create({level:2}),i=n+1,o=t.state.tr;o.insert(i,r);const l=i+1;o.setSelection(ce.create(o.doc,l)),t.view.dispatch(o)},YV=({event:t,editor:e,getPos:n})=>{t.preventDefault(),t.stopPropagation();const r=n();if(typeof r!="number")return!1;const i=e.state.doc.resolve(r+1),o=i.end(i.depth),l=e.state.tr.setSelection(ce.create(e.state.doc,o-1));e.view.dispatch(l)},WV=({node:t,getPos:e,editor:n})=>{const r=M.useMemo(()=>m9(t,h=>h.type.name==="heading"),[t]),i=M.useMemo(()=>r.find(h=>h.node.content.size>0),[r]);if(!n)return null;const o=()=>{l8({state:n.state,dispatch:n.view.dispatch,node:t,getPos:e})};let l="f-tiptap-page";const c=!i,f=r.length===0;c&&(l+=" f-tiptap-page--invalid"),t.attrs.collapsed&&(l+=" f-tiptap-page--collapsed");const d=t.attrs.collapsed?{"data-collapsed":"true"}:{};return S.jsxs(qo,{className:l,...d,children:[S.jsx("div",{className:"f-tiptap-page__toggle-wrap",onClick:o,children:S.jsx("div",{className:"f-tiptap-page__toggle",children:t.attrs.collapsed?S.jsx(Kx,{className:"f-tiptap-page__toggle-ico"}):S.jsx(Gx,{className:"f-tiptap-page__toggle-ico"})})}),S.jsxs("div",{className:"f-tiptap-page__content",children:[f?S.jsx("h2",{className:"f-tiptap-page__title-placeholder is-empty","data-placeholder":pe(KV,"missingHeading"),onClick:()=>{GV({editor:n,getPos:e})},children:S.jsx("br",{className:"ProseMirror-trailingBreak"})}):null,S.jsx(ga,{editor:n,getPos:e,target:"page",children:S.jsx(pa,{})})]}),S.jsx("span",{className:"f-tiptap-page__content-click-trigger",onClick:h=>YV({event:h,editor:n,getPos:e})})]})},Bo=st.create({name:"folioTiptapPage",content:"block+",isolating:!0,addAttributes(){return{collapsed:{default:!1,parseHTML:t=>t.getAttribute("data-collapsed")==="true",renderHTML:t=>t.collapsed?{"data-collapsed":"true"}:{}}}},addOptions(){return{HTMLAttributes:{class:"f-tiptap-page"}}},parseHTML(){return[{tag:"div.f-tiptap-page"}]},renderHTML({HTMLAttributes:t}){return["div",je(this.options.HTMLAttributes,t),0]},addNodeView(){return Zo(WV)}}),XV=({node:t,getPos:e,editor:n})=>(M.useEffect(()=>{if(!n)return;const r=()=>{const i=Mt(o=>o.type.name==="folioTiptapPage")(n.state.selection);i&&i.node.attrs.collapsed&&l8({state:n.state,dispatch:n.view.dispatch,node:i.node,getPos:()=>i.pos})};return n.on("selectionUpdate",r),()=>{n.off("selectionUpdate",r)}},[n,t,e]),n?S.jsx(qo,{className:"f-tiptap-pages__view",children:S.jsx(pa,{className:"f-tiptap-pages__content"})}):null),Fw={cs:{label:"Strnkovan obsah"},en:{label:"Paged content"}},Tu=st.create({name:"folioTiptapPages",group:"block",defining:!0,isolating:!0,allowGapCursor:!1,content:"folioTiptapPage{2,}",draggable:!0,addOptions(){return{HTMLAttributes:{class:"f-tiptap-pages"}}},parseHTML(){return[{tag:"div.f-tiptap-pages"}]},renderHTML({HTMLAttributes:t}){return["div",je({class:"f-tiptap-pages"},this.options.HTMLAttributes,t),0]},addCommands(){return{insertFolioTiptapPages:()=>({tr:t,dispatch:e,editor:n})=>{const r=ZV(n.schema,2);if(e){const i=t.selection.anchor+1;t.replaceSelectionWith(r).scrollIntoView().setSelection(ce.near(t.doc.resolve(i)))}return!0},addFolioTiptapPageBefore:()=>({dispatch:t,state:e})=>Ug({dispatch:t,state:e,type:"addBefore"}),addFolioTiptapPageAfter:()=>({dispatch:t,state:e})=>Ug({dispatch:t,state:e,type:"addAfter"}),deleteFolioTiptapPage:()=>({dispatch:t,state:e})=>Ug({dispatch:t,state:e,type:"delete"}),moveFolioTiptapPageUp:()=>({dispatch:t,state:e})=>Uw({state:e,dispatch:t,type:"up"}),moveFolioTiptapPageDown:()=>({dispatch:t,state:e})=>Uw({state:e,dispatch:t,type:"down"})}},addNodeView(){return Zo(XV,{className:"node-folioTiptapPages f-tiptap-pages"})},addKeyboardShortcuts(){return{Tab:()=>Pw({state:this.editor.state,dispatch:this.editor.view.dispatch,type:"after"}),"Shift-Tab":()=>Pw({state:this.editor.state,dispatch:this.editor.view.dispatch,type:"before"})}}}),wc={cs:{addFolioTiptapPageBefore:"Pidat strnku ped",moveFolioTiptapPageUp:"Posunout strnku nahoru",addFolioTiptapPageAfter:"Pidat strnku za",moveFolioTiptapPageDown:"Posunout strnku dol",deleteFolioTiptapPage:"Odstranit strnku"},en:{addFolioTiptapPageBefore:"Add page before",moveFolioTiptapPageUp:"Move page up",addFolioTiptapPageAfter:"Add page after",moveFolioTiptapPageDown:"Move page down",deleteFolioTiptapPage:"Remove page"}},JV={pluginKey:"folioTiptapPagesBubbleMenu",priority:1,shouldShow:({editor:t})=>t.isActive(Tu.name),disabledKeys:({editor:t})=>{const e=[];return t.can().moveFolioTiptapPageUp()||e.push("moveFolioTiptapPageUp"),t.can().moveFolioTiptapPageDown()||e.push("moveFolioTiptapPageDown"),e},items:[[{key:"addFolioTiptapPageBefore",title:pe(wc,"addFolioTiptapPageBefore"),icon:Xx,command:({editor:t})=>{t.chain().focus().addFolioTiptapPageBefore().run()}},{key:"moveFolioTiptapPageUp",title:pe(wc,"moveFolioTiptapPageUp"),icon:gy,command:({editor:t})=>{t.chain().focus().moveFolioTiptapPageUp().run()}}],[{key:"addFolioTiptapPageAfter",title:pe(wc,"addFolioTiptapPageAfter"),icon:Wx,command:({editor:t})=>{t.chain().focus().addFolioTiptapPageAfter().run()}},{key:"moveFolioTiptapPageDown",title:pe(wc,"moveFolioTiptapPageDown"),icon:my,command:({editor:t})=>{t.chain().focus().moveFolioTiptapPageDown().run()}}],[{key:"deleteFolioTiptapPage",title:pe(wc,"deleteFolioTiptapPage"),icon:Cp,command:({editor:t})=>{t.chain().focus().deleteFolioTiptapPage().run()}}]]},QV=Fe.create({name:"folioTiptapPagesExtension"}),ej=t=>t?[{title:{cs:Fw.cs.label,en:Fw.en.label},icon:tV,key:"folioTiptapPages",command:({chain:n})=>{n.insertFolioTiptapPages()}}]:[],tj=qL.extend({name:"folioTiptapStyledParagraph",parseHTML(){const t=this.options.variants||[],e=r=>typeof r=="string"?!1:{variant:r.getAttribute("data-f-tiptap-styled-paragraph-variant")||null},n=[{tag:"p.f-tiptap-styled-paragraph",getAttrs:e}];return t.forEach(r=>{r.tag&&r.tag!=="p"&&n.push({tag:`${r.tag}.f-tiptap-styled-paragraph`,getAttrs:e})}),n},renderHTML({HTMLAttributes:t}){const e=this.options.variants||[],n=t["data-f-tiptap-styled-paragraph-variant"],r=e.find(f=>f.variant===n),i=r?.tag||"p",o="f-tiptap-styled-paragraph",l=r?.class_name,c=l?`${o} ${l}`:o;return[i,{...t,class:c},0]},addOptions(){return{variants:[],variantCommands:[]}},addAttributes(){return{variant:{default:null,parseHTML:t=>t.getAttribute("data-f-tiptap-styled-paragraph-variant"),renderHTML:t=>({"data-f-tiptap-styled-paragraph-variant":t.variant})}}}}),nj=t=>{const e=(r,i)=>{switch(r){case"arrow-up":return QB;case"arrow-down":return XB;case"heading":return vV;case"message-circle-question-mark":return xV}switch(i){case"h1":return Fx;case"h2":return by;case"h3":return vy;case"h4":return yy;case"h5":return Ux;case"h6":return $x;default:return IV}},n=t.map(r=>({title:r.title,icon:e(r.icon,r.tag),key:`styledParagraphVariant-${r.variant}`,command:({chain:o})=>{const l={variant:r.variant};o.setNode("folioTiptapStyledParagraph",l)}}));return n.sort((r,i)=>{const o=r.title[document.documentElement.lang]||r.title.en,l=i.title[document.documentElement.lang]||i.title.en;return o.localeCompare(l)}),n},rj=({node:t,editor:e,getPos:n})=>{if(!e)return null;const r=t.attrs.variant,i="node-folioTiptapStyledWrap f-tiptap-styled-wrap f-tiptap-avoid-external-layout",o=r?{"data-f-tiptap-styled-wrap-variant":r}:{};return S.jsx(qo,{className:i,...o,children:S.jsx(ga,{editor:e,getPos:n,target:"styled-wrap",children:S.jsx(pa,{})})})},ij=st.create({name:"folioTiptapStyledWrap",defining:!1,isolating:!0,allowGapCursor:!1,content:"block+",group:"block",parseHTML(){return[{tag:"div.f-tiptap-styled-wrap",getAttrs:t=>typeof t=="string"?!1:{variant:t.getAttribute("data-f-tiptap-styled-wrap-variant")||null}}]},renderHTML({HTMLAttributes:t}){return["div",{...t,class:"f-tiptap-styled-wrap f-tiptap-avoid-external-layout"},0]},addOptions(){return{variantCommands:[]}},addAttributes(){return{variant:{default:null,parseHTML:t=>t.getAttribute("data-f-tiptap-styled-wrap-variant"),renderHTML:t=>({"data-f-tiptap-styled-wrap-variant":t.variant})}}},addNodeView(){return Zo(rj)}}),oj=t=>{const e=t.map(n=>({title:n.title,icon:rV,key:`styledWrapVariant-${n.variant}`,command:({chain:i})=>{i.insertContent({type:"folioTiptapStyledWrap",attrs:{variant:n.variant},content:[{type:"paragraph",content:[]}]})}}));return e.sort((n,r)=>{const i=n.title[document.documentElement.lang]||n.title.en,o=r.title[document.documentElement.lang]||r.title.en;return i.localeCompare(o)}),e},sj=({editor:t,getPos:e})=>t?S.jsx(qo,{children:S.jsx(ga,{editor:t,getPos:e,target:"float-aside",children:S.jsx(pa,{})})}):null,a8=st.create({name:"folioTiptapFloatAside",isolating:!0,content:"block+",addOptions(){return{HTMLAttributes:{class:"f-tiptap-float__aside"}}},parseHTML(){return[{tag:"aside.f-tiptap-float__aside"},{tag:"div.f-tiptap-float__aside"}]},renderHTML({HTMLAttributes:t}){return["aside",je({class:"f-tiptap-float__aside"},this.options.HTMLAttributes,t),0]},addNodeView(){return Zo(sj,{as:"aside",className:"node-folioTiptapFloatAside f-tiptap-float__aside"})}}),lj=({tr:t,dispatch:e,editor:n})=>{const r=[n.schema.nodes.folioTiptapFloatAside.createAndFill({}),n.schema.nodes.folioTiptapFloatMain.createAndFill({})],i=n.schema.nodes.folioTiptapFloat.createChecked({},r);if(e){const o=t.selection.anchor+1;t.replaceSelectionWith(i).scrollIntoView().setSelection(ce.near(t.doc.resolve(o))),e(t)}return!0},aj=({attrs:t,tr:e,dispatch:n,state:r})=>{const i=Mt(c=>c.type.name===la.name)(r.selection);if(!i)return!1;let o=!1;const l={side:i.node.attrs.side||"left",size:i.node.attrs.size||"medium"};return t.side&&t.side!==l.side&&["left","right"].includes(t.side)&&(l.side=t.side,o=!0),t.size&&t.size!==l.size&&["small","medium","large"].includes(t.size)&&(l.size=t.size,o=!0),o?(n&&(e.setNodeMarkup(i.pos,void 0,l),n(e)),!0):!1};function $w({state:t,dispatch:e}){const n=Mt(r=>r.type.name===la.name)(t.selection);if(e&&n){if(Mt(l=>l.type.name==="listItem")(t.selection))return!1;const i=Mt(l=>l.type.name===a8.name)(t.selection),o=t.tr;if(i){const l=i.pos+i.node.nodeSize;o.setSelection(ce.near(o.doc.resolve(l)))}else{const l=n.pos+1;o.setSelection(ce.near(o.doc.resolve(l)))}return e(o),!0}return!1}function cj({tr:t,dispatch:e,state:n}){const r=Mt(i=>i.type.name===la.name)(n.selection);if(!r)return!1;if(e){const i=[];r.node.toJSON().content.forEach(o=>{o.content&&o.content.length>0&&o.content.forEach(l=>{if(l){if(l.type==="paragraph"&&(!l.content||l.content.length===0))return;i.push(l)}})}),i.length===0&&i.push({type:"paragraph"}),t.replaceWith(r.pos,r.pos+r.node.nodeSize,i.map(o=>jn.fromJSON(n.schema,o))),t.setSelection(ce.near(t.doc.resolve(r.pos+1))),e(t)}return!0}const la=st.create({name:"folioTiptapFloat",group:"block",defining:!0,isolating:!0,allowGapCursor:!1,content:"folioTiptapFloatAside{1} folioTiptapFloatMain{1}",draggable:!1,addOptions(){return{HTMLAttributes:{class:"f-tiptap-float"}}},addAttributes(){return{side:{default:"left",parseHTML:t=>t.getAttribute("data-f-tiptap-float-side")||"left"},size:{default:"medium",parseHTML:t=>t.getAttribute("data-f-tiptap-float-size")||"medium"}}},parseHTML(){return[{tag:"div.f-tiptap-float",getAttrs:t=>typeof t=="string"?!1:{side:t.getAttribute("data-f-tiptap-float-side")||"left",size:t.getAttribute("data-f-tiptap-float-size")||"medium"}}]},renderHTML({HTMLAttributes:t}){return["div",je({class:"f-tiptap-float f-tiptap-avoid-external-layout","data-f-tiptap-float-side":t.side,"data-f-tiptap-float-size":t.size},this.options.HTMLAttributes,t),0]},addCommands(){return{insertFolioTiptapFloat:()=>({tr:t,dispatch:e,editor:n})=>lj({tr:t,dispatch:e,editor:n}),cancelFolioTiptapFloat:()=>({tr:t,dispatch:e,state:n,editor:r})=>cj({tr:t,dispatch:e,state:n}),setFolioTiptapFloatAttributes:t=>({tr:e,dispatch:n,state:r,editor:i})=>aj({attrs:t,tr:e,dispatch:n,state:r})}},addKeyboardShortcuts(){return{Tab:()=>$w({state:this.editor.state,dispatch:this.editor.view.dispatch}),"Shift-Tab":()=>$w({state:this.editor.state,dispatch:this.editor.view.dispatch})}}}),uj=({editor:t,getPos:e})=>t?S.jsx(qo,{children:S.jsx(ga,{editor:t,getPos:e,target:"float-main",children:S.jsx(pa,{})})}):null,fj=st.create({name:"folioTiptapFloatMain",isolating:!0,content:"block+",addOptions(){return{HTMLAttributes:{class:"f-tiptap-float__main"}}},parseHTML(){return[{tag:"div.f-tiptap-float__main"}]},renderHTML({HTMLAttributes:t}){return["div",je({class:"f-tiptap-float__main"},this.options.HTMLAttributes,t),0]},addNodeView(){return Zo(uj,{as:"main",className:"node-folioTiptapFloatMain f-tiptap-float__main"})}}),Hl={cs:{setFloatSideToLeft:"Obtkan obsah - vlevo",setFloatSideToRight:"Obtkan obsah - vpravo",cancelFloat:"Zruit obtkn obsahu",setFloatSizeToSmall:"Obtkan obsah - zk",setFloatSizeToMedium:"Obtkan obsah - stedn",setFloatSizeToLarge:"Obtkan obsah - irok"},en:{setFloatSideToLeft:"Float content - left",setFloatSideToRight:"Float content - right",cancelFloat:"Cancel float content",setFloatSizeToSmall:"Float content - small",setFloatSizeToMedium:"Float content - medium",setFloatSizeToLarge:"Float content - large"}},dj={pluginKey:"folioTiptapFloatBubbleMenu",priority:1,shouldShow:({editor:t})=>t.isActive(la.name),activeKeys:({editor:t})=>{const e=Mt(r=>r.type.name===la.name)(t.state.selection);if(!e)return[];const n=[];return e.node.attrs.side==="right"?n.push("setFloatSideToRight"):n.push("setFloatSideToLeft"),e.node.attrs.size==="small"?n.push("setFloatSizeToSmall"):e.node.attrs.size==="large"?n.push("setFloatSizeToLarge"):n.push("setFloatSizeToMedium"),n},items:[[{key:"setFloatSideToLeft",title:pe(Hl,"setFloatSideToLeft"),icon:Nx,command:({editor:t})=>{t.chain().focus().setFolioTiptapFloatAttributes({side:"left"}).run()}},{key:"cancelFloat",title:pe(Hl,"cancelFloat"),icon:Qh,command:({editor:t})=>{t.chain().focus().cancelFolioTiptapFloat().run()}},{key:"setFloatSideToRight",title:pe(Hl,"setFloatSideToRight"),icon:Ox,command:({editor:t})=>{t.chain().focus().setFolioTiptapFloatAttributes({side:"right"}).run()}}],[{key:"setFloatSizeToSmall",title:pe(Hl,"setFloatSizeToSmall"),icon:nS,command:({editor:t})=>{t.chain().focus().setFolioTiptapFloatAttributes({size:"small"}).run()}},{key:"setFloatSizeToMedium",title:pe(Hl,"setFloatSizeToMedium"),icon:tS,command:({editor:t})=>{t.chain().focus().setFolioTiptapFloatAttributes({size:"medium"}).run()}},{key:"setFloatSizeToLarge",title:pe(Hl,"setFloatSizeToLarge"),icon:eS,command:({editor:t})=>{t.chain().focus().setFolioTiptapFloatAttributes({size:"large"}).run()}}]]},W0="f-tiptap-invalid-node",hj={cs:{message:"Tento obsah nebude veejn zobrazen. Mete ho odstranit."},en:{message:"This content will not be publicly displayed. You can remove it."}},pj=t=>{const{node:e}=t;return S.jsx(qo,{className:W0,"data-node-string":JSON.stringify(e.attrs.invalidNodeHash),children:S.jsx(My,{invalidNodeHash:e&&e.attrs&&e.attrs.invalidNodeHash,message:pe(hj,"message")})})},mj=st.create({name:"folioTiptapInvalidNode",group:"block",draggable:!0,selectable:!0,atom:!0,code:!0,isolating:!0,renderHTML({HTMLAttributes:t}){return["div",{...t,class:W0},0]},addAttributes(){return{invalidNodeHash:{default:{},parseHTML:t=>JSON.parse(t.getAttribute("data-node-string")||"{}"),renderHTML:t=>({"data-node-string":JSON.stringify(t.invalidNodeHash)})}}},addNodeView(){return Zo(pj)},parseHTML(){return[{tag:`div.${W0}`,getAttrs:t=>typeof t=="string"?!1:{invalidNodeHash:(()=>{try{return JSON.parse(t.getAttribute("data-node-string")||"{}")}catch(e){return console.error("Error parsing invalidNodeHash:",e),{}}})()}}]}}),gj={title:{cs:"Bodov seznam",en:"Bullet List"},icon:Cy,key:"bulletList",command:({chain:t})=>{t.toggleBulletList()}},yj={title:{cs:"Sloupce",en:"Columns"},icon:hV,key:"folioTiptapColumns",command:({chain:t})=>{t.insertFolioTiptapColumns({count:2})}},vj={title:{cs:"Obtkan obsah",en:"Float content"},icon:jx,key:"folioTiptapFloat",command:({chain:t})=>{t.insertFolioTiptapFloat()}},bj={title:{cs:"Nadpis H4",en:"Heading H4"},icon:yy,key:"heading-4",keymap:"####",command:({chain:t})=>{t.setNode("heading",{level:4})}},Cj={title:{cs:"Nadpis H3",en:"Heading H3"},icon:vy,key:"heading-3",keymap:"###",command:({chain:t})=>{t.setNode("heading",{level:3})}},wj={title:{cs:"Nadpis H2",en:"Heading H2"},icon:by,key:"heading-2",keymap:"##",command:({chain:t})=>{t.setNode("heading",{level:2})}},c8={title:{cs:"Oddlova",en:"Delimiter"},icon:TV,key:"horizontalRule",hideInToolbarDropdown:!0,command:({chain:t})=>{t.insertContent({type:"horizontalRule"})}},xj={title:{cs:"slovan seznam",en:"Ordered List"},icon:Zx,key:"orderedList",command:({chain:t})=>{t.toggleOrderedList()}},Sj={title:{cs:"Odstavec",en:"Paragraph"},icon:AV,key:"paragraph",dontShowAsActiveInCollapsedToolbar:!0,command:({chain:t})=>{t.setNode("paragraph")}},Tj={title:{cs:"Tabulka",en:"Table"},icon:Ty,key:"table",command:({chain:t})=>{t.insertTable({rows:2,cols:2,withHeaderRow:!0})}},kj={title:{cs:"Zarovnat doprosted",en:"Align center"},icon:Ax,key:"align-center",command:({chain:t})=>{t.setTextAlign("center")}},Mj={title:{cs:"Zarovnat doleva",en:"Align left"},icon:py,key:"align-left",command:({chain:t})=>{t.setTextAlign("left")}},Ej={title:{cs:"Zarovnat doprava",en:"Align right"},icon:Rx,key:"align-right",command:({chain:t})=>{t.setTextAlign("right")}},Aj={title:{cs:"Kurzva",en:"Italic"},icon:ep,key:"italic",command:({chain:t})=>{t.toggleMark("italic")}},Rj={title:{cs:"Podtren",en:"Underline"},icon:ky,key:"underline",command:({chain:t})=>{t.toggleMark("underline")}},Nj={title:{cs:"Horn index",en:"Superscript"},icon:Sy,key:"superscript",command:({chain:t})=>{t.toggleMark("superscript")}},Oj={title:{cs:"Doln index",en:"Subscript"},icon:xy,key:"subscript",command:({chain:t})=>{t.toggleMark("subscript")}},Dj={title:{cs:"Pekrtnut",en:"Strikethrough"},icon:wy,key:"strike",command:({chain:t})=>{t.toggleMark("strike")}},Py={title:{cs:"Seznamy",en:"Lists"},key:"lists",icon:Cy,commands:[gj,xj]},Lj={title:{cs:"Zarovnn",en:"Text align"},key:"textAlign",icon:py,commands:[Mj,kj,Ej]},_j={title:{cs:"Dekorace textu",en:"Text Decorations"},key:"textDecorations",icon:ep,commands:[Aj,Rj,Dj,Nj,Oj]},Hj=t=>{const e=t.map(n=>({title:n.title,icon:Vw,key:`folioTiptapNode-${n.type}`,command:()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur(),window.parent.postMessage({type:"f-tiptap-slash-command:selected",attrs:{type:n.type}},"*")}}));return e.sort((n,r)=>{const i=n.title[document.documentElement.lang]||n.title.en,o=r.title[document.documentElement.lang]||r.title.en;return i.localeCompare(o)}),{title:{cs:"Bloky",en:"Blocks"},key:"folioTiptapNodes",icon:Vw,commands:e}},Ij=({folioTiptapStyledWrapCommands:t,folioTiptapPagesCommands:e})=>({title:{cs:"Rozloen",en:"Layouts"},key:"layouts",icon:Ty,commands:[Tj,yj,vj,...t,...e,c8]}),zj=({folioTiptapStyledParagraphCommands:t,folioTiptapHeadingLevels:e})=>{const n=[];return e&&(e.includes(2)&&n.push(wj),e.includes(3)&&n.push(Cj),e.includes(4)&&n.push(bj)),e.length===1&&(n[0].title={cs:"Mezititulek",en:"Title"}),{title:{cs:"Formt textu",en:"Text format"},key:"textStyles",icon:Px,commands:[Sj,...n,...t]}};function Bj(t){var e;const{char:n,allowSpaces:r,allowToIncludeChar:i,allowedPrefixes:o,startOfLine:l,$position:c}=t,f=r&&!i,d=cD(n),h=new RegExp(`\\s${d}$`),m=l?"^":"",g=i?"":d,y=f?new RegExp(`${m}${d}.*?(?=\\s${g}|$)`,"gm"):new RegExp(`${m}(?:^)?${d}[^\\s${g}]*`,"gm"),b=((e=c.nodeBefore)==null?void 0:e.isText)&&c.nodeBefore.text;if(!b)return null;const w=c.pos-b.length,x=Array.from(b.matchAll(y)).pop();if(!x||x.input===void 0||x.index===void 0)return null;const k=x.input.slice(Math.max(0,x.index-1),x.index),A=new RegExp(`^[${o?.join("")}\0]?$`).test(k);if(o!==null&&!A)return null;const N=w+x.index;let D=N+x[0].length;return f&&h.test(b.slice(D-1,D+1))&&(x[0]+=" ",D+=1),N<c.pos&&D>=c.pos?{range:{from:N,to:D},query:x[0].slice(n.length),text:x[0]}:null}var Vj=new Pe("suggestion");function jj({pluginKey:t=Vj,editor:e,char:n="@",allowSpaces:r=!1,allowToIncludeChar:i=!1,allowedPrefixes:o=[" "],startOfLine:l=!1,decorationTag:c="span",decorationClass:f="suggestion",decorationContent:d="",decorationEmptyClass:h="is-empty",command:m=()=>null,items:g=()=>[],render:y=()=>({}),allow:b=()=>!0,findSuggestionMatch:w=Bj}){let x;const k=y?.(),A=()=>{const z=e.state.selection.$anchor.pos,q=e.view.coordsAtPos(z),{top:j,right:ee,bottom:$,left:re}=q;try{return new DOMRect(re,j,ee-re,$-j)}catch{return null}},N=(z,q)=>q?()=>{const j=t.getState(e.state),ee=j?.decorationId,$=z.dom.querySelector(`[data-decoration-id="${ee}"]`);return $?.getBoundingClientRect()||null}:A;function D(z,q){var j;try{const $=t.getState(z.state),re=$?.decorationId?z.dom.querySelector(`[data-decoration-id="${$.decorationId}"]`):null,se={editor:e,range:$?.range||{from:0,to:0},query:$?.query||null,text:$?.text||null,items:[],command:ue=>m({editor:e,range:$?.range||{from:0,to:0},props:ue}),decorationNode:re,clientRect:N(z,re)};(j=k?.onExit)==null||j.call(k,se)}catch{}const ee=z.state.tr.setMeta(q,{exit:!0});z.dispatch(ee)}const L=new Be({key:t,view(){return{update:async(z,q)=>{var j,ee,$,re,se,ue,G;const P=(j=this.key)==null?void 0:j.getState(q),H=(ee=this.key)==null?void 0:ee.getState(z.state),V=P.active&&H.active&&P.range.from!==H.range.from,I=!P.active&&H.active,ie=P.active&&!H.active,R=!I&&!ie&&P.query!==H.query,Y=I||V&&R,te=R||V,W=ie||V&&R;if(!Y&&!te&&!W)return;const ae=W&&!Y?P:H,de=z.dom.querySelector(`[data-decoration-id="${ae.decorationId}"]`);x={editor:e,range:ae.range,query:ae.query,text:ae.text,items:[],command:fe=>m({editor:e,range:ae.range,props:fe}),decorationNode:de,clientRect:N(z,de)},Y&&(($=k?.onBeforeStart)==null||$.call(k,x)),te&&((re=k?.onBeforeUpdate)==null||re.call(k,x)),(te||Y)&&(x.items=await g({editor:e,query:ae.query})),W&&((se=k?.onExit)==null||se.call(k,x)),te&&((ue=k?.onUpdate)==null||ue.call(k,x)),Y&&((G=k?.onStart)==null||G.call(k,x))},destroy:()=>{var z;x&&((z=k?.onExit)==null||z.call(k,x))}}},state:{init(){return{active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}},apply(z,q,j,ee){const{isEditable:$}=e,{composing:re}=e.view,{selection:se}=z,{empty:ue,from:G}=se,P={...q},H=z.getMeta(t);if(H&&H.exit)return P.active=!1,P.decorationId=null,P.range={from:0,to:0},P.query=null,P.text=null,P;if(P.composing=re,$&&(ue||e.view.composing)){(G<q.range.from||G>q.range.to)&&!re&&!q.composing&&(P.active=!1);const V=w({char:n,allowSpaces:r,allowToIncludeChar:i,allowedPrefixes:o,startOfLine:l,$position:se.$from}),I=`id_${Math.floor(Math.random()*4294967295)}`;V&&b({editor:e,state:ee,range:V.range,isActive:q.active})?(P.active=!0,P.decorationId=q.decorationId?q.decorationId:I,P.range=V.range,P.query=V.query,P.text=V.text):P.active=!1}else P.active=!1;return P.active||(P.decorationId=null,P.range={from:0,to:0},P.query=null,P.text=null),P}},props:{handleKeyDown(z,q){var j,ee,$,re;const{active:se,range:ue}=L.getState(z.state);if(!se)return!1;if(q.key==="Escape"||q.key==="Esc"){const P=L.getState(z.state),H=(j=x?.decorationNode)!=null?j:null,V=H??(P?.decorationId?z.dom.querySelector(`[data-decoration-id="${P.decorationId}"]`):null);if(((ee=k?.onKeyDown)==null?void 0:ee.call(k,{view:z,event:q,range:P.range}))||!1)return!0;const ie={editor:e,range:P.range,query:P.query,text:P.text,items:[],command:R=>m({editor:e,range:P.range,props:R}),decorationNode:V,clientRect:V?()=>V.getBoundingClientRect()||null:null};return($=k?.onExit)==null||$.call(k,ie),D(z,t),!0}return((re=k?.onKeyDown)==null?void 0:re.call(k,{view:z,event:q,range:ue}))||!1},decorations(z){const{active:q,range:j,decorationId:ee,query:$}=L.getState(z);if(!q)return null;const re=!$?.length,se=[f];return re&&se.push(h),Xe.create(z.doc,[zt.inline(j.from,j.to,{nodeName:c,class:se.join(" "),"data-decoration-id":ee,"data-decoration-content":d})])}}});return L}var Uj=jj;const Pj=Fe.create({name:"folioTiptapCommands",addOptions(){return{suggestion:{char:"/",command:({editor:t,range:e,props:n})=>{const r=t.chain();r.focus(),r.deleteRange(e),n.command({chain:r}),r.run()}}}},addProseMirrorPlugins(){return[Uj({editor:this.editor,...this.options.suggestion})]},addCommands(){return{triggerFolioTiptapCommand:t=>({state:e,dispatch:n})=>{const r=t||e.selection.$from;if(!r)return console.error("Invalid resolved position"),!1;let i=r.node(1);i||(t?i=e.doc.nodeAt(t.pos):e.selection instanceof me&&(i=e.selection.node));let o=!0,l;i&&i.isLeaf?l=r.after(1)+i.nodeSize:i&&i.type.name==="paragraph"&&i.content.size===0?(o=!1,l=r.start(1)):l=r.after(1);const c=e.tr;if(o){const d=e.schema.nodes.paragraph.create({},[e.schema.text("/")]);c.insert(l,d)}else{const d=e.schema.text("/");c.insert(l,d)}const f=l+1+(o?1:0);return c.setSelection(ce.create(c.doc,f)),n&&n(c),!0}}}}),qw={cs:{defaultAction:"Napsat /{query} do obsahu",defaultBlankAction:"Zavt nabdku"},en:{defaultAction:"Type /{query} to content",defaultBlankAction:"Close menu"}};class Fj extends ht.Component{constructor(e){super(e),this.state={selectedIndex:0}}onEscape(){this.props.command({title:"",normalizedTitle:"",icon:Cp,key:"commandListEscape",command:({chain:e})=>{this.props.query&&e.insertContent(`/${this.props.query} `)}})}onKeyDown({event:e}){return e.key==="ArrowUp"?(this.upHandler(),!0):e.key==="ArrowDown"||e.key==="Tab"?(this.downHandler(),!0):e.key==="Enter"?(this.enterHandler(),!0):!1}setSelectedIndex(e){this.setState({selectedIndex:e})}upHandler(){let e=this.state.selectedIndex-1;if(e<0){let n=0;this.props.items.forEach(r=>{n+=r.commandsForSuggestion.length}),e=n-1}this.setSelectedIndex(e)}downHandler(){let e=0;this.props.items.forEach(r=>{e+=r.commandsForSuggestion.length});let n=this.state.selectedIndex+1;n>=e&&(n=0),this.setSelectedIndex(n)}enterHandler(){let e=-1,n=null;this.props.items.forEach(r=>{n||r.commandsForSuggestion.forEach(i=>{n||(e+=1,e===this.state.selectedIndex&&(n=i))})}),n&&this.selectItem(n)}selectItem(e){e&&this.props.command(e)}componentDidUpdate(e){let n=0;e.items.forEach(i=>{n+=i.commandsForSuggestion.length});let r=0;this.props.items.forEach(i=>{r+=i.commandsForSuggestion.length}),r!==n&&this.setState({selectedIndex:0})}render(){let e=-1;return S.jsxs("div",{className:"f-tiptap-commands-list",children:[this.props.items.length>0?S.jsx("div",{className:"f-tiptap-commands-list__section f-tiptap-commands-list__section--scroll",children:this.props.items.map(n=>S.jsxs(ht.Fragment,{children:[S.jsx("div",{className:"f-tiptap-commands-list__section-heading",children:n.title}),S.jsx("ul",{className:"f-tiptap-commands-list__section-ul",children:n.commandsForSuggestion.map(r=>{e+=1;const i=r.icon,o=e;return S.jsx("li",{className:"f-tiptap-commands-list__section-li",children:S.jsx("button",{type:"button",className:"f-tiptap-commands-list__item f-tiptap-commands-list__item--active","data-selected":String(e===this.state.selectedIndex),onClick:()=>this.selectItem(r),onMouseOver:()=>this.setSelectedIndex(o),children:S.jsxs("span",{className:"f-tiptap-commands-list__item-inner",children:[i?S.jsx(i,{className:"f-tiptap-commands-list__item-icon"}):null,S.jsx("span",{className:"f-tiptap-commands-list__item-label",children:r.title}),S.jsx("span",{className:"f-tiptap-commands-list__item-keymap","data-keymap":r.keymap})]})})},`${n.title}-${r.title}`)})})]},n.title))}):null,S.jsx("div",{className:"f-tiptap-commands-list__section f-tiptap-commands-list__section--fallback",children:S.jsx("ul",{className:"f-tiptap-commands-list__section-ul",children:S.jsx("li",{className:"f-tiptap-commands-list__section-li",children:S.jsx("span",{className:"f-tiptap-commands-list__item f-tiptap-commands-list__item--fallback",children:S.jsxs("span",{className:"f-tiptap-commands-list__item-inner",children:[S.jsx("span",{className:"f-tiptap-commands-list__item-label",children:this.props.query?pe(qw,"defaultAction").replace("{query}",this.props.query):pe(qw,"defaultBlankAction")}),S.jsx("span",{className:"f-tiptap-commands-list__item-keymap",children:"esc"})]})})})})})]})}}class $j extends ht.Component{close(){console.log("close"),this.props.command({title:"",normalizedTitle:"",icon:Cp,key:"commandListBackdrop",command:({chain:e})=>{console.log("commandListBackdrop",this.props.query),this.props.query&&(console.log("insertContent"),e.insertContent(" "))}})}render(){return S.jsx("div",{className:"f-tiptap-commands-list-backdrop",onClick:()=>this.close()})}}const u8=t=>t.normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase(),f8=t=>({query:e})=>{const n=u8(e);return qj(t).map(r=>{const i=r.commandsForSuggestion.filter(o=>o.normalizedTitle.indexOf(n)!==-1);return i.length>0?{...r,commandsForSuggestion:i}:null}).filter(r=>r!==null)},qj=t=>{const e=document.documentElement.lang;return t.map(n=>{let r;return typeof n.title=="string"?r=n.title:r=n.title[e]||n.title.en,{title:r,key:n.key,commandsForSuggestion:n.commands.map(i=>{let o;return typeof i.title=="string"?o=i.title:o=i.title[e]||i.title.en,{...i,title:o,normalizedTitle:u8(o)}})}})},d8={allowSpaces:!1,render:()=>{let t=null,e=null;function n(r,i){if(!t||!t.element)return;const o={getBoundingClientRect(){return r}};let l="bottom-start";i==="update"&&t&&t.element&&t.element.dataset.placement&&(l=t.element.dataset.placement),Cu(o,t.element,{placement:l,middleware:[cp(),ap(12),up({apply({availableWidth:c,availableHeight:f}){Object.assign(t.element.style,{maxWidth:`${Math.max(0,c)}px`,maxHeight:`${Math.max(0,f)}px`,pointerEvents:"none"})}})]}).then(c=>{t.element.dataset.placement=c.placement,Object.assign(t.element.style,{left:`${c.x}px`,top:`${c.y}px`,zIndex:"11",position:c.strategy==="fixed"?"fixed":"absolute",display:"flex",flexDirection:"column"}),Object.assign(e.element.style,{inset:0,position:c.strategy==="fixed"?"fixed":"absolute",zIndex:"10"})})}return{onStart:r=>{r.editor.chain().setMeta("hideDragHandle",!0).setMeta("lockDragHandle",!0).run(),e=new S0($j,{props:{...r,query:r.query},editor:r.editor}),document.body.appendChild(e.element),t=new S0(Fj,{props:{...r,query:r.query},editor:r.editor}),document.body.appendChild(t.element),n(r.clientRect(),"start")},onUpdate(r){t?.updateProps(r),n(r.clientRect(),"update")},onKeyDown(r){return r.event.key==="Escape"?(t?.ref&&typeof t.ref.onEscape=="function"&&t.ref.onEscape(),e?.element&&(e.element.remove(),e.destroy()),t?.element&&(t.element.remove(),t.destroy()),!0):t?.ref?.onKeyDown(r)},onExit(r){r.editor.chain().setMeta("hideDragHandle",!1).setMeta("lockDragHandle",!1).run(),t&&(e&&(e.element&&document.body.contains(e.element)&&document.body.removeChild(e.element),e.destroy()),t.element&&document.body.contains(t.element)&&document.body.removeChild(t.element),t.destroy())}}}},Zj=({textStylesCommandGroup:t})=>({...d8,items:f8([t,Py])}),_r=()=>new Map,X0=t=>{const e=_r();return t.forEach((n,r)=>{e.set(r,n)}),e},Pi=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},Kj=(t,e)=>{const n=[];for(const[r,i]of t)n.push(e(i,r));return n},Gj=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1},Bs=()=>new Set,Pg=t=>t[t.length-1],Yj=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},Vs=Array.from,Wj=(t,e)=>{for(let n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1},J0=Array.isArray;class h8{constructor(){this._observers=_r()}on(e,n){return Pi(this._observers,e,Bs).add(n),n}once(e,n){const r=(...i)=>{this.off(e,r),n(...i)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return Vs((this._observers.get(e)||_r()).values()).forEach(r=>r(...n))}destroy(){this._observers=_r()}}const Vi=Math.floor,Td=Math.abs,aa=(t,e)=>t<e?t:e,Vo=(t,e)=>t>e?t:e,p8=t=>t!==0?t<0:1/t<0,Zw=1,Kw=2,Fg=4,$g=8,nu=32,Ii=64,kn=128,Xj=1<<29,xp=31,Q0=63,Rs=127,Jj=2147483647,m8=Number.MAX_SAFE_INTEGER,Qj=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&Vi(t)===t),eU=String.fromCharCode,tU=t=>t.toLowerCase(),nU=/^\s*/g,rU=t=>t.replace(nU,""),iU=/([A-Z])/g,Gw=(t,e)=>rU(t.replace(iU,n=>`${e}${tU(n)}`)),oU=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},ru=typeof TextEncoder<"u"?new TextEncoder:null,sU=t=>ru.encode(t),lU=ru?sU:oU;let Uc=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Uc&&Uc.decode(new Uint8Array).length===1&&(Uc=null);class ku{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Mu=()=>new ku,aU=t=>{const e=Mu();return t(e),Dr(e)},cU=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},Dr=t=>{const e=new Uint8Array(cU(t));let n=0;for(let r=0;r<t.bufs.length;r++){const i=t.bufs[r];e.set(i,n),n+=i.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},uU=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(Vo(n,e)*2),t.cpos=0)},Gt=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},e2=Gt,Ve=(t,e)=>{for(;e>Rs;)Gt(t,kn|Rs&e),e=Vi(e/128);Gt(t,Rs&e)},Fy=(t,e)=>{const n=p8(e);for(n&&(e=-e),Gt(t,(e>Q0?kn:0)|(n?Ii:0)|Q0&e),e=Vi(e/64);e>0;)Gt(t,(e>Rs?kn:0)|Rs&e),e=Vi(e/128)},t2=new Uint8Array(3e4),fU=t2.length/3,dU=(t,e)=>{if(e.length<fU){const n=ru.encodeInto(e,t2).written||0;Ve(t,n);for(let r=0;r<n;r++)Gt(t,t2[r])}else tr(t,lU(e))},hU=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;Ve(t,r);for(let i=0;i<r;i++)Gt(t,n.codePointAt(i))},Kl=ru&&ru.encodeInto?dU:hU,Sp=(t,e)=>{const n=t.cbuf.length,r=t.cpos,i=aa(n-r,e.length),o=e.length-i;t.cbuf.set(e.subarray(0,i),r),t.cpos+=i,o>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(Vo(n*2,o)),t.cbuf.set(e.subarray(i)),t.cpos=o)},tr=(t,e)=>{Ve(t,e.byteLength),Sp(t,e)},$y=(t,e)=>{uU(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},pU=(t,e)=>$y(t,4).setFloat32(0,e,!1),mU=(t,e)=>$y(t,8).setFloat64(0,e,!1),gU=(t,e)=>$y(t,8).setBigInt64(0,e,!1),Yw=new DataView(new ArrayBuffer(4)),yU=t=>(Yw.setFloat32(0,t),Yw.getFloat32(0)===t),ca=(t,e)=>{switch(typeof e){case"string":Gt(t,119),Kl(t,e);break;case"number":Qj(e)&&Td(e)<=Jj?(Gt(t,125),Fy(t,e)):yU(e)?(Gt(t,124),pU(t,e)):(Gt(t,123),mU(t,e));break;case"bigint":Gt(t,122),gU(t,e);break;case"object":if(e===null)Gt(t,126);else if(J0(e)){Gt(t,117),Ve(t,e.length);for(let n=0;n<e.length;n++)ca(t,e[n])}else if(e instanceof Uint8Array)Gt(t,116),tr(t,e);else{Gt(t,118);const n=Object.keys(e);Ve(t,n.length);for(let r=0;r<n.length;r++){const i=n[r];Kl(t,i),ca(t,e[i])}}break;case"boolean":Gt(t,e?120:121);break;default:Gt(t,127)}};class Ww extends ku{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&Ve(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const Xw=t=>{t.count>0&&(Fy(t.encoder,t.count===1?t.s:-t.s),t.count>1&&Ve(t.encoder,t.count-2))};class kd{constructor(){this.encoder=new ku,this.s=0,this.count=0}write(e){this.s===e?this.count++:(Xw(this),this.count=1,this.s=e)}toUint8Array(){return Xw(this),Dr(this.encoder)}}const Jw=t=>{if(t.count>0){const e=t.diff*2+(t.count===1?0:1);Fy(t.encoder,e),t.count>1&&Ve(t.encoder,t.count-2)}};class qg{constructor(){this.encoder=new ku,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(Jw(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return Jw(this),Dr(this.encoder)}}class vU{constructor(){this.sarr=[],this.s="",this.lensE=new kd}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new ku;return this.sarr.push(this.s),this.s="",Kl(e,this.sarr.join("")),Sp(e,this.lensE.toUint8Array()),Dr(e)}}const jo=t=>new Error(t),Hr=()=>{throw jo("Method unimplemented")},qn=()=>{throw jo("Unexpected case")},g8=jo("Unexpected end of array"),y8=jo("Integer out of Range");class Tp{constructor(e){this.arr=e,this.pos=0}}const qy=t=>new Tp(t),bU=t=>t.pos!==t.arr.length,CU=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},yr=t=>CU(t,pt(t)),iu=t=>t.arr[t.pos++],pt=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const i=t.arr[t.pos++];if(e=e+(i&Rs)*n,n*=128,i<kn)return e;if(e>m8)throw y8}throw g8},Zy=t=>{let e=t.arr[t.pos++],n=e&Q0,r=64;const i=(e&Ii)>0?-1:1;if((e&kn)===0)return i*n;const o=t.arr.length;for(;t.pos<o;){if(e=t.arr[t.pos++],n=n+(e&Rs)*r,r*=128,e<kn)return i*n;if(n>m8)throw y8}throw g8},wU=t=>{let e=pt(t);if(e===0)return"";{let n=String.fromCodePoint(iu(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(iu(t));else for(;e>0;){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},xU=t=>Uc.decode(yr(t)),n2=Uc?xU:wU,Ky=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},SU=t=>Ky(t,4).getFloat32(0,!1),TU=t=>Ky(t,8).getFloat64(0,!1),kU=t=>Ky(t,8).getBigInt64(0,!1),MU=[t=>{},t=>null,Zy,SU,TU,kU,t=>!1,t=>!0,n2,t=>{const e=pt(t),n={};for(let r=0;r<e;r++){const i=n2(t);n[i]=Mh(t)}return n},t=>{const e=pt(t),n=[];for(let r=0;r<e;r++)n.push(Mh(t));return n},yr],Mh=t=>MU[127-iu(t)](t);class Qw extends Tp{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),bU(this)?this.count=pt(this)+1:this.count=-1),this.count--,this.s}}class Md extends Tp{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=Zy(this);const e=p8(this.s);this.count=1,e&&(this.s=-this.s,this.count=pt(this)+2)}return this.count--,this.s}}class Zg extends Tp{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=Zy(this),n=e&1;this.diff=Vi(e/2),this.count=1,n&&(this.count=pt(this)+2)}return this.s+=this.diff,this.count--,this.s}}class EU{constructor(e){this.decoder=new Md(e),this.str=n2(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}}const AU=crypto.getRandomValues.bind(crypto),RU=Math.random,v8=()=>AU(new Uint32Array(1))[0],NU=t=>t[Vi(RU()*t.length)],OU="10000000-1000-4000-8000"+-1e11,DU=()=>OU.replace(/[018]/g,t=>(t^v8()&15>>t/4).toString(16)),LU=Date.now,e6=t=>new Promise(t);Promise.all.bind(Promise);const t6=t=>t===void 0?null:t;class _U{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}}let b8=new _U,HU=!0;try{typeof localStorage<"u"&&localStorage&&(b8=localStorage,HU=!1)}catch{}const IU=b8,zU=Object.assign,C8=Object.keys,BU=(t,e)=>{for(const n in t)e(t[n],n)},n6=t=>C8(t).length,VU=t=>{for(const e in t)return!1;return!0},w8=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},jU=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),UU=(t,e)=>t===e||n6(t)===n6(e)&&w8(t,(n,r)=>(n!==void 0||jU(e,r))&&e[r]===n),PU=Object.freeze,x8=t=>{for(const e in t){const n=t[e];(typeof n=="object"||typeof n=="function")&&x8(t[e])}return PU(t)},Gy=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&Gy(t,e,n+1)}},FU=(t,e)=>e.includes(t);var S8={};const ua=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",T8=typeof window<"u"&&typeof document<"u"&&!ua;let Yr;const $U=()=>{if(Yr===void 0)if(ua){Yr=_r();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];r[0]==="-"?(e!==null&&Yr.set(e,""),e=r):e!==null&&(Yr.set(e,r),e=null)}e!==null&&Yr.set(e,"")}else typeof location=="object"?(Yr=_r(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");Yr.set(`--${Gw(e,"-")}`,n),Yr.set(`-${Gw(e,"-")}`,n)}})):Yr=_r();return Yr},r2=t=>$U().has(t),Eh=t=>t6(ua?S8[t.toUpperCase().replaceAll("-","_")]:IU.getItem(t)),k8=t=>r2("--"+t)||Eh(t)!==null;k8("production");const qU=ua&&FU(S8.FORCE_COLOR,["true","1","2"]),ZU=qU||!r2("--no-colors")&&!k8("no-color")&&(!ua||process.stdout.isTTY)&&(!ua||r2("--color")||Eh("COLORTERM")!==null||(Eh("TERM")||"").includes("color")),KU=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=eU(t[n]);return btoa(e)},GU=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),YU=T8?KU:GU,WU=t=>aU(e=>ca(e,t));class XU{constructor(e,n){this.left=e,this.right=n}}const Mi=(t,e)=>new XU(t,e),JU=typeof document<"u"?document:{};typeof DOMParser<"u"&&new DOMParser;const QU=t=>Kj(t,(e,n)=>`${n}:${e};`).join(""),eP=t=>class{constructor(n){this._=n}destroy(){t(this._)}},tP=eP(clearTimeout),M8=(t,e)=>new tP(setTimeout(e,t)),Fi=Symbol,E8=Fi(),A8=Fi(),nP=Fi(),rP=Fi(),iP=Fi(),R8=Fi(),oP=Fi(),Yy=Fi(),sP=Fi(),lP=t=>{t.length===1&&t[0]?.constructor===Function&&(t=t[0]());const e=[],n=[];let r=0;for(;r<t.length;r++){const i=t[r];if(i===void 0)break;if(i.constructor===String||i.constructor===Number)e.push(i);else if(i.constructor===Object)break}for(r>0&&n.push(e.join(""));r<t.length;r++){const i=t[r];i instanceof Symbol||n.push(i)}return n},aP={[E8]:Mi("font-weight","bold"),[A8]:Mi("font-weight","normal"),[nP]:Mi("color","blue"),[iP]:Mi("color","green"),[rP]:Mi("color","grey"),[R8]:Mi("color","red"),[oP]:Mi("color","purple"),[Yy]:Mi("color","orange"),[sP]:Mi("color","black")},cP=t=>{t.length===1&&t[0]?.constructor===Function&&(t=t[0]());const e=[],n=[],r=_r();let i=[],o=0;for(;o<t.length;o++){const l=t[o],c=aP[l];if(c!==void 0)r.set(c.left,c.right);else{if(l===void 0)break;if(l.constructor===String||l.constructor===Number){const f=QU(r);o>0||f.length>0?(e.push("%c"+l),n.push(f)):e.push(l)}else break}}for(o>0&&(i=n,i.unshift(e.join("")));o<t.length;o++){const l=t[o];l instanceof Symbol||i.push(l)}return i},N8=ZU?cP:lP,uP=(...t)=>{console.log(...N8(t)),D8.forEach(e=>e.print(t))},O8=(...t)=>{console.warn(...N8(t)),t.unshift(Yy),D8.forEach(e=>e.print(t))},D8=Bs(),L8=t=>({[Symbol.iterator](){return this},next:t}),fP=(t,e)=>L8(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),Kg=(t,e)=>L8(()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}});class Wy{constructor(e,n){this.clock=e,this.len=n}}class ya{constructor(){this.clients=new Map}}const Uo=(t,e,n)=>e.clients.forEach((r,i)=>{const o=t.doc.store.clients.get(i);if(o!=null){const l=o[o.length-1],c=l.id.clock+l.length;for(let f=0,d=r[f];f<r.length&&d.clock<c;d=r[++f])U8(t,o,d.clock,d.len,n)}}),dP=(t,e)=>{let n=0,r=t.length-1;for(;n<=r;){const i=Vi((n+r)/2),o=t[i],l=o.clock;if(l<=e){if(e<l+o.len)return i;n=i+1}else r=i-1}return null},va=(t,e)=>{const n=t.clients.get(e.client);return n!==void 0&&dP(n,e.clock)!==null},Xy=t=>{t.clients.forEach(e=>{e.sort((i,o)=>i.clock-o.clock);let n,r;for(n=1,r=1;n<e.length;n++){const i=e[r-1],o=e[n];i.clock+i.len>=o.clock?i.len=Vo(i.len,o.clock+o.len-i.clock):(r<n&&(e[r]=o),r++)}e.length=r})},i2=t=>{const e=new ya;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,i)=>{if(!e.clients.has(i)){const o=r.slice();for(let l=n+1;l<t.length;l++)Yj(o,t[l].clients.get(i)||[]);e.clients.set(i,o)}});return Xy(e),e},ou=(t,e,n,r)=>{Pi(t.clients,e,()=>[]).push(new Wy(n,r))},_8=()=>new ya,hP=t=>{const e=_8();return t.clients.forEach((n,r)=>{const i=[];for(let o=0;o<n.length;o++){const l=n[o];if(l.deleted){const c=l.id.clock;let f=l.length;if(o+1<n.length)for(let d=n[o+1];o+1<n.length&&d.deleted;d=n[++o+1])f+=d.length;i.push(new Wy(c,f))}}i.length>0&&e.clients.set(r,i)}),e},Jy=(t,e)=>{Ve(t.restEncoder,e.clients.size),Vs(e.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{t.resetDsCurVal(),Ve(t.restEncoder,n);const i=r.length;Ve(t.restEncoder,i);for(let o=0;o<i;o++){const l=r[o];t.writeDsClock(l.clock),t.writeDsLen(l.len)}})},pP=t=>{const e=new ya,n=pt(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();const i=pt(t.restDecoder),o=pt(t.restDecoder);if(o>0){const l=Pi(e.clients,i,()=>[]);for(let c=0;c<o;c++)l.push(new Wy(t.readDsClock(),t.readDsLen()))}}return e},r6=(t,e,n)=>{const r=new ya,i=pt(t.restDecoder);for(let o=0;o<i;o++){t.resetDsCurVal();const l=pt(t.restDecoder),c=pt(t.restDecoder),f=n.clients.get(l)||[],d=Dt(n,l);for(let h=0;h<c;h++){const m=t.readDsClock(),g=m+t.readDsLen();if(m<d){d<g&&ou(r,l,d,g-d);let y=Vr(f,m),b=f[y];for(!b.deleted&&b.id.clock<m&&(f.splice(y+1,0,_h(e,b,m-b.id.clock)),y++);y<f.length&&(b=f[y++],b.id.clock<g);)b.deleted||(g<b.id.clock+b.length&&f.splice(y,0,_h(e,b,g-b.id.clock)),b.delete(e))}else ou(r,l,m,g-m)}}if(r.clients.size>0){const o=new kp;return Ve(o.restEncoder,0),Jy(o,r),o.toUint8Array()}return null},H8=v8;class $s extends h8{constructor({guid:e=DU(),collectionid:n=null,gc:r=!0,gcFilter:i=()=>!0,meta:o=null,autoLoad:l=!1,shouldLoad:c=!0}={}){super(),this.gc=r,this.gcFilter=i,this.clientID=H8(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new V8,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=c,this.autoLoad=l,this.meta=o,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=e6(d=>{this.on("load",()=>{this.isLoaded=!0,d(this)})});const f=()=>e6(d=>{const h=m=>{(m===void 0||m===!0)&&(this.off("sync",h),d())};this.on("sync",h)});this.on("sync",d=>{d===!1&&this.isSynced&&(this.whenSynced=f()),this.isSynced=d===void 0||d===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=f()}load(){const e=this._item;e!==null&&!this.shouldLoad&&rt(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Vs(this.subdocs).map(e=>e.guid))}transact(e,n=null){return rt(this,e,n)}get(e,n=Jt){const r=Pi(this.share,e,()=>{const o=new n;return o._integrate(this,null),o}),i=r.constructor;if(n!==Jt&&i!==n)if(i===Jt){const o=new n;o._map=r._map,r._map.forEach(l=>{for(;l!==null;l=l.left)l.parent=o}),o._start=r._start;for(let l=o._start;l!==null;l=l.right)l.parent=o;return o._length=r._length,this.share.set(e,o),o._integrate(this,null),o}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,Wl)}getText(e=""){return this.get(e,Po)}getMap(e=""){return this.get(e,fa)}getXmlElement(e=""){return this.get(e,yn)}getXmlFragment(e=""){return this.get(e,js)}toJSON(){const e={};return this.share.forEach((n,r)=>{e[r]=n.toJSON()}),e}destroy(){this.isDestroyed=!0,Vs(this.subdocs).forEach(n=>n.destroy());const e=this._item;if(e!==null){this._item=null;const n=e.content;n.doc=new $s({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,rt(e.parent.doc,r=>{const i=n.doc;e.deleted||r.subdocsAdded.add(i),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class mP{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=pt(this.restDecoder),this.dsCurrVal}readDsLen(){const e=pt(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class Ah extends mP{constructor(e){super(e),this.keys=[],pt(e),this.keyClockDecoder=new Zg(yr(e)),this.clientDecoder=new Md(yr(e)),this.leftClockDecoder=new Zg(yr(e)),this.rightClockDecoder=new Zg(yr(e)),this.infoDecoder=new Qw(yr(e),iu),this.stringDecoder=new EU(yr(e)),this.parentInfoDecoder=new Qw(yr(e),iu),this.typeRefDecoder=new Md(yr(e)),this.lenDecoder=new Md(yr(e))}readLeftID(){return new Gl(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Gl(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Mh(this.restDecoder)}readBuf(){return yr(this.restDecoder)}readJSON(){return Mh(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class gP{constructor(){this.restEncoder=Mu()}toUint8Array(){return Dr(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){Ve(this.restEncoder,e)}writeDsLen(e){Ve(this.restEncoder,e)}}class yP extends gP{writeLeftID(e){Ve(this.restEncoder,e.client),Ve(this.restEncoder,e.clock)}writeRightID(e){Ve(this.restEncoder,e.client),Ve(this.restEncoder,e.clock)}writeClient(e){Ve(this.restEncoder,e)}writeInfo(e){e2(this.restEncoder,e)}writeString(e){Kl(this.restEncoder,e)}writeParentInfo(e){Ve(this.restEncoder,e?1:0)}writeTypeRef(e){Ve(this.restEncoder,e)}writeLen(e){Ve(this.restEncoder,e)}writeAny(e){ca(this.restEncoder,e)}writeBuf(e){tr(this.restEncoder,e)}writeJSON(e){Kl(this.restEncoder,JSON.stringify(e))}writeKey(e){Kl(this.restEncoder,e)}}class vP{constructor(){this.restEncoder=Mu(),this.dsCurrVal=0}toUint8Array(){return Dr(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const n=e-this.dsCurrVal;this.dsCurrVal=e,Ve(this.restEncoder,n)}writeDsLen(e){e===0&&qn(),Ve(this.restEncoder,e-1),this.dsCurrVal+=e}}class kp extends vP{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new qg,this.clientEncoder=new kd,this.leftClockEncoder=new qg,this.rightClockEncoder=new qg,this.infoEncoder=new Ww(e2),this.stringEncoder=new vU,this.parentInfoEncoder=new Ww(e2),this.typeRefEncoder=new kd,this.lenEncoder=new kd}toUint8Array(){const e=Mu();return Ve(e,0),tr(e,this.keyClockEncoder.toUint8Array()),tr(e,this.clientEncoder.toUint8Array()),tr(e,this.leftClockEncoder.toUint8Array()),tr(e,this.rightClockEncoder.toUint8Array()),tr(e,Dr(this.infoEncoder)),tr(e,this.stringEncoder.toUint8Array()),tr(e,Dr(this.parentInfoEncoder)),tr(e,this.typeRefEncoder.toUint8Array()),tr(e,this.lenEncoder.toUint8Array()),Sp(e,Dr(this.restEncoder)),Dr(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){ca(this.restEncoder,e)}writeBuf(e){tr(this.restEncoder,e)}writeJSON(e){ca(this.restEncoder,e)}writeKey(e){const n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}}const bP=(t,e,n,r)=>{r=Vo(r,e[0].id.clock);const i=Vr(e,r);Ve(t.restEncoder,e.length-i),t.writeClient(n),Ve(t.restEncoder,r);const o=e[i];o.write(t,r-o.id.clock);for(let l=i+1;l<e.length;l++)e[l].write(t,0)},I8=(t,e,n)=>{const r=new Map;n.forEach((i,o)=>{Dt(e,o)>i&&r.set(o,i)}),Mp(e).forEach((i,o)=>{n.has(o)||r.set(o,0)}),Ve(t.restEncoder,r.size),Vs(r.entries()).sort((i,o)=>o[0]-i[0]).forEach(([i,o])=>{bP(t,e.clients.get(i),i,o)})},CP=(t,e)=>{const n=_r(),r=pt(t.restDecoder);for(let i=0;i<r;i++){const o=pt(t.restDecoder),l=new Array(o),c=t.readClient();let f=pt(t.restDecoder);n.set(c,{i:0,refs:l});for(let d=0;d<o;d++){const h=t.readInfo();switch(xp&h){case 0:{const m=t.readLen();l[d]=new Cr(Oe(c,f),m),f+=m;break}case 10:{const m=pt(t.restDecoder);l[d]=new Rr(Oe(c,f),m),f+=m;break}default:{const m=(h&(Ii|kn))===0,g=new Je(Oe(c,f),null,(h&kn)===kn?t.readLeftID():null,null,(h&Ii)===Ii?t.readRightID():null,m?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,m&&(h&nu)===nu?t.readString():null,cT(t,h));l[d]=g,f+=g.length}}}}return n},wP=(t,e,n)=>{const r=[];let i=Vs(n.keys()).sort((y,b)=>y-b);if(i.length===0)return null;const o=()=>{if(i.length===0)return null;let y=n.get(i[i.length-1]);for(;y.refs.length===y.i;)if(i.pop(),i.length>0)y=n.get(i[i.length-1]);else return null;return y};let l=o();if(l===null)return null;const c=new V8,f=new Map,d=(y,b)=>{const w=f.get(y);(w==null||w>b)&&f.set(y,b)};let h=l.refs[l.i++];const m=new Map,g=()=>{for(const y of r){const b=y.id.client,w=n.get(b);w?(w.i--,c.clients.set(b,w.refs.slice(w.i)),n.delete(b),w.i=0,w.refs=[]):c.clients.set(b,[y]),i=i.filter(x=>x!==b)}r.length=0};for(;;){if(h.constructor!==Rr){const b=Pi(m,h.id.client,()=>Dt(e,h.id.client))-h.id.clock;if(b<0)r.push(h),d(h.id.client,h.id.clock-1),g();else{const w=h.getMissing(t,e);if(w!==null){r.push(h);const x=n.get(w)||{refs:[],i:0};if(x.refs.length===x.i)d(w,Dt(e,w)),g();else{h=x.refs[x.i++];continue}}else(b===0||b<h.length)&&(h.integrate(t,b),m.set(h.id.client,h.id.clock+h.length))}}if(r.length>0)h=r.pop();else if(l!==null&&l.i<l.refs.length)h=l.refs[l.i++];else{if(l=o(),l===null)break;h=l.refs[l.i++]}}if(c.clients.size>0){const y=new kp;return I8(y,c,new Map),Ve(y.restEncoder,0),{missing:f,update:y.toUint8Array()}}return null},xP=(t,e)=>I8(t,e.doc.store,e.beforeState),SP=(t,e,n,r=new Ah(t))=>rt(e,i=>{i.local=!1;let o=!1;const l=i.doc,c=l.store,f=CP(r,l),d=wP(i,c,f),h=c.pendingStructs;if(h){for(const[g,y]of h.missing)if(y<Dt(c,g)){o=!0;break}if(d){for(const[g,y]of d.missing){const b=h.missing.get(g);(b==null||b>y)&&h.missing.set(g,y)}h.update=d6([h.update,d.update])}}else c.pendingStructs=d;const m=r6(r,i,c);if(c.pendingDs){const g=new Ah(qy(c.pendingDs));pt(g.restDecoder);const y=r6(g,i,c);m&&y?c.pendingDs=d6([m,y]):c.pendingDs=m||y}else c.pendingDs=m;if(o){const g=c.pendingStructs.update;c.pendingStructs=null,o2(i.doc,g)}},n,!1),o2=(t,e,n,r=Ah)=>{const i=qy(e);SP(i,t,n,new r(i))};class TP{constructor(){this.l=[]}}const i6=()=>new TP,o6=(t,e)=>t.l.push(e),s6=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter(i=>e!==i),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},z8=(t,e,n)=>Gy(t.l,[e,n]);class Gl{constructor(e,n){this.client=e,this.clock=n}}const ad=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,Oe=(t,e)=>new Gl(t,e),su=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw qn()},lu=(t,e)=>{for(;e!==null;){if(e.parent===t)return!0;e=e.parent._item}return!1};class Rh{constructor(e,n,r,i=0){this.type=e,this.tname=n,this.item=r,this.assoc=i}}class kP{constructor(e,n,r=0){this.type=e,this.index=n,this.assoc=r}}const MP=(t,e,n=0)=>new kP(t,e,n),cd=(t,e,n)=>{let r=null,i=null;return t._item===null?i=su(t):r=Oe(t._item.id.client,t._item.id.clock),new Rh(r,i,e,n)},Gg=(t,e,n=0)=>{let r=t._start;if(n<0){if(e===0)return cd(t,null,n);e--}for(;r!==null;){if(!r.deleted&&r.countable){if(r.length>e)return cd(t,Oe(r.id.client,r.id.clock+e),n);e-=r.length}if(r.right===null&&n<0)return cd(t,r.lastId,n);r=r.right}return cd(t,null,n)},EP=(t,e)=>{const n=Yl(t,e),r=e.clock-n.id.clock;return{item:n,diff:r}},AP=(t,e,n=!0)=>{const r=e.store,i=t.item,o=t.type,l=t.tname,c=t.assoc;let f=null,d=0;if(i!==null){if(Dt(r,i.client)<=i.clock)return null;const h=n?c2(r,i):EP(r,i),m=h.item;if(!(m instanceof Je))return null;if(f=m.parent,f._item===null||!f._item.deleted){d=m.deleted||!m.countable?0:h.diff+(c>=0?0:1);let g=m.left;for(;g!==null;)!g.deleted&&g.countable&&(d+=g.length),g=g.left}}else{if(l!==null)f=e.get(l);else if(o!==null){if(Dt(r,o.client)<=o.clock)return null;const{item:h}=n?c2(r,o):{item:Yl(r,o)};if(h instanceof Je&&h.content instanceof Pr)f=h.content.type;else return null}else throw qn();c>=0?d=f._length:d=0}return MP(f,d,t.assoc)};class Qy{constructor(e,n){this.ds=e,this.sv=n}}const B8=(t,e)=>new Qy(t,e),Yg=t=>B8(hP(t.store),Mp(t.store)),bs=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!va(e.ds,t.id),s2=(t,e)=>{const n=Pi(t.meta,s2,Bs),r=t.doc.store;n.has(e)||(e.sv.forEach((i,o)=>{i<Dt(r,o)&&Vn(t,Oe(o,i))}),Uo(t,e.ds,i=>{}),n.add(e))};class V8{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Mp=t=>{const e=new Map;return t.clients.forEach((n,r)=>{const i=n[n.length-1];e.set(r,i.id.clock+i.length)}),e},Dt=(t,e)=>{const n=t.clients.get(e);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},j8=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==e.id.clock)throw qn()}n.push(e)},Vr=(t,e)=>{let n=0,r=t.length-1,i=t[r],o=i.id.clock;if(o===e)return r;let l=Vi(e/(o+i.length-1)*r);for(;n<=r;){if(i=t[l],o=i.id.clock,o<=e){if(e<o+i.length)return l;n=l+1}else r=l-1;l=Vi((n+r)/2)}throw qn()},RP=(t,e)=>{const n=t.clients.get(e.client);return n[Vr(n,e.clock)]},Yl=RP,l2=(t,e,n)=>{const r=Vr(e,n),i=e[r];return i.id.clock<n&&i instanceof Je?(e.splice(r+1,0,_h(t,i,n-i.id.clock)),r+1):r},Vn=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[l2(t,n,e.clock)]},l6=(t,e,n)=>{const r=e.clients.get(n.client),i=Vr(r,n.clock),o=r[i];return n.clock!==o.id.clock+o.length-1&&o.constructor!==Cr&&r.splice(i+1,0,_h(t,o,n.clock-o.id.clock+1)),o},NP=(t,e,n)=>{const r=t.clients.get(e.id.client);r[Vr(r,e.id.clock)]=n},U8=(t,e,n,r,i)=>{if(r===0)return;const o=n+r;let l=l2(t,e,n),c;do c=e[l++],o<c.id.clock+c.length&&l2(t,e,o),i(c);while(l<e.length&&e[l].id.clock<o)};class OP{constructor(e,n,r){this.doc=e,this.deleteSet=new ya,this.beforeState=Mp(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const a6=(t,e)=>e.deleteSet.clients.size===0&&!Gj(e.afterState,(n,r)=>e.beforeState.get(r)!==n)?!1:(Xy(e.deleteSet),xP(t,e),Jy(t,e.deleteSet),!0),c6=(t,e,n)=>{const r=e._item;(r===null||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&Pi(t.changed,e,Bs).add(n)},Ed=(t,e)=>{let n=t[e],r=t[e-1],i=e;for(;i>0;n=r,r=t[--i-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof Je&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const o=e-i;return o&&t.splice(e+1-o,o),o},DP=(t,e,n)=>{for(const[r,i]of t.clients.entries()){const o=e.clients.get(r);for(let l=i.length-1;l>=0;l--){const c=i[l],f=c.clock+c.len;for(let d=Vr(o,c.clock),h=o[d];d<o.length&&h.id.clock<f;h=o[++d]){const m=o[d];if(c.clock+c.len<=m.id.clock)break;m instanceof Je&&m.deleted&&!m.keep&&n(m)&&m.gc(e,!1)}}}},LP=(t,e)=>{t.clients.forEach((n,r)=>{const i=e.clients.get(r);for(let o=n.length-1;o>=0;o--){const l=n[o],c=aa(i.length-1,1+Vr(i,l.clock+l.len-1));for(let f=c,d=i[f];f>0&&d.id.clock>=l.clock;d=i[f])f-=1+Ed(i,f)}})},P8=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,i=r.store,o=n.deleteSet,l=n._mergeStructs;try{Xy(o),n.afterState=Mp(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const c=[];n.changed.forEach((f,d)=>c.push(()=>{(d._item===null||!d._item.deleted)&&d._callObserver(n,f)})),c.push(()=>{n.changedParentTypes.forEach((f,d)=>{d._dEH.l.length>0&&(d._item===null||!d._item.deleted)&&(f=f.filter(h=>h.target._item===null||!h.target._item.deleted),f.forEach(h=>{h.currentTarget=d,h._path=null}),f.sort((h,m)=>h.path.length-m.path.length),z8(d._dEH,f,n))})}),c.push(()=>r.emit("afterTransaction",[n,r])),Gy(c,[]),n._needFormattingCleanup&&QP(n)}finally{r.gc&&DP(o,i,r.gcFilter),LP(o,i),n.afterState.forEach((h,m)=>{const g=n.beforeState.get(m)||0;if(g!==h){const y=i.clients.get(m),b=Vo(Vr(y,g),1);for(let w=y.length-1;w>=b;)w-=1+Ed(y,w)}});for(let h=l.length-1;h>=0;h--){const{client:m,clock:g}=l[h].id,y=i.clients.get(m),b=Vr(y,g);b+1<y.length&&Ed(y,b+1)>1||b>0&&Ed(y,b)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(uP(Yy,E8,"[yjs] ",A8,R8,"Changed the client-id because another client seems to be using it."),r.clientID=H8()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const h=new yP;a6(h,n)&&r.emit("update",[h.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const h=new kp;a6(h,n)&&r.emit("updateV2",[h.toUint8Array(),n.origin,r,n])}const{subdocsAdded:c,subdocsLoaded:f,subdocsRemoved:d}=n;(c.size>0||d.size>0||f.size>0)&&(c.forEach(h=>{h.clientID=r.clientID,h.collectionid==null&&(h.collectionid=r.collectionid),r.subdocs.add(h)}),d.forEach(h=>r.subdocs.delete(h)),r.emit("subdocs",[{loaded:f,added:c,removed:d},r,n]),d.forEach(h=>h.destroy())),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):P8(t,e+1)}}},rt=(t,e,n=null,r=!0)=>{const i=t._transactionCleanups;let o=!1,l=null;t._transaction===null&&(o=!0,t._transaction=new OP(t,n,r),i.push(t._transaction),i.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{l=e(t._transaction)}finally{if(o){const c=t._transaction===i[0];t._transaction=null,c&&P8(i,0)}}return l};class _P{constructor(e,n){this.insertions=n,this.deletions=e,this.meta=new Map}}const u6=(t,e,n)=>{Uo(t,n.deletions,r=>{r instanceof Je&&e.scope.some(i=>i===t.doc||lu(i,r))&&i3(r,!1)})},f6=(t,e,n)=>{let r=null;const i=t.doc,o=t.scope;rt(i,c=>{for(;e.length>0&&t.currStackItem===null;){const f=i.store,d=e.pop(),h=new Set,m=[];let g=!1;Uo(c,d.insertions,y=>{if(y instanceof Je){if(y.redone!==null){let{item:b,diff:w}=c2(f,y.id);w>0&&(b=Vn(c,Oe(b.id.client,b.id.clock+w))),y=b}!y.deleted&&o.some(b=>b===c.doc||lu(b,y))&&m.push(y)}}),Uo(c,d.deletions,y=>{y instanceof Je&&o.some(b=>b===c.doc||lu(b,y))&&!va(d.insertions,y.id)&&h.add(y)}),h.forEach(y=>{g=aT(c,y,h,d.insertions,t.ignoreRemoteMapChanges,t)!==null||g});for(let y=m.length-1;y>=0;y--){const b=m[y];t.deleteFilter(b)&&(b.delete(c),g=!0)}t.currStackItem=g?d:null}c.changed.forEach((f,d)=>{f.has(null)&&d._searchMarker&&(d._searchMarker.length=0)}),r=c},t);const l=t.currStackItem;if(l!=null){const c=r.changedParentTypes;t.emit("stack-item-popped",[{stackItem:l,type:n,changedParentTypes:c,origin:t},t]),t.currStackItem=null}return l};class F8 extends h8{constructor(e,{captureTimeout:n=500,captureTransaction:r=f=>!0,deleteFilter:i=()=>!0,trackedOrigins:o=new Set([null]),ignoreRemoteMapChanges:l=!1,doc:c=J0(e)?e[0].doc:e instanceof $s?e:e.doc}={}){super(),this.scope=[],this.doc=c,this.addToScope(e),this.deleteFilter=i,o.add(this),this.trackedOrigins=o,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=l,this.captureTimeout=n,this.afterTransactionHandler=f=>{if(!this.captureTransaction(f)||!this.scope.some(x=>f.changedParentTypes.has(x)||x===this.doc)||!this.trackedOrigins.has(f.origin)&&(!f.origin||!this.trackedOrigins.has(f.origin.constructor)))return;const d=this.undoing,h=this.redoing,m=d?this.redoStack:this.undoStack;d?this.stopCapturing():h||this.clear(!1,!0);const g=new ya;f.afterState.forEach((x,k)=>{const A=f.beforeState.get(k)||0,N=x-A;N>0&&ou(g,k,A,N)});const y=LU();let b=!1;if(this.lastChange>0&&y-this.lastChange<this.captureTimeout&&m.length>0&&!d&&!h){const x=m[m.length-1];x.deletions=i2([x.deletions,f.deleteSet]),x.insertions=i2([x.insertions,g])}else m.push(new _P(f.deleteSet,g)),b=!0;!d&&!h&&(this.lastChange=y),Uo(f,f.deleteSet,x=>{x instanceof Je&&this.scope.some(k=>k===f.doc||lu(k,x))&&i3(x,!0)});const w=[{stackItem:m[m.length-1],origin:f.origin,type:d?"redo":"undo",changedParentTypes:f.changedParentTypes},this];b?this.emit("stack-item-added",w):this.emit("stack-item-updated",w)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){const n=new Set(this.scope);e=J0(e)?e:[e],e.forEach(r=>{n.has(r)||(n.add(r),(r instanceof Jt?r.doc!==this.doc:r!==this.doc)&&O8("[yjs#509] Not same Y.Doc"),this.scope.push(r))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,n=!0){(e&&this.canUndo()||n&&this.canRedo())&&this.doc.transact(r=>{e&&(this.undoStack.forEach(i=>u6(r,this,i)),this.undoStack=[]),n&&(this.redoStack.forEach(i=>u6(r,this,i)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:n}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let e;try{e=f6(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){this.redoing=!0;let e;try{e=f6(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*HP(t){const e=pt(t.restDecoder);for(let n=0;n<e;n++){const r=pt(t.restDecoder),i=t.readClient();let o=pt(t.restDecoder);for(let l=0;l<r;l++){const c=t.readInfo();if(c===10){const f=pt(t.restDecoder);yield new Rr(Oe(i,o),f),o+=f}else if((xp&c)!==0){const f=(c&(Ii|kn))===0,d=new Je(Oe(i,o),null,(c&kn)===kn?t.readLeftID():null,null,(c&Ii)===Ii?t.readRightID():null,f?t.readParentInfo()?t.readString():t.readLeftID():null,f&&(c&nu)===nu?t.readString():null,cT(t,c));yield d,o+=d.length}else{const f=t.readLen();yield new Cr(Oe(i,o),f),o+=f}}}}class IP{constructor(e,n){this.gen=HP(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Rr);return this.curr}}class zP{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const BP=(t,e)=>{if(t.constructor===Cr){const{client:n,clock:r}=t.id;return new Cr(Oe(n,r+e),t.length-e)}else if(t.constructor===Rr){const{client:n,clock:r}=t.id;return new Rr(Oe(n,r+e),t.length-e)}else{const n=t,{client:r,clock:i}=n.id;return new Je(Oe(r,i+e),null,Oe(r,i+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},d6=(t,e=Ah,n=kp)=>{if(t.length===1)return t[0];const r=t.map(h=>new e(qy(h)));let i=r.map(h=>new IP(h,!0)),o=null;const l=new n,c=new zP(l);for(;i=i.filter(g=>g.curr!==null),i.sort((g,y)=>{if(g.curr.id.client===y.curr.id.client){const b=g.curr.id.clock-y.curr.id.clock;return b===0?g.curr.constructor===y.curr.constructor?0:g.curr.constructor===Rr?1:-1:b}else return y.curr.id.client-g.curr.id.client}),i.length!==0;){const h=i[0],m=h.curr.id.client;if(o!==null){let g=h.curr,y=!1;for(;g!==null&&g.id.clock+g.length<=o.struct.id.clock+o.struct.length&&g.id.client>=o.struct.id.client;)g=h.next(),y=!0;if(g===null||g.id.client!==m||y&&g.id.clock>o.struct.id.clock+o.struct.length)continue;if(m!==o.struct.id.client)xc(c,o.struct,o.offset),o={struct:g,offset:0},h.next();else if(o.struct.id.clock+o.struct.length<g.id.clock)if(o.struct.constructor===Rr)o.struct.length=g.id.clock+g.length-o.struct.id.clock;else{xc(c,o.struct,o.offset);const b=g.id.clock-o.struct.id.clock-o.struct.length;o={struct:new Rr(Oe(m,o.struct.id.clock+o.struct.length),b),offset:0}}else{const b=o.struct.id.clock+o.struct.length-g.id.clock;b>0&&(o.struct.constructor===Rr?o.struct.length-=b:g=BP(g,b)),o.struct.mergeWith(g)||(xc(c,o.struct,o.offset),o={struct:g,offset:0},h.next())}}else o={struct:h.curr,offset:0},h.next();for(let g=h.curr;g!==null&&g.id.client===m&&g.id.clock===o.struct.id.clock+o.struct.length&&g.constructor!==Rr;g=h.next())xc(c,o.struct,o.offset),o={struct:g,offset:0}}o!==null&&(xc(c,o.struct,o.offset),o=null),VP(c);const f=r.map(h=>pP(h)),d=i2(f);return Jy(l,d),l.toUint8Array()},$8=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:Dr(t.encoder.restEncoder)}),t.encoder.restEncoder=Mu(),t.written=0)},xc=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&$8(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),Ve(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},VP=t=>{$8(t);const e=t.encoder.restEncoder;Ve(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];Ve(e,r.written),Sp(e,r.restEncoder)}},h6="You must not compute changes after the event-handler fired.";class Ep{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=jP(this.currentTarget,this.target))}deletes(e){return va(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw jo(h6);const e=new Map,n=this.target;this.transaction.changed.get(n).forEach(i=>{if(i!==null){const o=n._map.get(i);let l,c;if(this.adds(o)){let f=o.left;for(;f!==null&&this.adds(f);)f=f.left;if(this.deletes(o))if(f!==null&&this.deletes(f))l="delete",c=Pg(f.content.getContent());else return;else f!==null&&this.deletes(f)?(l="update",c=Pg(f.content.getContent())):(l="add",c=void 0)}else if(this.deletes(o))l="delete",c=Pg(o.content.getContent());else return;e.set(i,{action:l,oldValue:c})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw jo(h6);const n=this.target,r=Bs(),i=Bs(),o=[];if(e={added:r,deleted:i,delta:o,keys:this.keys},this.transaction.changed.get(n).has(null)){let c=null;const f=()=>{c&&o.push(c)};for(let d=n._start;d!==null;d=d.right)d.deleted?this.deletes(d)&&!this.adds(d)&&((c===null||c.delete===void 0)&&(f(),c={delete:0}),c.delete+=d.length,i.add(d)):this.adds(d)?((c===null||c.insert===void 0)&&(f(),c={insert:[]}),c.insert=c.insert.concat(d.content.getContent()),r.add(d)):((c===null||c.retain===void 0)&&(f(),c={retain:0}),c.retain+=d.length);c!==null&&c.retain===void 0&&f()}this._changes=e}return e}}const jP=(t,e)=>{const n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let r=0,i=e._item.parent._start;for(;i!==e._item&&i!==null;)!i.deleted&&i.countable&&(r+=i.length),i=i.right;n.unshift(r)}e=e._item.parent}return n},vn=()=>{O8("Invalid access: Add Yjs type to a document before reading data.")},q8=80;let e3=0;class UP{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=e3++}}const PP=t=>{t.timestamp=e3++},Z8=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=e3++},FP=(t,e,n)=>{if(t.length>=q8){const r=t.reduce((i,o)=>i.timestamp<o.timestamp?i:o);return Z8(r,e,n),r}else{const r=new UP(e,n);return t.push(r),r}},Ap=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;const n=t._searchMarker.length===0?null:t._searchMarker.reduce((o,l)=>Td(e-o.index)<Td(e-l.index)?o:l);let r=t._start,i=0;for(n!==null&&(r=n.p,i=n.index,PP(n));r.right!==null&&i<e;){if(!r.deleted&&r.countable){if(e<i+r.length)break;i+=r.length}r=r.right}for(;r.left!==null&&i>e;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return n!==null&&Td(n.index-i)<r.parent.length/q8?(Z8(n,r,i),n):FP(t._searchMarker,r,i)},au=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const i=t[r];if(n>0){let o=i.p;for(o.marker=!1;o&&(o.deleted||!o.countable);)o=o.left,o&&!o.deleted&&o.countable&&(i.index-=o.length);if(o===null||o.marker===!0){t.splice(r,1);continue}i.p=o,o.marker=!0}(e<i.index||n>0&&e===i.index)&&(i.index=Vo(e,i.index+n))}},Rp=(t,e,n)=>{const r=t,i=e.changedParentTypes;for(;Pi(i,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;z8(r._eH,n,e)};class Jt{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=i6(),this._dEH=i6(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw Hr()}clone(){throw Hr()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){o6(this._eH,e)}observeDeep(e){o6(this._dEH,e)}unobserve(e){s6(this._eH,e)}unobserveDeep(e){s6(this._dEH,e)}toJSON(){}}const K8=(t,e,n)=>{t.doc??vn(),e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const i=[];let o=t._start;for(;o!==null&&r>0;){if(o.countable&&!o.deleted){const l=o.content.getContent();if(l.length<=e)e-=l.length;else{for(let c=e;c<l.length&&r>0;c++)i.push(l[c]),r--;e=0}}o=o.right}return i},G8=t=>{t.doc??vn();const e=[];let n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let i=0;i<r.length;i++)e.push(r[i])}n=n.right}return e},Y8=(t,e)=>{const n=[];let r=t._start;for(;r!==null;){if(r.countable&&bs(r,e)){const i=r.content.getContent();for(let o=0;o<i.length;o++)n.push(i[o])}r=r.right}return n},cu=(t,e)=>{let n=0,r=t._start;for(t.doc??vn();r!==null;){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let o=0;o<i.length;o++)e(i[o],n++,t)}r=r.right}},W8=(t,e)=>{const n=[];return cu(t,(r,i)=>{n.push(e(r,i,t))}),n},$P=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const i=n[r++];return n.length<=r&&(n=null),{done:!1,value:i}}}},X8=(t,e)=>{t.doc??vn();const n=Ap(t,e);let r=t._start;for(n!==null&&(r=n.p,e-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},Nh=(t,e,n,r)=>{let i=n;const o=t.doc,l=o.clientID,c=o.store,f=n===null?e._start:n.right;let d=[];const h=()=>{d.length>0&&(i=new Je(Oe(l,Dt(c,l)),i,i&&i.lastId,f,f&&f.id,e,null,new Us(d)),i.integrate(t,0),d=[])};r.forEach(m=>{if(m===null)d.push(m);else switch(m.constructor){case Number:case Object:case Boolean:case Array:case String:d.push(m);break;default:switch(h(),m.constructor){case Uint8Array:case ArrayBuffer:i=new Je(Oe(l,Dt(c,l)),i,i&&i.lastId,f,f&&f.id,e,null,new Eu(new Uint8Array(m))),i.integrate(t,0);break;case $s:i=new Je(Oe(l,Dt(c,l)),i,i&&i.lastId,f,f&&f.id,e,null,new Au(m)),i.integrate(t,0);break;default:if(m instanceof Jt)i=new Je(Oe(l,Dt(c,l)),i,i&&i.lastId,f,f&&f.id,e,null,new Pr(m)),i.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),h()},J8=()=>jo("Length exceeded!"),Q8=(t,e,n,r)=>{if(n>e._length)throw J8();if(n===0)return e._searchMarker&&au(e._searchMarker,n,r.length),Nh(t,e,null,r);const i=n,o=Ap(e,n);let l=e._start;for(o!==null&&(l=o.p,n-=o.index,n===0&&(l=l.prev,n+=l&&l.countable&&!l.deleted?l.length:0));l!==null;l=l.right)if(!l.deleted&&l.countable){if(n<=l.length){n<l.length&&Vn(t,Oe(l.id.client,l.id.clock+n));break}n-=l.length}return e._searchMarker&&au(e._searchMarker,i,r.length),Nh(t,e,l,r)},qP=(t,e,n)=>{let i=(e._searchMarker||[]).reduce((o,l)=>l.index>o.index?l:o,{index:0,p:e._start}).p;if(i)for(;i.right;)i=i.right;return Nh(t,e,i,n)},eT=(t,e,n,r)=>{if(r===0)return;const i=n,o=r,l=Ap(e,n);let c=e._start;for(l!==null&&(c=l.p,n-=l.index);c!==null&&n>0;c=c.right)!c.deleted&&c.countable&&(n<c.length&&Vn(t,Oe(c.id.client,c.id.clock+n)),n-=c.length);for(;r>0&&c!==null;)c.deleted||(r<c.length&&Vn(t,Oe(c.id.client,c.id.clock+r)),c.delete(t),r-=c.length),c=c.right;if(r>0)throw J8();e._searchMarker&&au(e._searchMarker,i,-o+r)},Oh=(t,e,n)=>{const r=e._map.get(n);r!==void 0&&r.delete(t)},t3=(t,e,n,r)=>{const i=e._map.get(n)||null,o=t.doc,l=o.clientID;let c;if(r==null)c=new Us([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:c=new Us([r]);break;case Uint8Array:c=new Eu(r);break;case $s:c=new Au(r);break;default:if(r instanceof Jt)c=new Pr(r);else throw new Error("Unexpected content type")}new Je(Oe(l,Dt(o.store,l)),i,i&&i.lastId,null,null,e,n,c).integrate(t,0)},n3=(t,e)=>{t.doc??vn();const n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},tT=t=>{const e={};return t.doc??vn(),t._map.forEach((n,r)=>{n.deleted||(e[r]=n.content.getContent()[n.length-1])}),e},nT=(t,e)=>{t.doc??vn();const n=t._map.get(e);return n!==void 0&&!n.deleted},ZP=(t,e)=>{const n={};return t._map.forEach((r,i)=>{let o=r;for(;o!==null&&(!e.sv.has(o.id.client)||o.id.clock>=(e.sv.get(o.id.client)||0));)o=o.left;o!==null&&bs(o,e)&&(n[i]=o.content.getContent()[o.length-1])}),n},ud=t=>(t.doc??vn(),fP(t._map.entries(),e=>!e[1].deleted));class KP extends Ep{}class Wl extends Jt{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const n=new Wl;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Wl}clone(){const e=new Wl;return e.insert(0,this.toArray().map(n=>n instanceof Jt?n.clone():n)),e}get length(){return this.doc??vn(),this._length}_callObserver(e,n){super._callObserver(e,n),Rp(this,e,new KP(this,e))}insert(e,n){this.doc!==null?rt(this.doc,r=>{Q8(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?rt(this.doc,n=>{qP(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?rt(this.doc,r=>{eT(r,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return X8(this,e)}toArray(){return G8(this)}slice(e=0,n=this.length){return K8(this,e,n)}toJSON(){return this.map(e=>e instanceof Jt?e.toJSON():e)}map(e){return W8(this,e)}forEach(e){cu(this,e)}[Symbol.iterator](){return $P(this)}_write(e){e.writeTypeRef(vF)}}const GP=t=>new Wl;class YP extends Ep{constructor(e,n,r){super(e,n),this.keysChanged=r}}class fa extends Jt{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((r,i)=>{this.set(i,r)}),this._prelimContent=null}_copy(){return new fa}clone(){const e=new fa;return this.forEach((n,r)=>{e.set(r,n instanceof Jt?n.clone():n)}),e}_callObserver(e,n){Rp(this,e,new YP(this,e,n))}toJSON(){this.doc??vn();const e={};return this._map.forEach((n,r)=>{if(!n.deleted){const i=n.content.getContent()[n.length-1];e[r]=i instanceof Jt?i.toJSON():i}}),e}get size(){return[...ud(this)].length}keys(){return Kg(ud(this),e=>e[0])}values(){return Kg(ud(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return Kg(ud(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??vn(),this._map.forEach((n,r)=>{n.deleted||e(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?rt(this.doc,n=>{Oh(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?rt(this.doc,r=>{t3(r,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return n3(this,e)}has(e){return nT(this,e)}clear(){this.doc!==null?rt(this.doc,e=>{this.forEach(function(n,r,i){Oh(e,i,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(bF)}}const WP=t=>new fa,No=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&UU(t,e);class a2{constructor(e,n,r,i){this.left=e,this.right=n,this.index=r,this.currentAttributes=i}forward(){switch(this.right===null&&qn(),this.right.content.constructor){case Vt:this.right.deleted||ba(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const p6=(t,e,n)=>{for(;e.right!==null&&n>0;){switch(e.right.content.constructor){case Vt:e.right.deleted||ba(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&Vn(t,Oe(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},fd=(t,e,n,r)=>{const i=new Map,o=r?Ap(e,n):null;if(o){const l=new a2(o.p.left,o.p,o.index,i);return p6(t,l,n-o.index)}else{const l=new a2(null,e._start,0,i);return p6(t,l,n)}},rT=(t,e,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===Vt&&No(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const i=t.doc,o=i.clientID;r.forEach((l,c)=>{const f=n.left,d=n.right,h=new Je(Oe(o,Dt(i.store,o)),f,f&&f.lastId,d,d&&d.id,e,null,new Vt(c,l));h.integrate(t,0),n.right=h,n.forward()})},ba=(t,e)=>{const{key:n,value:r}=e;r===null?t.delete(n):t.set(n,r)},iT=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===Vt&&No(e[t.right.content.key]??null,t.right.content.value)))break;t.forward()}},oT=(t,e,n,r)=>{const i=t.doc,o=i.clientID,l=new Map;for(const c in r){const f=r[c],d=n.currentAttributes.get(c)??null;if(!No(d,f)){l.set(c,d);const{left:h,right:m}=n;n.right=new Je(Oe(o,Dt(i.store,o)),h,h&&h.lastId,m,m&&m.id,e,null,new Vt(c,f)),n.right.integrate(t,0),n.forward()}}return l},Wg=(t,e,n,r,i)=>{n.currentAttributes.forEach((g,y)=>{i[y]===void 0&&(i[y]=null)});const o=t.doc,l=o.clientID;iT(n,i);const c=oT(t,e,n,i),f=r.constructor===String?new jr(r):r instanceof Jt?new Pr(r):new qs(r);let{left:d,right:h,index:m}=n;e._searchMarker&&au(e._searchMarker,n.index,f.getLength()),h=new Je(Oe(l,Dt(o.store,l)),d,d&&d.lastId,h,h&&h.id,e,null,f),h.integrate(t,0),n.right=h,n.index=m,n.forward(),rT(t,e,n,c)},m6=(t,e,n,r,i)=>{const o=t.doc,l=o.clientID;iT(n,i);const c=oT(t,e,n,i);e:for(;n.right!==null&&(r>0||c.size>0&&(n.right.deleted||n.right.content.constructor===Vt));){if(!n.right.deleted)switch(n.right.content.constructor){case Vt:{const{key:f,value:d}=n.right.content,h=i[f];if(h!==void 0){if(No(h,d))c.delete(f);else{if(r===0)break e;c.set(f,d)}n.right.delete(t)}else n.currentAttributes.set(f,d);break}default:r<n.right.length&&Vn(t,Oe(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let f="";for(;r>0;r--)f+=`
`;n.right=new Je(Oe(l,Dt(o.store,l)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new jr(f)),n.right.integrate(t,0),n.forward()}rT(t,e,n,c)},sT=(t,e,n,r,i)=>{let o=e;const l=_r();for(;o&&(!o.countable||o.deleted);){if(!o.deleted&&o.content.constructor===Vt){const d=o.content;l.set(d.key,d)}o=o.right}let c=0,f=!1;for(;e!==o;){if(n===e&&(f=!0),!e.deleted){const d=e.content;switch(d.constructor){case Vt:{const{key:h,value:m}=d,g=r.get(h)??null;(l.get(h)!==d||g===m)&&(e.delete(t),c++,!f&&(i.get(h)??null)===m&&g!==m&&(g===null?i.delete(h):i.set(h,g))),!f&&!e.deleted&&ba(i,d);break}}}e=e.right}return c},XP=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===Vt){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},JP=t=>{let e=0;return rt(t.doc,n=>{let r=t._start,i=t._start,o=_r();const l=X0(o);for(;i;){if(i.deleted===!1)switch(i.content.constructor){case Vt:ba(l,i.content);break;default:e+=sT(n,r,i,o,l),o=X0(l),r=i;break}i=i.right}}),e},QP=t=>{const e=new Set,n=t.doc;for(const[r,i]of t.afterState.entries()){const o=t.beforeState.get(r)||0;i!==o&&U8(t,n.store.clients.get(r),o,i,l=>{!l.deleted&&l.content.constructor===Vt&&l.constructor!==Cr&&e.add(l.parent)})}rt(n,r=>{Uo(t,t.deleteSet,i=>{if(i instanceof Cr||!i.parent._hasFormatting||e.has(i.parent))return;const o=i.parent;i.content.constructor===Vt?e.add(o):XP(r,i)});for(const i of e)JP(i)})},g6=(t,e,n)=>{const r=n,i=X0(e.currentAttributes),o=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case Pr:case qs:case jr:n<e.right.length&&Vn(t,Oe(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}o&&sT(t,o,e.right,i,e.currentAttributes);const l=(e.left||e.right).parent;return l._searchMarker&&au(l._searchMarker,e.index,-r+n),e};class eF extends Ep{constructor(e,n,r){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(i=>{i===null?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,n=[];rt(e,r=>{const i=new Map,o=new Map;let l=this.target._start,c=null;const f={};let d="",h=0,m=0;const g=()=>{if(c!==null){let y=null;switch(c){case"delete":m>0&&(y={delete:m}),m=0;break;case"insert":(typeof d=="object"||d.length>0)&&(y={insert:d},i.size>0&&(y.attributes={},i.forEach((b,w)=>{b!==null&&(y.attributes[w]=b)}))),d="";break;case"retain":h>0&&(y={retain:h},VU(f)||(y.attributes=zU({},f))),h=0;break}y&&n.push(y),c=null}};for(;l!==null;){switch(l.content.constructor){case Pr:case qs:this.adds(l)?this.deletes(l)||(g(),c="insert",d=l.content.getContent()[0],g()):this.deletes(l)?(c!=="delete"&&(g(),c="delete"),m+=1):l.deleted||(c!=="retain"&&(g(),c="retain"),h+=1);break;case jr:this.adds(l)?this.deletes(l)||(c!=="insert"&&(g(),c="insert"),d+=l.content.str):this.deletes(l)?(c!=="delete"&&(g(),c="delete"),m+=l.length):l.deleted||(c!=="retain"&&(g(),c="retain"),h+=l.length);break;case Vt:{const{key:y,value:b}=l.content;if(this.adds(l)){if(!this.deletes(l)){const w=i.get(y)??null;No(w,b)?b!==null&&l.delete(r):(c==="retain"&&g(),No(b,o.get(y)??null)?delete f[y]:f[y]=b)}}else if(this.deletes(l)){o.set(y,b);const w=i.get(y)??null;No(w,b)||(c==="retain"&&g(),f[y]=w)}else if(!l.deleted){o.set(y,b);const w=f[y];w!==void 0&&(No(w,b)?w!==null&&l.delete(r):(c==="retain"&&g(),b===null?delete f[y]:f[y]=b))}l.deleted||(c==="insert"&&g(),ba(i,l.content));break}}l=l.right}for(g();n.length>0;){const y=n[n.length-1];if(y.retain!==void 0&&y.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class Po extends Jt{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??vn(),this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new Po}clone(){const e=new Po;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);const r=new eF(this,e,n);Rp(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??vn();let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===jr&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?rt(this.doc,r=>{const i=new a2(null,this._start,0,new Map);for(let o=0;o<e.length;o++){const l=e[o];if(l.insert!==void 0){const c=!n&&typeof l.insert=="string"&&o===e.length-1&&i.right===null&&l.insert.slice(-1)===`
`?l.insert.slice(0,-1):l.insert;(typeof c!="string"||c.length>0)&&Wg(r,this,i,c,l.attributes||{})}else l.retain!==void 0?m6(r,this,i,l.retain,l.attributes||{}):l.delete!==void 0&&g6(r,i,l.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,r){this.doc??vn();const i=[],o=new Map,l=this.doc;let c="",f=this._start;function d(){if(c.length>0){const m={};let g=!1;o.forEach((b,w)=>{g=!0,m[w]=b});const y={insert:c};g&&(y.attributes=m),i.push(y),c=""}}const h=()=>{for(;f!==null;){if(bs(f,e)||n!==void 0&&bs(f,n))switch(f.content.constructor){case jr:{const m=o.get("ychange");e!==void 0&&!bs(f,e)?(m===void 0||m.user!==f.id.client||m.type!=="removed")&&(d(),o.set("ychange",r?r("removed",f.id):{type:"removed"})):n!==void 0&&!bs(f,n)?(m===void 0||m.user!==f.id.client||m.type!=="added")&&(d(),o.set("ychange",r?r("added",f.id):{type:"added"})):m!==void 0&&(d(),o.delete("ychange")),c+=f.content.str;break}case Pr:case qs:{d();const m={insert:f.content.getContent()[0]};if(o.size>0){const g={};m.attributes=g,o.forEach((y,b)=>{g[b]=y})}i.push(m);break}case Vt:bs(f,e)&&(d(),ba(o,f.content));break}f=f.right}d()};return e||n?rt(l,m=>{e&&s2(m,e),n&&s2(m,n),h()},"cleanup"):h(),i}insert(e,n,r){if(n.length<=0)return;const i=this.doc;i!==null?rt(i,o=>{const l=fd(o,this,e,!r);r||(r={},l.currentAttributes.forEach((c,f)=>{r[f]=c})),Wg(o,this,l,n,r)}):this._pending.push(()=>this.insert(e,n,r))}insertEmbed(e,n,r){const i=this.doc;i!==null?rt(i,o=>{const l=fd(o,this,e,!r);Wg(o,this,l,n,r||{})}):this._pending.push(()=>this.insertEmbed(e,n,r||{}))}delete(e,n){if(n===0)return;const r=this.doc;r!==null?rt(r,i=>{g6(i,fd(i,this,e,!0),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,r){if(n===0)return;const i=this.doc;i!==null?rt(i,o=>{const l=fd(o,this,e,!1);l.right!==null&&m6(o,this,l,n,r)}):this._pending.push(()=>this.format(e,n,r))}removeAttribute(e){this.doc!==null?rt(this.doc,n=>{Oh(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?rt(this.doc,r=>{t3(r,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return n3(this,e)}getAttributes(){return tT(this)}_write(e){e.writeTypeRef(CF)}}const tF=t=>new Po;class Xg{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??vn()}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===yn||n.constructor===js)&&n._start!==null)e=n._start;else for(;e!==null;){const r=e.next;if(r!==null){e=r;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class js extends Jt{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new js}clone(){const e=new js;return e.insert(0,this.toArray().map(n=>n instanceof Jt?n.clone():n)),e}get length(){return this.doc??vn(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new Xg(this,e)}querySelector(e){e=e.toUpperCase();const r=new Xg(this,i=>i.nodeName&&i.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),Vs(new Xg(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){Rp(this,e,new iF(this,n,e))}toString(){return W8(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},r){const i=e.createDocumentFragment();return r!==void 0&&r._createAssociation(i,this),cu(this,o=>{i.insertBefore(o.toDOM(e,n,r),null)}),i}insert(e,n){this.doc!==null?rt(this.doc,r=>{Q8(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)rt(this.doc,r=>{const i=e&&e instanceof Jt?e._item:e;Nh(r,this,i,n)});else{const r=this._prelimContent,i=e===null?0:r.findIndex(o=>o===e)+1;if(i===0&&e!==null)throw jo("Reference item not found");r.splice(i,0,...n)}}delete(e,n=1){this.doc!==null?rt(this.doc,r=>{eT(r,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return G8(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return X8(this,e)}slice(e=0,n=this.length){return K8(this,e,n)}forEach(e){cu(this,e)}_write(e){e.writeTypeRef(xF)}}const nF=t=>new js;class yn extends js{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((r,i)=>{this.setAttribute(i,r)}),this._prelimAttrs=null}_copy(){return new yn(this.nodeName)}clone(){const e=new yn(this.nodeName),n=this.getAttributes();return BU(n,(r,i)=>{typeof r=="string"&&e.setAttribute(i,r)}),e.insert(0,this.toArray().map(r=>r instanceof Jt?r.clone():r)),e}toString(){const e=this.getAttributes(),n=[],r=[];for(const c in e)r.push(c);r.sort();const i=r.length;for(let c=0;c<i;c++){const f=r[c];n.push(f+'="'+e[f]+'"')}const o=this.nodeName.toLocaleLowerCase(),l=n.length>0?" "+n.join(" "):"";return`<${o}${l}>${super.toString()}</${o}>`}removeAttribute(e){this.doc!==null?rt(this.doc,n=>{Oh(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?rt(this.doc,r=>{t3(r,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return n3(this,e)}hasAttribute(e){return nT(this,e)}getAttributes(e){return e?ZP(this,e):tT(this)}toDOM(e=document,n={},r){const i=e.createElement(this.nodeName),o=this.getAttributes();for(const l in o){const c=o[l];typeof c=="string"&&i.setAttribute(l,c)}return cu(this,l=>{i.appendChild(l.toDOM(e,n,r))}),r!==void 0&&r._createAssociation(i,this),i}_write(e){e.writeTypeRef(wF),e.writeKey(this.nodeName)}}const rF=t=>new yn(t.readKey());class iF extends Ep{constructor(e,n,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(i=>{i===null?this.childListChanged=!0:this.attributesChanged.add(i)})}}class Dh extends fa{constructor(e){super(),this.hookName=e}_copy(){return new Dh(this.hookName)}clone(){const e=new Dh(this.hookName);return this.forEach((n,r)=>{e.set(r,n)}),e}toDOM(e=document,n={},r){const i=n[this.hookName];let o;return i!==void 0?o=i.createDom(this):o=document.createElement(this.hookName),o.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(o,this),o}_write(e){e.writeTypeRef(SF),e.writeKey(this.hookName)}}const oF=t=>new Dh(t.readKey());class $n extends Po{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new $n}clone(){const e=new $n;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,r){const i=e.createTextNode(this.toString());return r!==void 0&&r._createAssociation(i,this),i}toString(){return this.toDelta().map(e=>{const n=[];for(const i in e.attributes){const o=[];for(const l in e.attributes[i])o.push({key:l,value:e.attributes[i][l]});o.sort((l,c)=>l.key<c.key?-1:1),n.push({nodeName:i,attrs:o})}n.sort((i,o)=>i.nodeName<o.nodeName?-1:1);let r="";for(let i=0;i<n.length;i++){const o=n[i];r+=`<${o.nodeName}`;for(let l=0;l<o.attrs.length;l++){const c=o.attrs[l];r+=` ${c.key}="${c.value}"`}r+=">"}r+=e.insert;for(let i=n.length-1;i>=0;i--)r+=`</${n[i].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(TF)}}const sF=t=>new $n;class r3{constructor(e,n){this.id=e,this.length=n}get deleted(){throw Hr()}mergeWith(e){return!1}write(e,n,r){throw Hr()}integrate(e,n){throw Hr()}}const lF=0;class Cr extends r3{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),j8(e.doc.store,this)}write(e,n){e.writeInfo(lF),e.writeLen(this.length-n)}getMissing(e,n){return null}}class Eu{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Eu(this.content)}splice(e){throw Hr()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}}const aF=t=>new Eu(t.readBuf());class uu{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new uu(this.len)}splice(e){const n=new uu(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){ou(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}}const cF=t=>new uu(t.readLen()),lT=(t,e)=>new $s({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class Au{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Au(lT(this.doc.guid,this.opts))}splice(e){throw Hr()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const uF=t=>new Au(lT(t.readString(),t.readAny()));class qs{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new qs(this.embed)}splice(e){throw Hr()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}}const fF=t=>new qs(t.readJSON());class Vt{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Vt(this.key,this.value)}splice(e){throw Hr()}mergeWith(e){return!1}integrate(e,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const dF=t=>new Vt(t.readKey(),t.readJSON());class Lh{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Lh(this.arr)}splice(e){const n=new Lh(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let i=n;i<r;i++){const o=this.arr[i];e.writeString(o===void 0?"undefined":JSON.stringify(o))}}getRef(){return 2}}const hF=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const i=t.readString();i==="undefined"?n.push(void 0):n.push(JSON.parse(i))}return new Lh(n)},pF=Eh("node_env")==="development";class Us{constructor(e){this.arr=e,pF&&x8(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Us(this.arr)}splice(e){const n=new Us(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let i=n;i<r;i++){const o=this.arr[i];e.writeAny(o)}}getRef(){return 8}}const mF=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new Us(n)};class jr{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new jr(this.str)}splice(e){const n=new jr(this.str.slice(e));this.str=this.str.slice(0,e);const r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"",n.str=""+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const gF=t=>new jr(t.readString()),yF=[GP,WP,tF,rF,nF,oF,sF],vF=0,bF=1,CF=2,wF=3,xF=4,SF=5,TF=6;class Pr{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Pr(this.type._copy())}splice(e){throw Hr()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}}const kF=t=>new Pr(yF[t.readTypeRef()](t)),c2=(t,e)=>{let n=e,r=0,i;do r>0&&(n=Oe(n.client,n.clock+r)),i=Yl(t,n),r=n.clock-i.id.clock,n=i.redone;while(n!==null&&i instanceof Je);return{item:i,diff:r}},i3=(t,e)=>{for(;t!==null&&t.keep!==e;)t.keep=e,t=t.parent._item},_h=(t,e,n)=>{const{client:r,clock:i}=e.id,o=new Je(Oe(r,i+n),e,Oe(r,i+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&o.markDeleted(),e.keep&&(o.keep=!0),e.redone!==null&&(o.redone=Oe(e.redone.client,e.redone.clock+n)),e.right=o,o.right!==null&&(o.right.left=o),t._mergeStructs.push(o),o.parentSub!==null&&o.right===null&&o.parent._map.set(o.parentSub,o),e.length=n,o},y6=(t,e)=>Wj(t,n=>va(n.deletions,e)),aT=(t,e,n,r,i,o)=>{const l=t.doc,c=l.store,f=l.clientID,d=e.redone;if(d!==null)return Vn(t,d);let h=e.parent._item,m=null,g;if(h!==null&&h.deleted===!0){if(h.redone===null&&(!n.has(h)||aT(t,h,n,r,i,o)===null))return null;for(;h.redone!==null;)h=Vn(t,h.redone)}const y=h===null?e.parent:h.content.type;if(e.parentSub===null){for(m=e.left,g=e;m!==null;){let k=m;for(;k!==null&&k.parent._item!==h;)k=k.redone===null?null:Vn(t,k.redone);if(k!==null&&k.parent._item===h){m=k;break}m=m.left}for(;g!==null;){let k=g;for(;k!==null&&k.parent._item!==h;)k=k.redone===null?null:Vn(t,k.redone);if(k!==null&&k.parent._item===h){g=k;break}g=g.right}}else if(g=null,e.right&&!i){for(m=e;m!==null&&m.right!==null&&(m.right.redone||va(r,m.right.id)||y6(o.undoStack,m.right.id)||y6(o.redoStack,m.right.id));)for(m=m.right;m.redone;)m=Vn(t,m.redone);if(m&&m.right!==null)return null}else m=y._map.get(e.parentSub)||null;const b=Dt(c,f),w=Oe(f,b),x=new Je(w,m,m&&m.lastId,g,g&&g.id,y,e.parentSub,e.content.copy());return e.redone=w,i3(x,!0),x.integrate(t,0),x};class Je extends r3{constructor(e,n,r,i,o,l,c,f){super(e,f.getLength()),this.origin=r,this.left=n,this.right=i,this.rightOrigin=o,this.parent=l,this.parentSub=c,this.redone=null,this.content=f,this.info=this.content.isCountable()?Kw:0}set marker(e){(this.info&$g)>0!==e&&(this.info^=$g)}get marker(){return(this.info&$g)>0}get keep(){return(this.info&Zw)>0}set keep(e){this.keep!==e&&(this.info^=Zw)}get countable(){return(this.info&Kw)>0}get deleted(){return(this.info&Fg)>0}set deleted(e){this.deleted!==e&&(this.info^=Fg)}markDeleted(){this.info|=Fg}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Dt(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Dt(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Gl&&this.id.client!==this.parent.client&&this.parent.clock>=Dt(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=l6(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Vn(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===Cr||this.right&&this.right.constructor===Cr)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===Je?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===Je&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Gl){const r=Yl(n,this.parent);r.constructor===Cr?this.parent=null:this.parent=r.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=l6(e,e.doc.store,Oe(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,i;if(r!==null)i=r.right;else if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start;const o=new Set,l=new Set;for(;i!==null&&i!==this.right;){if(l.add(i),o.add(i),ad(this.origin,i.origin)){if(i.id.client<this.id.client)r=i,o.clear();else if(ad(this.rightOrigin,i.rightOrigin))break}else if(i.origin!==null&&l.has(Yl(e.doc.store,i.origin)))o.has(Yl(e.doc.store,i.origin))||(r=i,o.clear());else break;i=i.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),j8(e.doc.store,this),this.content.integrate(e,this),c6(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new Cr(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:Oe(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&ad(e.origin,this.lastId)&&this.right===e&&ad(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),ou(e.deleteSet,this.id.client,this.id.clock,this.length),c6(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw qn();this.content.gc(e),n?NP(e,this,new Cr(this.id,this.length)):this.content=new uu(this.length)}write(e,n){const r=n>0?Oe(this.id.client,this.id.clock+n-1):this.origin,i=this.rightOrigin,o=this.parentSub,l=this.content.getRef()&xp|(r===null?0:kn)|(i===null?0:Ii)|(o===null?0:nu);if(e.writeInfo(l),r!==null&&e.writeLeftID(r),i!==null&&e.writeRightID(i),r===null&&i===null){const c=this.parent;if(c._item!==void 0){const f=c._item;if(f===null){const d=su(c);e.writeParentInfo(!0),e.writeString(d)}else e.writeParentInfo(!1),e.writeLeftID(f.id)}else c.constructor===String?(e.writeParentInfo(!0),e.writeString(c)):c.constructor===Gl?(e.writeParentInfo(!1),e.writeLeftID(c)):qn();o!==null&&e.writeString(o)}this.content.write(e,n)}}const cT=(t,e)=>MF[e&xp](t),MF=[()=>{qn()},cF,hF,aF,gF,fF,dF,kF,mF,uF,()=>{qn()}],EF=10;class Rr extends r3{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){qn()}write(e,n){e.writeInfo(EF),Ve(e.restEncoder,this.length-n)}getMissing(e,n){return null}}const uT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},fT="__ $YJS$ __";uT[fT]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");uT[fT]=!0;const AF=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else n!==void 0&&n()}},RF=/[\uD800-\uDBFF]/,NF=/[\uDC00-\uDFFF]/,OF=(t,e)=>{let n=0,r=0;for(;n<t.length&&n<e.length&&t[n]===e[n];)n++;for(n>0&&RF.test(t[n-1])&&n--;r+n<t.length&&r+n<e.length&&t[t.length-r-1]===e[e.length-r-1];)r++;return r>0&&NF.test(t[t.length-r])&&r--,{index:n,remove:t.length-n-r,insert:e.slice(n,e.length-r)}},DF=OF,ei=(t,e)=>t>>>e|t<<32-e,LF=t=>ei(t,2)^ei(t,13)^ei(t,22),_F=t=>ei(t,6)^ei(t,11)^ei(t,25),HF=t=>ei(t,7)^ei(t,18)^t>>>3,IF=t=>ei(t,17)^ei(t,19)^t>>>10,zF=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),BF=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);class VF{constructor(){const e=new ArrayBuffer(320);this._H=new Uint32Array(e,0,8),this._H.set(BF),this._W=new Uint32Array(e,64,64)}_updateHash(){const e=this._H,n=this._W;for(let m=16;m<64;m++)n[m]=IF(n[m-2])+n[m-7]+HF(n[m-15])+n[m-16];let r=e[0],i=e[1],o=e[2],l=e[3],c=e[4],f=e[5],d=e[6],h=e[7];for(let m=0,g,y;m<64;m++)g=h+_F(c)+(c&f^~c&d)+zF[m]+n[m]>>>0,y=LF(r)+(r&i^r&o^i&o)>>>0,h=d,d=f,f=c,c=l+g>>>0,l=o,o=i,i=r,r=g+y>>>0;e[0]+=r,e[1]+=i,e[2]+=o,e[3]+=l,e[4]+=c,e[5]+=f,e[6]+=d,e[7]+=h}digest(e){let n=0;for(;n+56<=e.length;){let l=0;for(;l<16&&n+3<e.length;l++)this._W[l]=e[n++]<<24|e[n++]<<16|e[n++]<<8|e[n++];if(n%64!==0){for(this._W.fill(0,l,16);n<e.length;)this._W[l]|=e[n]<<(3-n%4)*8,n++;this._W[l]|=kn<<(3-n%4)*8}this._updateHash()}const r=n%64!==0;this._W.fill(0,0,16);let i=0;for(;n<e.length;i++)for(let l=3;l>=0&&n<e.length;l--)this._W[i]|=e[n++]<<l*8;r||(this._W[i-(n%4===0?0:1)]|=kn<<(3-n%4)*8),this._W[14]=e.byteLength/Xj,this._W[15]=e.byteLength*8,this._updateHash();const o=new Uint8Array(32);for(let l=0;l<this._H.length;l++)for(let c=0;c<4;c++)o[l*4+c]=this._H[l]>>>(3-c)*8;return o}}const jF=t=>new VF().digest(t),xt=new Pe("y-sync"),zi=new Pe("y-undo");new Pe("yjs-cursor");const UF=t=>{for(let n=6;n<t.length;n++)t[n%6]=t[n%6]^t[n];return t.slice(0,6)},PF=t=>YU(UF(jF(WU(t)))),Hh=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&e.sv.get(t.id.client)>t.id.clock&&!va(e.ds,t.id),FF=[{light:"#ecd44433",dark:"#ecd444"}],$F=(t,e,n)=>{if(!t.has(n)){if(t.size<e.length){const r=Bs();t.forEach(i=>r.add(i)),e=e.filter(i=>!r.has(i))}t.set(n,NU(e))}return t.get(n)},qF=(t,{colors:e=FF,colorMapping:n=new Map,permanentUserData:r=null,onFirstRender:i=()=>{},mapping:o}={})=>{let l=!1;const c=new GF(t,o),f=new Be({props:{editable:d=>{const h=xt.getState(d);return h.snapshot==null&&h.prevSnapshot==null}},key:xt,state:{init:(d,h)=>({type:t,doc:t.doc,binding:c,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:e,colorMapping:n,permanentUserData:r}),apply:(d,h)=>{const m=d.getMeta(xt);if(m!==void 0){h=Object.assign({},h);for(const g in m)h[g]=m[g]}return h.addToHistory=d.getMeta("addToHistory")!==!1,h.isChangeOrigin=m!==void 0&&!!m.isChangeOrigin,h.isUndoRedoOperation=m!==void 0&&!!m.isChangeOrigin&&!!m.isUndoRedoOperation,c.prosemirrorView!==null&&m!==void 0&&(m.snapshot!=null||m.prevSnapshot!=null)&&M8(0,()=>{c.prosemirrorView!=null&&(m.restore==null?c._renderSnapshot(m.snapshot,m.prevSnapshot,h):(c._renderSnapshot(m.snapshot,m.snapshot,h),delete h.restore,delete h.snapshot,delete h.prevSnapshot,c.mux(()=>{c._prosemirrorChanged(c.prosemirrorView.state.doc)})))}),h}},view:d=>(c.initView(d),o==null&&c._forceRerender(),i(),{update:()=>{const h=f.getState(d.state);if(h.snapshot==null&&h.prevSnapshot==null&&(l||d.state.doc.content.findDiffStart(d.state.doc.type.createAndFill().content)!==null)){if(l=!0,h.addToHistory===!1&&!h.isChangeOrigin){const m=zi.getState(d.state),g=m&&m.undoManager;g&&g.stopCapturing()}c.mux(()=>{h.doc.transact(m=>{m.meta.set("addToHistory",h.addToHistory),c._prosemirrorChanged(d.state.doc)},xt)})}},destroy:()=>{c.destroy()}})});return f},ZF=(t,e,n)=>{if(e!==null&&e.anchor!==null&&e.head!==null)if(e.type==="all")t.setSelection(new Un(t.doc));else if(e.type==="node"){const r=Rd(n.doc,n.type,e.anchor,n.mapping);t.setSelection(KF(t,r))}else{const r=Rd(n.doc,n.type,e.anchor,n.mapping),i=Rd(n.doc,n.type,e.head,n.mapping);r!==null&&i!==null&&t.setSelection(ce.between(t.doc.resolve(r),t.doc.resolve(i)))}},KF=(t,e)=>{const n=t.doc.resolve(e);return n.nodeAfter?me.create(t.doc,e):ce.near(n)},u2=(t,e)=>({type:e.selection.jsonID,anchor:p2(e.selection.anchor,t.type,t.mapping),head:p2(e.selection.head,t.type,t.mapping)});class GF{constructor(e,n=new Map){this.type=e,this.prosemirrorView=null,this.mux=AF(),this.mapping=n,this.isOMark=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=e.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{this.beforeTransactionSelection===null&&this.prosemirrorView!=null&&(this.beforeTransactionSelection=u2(this,this.prosemirrorView.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return this.prosemirrorView.hasFocus()?(T8&&this._domSelectionInView===null&&(M8(0,()=>{this._domSelectionInView=null}),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView):!1}_isDomSelectionInView(){const e=this.prosemirrorView._root.getSelection();if(e==null||e.anchorNode==null)return!1;const n=this.prosemirrorView._root.createRange();n.setStart(e.anchorNode,e.anchorOffset),n.setEnd(e.focusNode,e.focusOffset),n.getClientRects().length===0&&n.startContainer&&n.collapsed&&n.selectNodeContents(n.startContainer);const i=n.getBoundingClientRect(),o=JU.documentElement;return i.bottom>=0&&i.right>=0&&i.left<=(window.innerWidth||o.clientWidth||0)&&i.top<=(window.innerHeight||o.clientHeight||0)}renderSnapshot(e,n){n||(n=B8(_8(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(xt,{snapshot:e,prevSnapshot:n}))}unrenderSnapshot(){this.mapping.clear(),this.mux(()=>{const e=this.type.toArray().map(r=>Ad(r,this.prosemirrorView.state.schema,this)).filter(r=>r!==null),n=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new le(Q.from(e),0,0));n.setMeta(xt,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(n)})}_forceRerender(){this.mapping.clear(),this.mux(()=>{const e=this.beforeTransactionSelection!==null?null:this.prosemirrorView.state.selection,n=this.type.toArray().map(i=>Ad(i,this.prosemirrorView.state.schema,this)).filter(i=>i!==null),r=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new le(Q.from(n),0,0));if(e){const i=aa(Vo(e.anchor,0),r.doc.content.size),o=aa(Vo(e.head,0),r.doc.content.size);r.setSelection(ce.create(r.doc,i,o))}this.prosemirrorView.dispatch(r.setMeta(xt,{isChangeOrigin:!0,binding:this}))})}_renderSnapshot(e,n,r){let i=this.doc,o=this.type;if(e||(e=Yg(this.doc)),e instanceof Uint8Array||n instanceof Uint8Array)if((!(e instanceof Uint8Array)||!(n instanceof Uint8Array))&&qn(),i=new $s({gc:!1}),o2(i,n),n=Yg(i),o2(i,e),e=Yg(i),o._item===null){const l=Array.from(this.doc.share.keys()).find(c=>this.doc.share.get(c)===this.type);o=i.getXmlFragment(l)}else{const l=i.store.clients.get(o._item.id.client)??[],c=Vr(l,o._item.id.clock);o=l[c].content.type}this.mapping.clear(),this.mux(()=>{i.transact(l=>{const c=r.permanentUserData;c&&c.dss.forEach(m=>{Uo(l,m,g=>{})});const f=(m,g)=>{const y=m==="added"?c.getUserByClientId(g.client):c.getUserByDeletedId(g);return{user:y,type:m,color:$F(r.colorMapping,r.colors,y)}},d=Y8(o,new Qy(n.ds,e.sv)).map(m=>!m._item.deleted||Hh(m._item,e)||Hh(m._item,n)?Ad(m,this.prosemirrorView.state.schema,{mapping:new Map,isOMark:new Map},e,n,f):null).filter(m=>m!==null),h=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new le(Q.from(d),0,0));this.prosemirrorView.dispatch(h.setMeta(xt,{isChangeOrigin:!0}))},xt)})}_typeChanged(e,n){if(this.prosemirrorView==null)return;const r=xt.getState(this.prosemirrorView.state);if(e.length===0||r.snapshot!=null||r.prevSnapshot!=null){this.renderSnapshot(r.snapshot,r.prevSnapshot);return}this.mux(()=>{const i=(c,f)=>this.mapping.delete(f);Uo(n,n.deleteSet,c=>{if(c.constructor===Je){const f=c.content.type;f&&this.mapping.delete(f)}}),n.changed.forEach(i),n.changedParentTypes.forEach(i);const o=this.type.toArray().map(c=>dT(c,this.prosemirrorView.state.schema,this)).filter(c=>c!==null);let l=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new le(Q.from(o),0,0));ZF(l,this.beforeTransactionSelection,this),l=l.setMeta(xt,{isChangeOrigin:!0,isUndoRedoOperation:n.origin instanceof F8}),this.beforeTransactionSelection!==null&&this._isLocalCursorInView()&&l.scrollIntoView(),this.prosemirrorView.dispatch(l)})}_prosemirrorChanged(e){this.doc.transact(()=>{d2(this.doc,this.type,e,this),this.beforeTransactionSelection=u2(this,this.prosemirrorView.state)},xt)}initView(e){this.prosemirrorView!=null&&this.destroy(),this.prosemirrorView=e,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}destroy(){this.prosemirrorView!=null&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}}const dT=(t,e,n,r,i,o)=>{const l=n.mapping.get(t);if(l===void 0){if(t instanceof yn)return Ad(t,e,n,r,i,o);throw Hr()}return l},Ad=(t,e,n,r,i,o)=>{const l=[],c=f=>{if(f instanceof yn){const d=dT(f,e,n,r,i,o);d!==null&&l.push(d)}else{const d=f._item.right?.content?.type;d instanceof Po&&!d._item.deleted&&d._item.id.client===d.doc.clientID&&(f.applyDelta([{retain:f.length},...d.toDelta()]),d.doc.transact(m=>{d._item.delete(m)}));const h=YF(f,e,n,r,i,o);h!==null&&h.forEach(m=>{m!==null&&l.push(m)})}};r===void 0||i===void 0?t.toArray().forEach(c):Y8(t,new Qy(i.ds,r.sv)).forEach(c);try{const f=t.getAttributes(r);r!==void 0&&(Hh(t._item,r)?Hh(t._item,i)||(f.ychange=o?o("added",t._item.id):{type:"added"}):f.ychange=o?o("removed",t._item.id):{type:"removed"});const d=e.node(t.nodeName,f,l);return n.mapping.set(t,d),d}catch{return t.doc.transact(d=>{t._item.delete(d)},xt),n.mapping.delete(t),null}},YF=(t,e,n,r,i,o)=>{const l=[],c=t.toDelta(r,i,o);try{for(let f=0;f<c.length;f++){const d=c[f];l.push(e.text(d.insert,t$(d.attributes,e)))}}catch{return t.doc.transact(d=>{t._item.delete(d)},xt),null}return l},WF=(t,e)=>{const n=new $n,r=t.map(i=>({insert:i.text,attributes:pT(i.marks,e)}));return n.applyDelta(r),e.mapping.set(n,t),n},XF=(t,e)=>{const n=new yn(t.type.name);for(const r in t.attrs){const i=t.attrs[r];i!==null&&r!=="ychange"&&n.setAttribute(r,i)}return n.insert(0,Np(t).map(r=>f2(r,e))),e.mapping.set(n,t),n},f2=(t,e)=>t instanceof Array?WF(t,e):XF(t,e),v6=t=>typeof t=="object"&&t!==null,o3=(t,e)=>{const n=Object.keys(t).filter(i=>t[i]!==null);let r=n.length===Object.keys(e).filter(i=>e[i]!==null).length;for(let i=0;i<n.length&&r;i++){const o=n[i],l=t[o],c=e[o];r=o==="ychange"||l===c||v6(l)&&v6(c)&&o3(l,c)}return r},Np=t=>{const e=t.content.content,n=[];for(let r=0;r<e.length;r++){const i=e[r];if(i.isText){const o=[];for(let l=e[r];r<e.length&&l.isText;l=e[++r])o.push(l);r--,n.push(o)}else n.push(i)}return n},hT=(t,e)=>{const n=t.toDelta();return n.length===e.length&&n.every((r,i)=>r.insert===e[i].text&&C8(r.attributes||{}).length===e[i].marks.length&&w8(r.attributes,(o,l)=>{const c=s3(l),f=e[i].marks;return f.find(h=>h.type.name===c)?o3(o,f.find(h=>h.type.name===c)?.attrs):!1}))},fu=(t,e)=>{if(t instanceof yn&&!(e instanceof Array)&&h2(t,e)){const n=Np(e);return t._length===n.length&&o3(t.getAttributes(),e.attrs)&&t.toArray().every((r,i)=>fu(r,n[i]))}return t instanceof $n&&e instanceof Array&&hT(t,e)},Ih=(t,e)=>t===e||t instanceof Array&&e instanceof Array&&t.length===e.length&&t.every((n,r)=>e[r]===n),b6=(t,e,n)=>{const r=t.toArray(),i=Np(e),o=i.length,l=r.length,c=aa(l,o);let f=0,d=0,h=!1;for(;f<c;f++){const m=r[f],g=i[f];if(Ih(n.mapping.get(m),g))h=!0;else if(!fu(m,g))break}for(;f+d<c;d++){const m=r[l-d-1],g=i[o-d-1];if(Ih(n.mapping.get(m),g))h=!0;else if(!fu(m,g))break}return{equalityFactor:f+d,foundMappedChild:h}},JF=t=>{let e="",n=t._start;const r={};for(;n!==null;)n.deleted||(n.countable&&n.content instanceof jr?e+=n.content.str:n.content instanceof Vt&&(r[n.content.key]=null)),n=n.right;return{str:e,nAttrs:r}},QF=(t,e,n)=>{n.mapping.set(t,e);const{nAttrs:r,str:i}=JF(t),o=e.map(d=>({insert:d.text,attributes:Object.assign({},r,pT(d.marks,n))})),{insert:l,remove:c,index:f}=DF(i,o.map(d=>d.insert).join(""));t.delete(f,c),t.insert(f,l),t.applyDelta(o.map(d=>({retain:d.insert.length,attributes:d.attributes})))},e$=/(.*)(--[a-zA-Z0-9+/=]{8})$/,s3=t=>e$.exec(t)?.[1]??t,t$=(t,e)=>{const n=[];for(const r in t)n.push(e.mark(s3(r),t[r]));return n},pT=(t,e)=>{const n={};return t.forEach(r=>{if(r.type.name!=="ychange"){const i=Pi(e.isOMark,r.type,()=>!r.type.excludes(r.type));n[i?`${r.type.name}--${PF(r.toJSON())}`:r.type.name]=r.attrs}}),n},d2=(t,e,n,r)=>{if(e instanceof yn&&e.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.mapping.set(e,n),e instanceof yn){const m=e.getAttributes(),g=n.attrs;for(const y in g)g[y]!==null?m[y]!==g[y]&&y!=="ychange"&&e.setAttribute(y,g[y]):e.removeAttribute(y);for(const y in m)g[y]===void 0&&e.removeAttribute(y)}const i=Np(n),o=i.length,l=e.toArray(),c=l.length,f=aa(o,c);let d=0,h=0;for(;d<f;d++){const m=l[d],g=i[d];if(!Ih(r.mapping.get(m),g))if(fu(m,g))r.mapping.set(m,g);else break}for(;h+d+1<f;h++){const m=l[c-h-1],g=i[o-h-1];if(!Ih(r.mapping.get(m),g))if(fu(m,g))r.mapping.set(m,g);else break}t.transact(()=>{for(;c-d-h>0&&o-d-h>0;){const g=l[d],y=i[d],b=l[c-h-1],w=i[o-h-1];if(g instanceof $n&&y instanceof Array)hT(g,y)||QF(g,y,r),d+=1;else{let x=g instanceof yn&&h2(g,y),k=b instanceof yn&&h2(b,w);if(x&&k){const A=b6(g,y,r),N=b6(b,w,r);A.foundMappedChild&&!N.foundMappedChild?k=!1:!A.foundMappedChild&&N.foundMappedChild||A.equalityFactor<N.equalityFactor?x=!1:k=!1}x?(d2(t,g,y,r),d+=1):k?(d2(t,b,w,r),h+=1):(r.mapping.delete(e.get(d)),e.delete(d,1),e.insert(d,[f2(y,r)]),d+=1)}}const m=c-d-h;if(c===1&&o===0&&l[0]instanceof $n?(r.mapping.delete(l[0]),l[0].delete(0,l[0].length)):m>0&&(e.slice(d,d+m).forEach(g=>r.mapping.delete(g)),e.delete(d,m)),d+h<o){const g=[];for(let y=d;y<o-h;y++)g.push(f2(i[y],r));e.insert(d,g)}},xt)},h2=(t,e)=>!(e instanceof Array)&&t.nodeName===e.type.name,p2=(t,e,n)=>{if(t===0)return Gg(e,0,-1);let r=e._first===null?null:e._first.content.type;for(;r!==null&&e!==r;){if(r instanceof $n){if(r._length>=t)return Gg(r,t,-1);if(t-=r._length,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{do r=r._item===null?null:r._item.parent,t--;while(r!==e&&r!==null&&r._item!==null&&r._item.next===null);r!==null&&r!==e&&(r=r._item===null?null:r._item.next.content.type)}}else{const i=(n.get(r)||{nodeSize:0}).nodeSize;if(r._first!==null&&t<i)r=r._first.content.type,t--;else{if(t===1&&r._length===0&&i>1)return new Rh(r._item===null?null:r._item.id,r._item===null?su(r):null,null);if(t-=i,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{if(t===0)return r=r._item===null?r:r._item.parent,new Rh(r._item===null?null:r._item.id,r._item===null?su(r):null,null);do r=r._item.parent,t--;while(r!==e&&r._item.next===null);r!==e&&(r=r._item.next.content.type)}}}if(r===null)throw qn();if(t===0&&r.constructor!==$n&&r!==e)return n$(r._item.parent,r._item)}return Gg(e,e._length,-1)},n$=(t,e)=>{let n=null,r=null;return t._item===null?r=su(t):n=Oe(t._item.id.client,t._item.id.clock),new Rh(n,r,e.id)},Rd=(t,e,n,r)=>{const i=AP(n,t);if(i===null||i.type!==e&&!lu(e,i.type._item))return null;let o=i.type,l=0;if(o.constructor===$n)l=i.index;else if(o._item===null||!o._item.deleted){let c=o._first,f=0;for(;f<o._length&&f<i.index&&c!==null;){if(!c.deleted){const d=c.content.type;f++,d instanceof $n?l+=d._length:l+=r.get(d).nodeSize}c=c.right}l+=1}for(;o!==e&&o._item!==null;){const c=o._item.parent;if(c._item===null||!c._item.deleted){l+=1;let f=c._first;for(;f!==null;){const d=f.content.type;if(d===o)break;f.deleted||(d instanceof $n?l+=d._length:l+=r.get(d).nodeSize),f=f.right}}o=c}return l-1};function r$(t){const e=t.toArray(),n=r=>{let i;if(r instanceof $n)i=r.toDelta().map(l=>{const c={type:"text",text:l.insert};return l.attributes&&(c.marks=Object.keys(l.attributes).map(f=>{const d=l.attributes[f],m={type:s3(f)};return Object.keys(d)&&(m.attrs=d),m})),c});else if(r instanceof yn){i={type:r.nodeName};const o=r.getAttributes();Object.keys(o).length&&(i.attrs=o);const l=r.toArray();l.length&&(i.content=l.map(n).flat())}else qn();return i};return{type:"doc",content:e.map(n)}}const i$=t=>{const e=zi.getState(t).undoManager;if(e!=null)return e.undo(),!0},o$=t=>{const e=zi.getState(t).undoManager;if(e!=null)return e.redo(),!0},s$=new Set(["paragraph"]),l$=(t,e)=>!(t instanceof Je)||!(t.content instanceof Pr)||!(t.content.type instanceof Po||t.content.type instanceof yn&&e.has(t.content.type.nodeName))||t.content.type._length===0,a$=({protectedNodes:t=s$,trackedOrigins:e=[],undoManager:n=null}={})=>new Be({key:zi,state:{init:(r,i)=>{const o=xt.getState(i),l=n||new F8(o.type,{trackedOrigins:new Set([xt].concat(e)),deleteFilter:c=>l$(c,t),captureTransaction:c=>c.meta.get("addToHistory")!==!1});return{undoManager:l,prevSel:null,hasUndoOps:l.undoStack.length>0,hasRedoOps:l.redoStack.length>0}},apply:(r,i,o,l)=>{const c=xt.getState(l).binding,f=i.undoManager,d=f.undoStack.length>0,h=f.redoStack.length>0;return c?{undoManager:f,prevSel:u2(c,o),hasUndoOps:d,hasRedoOps:h}:d!==i.hasUndoOps||h!==i.hasRedoOps?Object.assign({},i,{hasUndoOps:f.undoStack.length>0,hasRedoOps:f.redoStack.length>0}):i}},view:r=>{const i=xt.getState(r.state),o=zi.getState(r.state).undoManager;return o.on("stack-item-added",({stackItem:l})=>{const c=i.binding;c&&l.meta.set(c,zi.getState(r.state).prevSel)}),o.on("stack-item-popped",({stackItem:l})=>{const c=i.binding;c&&(c.beforeTransactionSelection=l.meta.get(c)||c.beforeTransactionSelection)}),{destroy:()=>{o.destroy()}}}});Fe.create({name:"collaboration",priority:1e3,addOptions(){return{document:null,field:"default",fragment:null,provider:null}},addStorage(){return{isDisabled:!1}},onCreate(){this.editor.extensionManager.extensions.find(t=>t.name==="undoRedo")&&console.warn('[tiptap warn]: "@tiptap/extension-collaboration" comes with its own history support and is not compatible with "@tiptap/extension-undo-redo".')},addCommands(){return{undo:()=>({tr:t,state:e,dispatch:n})=>(t.setMeta("preventDispatch",!0),zi.getState(e).undoManager.undoStack.length===0?!1:n?i$(e):!0),redo:()=>({tr:t,state:e,dispatch:n})=>(t.setMeta("preventDispatch",!0),zi.getState(e).undoManager.redoStack.length===0?!1:n?o$(e):!0)}},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo()}},addProseMirrorPlugins(){var t;const e=this.options.fragment?this.options.fragment:this.options.document.getXmlFragment(this.options.field),n=a$(this.options.yUndoOptions),r=n.spec.view;n.spec.view=l=>{const{undoManager:c}=zi.getState(l.state);c.restore&&(c.restore(),c.restore=()=>{});const f=r?r(l):void 0;return{destroy:()=>{const d=c.trackedOrigins.has(c),h=c._observers;c.restore=()=>{d&&c.trackedOrigins.add(c),c.doc.on("afterTransaction",c.afterTransactionHandler),c._observers=h},f?.destroy&&f.destroy()}}};const i={...this.options.ySyncOptions,onFirstRender:this.options.onFirstRender},o=qF(e,i);return this.editor.options.enableContentCheck&&((t=e.doc)==null||t.on("beforeTransaction",()=>{try{const l=r$(e);if(l.content.length===0)return;this.editor.schema.nodeFromJSON(l).check()}catch(l){return this.editor.emit("contentError",{error:l,editor:this.editor,disableCollaboration:()=>{var c;(c=e.doc)==null||c.destroy(),this.storage.isDisabled=!0}}),!1}})),[o,n,this.editor.options.enableContentCheck&&new Be({key:new Pe("filterInvalidContent"),filterTransaction:()=>{var l;return this.storage.isDisabled!==!1&&((l=e.doc)==null||l.destroy()),!0}})].filter(Boolean)}});function c$(t){return!!t.getMeta(xt)}function C6(t){if(!t.length)return Xe.empty;const e=[],n=t[0].$from.node(0);return t.forEach(r=>{const i=r.$from.pos,o=r.$from.nodeAfter;o&&e.push(zt.node(i,i+o.nodeSize,{class:"ProseMirror-selectednoderange"}))}),Xe.create(n,e)}function Op(t,e,n){const r=[],i=t.node(0);typeof n=="number"&&n>=0||(t.sameParent(e)?n=Math.max(0,t.sharedDepth(e.pos)-1):n=t.sharedDepth(e.pos));const o=new Fc(t,e,n),l=o.depth===0?0:i.resolve(o.start).posAtIndex(0);return o.parent.forEach((c,f)=>{const d=l+f,h=d+c.nodeSize;if(d<o.start||d>=o.end)return;const m=new S2(i.resolve(d),i.resolve(h));r.push(m)}),r}var u$=class mT{constructor(e,n){this.anchor=e,this.head=n}map(e){return new mT(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return new Oo(n,r)}},Oo=class yo extends we{constructor(e,n,r,i=1){const{doc:o}=e,l=e===n,c=e.pos===o.content.size&&n.pos===o.content.size,f=l&&!c?o.resolve(n.pos+(i>0?1:-1)):n,d=l&&c?o.resolve(e.pos-(i>0?1:-1)):e,h=Op(d.min(f),d.max(f),r),m=f.pos>=e.pos?h[0].$from:h[h.length-1].$to,g=f.pos>=e.pos?h[h.length-1].$to:h[0].$from;super(m,g,h),this.depth=r}get $to(){return this.ranges[this.ranges.length-1].$to}eq(e){return e instanceof yo&&e.$from.pos===this.$from.pos&&e.$to.pos===this.$to.pos}map(e,n){const r=e.resolve(n.map(this.anchor)),i=e.resolve(n.map(this.head));return new yo(r,i)}toJSON(){return{type:"nodeRange",anchor:this.anchor,head:this.head}}get isForwards(){return this.head>=this.anchor}get isBackwards(){return!this.isForwards}extendBackwards(){const{doc:e}=this.$from;if(this.isForwards&&this.ranges.length>1){const i=this.ranges.slice(0,-1),o=i[0].$from,l=i[i.length-1].$to;return new yo(o,l,this.depth)}const n=this.ranges[0],r=e.resolve(Math.max(0,n.$from.pos-1));return new yo(this.$anchor,r,this.depth)}extendForwards(){const{doc:e}=this.$from;if(this.isBackwards&&this.ranges.length>1){const i=this.ranges.slice(1),o=i[0].$from,l=i[i.length-1].$to;return new yo(l,o,this.depth)}const n=this.ranges[this.ranges.length-1],r=e.resolve(Math.min(e.content.size,n.$to.pos+1));return new yo(this.$anchor,r,this.depth)}static fromJSON(e,n){return new yo(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r,i,o=1){return new this(e.resolve(n),e.resolve(r),i,o)}getBookmark(){return new u$(this.anchor,this.head)}};Oo.prototype.visible=!1;function dd(t){return t instanceof Oo}Fe.create({name:"nodeRange",addOptions(){return{depth:void 0,key:"Mod"}},addKeyboardShortcuts(){return{"Shift-ArrowUp":({editor:t})=>{const{depth:e}=this.options,{view:n,state:r}=t,{doc:i,selection:o,tr:l}=r,{anchor:c,head:f}=o;if(!dd(o)){const h=Oo.create(i,c,f,e,-1);return l.setSelection(h),n.dispatch(l),!0}const d=o.extendBackwards();return l.setSelection(d),n.dispatch(l),!0},"Shift-ArrowDown":({editor:t})=>{const{depth:e}=this.options,{view:n,state:r}=t,{doc:i,selection:o,tr:l}=r,{anchor:c,head:f}=o;if(!dd(o)){const h=Oo.create(i,c,f,e);return l.setSelection(h),n.dispatch(l),!0}const d=o.extendForwards();return l.setSelection(d),n.dispatch(l),!0},"Mod-a":({editor:t})=>{const{depth:e}=this.options,{view:n,state:r}=t,{doc:i,tr:o}=r,l=Oo.create(i,0,i.content.size,e);return o.setSelection(l),n.dispatch(o),!0}}},onSelectionUpdate(){const{selection:t}=this.editor.state;dd(t)&&this.editor.view.dom.classList.add("ProseMirror-noderangeselection")},addProseMirrorPlugins(){let t=!1,e=!1;return[new Be({key:new Pe("nodeRange"),props:{attributes:()=>t?{class:"ProseMirror-noderangeselection"}:{class:""},handleDOMEvents:{mousedown:(n,r)=>{const{key:i}=this.options,o=/Mac/.test(navigator.platform),l=!!r.shiftKey,c=!!r.ctrlKey,f=!!r.altKey,d=!!r.metaKey,h=o?d:c;return(i==null||i==="Shift"&&l||i==="Control"&&c||i==="Alt"&&f||i==="Meta"&&d||i==="Mod"&&h)&&(e=!0),e&&document.addEventListener("mouseup",()=>{e=!1;const{state:m}=n,{doc:g,selection:y,tr:b}=m,{$anchor:w,$head:x}=y;if(w.sameParent(x))return;const k=Oo.create(g,w.pos,x.pos,this.options.depth);b.setSelection(k),n.dispatch(b)},{once:!0}),!1}},decorations:n=>{const{selection:r}=n,i=dd(r);if(t=!1,!e)return i?(t=!0,C6(r.ranges)):null;const{$from:o,$to:l}=r;if(!i&&o.sameParent(l))return null;const c=Op(o,l,this.options.depth);return c.length?(t=!0,C6(c)):null}}})]}});function f$(t){let e="";const n=getComputedStyle(t);for(let r=0;r<n.length;r+=1)e+=`${n[r]}:${n.getPropertyValue(n[r])};`;return e}function d$(t){const e=t.cloneNode(!0),n=[t,...Array.from(t.getElementsByTagName("*"))],r=[e,...Array.from(e.getElementsByTagName("*"))];return n.forEach((i,o)=>{r[o].style.cssText=f$(i)}),e}function h$(t,e){let n=t;for(;n?.parentElement&&n.parentElement!==e.dom;)n=n.parentElement;return n?.parentElement===e.dom?n:void 0}function p$(t,e,n,r=5){const i=t.dom,o=i.firstElementChild,l=i.lastElementChild;if(!o||!l)return{x:e,y:n};const c=o.getBoundingClientRect(),f=l.getBoundingClientRect(),d=Math.min(Math.max(c.top+r,n),f.bottom-r),h=.5,m=Math.abs(c.left-f.left)<h,g=Math.abs(c.right-f.right)<h;let y=c;return m&&g&&(y=c),{x:Math.min(Math.max(y.left+r,e),y.right-r),y:d}}var gT=t=>{const{x:e,y:n,editor:r}=t,{view:i,state:o}=r,{x:l,y:c}=p$(i,e,n,5),f=i.root.elementsFromPoint(l,c);let d;if(Array.prototype.some.call(f,g=>{if(!i.dom.contains(g))return!1;const y=h$(g,i);return y?(d=y,!0):!1}),!d)return{resultElement:null,resultNode:null,pos:null};let h;try{h=i.posAtDOM(d,0)}catch{return{resultElement:null,resultNode:null,pos:null}}const m=o.doc.nodeAt(h);return{resultElement:d,resultNode:m,pos:h}};function hd(t,e){return window.getComputedStyle(t)[e]}function m$(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function g$(t,e,n){const r=parseInt(hd(t.dom,"paddingLeft"),10),i=parseInt(hd(t.dom,"paddingRight"),10),o=parseInt(hd(t.dom,"borderLeftWidth"),10),l=parseInt(hd(t.dom,"borderLeftWidth"),10),c=t.dom.getBoundingClientRect();return{left:m$(e,c.left+r+o,c.right-i-l),top:n}}function yT(t){var e;(e=t.parentNode)==null||e.removeChild(t)}function y$(t,e){const{doc:n}=e.view.state,r=gT({editor:e,x:t.clientX,y:t.clientY});if(!r.resultNode||r.pos===null)return[];const i=t.clientX,o=g$(e.view,i,t.clientY),l=e.view.posAtCoords(o);if(!l)return[];const{pos:c}=l;if(!n.resolve(c).parent)return[];const d=n.resolve(r.pos),h=n.resolve(r.pos+1);return Op(d,h,0)}function v$(t,e){const{view:n}=e;if(!t.dataTransfer)return;const{empty:r,$from:i,$to:o}=n.state.selection,l=y$(t,e),c=Op(i,o,0),f=c.some(x=>l.find(k=>k.$from===x.$from&&k.$to===x.$to)),d=r||!f?l:c;if(!d.length)return;const{tr:h}=n.state,m=document.createElement("div"),g=d[0].$from.pos,y=d[d.length-1].$to.pos,b=Oo.create(n.state.doc,g,y),w=b.content();d.forEach(x=>{const k=n.nodeDOM(x.$from.pos),A=d$(k);m.append(A)}),m.style.position="absolute",m.style.top="-10000px",document.body.append(m),t.dataTransfer.clearData(),t.dataTransfer.setDragImage(m,0,0),n.dragging={slice:w,move:!0},h.setSelection(b),n.dispatch(h),document.addEventListener("drop",()=>yT(m),{once:!0})}var w6=(t,e)=>{const n=t.resolve(e),{depth:r}=n;return r===0?e:n.pos-n.parentOffset-1},x6=(t,e)=>{const n=t.nodeAt(e),r=t.resolve(e);let{depth:i}=r,o=n;for(;i>0;){const l=r.node(i);i-=1,i===0&&(o=l)}return o},Jg=(t,e)=>{const n=xt.getState(t);return n?p2(e,n.type,n.binding.mapping):null},b$=(t,e)=>{const n=xt.getState(t);return n?Rd(n.doc,n.type,e,n.binding.mapping)||0:-1},S6=(t,e)=>{let n=e;for(;n?.parentNode&&n.parentNode!==t.dom;)n=n.parentNode;return n},vT=new Pe("dragHandle"),bT=({pluginKey:t=vT,element:e,editor:n,computePositionConfig:r,getReferencedVirtualElement:i,onNodeChange:o,onElementDragStart:l,onElementDragEnd:c})=>{const f=document.createElement("div");let d=!1,h=null,m=-1,g,y=null,b=null;function w(){e&&(e.style.visibility="hidden",e.style.pointerEvents="none")}function x(){if(e){if(!n.isEditable){w();return}e.style.visibility="",e.style.pointerEvents="auto"}}function k(D){const L=i?.()||{getBoundingClientRect:()=>D.getBoundingClientRect()};Cu(L,e,r).then(z=>{Object.assign(e.style,{position:z.strategy,left:`${z.x}px`,top:`${z.y}px`})})}function A(D){l?.(D),v$(D,n),setTimeout(()=>{e&&(e.style.pointerEvents="none")},0)}function N(D){c?.(D),w(),e&&(e.style.pointerEvents="auto")}return e.addEventListener("dragstart",A),e.addEventListener("dragend",N),f.appendChild(e),{unbind(){e.removeEventListener("dragstart",A),e.removeEventListener("dragend",N),y&&(cancelAnimationFrame(y),y=null,b=null)},plugin:new Be({key:typeof t=="string"?new Pe(t):t,state:{init(){return{locked:!1}},apply(D,L,z,q){const j=D.getMeta("lockDragHandle"),ee=D.getMeta("hideDragHandle");if(j!==void 0&&(d=j),ee)return w(),d=!1,h=null,m=-1,o?.({editor:n,node:null,pos:-1}),L;if(D.docChanged&&m!==-1&&e)if(c$(D)){const $=b$(q,g);$!==m&&(m=$)}else{const $=D.mapping.map(m);$!==m&&(m=$,g=Jg(q,m))}return L}},view:D=>{var L;return e.draggable=!0,e.style.pointerEvents="auto",(L=n.view.dom.parentElement)==null||L.appendChild(f),f.style.pointerEvents="none",f.style.position="absolute",f.style.top="0",f.style.left="0",{update(z,q){if(!e)return;if(!n.isEditable){w();return}if(d?e.draggable=!1:e.draggable=!0,D.state.doc.eq(q.doc)||m===-1)return;let j=D.nodeDOM(m);if(j=S6(D,j),j===D.dom||j?.nodeType!==1)return;const ee=D.posAtDOM(j,0),$=x6(n.state.doc,ee),re=w6(n.state.doc,ee);h=$,m=re,g=Jg(D.state,m),o?.({editor:n,node:h,pos:m}),k(j)},destroy(){y&&(cancelAnimationFrame(y),y=null,b=null),e&&yT(f)}}},props:{handleDOMEvents:{keydown(D){return!e||d||D.hasFocus()&&(w(),h=null,m=-1,o?.({editor:n,node:null,pos:-1})),!1},mouseleave(D,L){return d||L.target&&!f.contains(L.relatedTarget)&&(w(),h=null,m=-1,o?.({editor:n,node:null,pos:-1})),!1},mousemove(D,L){return!e||d||(b={x:L.clientX,y:L.clientY},y)||(y=requestAnimationFrame(()=>{if(y=null,!b)return;const{x:z,y:q}=b;b=null;const j=gT({x:z,y:q,editor:n});if(!j.resultElement)return;let ee=j.resultElement;if(ee=S6(D,ee),ee===D.dom||ee?.nodeType!==1)return;const $=D.posAtDOM(ee,0),re=x6(n.state.doc,$);if(re!==h){const se=w6(n.state.doc,$);h=re,m=se,g=Jg(D.state,m),o?.({editor:n,node:h,pos:m}),k(ee),x()}})),!1}}}})}},m2={placement:"left-start",strategy:"absolute"};Fe.create({name:"dragHandle",addOptions(){return{render(){const t=document.createElement("div");return t.classList.add("drag-handle"),t},computePositionConfig:{},locked:!1,onNodeChange:()=>null,onElementDragStart:void 0,onElementDragEnd:void 0}},addCommands(){return{lockDragHandle:()=>({editor:t})=>(this.options.locked=!0,t.commands.setMeta("lockDragHandle",this.options.locked)),unlockDragHandle:()=>({editor:t})=>(this.options.locked=!1,t.commands.setMeta("lockDragHandle",this.options.locked)),toggleDragHandle:()=>({editor:t})=>(this.options.locked=!this.options.locked,t.commands.setMeta("lockDragHandle",this.options.locked))}},addProseMirrorPlugins(){const t=this.options.render();return[bT({computePositionConfig:{...m2,...this.options.computePositionConfig},getReferencedVirtualElement:this.options.getReferencedVirtualElement,element:t,editor:this.editor,onNodeChange:this.options.onNodeChange,onElementDragStart:this.options.onElementDragStart,onElementDragEnd:this.options.onElementDragEnd}).plugin]}});var C$=t=>{const{className:e="drag-handle",children:n,editor:r,pluginKey:i=vT,onNodeChange:o,onElementDragStart:l,onElementDragEnd:c,computePositionConfig:f=m2}=t,[d,h]=M.useState(null),m=M.useRef(null);return M.useEffect(()=>{let g=null;return d?r.isDestroyed?()=>{m.current=null}:(m.current||(g=bT({editor:r,element:d,pluginKey:i,computePositionConfig:{...m2,...f},onElementDragStart:l,onElementDragEnd:c,onNodeChange:o}),m.current=g.plugin,r.registerPlugin(m.current)),()=>{r.unregisterPlugin(i),m.current=null,g&&(g.unbind(),g=null)}):()=>{m.current=null}},[d,r,o,i,f,l,c]),S.jsx("div",{className:e,style:{visibility:"hidden",position:"absolute"},ref:h,children:n})},w$=C$;function x$({initialOpen:t=!1,placement:e="top",open:n,onOpenChange:r,delay:i=600,closeDelay:o=0}={}){const[l,c]=M.useState(t),f=n??l,d=r??c,h=gp({placement:e,open:f,onOpenChange:d,whileElementsMounted:lp,middleware:[fp(4),zy({crossAxis:e.includes("-"),fallbackAxisSideDirection:"start",padding:4}),Iy({padding:4})]}),m=h.context,g=TB(m,{mouseOnly:!0,move:!1,restMs:i,enabled:n==null,delay:{close:o}}),y=jB(m,{enabled:n==null}),b=jy(m),w=Uy(m,{role:"tooltip"}),x=yp([g,y,b,w]);return M.useMemo(()=>({open:f,setOpen:d,...x,...h}),[f,d,x,h])}const g2=M.createContext(null);function CT(){const t=M.useContext(g2);if(t==null)throw new Error("Tooltip components must be wrapped in <TooltipProvider />");return t}function wT({children:t,...e}){const n=x$(e);return e.useDelayGroup?S.jsx(MB,{delay:{open:e.delay??0,close:e.closeDelay??0},timeoutMs:e.timeout,children:S.jsx(g2.Provider,{value:n,children:t})}):S.jsx(g2.Provider,{value:n,children:t})}const xT=M.forwardRef(function({children:e,asChild:n=!1,...r},i){const o=CT(),l=M.isValidElement(e)?parseInt(M.version,10)>=19?e.props.ref:e.ref:void 0,c=Fs([o.refs.setReference,i,l]);if(n&&M.isValidElement(e)){const f={"data-tooltip-state":o.open?"open":"closed"};return M.cloneElement(e,o.getReferenceProps({ref:c,...r,...typeof e.props=="object"?e.props:{},...f}))}return S.jsx("button",{ref:c,"data-tooltip-state":o.open?"open":"closed",...o.getReferenceProps(r),children:e})}),ST=M.forwardRef(function({style:e,children:n,portal:r=!0,portalProps:i={},...o},l){const c=CT(),f=Fs([c.refs.setFloating,l]);if(!c.open)return null;const d=S.jsx("div",{ref:f,style:{...c.floatingStyles,...e},...c.getFloatingProps(o),className:"tiptap-tooltip",children:n});return r?S.jsx(mp,{...i,children:d}):d});wT.displayName="Tooltip";xT.displayName="TooltipTrigger";ST.displayName="TooltipContent";const S$={ctrl:"",alt:"",shift:""},T$=(t,e)=>{if(e){const n=t.toLowerCase();return S$[n]||t.toUpperCase()}return t.charAt(0).toUpperCase()+t.slice(1)},k$=(t,e)=>t?t.split("-").map(n=>n.trim()).map(n=>T$(n,e)):[],M$=({shortcuts:t})=>t.length===0?null:S.jsx("div",{children:t.map((e,n)=>S.jsxs(M.Fragment,{children:[n>0&&S.jsx("kbd",{children:"+"}),S.jsx("kbd",{children:e})]},n))}),kt=M.forwardRef(({className:t="",spanTag:e,children:n,tooltip:r,showTooltip:i=!0,shortcutKeys:o,"aria-label":l,...c},f)=>{const d=M.useMemo(()=>typeof navigator<"u"&&navigator.platform.toLowerCase().includes("mac"),[]),h=M.useMemo(()=>k$(o,d),[o,d]);return!r||!i?e?S.jsx("span",{className:`tiptap-button ${t}`.trim(),ref:f,"aria-label":l,...c,children:n}):S.jsx("button",{className:`tiptap-button ${t}`.trim(),ref:f,"aria-label":l,...c,children:n}):S.jsxs(wT,{delay:200,children:[S.jsx(xT,{className:`tiptap-button ${t}`.trim(),ref:f,"aria-label":l,...c,children:n}),S.jsxs(ST,{children:[r,S.jsx(M$,{shortcuts:h})]})]})});kt.displayName="Button";const Ru=M.forwardRef(({decorative:t,orientation:e="vertical",className:n="",...r},i)=>{const l=t?{role:"none"}:{"aria-orientation":e==="vertical"?e:void 0,role:"separator"};return S.jsx("div",{className:`tiptap-separator ${n}`.trim(),"data-orientation":e,...l,...r,ref:i})});Ru.displayName="Separator";const TT=M.createContext(null);function Dp(){const t=M.useContext(TT);if(!t)throw new Error("DropdownMenu components must be wrapped in <DropdownMenu />");return t}function E$({initialOpen:t=!1,open:e,onOpenChange:n,side:r="bottom",align:i="start"}){const[o,l]=M.useState(t),[c,f]=M.useState(`${r}-${i}`),[d,h]=M.useState(null),[m,g]=M.useState(null),y=e??o,b=n??l,w=M.useRef([]),x=M.useRef([]),k=gp({open:y,onOpenChange:b,placement:c,middleware:[fp({mainAxis:4}),zy(),Iy({padding:4}),JS({apply({availableHeight:L}){const z=L-16;g(z)}})],whileElementsMounted:lp}),{context:A}=k,N=yp([o8(A,{event:"click",toggle:!0,ignoreMouse:!1}),Uy(A,{role:"menu"}),jy(A,{outsidePress:!0,outsidePressEvent:"mousedown"}),PB(A,{listRef:w,activeIndex:d,onNavigate:h,loop:!0}),$B(A,{listRef:x,onMatch:y?h:void 0,activeIndex:d})]),D=M.useCallback((L,z)=>{f(`${L}-${z}`)},[]);return M.useMemo(()=>({open:y,setOpen:b,activeIndex:d,setActiveIndex:h,elementsRef:w,labelsRef:x,updatePosition:D,maxHeight:m,...N,...k}),[y,b,d,N,k,D,m])}function kT({children:t,...e}){const n=E$(e);return S.jsx(TT.Provider,{value:n,children:S.jsx(pB,{elementsRef:n.elementsRef,labelsRef:n.labelsRef,children:t})})}const l3=M.forwardRef(({children:t,asChild:e=!1,...n},r)=>{const i=Dp(),o=M.isValidElement(t)?parseInt(M.version,10)>=19?t.props.ref:t.ref:void 0,l=Fs([i.refs.setReference,r,o]);if(e&&M.isValidElement(t)){const c={"data-state":i.open?"open":"closed"};return M.cloneElement(t,i.getReferenceProps({ref:l,...n,...typeof t.props=="object"?t.props:{},"aria-expanded":i.open,"aria-haspopup":"menu",...c}))}return S.jsx("button",{ref:l,"aria-expanded":i.open,"aria-haspopup":"menu","data-state":i.open?"open":"closed",...i.getReferenceProps(n),children:t})});l3.displayName="DropdownMenuTrigger";const a3=M.forwardRef(({style:t,className:e,orientation:n="vertical",side:r="bottom",align:i="start",portal:o=!0,portalProps:l={},...c},f)=>{const d=Dp(),h=Fs([d.refs.setFloating,f]);if(M.useEffect(()=>{d.updatePosition(r,i)},[d,r,i]),!d.open)return null;const m=S.jsx(i8,{context:d.context,modal:!1,initialFocus:0,returnFocus:!0,children:S.jsx("div",{ref:h,className:`tiptap-dropdown-menu ${e||""}`,style:{position:d.strategy,top:d.y??0,left:d.x??0,outline:"none",...t},"aria-orientation":n,"data-orientation":n,"data-state":d.open?"open":"closed","data-side":r,"data-align":i,...d.getFloatingProps(c),children:c.children})});return o?S.jsx(mp,{...l,children:m}):m});a3.displayName="DropdownMenuContent";const c3=M.forwardRef(({children:t,disabled:e,asChild:n=!1,onSelect:r,className:i,...o},l)=>{const c=Dp(),f=mB({label:e?null:t?.toString()}),d=c.activeIndex===f.index,h=M.useCallback(g=>{e||(r?.(),o.onClick?.(g),c.setOpen(!1))},[c,e,r,o]),m={ref:Fs([f.ref,l]),role:"menuitem",className:i,tabIndex:d?0:-1,"data-highlighted":d,"aria-disabled":e,...c.getItemProps({...o,onClick:h})};if(n&&M.isValidElement(t)){const g=t.props,y={...m,...typeof t.props=="object"?t.props:{}},b={onClick:w=>{h(w),g.onClick?.(w)}};return M.cloneElement(t,{...y,...b})}return S.jsx("div",{...m,children:t})});c3.displayName="DropdownMenuItem";const u3=M.forwardRef(({children:t,label:e,className:n,...r},i)=>{const o=Dp(),l={};return o.maxHeight&&(l.maxHeight=`${o.maxHeight}px`),S.jsx("div",{...r,ref:i,role:"group","aria-label":e,className:`tiptap-button-group ${n||""}`,style:l,children:t})});u3.displayName="DropdownMenuGroup";const A$=M.forwardRef(({className:t,...e},n)=>S.jsx(Ru,{ref:n,className:`tiptap-dropdown-menu-separator ${t||""}`,...e}));A$.displayName=Ru.displayName;function MT(t){const{x:e,y:n,direction:r,editor:i}=t;let o=null,l=null,c=null,f=e,d=null;for(;l===null&&f<window.innerWidth&&f>0;){const h=document.elementsFromPoint(f,n),m=h.findIndex(y=>y.classList.contains("ProseMirror")),g=h.slice(0,m);if(g.length>0){let y=g[0],b=y,w=100;for(;w>0&&b.parentElement&&!b.parentElement.classList.contains("f-tiptap-editor__tiptap-editor");)b=b.parentElement,w--;if(b&&(y=b),o=y,c=i.view.posAtDOM(y,0),c>=0){d=i.state.doc.resolve(c),d.depth>=1&&(l=d.node(1)),l||(l=i.state.doc.nodeAt(Math.max(c-1,0)),l||(l=i.state.doc.nodeAt(Math.max(c,0))));break}}r==="left"?f-=1:f+=1}return{resultElement:o,resultNode:l,pos:c!==null?c:null,resolvedPos:d}}const R$=({event:t,editor:e})=>{const n=t.target.closest(".drag-handle").getBoundingClientRect(),r=MT({x:n.left,y:n.top+16,direction:"right",editor:e});if(!r||r.resolvedPos===null){console.error("No node found at the clicked position");return}e.chain().focus().triggerFolioTiptapCommand(r.resolvedPos).run()},N$=()=>{},ET=(t,e)=>{if(!e.resultNode||e.pos===null)throw new Error("Invalid target node");const n=t.state.doc.resolve(e.pos);let r,i;return e.resultNode.isLeaf||e.resultNode.content.size===0?(r=e.pos,i=e.pos+e.resultNode.nodeSize):(r=n.before(1),i=n.after(1)),{startPos:r,endPos:i}},O$=async(t,e,n)=>{try{if(e&&e.resultElement){const r=e.resultElement.outerHTML,i=e.resultElement.textContent||"";try{await navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([r],{type:"text/html"}),"text/plain":new Blob([i],{type:"text/plain"})})])}catch(o){console.error("Failed to write to clipboard:",o)}return{success:!0,data:{html:r}}}return console.error("No target node found for copying"),{success:!1}}catch(r){return console.error("Error copying node:",r),{success:!1}}},D$=(t,e,n)=>{try{if(!n.html)return{success:!1};const{startPos:r,endPos:i}=ET(t,e);return e.resultNode?.type.name==="paragraph"&&e.resultNode.content.size===0?t.commands.insertContentAt(r,n.html):t.commands.insertContentAt(i,n.html),{success:!0}}catch(r){return console.error("Error pasting node:",r),{success:!1}}},L$=(t,e,n)=>{try{const{startPos:r,endPos:i}=ET(t,e);if(typeof r=="number"&&typeof i=="number"){const o=t.state.tr;return o.delete(r,i),t.view.dispatch(o),{success:!0}}else return console.error("Error removing node"),{success:!1}}catch(r){return console.error("Error removing node:",r),{success:!1}}},_$=(t,e,n)=>{if(!e.resultNode||e.pos===null)return console.error("Invalid target node"),{success:!1};if(e.resultElement){const r=new CustomEvent("f-tiptap-node:edit");return e.resultElement.dispatchEvent(r),{success:!0}}return{success:!1}},T6={cs:{copyNode:"Koprovat",pasteNode:"Vloit",removeNode:"Odstranit",editFolioTiptapNode:"Upravit"},en:{copyNode:"Copy",pasteNode:"Paste",removeNode:"Remove",editFolioTiptapNode:"Edit"}},Qg=[{type:"copyNode",icon:lV,command:O$},{type:"removeNode",icon:Qh,command:L$}],H$={type:"pasteNode",icon:cV,command:D$},I$={type:"editFolioTiptapNode",icon:Jx,command:_$},z$=(t,e,n,r,i)=>async()=>{const o=document.querySelector(".f-tiptap-smart-drag-handle__button--drag").getBoundingClientRect(),l=MT({x:o.left,y:o.top+16,direction:"right",editor:t});if(l&&l.resultNode&&l.pos!==null){const{success:c,data:f}=await e.command(t,l,r);c&&(n(null),e.type==="copyNode"&&f&&f.html&&i({at:Date.now(),html:f.html}))}else n(null)},k6=1e3;function B$({editor:t,selectedNodeData:e,clipboardData:n,setClipboardData:r}){const[i,o]=M.useState(null),[,l]=ht.useReducer(m=>m+1,0),c=ht.useRef(null),[f]=ht.useState(void 0);if(ht.useEffect(()=>{if(n.at){const m=setTimeout(()=>{l()},k6);return()=>clearTimeout(m)}},[n.at]),!t)return null;let d;n.at?d=[...Qg.slice(0,1),H$,...Qg.slice(1)]:d=Qg;const h=[...e&&e.type==="folioTiptapNode"?[...d.slice(0,d.length-1),I$,d[d.length-1]]:d];return S.jsx("div",{className:"f-tiptap-smart-drag-handle-content",style:f,ref:c,children:S.jsxs("div",{className:"f-tiptap-smart-drag-handle-content__flex",children:[S.jsx(kt,{type:"button","data-style":"ghost",role:"button",tabIndex:-1,"aria-label":"Plus",onClick:m=>{R$({event:m,editor:t})},className:"f-tiptap-smart-drag-handle__button f-tiptap-smart-drag-handle__button--plus",children:S.jsx(bp,{className:"tiptap-button-icon"})}),S.jsxs(kT,{open:i==="drag",onOpenChange:m=>{o(m?"drag":null)},children:[S.jsx(l3,{asChild:!0,children:S.jsx(kt,{spanTag:!0,type:"button","data-style":"ghost",role:"button",tabIndex:-1,"aria-label":"Drag",onClick:N$,className:"f-tiptap-smart-drag-handle__button f-tiptap-smart-drag-handle__button--drag",children:n.at&&Date.now()-n.at<k6?S.jsx(oV,{className:"tiptap-button-icon"}):S.jsx(gV,{className:"tiptap-button-icon"})})}),S.jsx(a3,{children:S.jsx(u3,{children:h.map(m=>S.jsx(c3,{asChild:!0,children:S.jsxs(kt,{type:"button","data-style":"ghost",role:"button",tabIndex:-1,"aria-label":pe(T6,m.type),className:"f-tiptap-smart-drag-handle__dropdown-button",onClick:z$(t,m,o,n,r),children:[M.createElement(m.icon,{className:"tiptap-button-icon"}),pe(T6,m.type)]})},m.type))})})]})]})})}function V$({editor:t}){const[e,n]=ht.useState(null),[r,i]=ht.useState({at:null,html:null});return S.jsx(w$,{editor:t,onNodeChange:({node:o})=>{if(o){const l=document.querySelector(".drag-handle");if(l){const c=l.getBoundingClientRect(),f={type:o.type.name,x:c.x,y:c.y};if(e&&e.type===f.type&&e.x===f.x&&e.y===f.y)return;n(f);return}}n(null)},children:S.jsx(B$,{editor:t,selectedNodeData:e,clipboardData:r,setClipboardData:i})})}const AT=({content:t,schema:e,allowedNodeTypes:n})=>{if(!t)return t;if(t.type&&!e.nodes[t.type])return console.error(`Removed unsupported node type: ${t.type}`),{type:"folioTiptapInvalidNode",attrs:{invalidNodeHash:t}};if(t.type==="folioTiptapNode"&&n&&n.length>0){const r=t.attrs?.type;if(r&&!n.includes(r))return console.error(`Removed disallowed folioTiptapNode type: ${r}`),{type:"folioTiptapInvalidNode",attrs:{invalidNodeHash:t}}}if(Array.isArray(t.content)){const r=[];return t.content.forEach(i=>{const o=AT({content:i,schema:e,allowedNodeTypes:n});o&&r.push(o)}),{...t,content:r}}return t},j$=({content:t,editor:e,allowedFolioTiptapNodeTypes:n})=>{if(!t)return t;const r=n?.map(i=>i.type);return AT({content:t,schema:e.schema,allowedNodeTypes:r})},U$={commandPlaceholder:'Zante pst, nebo stisknte "/" pro pkazy',defaultPlaceholder:"Zante pst",headingInPagesPlaceholder:"Napite titulek strnky",h2Placeholder:'Napite H2 titulek, nebo "/" pro pkazy',h3Placeholder:'Napite H3 titulek, nebo "/" pro pkazy',h4Placeholder:'Napite H4 titulek, nebo "/" pro pkazy',singleHeadingPlaceholder:'Napite mezititulek, nebo "/" pro pkazy'},P$={commandPlaceholder:'Start writing, or press "/" for commands',defaultPlaceholder:"Start writing",headingInPagesPlaceholder:"Write page title",h2Placeholder:'Write H2 heading or "/" for commands',h3Placeholder:'Write H3 heading or "/" for commands',h4Placeholder:'Write H4 heading or "/" for commands',singleHeadingPlaceholder:'Write title or "/" for commands'},M6={cs:U$,en:P$};function F$(t,e){const n=Math.min(t.top,e.top),r=Math.max(t.bottom,e.bottom),i=Math.min(t.left,e.left),l=Math.max(t.right,e.right)-i,c=r-n,f=i,d=n;return new DOMRect(f,d,l,c)}var $$=class{constructor({editor:t,element:e,view:n,updateDelay:r=250,resizeDelay:i=60,shouldShow:o,appendTo:l,getReferencedVirtualElement:c,options:f}){this.preventHide=!1,this.isVisible=!1,this.scrollTarget=window,this.floatingUIOptions={strategy:"absolute",placement:"top",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1,onShow:void 0,onHide:void 0,onUpdate:void 0,onDestroy:void 0},this.shouldShow=({view:h,state:m,from:g,to:y})=>{const{doc:b,selection:w}=m,{empty:x}=w,k=!b.textBetween(g,y).length&&F2(m.selection),A=this.element.contains(document.activeElement);return!(!(h.hasFocus()||A)||x||k||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.resizeHandler=()=>{this.resizeDebounceTimer&&clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=window.setTimeout(()=>{this.updatePosition()},this.resizeDelay)},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:h})=>{var m;if(this.editor.isDestroyed){this.destroy();return}if(this.preventHide){this.preventHide=!1;return}h?.relatedTarget&&((m=this.element.parentNode)!=null&&m.contains(h.relatedTarget))||h?.relatedTarget!==this.editor.view.dom&&this.hide()},this.handleDebouncedUpdate=(h,m)=>{const g=!m?.selection.eq(h.state.selection),y=!m?.doc.eq(h.state.doc);!g&&!y||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(h,g,y,m)},this.updateDelay))},this.updateHandler=(h,m,g,y)=>{const{composing:b}=h;if(b||!m&&!g)return;if(!this.getShouldShow(y)){this.hide();return}this.updatePosition(),this.show()},this.transactionHandler=({transaction:h})=>{h.getMeta("bubbleMenu")==="updatePosition"&&this.updatePosition()};var d;this.editor=t,this.element=e,this.view=n,this.updateDelay=r,this.resizeDelay=i,this.appendTo=l,this.scrollTarget=(d=f?.scrollTarget)!=null?d:window,this.getReferencedVirtualElement=c,this.floatingUIOptions={...this.floatingUIOptions,...f},this.element.tabIndex=0,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.editor.on("transaction",this.transactionHandler),window.addEventListener("resize",this.resizeHandler),this.scrollTarget.addEventListener("scroll",this.resizeHandler),this.update(n,n.state),this.getShouldShow()&&(this.show(),this.updatePosition())}get middlewares(){const t=[];return this.floatingUIOptions.flip&&t.push(cp(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&t.push(Hy(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&t.push(ap(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&t.push(YS(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&t.push(up(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&t.push(KS(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&t.push(GS(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&t.push(WS(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),t}get virtualElement(){var t;const{selection:e}=this.editor.state,n=(t=this.getReferencedVirtualElement)==null?void 0:t.call(this);if(n)return n;const r=T9(this.view,e.from,e.to);let i={getBoundingClientRect:()=>r,getClientRects:()=>[r]};if(e instanceof me){let o=this.view.nodeDOM(e.from);const l=o.dataset.nodeViewWrapper?o:o.querySelector("[data-node-view-wrapper]");l&&(o=l),o&&(i={getBoundingClientRect:()=>o.getBoundingClientRect(),getClientRects:()=>[o.getBoundingClientRect()]})}if(e instanceof ot){const{$anchorCell:o,$headCell:l}=e,c=o?o.pos:l.pos,f=l?l.pos:o.pos,d=this.view.nodeDOM(c),h=this.view.nodeDOM(f);if(!d||!h)return;const m=d===h?d.getBoundingClientRect():F$(d.getBoundingClientRect(),h.getBoundingClientRect());i={getBoundingClientRect:()=>m,getClientRects:()=>[m]}}return i}updatePosition(){const t=this.virtualElement;t&&Cu(t,this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:e,y:n,strategy:r})=>{this.element.style.width="max-content",this.element.style.position=r,this.element.style.left=`${e}px`,this.element.style.top=`${n}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(t,e){const{state:n}=t,r=n.selection.from!==n.selection.to;if(this.updateDelay>0&&r){this.handleDebouncedUpdate(t,e);return}const i=!e?.selection.eq(t.state.selection),o=!e?.doc.eq(t.state.doc);this.updateHandler(t,i,o,e)}getShouldShow(t){var e;const{state:n}=this.view,{selection:r}=n,{ranges:i}=r,o=Math.min(...i.map(f=>f.$from.pos)),l=Math.max(...i.map(f=>f.$to.pos));return((e=this.shouldShow)==null?void 0:e.call(this,{editor:this.editor,element:this.element,view:this.view,state:n,oldState:t,from:o,to:l}))||!1}show(){var t;if(this.isVisible)return;this.element.style.visibility="visible",this.element.style.opacity="1";const e=typeof this.appendTo=="function"?this.appendTo():this.appendTo;(t=e??this.view.dom.parentElement)==null||t.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),window.removeEventListener("resize",this.resizeHandler),this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.editor.off("transaction",this.transactionHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},RT=t=>new Be({key:typeof t.pluginKey=="string"?new Pe(t.pluginKey):t.pluginKey,view:e=>new $$({view:e,...t})});Fe.create({name:"bubbleMenu",addOptions(){return{element:null,pluginKey:"bubbleMenu",updateDelay:void 0,appendTo:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[RT({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,updateDelay:this.options.updateDelay,options:this.options.options,appendTo:this.options.appendTo,getReferencedVirtualElement:this.options.getReferencedVirtualElement,shouldShow:this.options.shouldShow})]:[]}});var q$=class{constructor({editor:t,element:e,view:n,options:r,appendTo:i,shouldShow:o}){this.preventHide=!1,this.isVisible=!1,this.shouldShow=({view:l,state:c})=>{const{selection:f}=c,{$anchor:d,empty:h}=f,m=d.depth===1,g=d.parent.isTextblock&&!d.parent.type.spec.code&&!d.parent.textContent&&d.parent.childCount===0&&!this.getTextContent(d.parent);return!(!l.hasFocus()||!h||!m||!g||!this.editor.isEditable)},this.floatingUIOptions={strategy:"absolute",placement:"right",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1},this.updateHandler=(l,c,f,d)=>{const{composing:h}=l;if(h||!c&&!f)return;if(!this.getShouldShow(d)){this.hide();return}this.updatePosition(),this.show()},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:l})=>{var c;if(this.preventHide){this.preventHide=!1;return}l?.relatedTarget&&((c=this.element.parentNode)!=null&&c.contains(l.relatedTarget))||l?.relatedTarget!==this.editor.view.dom&&this.hide()},this.editor=t,this.element=e,this.view=n,this.appendTo=i,this.floatingUIOptions={...this.floatingUIOptions,...r},this.element.tabIndex=0,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.update(n,n.state),this.getShouldShow()&&(this.show(),this.updatePosition())}getTextContent(t){return w9(t,{textSerializers:K2(this.editor.schema)})}get middlewares(){const t=[];return this.floatingUIOptions.flip&&t.push(cp(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&t.push(Hy(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&t.push(ap(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&t.push(YS(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&t.push(up(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&t.push(KS(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&t.push(GS(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&t.push(WS(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),t}getShouldShow(t){var e;const{state:n}=this.view,{selection:r}=n,{ranges:i}=r,o=Math.min(...i.map(f=>f.$from.pos)),l=Math.max(...i.map(f=>f.$to.pos));return(e=this.shouldShow)==null?void 0:e.call(this,{editor:this.editor,view:this.view,state:n,oldState:t,from:o,to:l})}updatePosition(){const{selection:t}=this.editor.state,e=T9(this.view,t.from,t.to);Cu({getBoundingClientRect:()=>e,getClientRects:()=>[e]},this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:r,y:i,strategy:o})=>{this.element.style.width="max-content",this.element.style.position=o,this.element.style.left=`${r}px`,this.element.style.top=`${i}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(t,e){const n=!e?.selection.eq(t.state.selection),r=!e?.doc.eq(t.state.doc);this.updateHandler(t,n,r,e)}show(){var t;if(this.isVisible)return;this.element.style.visibility="visible",this.element.style.opacity="1";const e=typeof this.appendTo=="function"?this.appendTo():this.appendTo;(t=e??this.view.dom.parentElement)==null||t.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},NT=t=>new Be({key:typeof t.pluginKey=="string"?new Pe(t.pluginKey):t.pluginKey,view:e=>new q$({view:e,...t})});Fe.create({name:"floatingMenu",addOptions(){return{element:null,options:{},pluginKey:"floatingMenu",appendTo:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[NT({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,options:this.options.options,appendTo:this.options.appendTo,shouldShow:this.options.shouldShow})]:[]}});var Z$=ht.forwardRef(({pluginKey:t="bubbleMenu",editor:e,updateDelay:n,resizeDelay:r,appendTo:i,shouldShow:o=null,getReferencedVirtualElement:l,options:c,children:f,...d},h)=>{const m=M.useRef(document.createElement("div"));typeof h=="function"?h(m.current):h&&(h.current=m.current);const{editor:g}=ty(),y=e||g,b={updateDelay:n,resizeDelay:r,appendTo:i,pluginKey:t,shouldShow:o,getReferencedVirtualElement:l,options:c},w=M.useRef(b);return w.current=b,M.useEffect(()=>{if(y?.isDestroyed)return;if(!y){console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");return}const x=m.current;x.style.visibility="hidden",x.style.position="absolute";const k=RT({...w.current,editor:y,element:x});y.registerPlugin(k);const A=w.current.pluginKey;return()=>{y.unregisterPlugin(A),window.requestAnimationFrame(()=>{x.parentNode&&x.parentNode.removeChild(x)})}},[y]),da.createPortal(S.jsx("div",{...d,children:f}),m.current)});ht.forwardRef(({pluginKey:t="floatingMenu",editor:e,appendTo:n,shouldShow:r=null,options:i,children:o,...l},c)=>{const f=M.useRef(document.createElement("div"));typeof c=="function"?c(f.current):c&&(c.current=f.current);const{editor:d}=ty();return M.useEffect(()=>{const h=f.current;if(h.style.visibility="hidden",h.style.position="absolute",e?.isDestroyed||d?.isDestroyed)return;const m=e||d;if(!m){console.warn("FloatingMenu component is not rendered inside of an editor component or does not have editor prop.");return}const g=NT({editor:m,element:h,pluginKey:t,appendTo:n,shouldShow:r,options:i});return m.registerPlugin(g),()=>{m.unregisterPlugin(t),window.requestAnimationFrame(()=>{h.parentNode&&h.parentNode.removeChild(h)})}},[e,d,n,t,r,i]),da.createPortal(S.jsx("div",{...l,children:o}),f.current)});const e0={cs:{addFolioTiptapColumnBefore:"Pidat sloupec ped",addFolioTiptapColumnAfter:"Pidat sloupec za",deleteFolioTiptapColumn:"Odstranit sloupec"},en:{addFolioTiptapColumnBefore:"Add column before",addFolioTiptapColumnAfter:"Add column after",deleteFolioTiptapColumn:"Remove column"}},K$={pluginKey:"folioTiptapColumnsBubbleMenu",priority:1,shouldShow:({editor:t})=>t.isActive(wp.name),items:[[{key:"addFolioTiptapColumnBefore",title:pe(e0,"addFolioTiptapColumnBefore"),icon:Mx,command:({editor:t})=>{t.chain().focus().addFolioTiptapColumnBefore().run()}},{key:"deleteFolioTiptapColumn",title:pe(e0,"deleteFolioTiptapColumn"),icon:Cp,command:({editor:t})=>{t.chain().focus().deleteFolioTiptapColumn().run()}},{key:"addFolioTiptapColumnAfter",title:pe(e0,"addFolioTiptapColumnAfter"),icon:kx,command:({editor:t})=>{t.chain().focus().addFolioTiptapColumnAfter().run()}}]]},mr={cs:{addColumnAfter:"Pidat sloupec za",addColumnBefore:"Pidat sloupec ped",addRowAfter:"Pidat dek pod",addRowBefore:"Pidat dek nad",deleteColumn:"Odstranit sloupec",deleteRow:"Odstranit dek",deleteTable:"Odstranit tabulku",mergeCells:"Slouit buky",splitCell:"Rozdlit buku",toggleHeaderCell:"Pepnout buku na zhlav",toggleHeaderColumn:"Pepnout sloupec na zhlav",toggleHeaderRow:"Pepnout dek na zhlav"},en:{addColumnAfter:"Add column after",addColumnBefore:"Add column before",addRowAfter:"Add row below",addRowBefore:"Add row above",deleteColumn:"Remove column",deleteRow:"Remove row",deleteTable:"Remove table",mergeCells:"Merge cells",splitCell:"Split cell",toggleHeaderCell:"Toggle cell header",toggleHeaderColumn:"Toggle column header",toggleHeaderRow:"Toggle row header"}},G$={pluginKey:"tableBubbleMenu",priority:2,shouldShow:({editor:t})=>t.isActive("table"),disabledKeys:({editor:t})=>{const e=[];return t.can().splitCell()||e.push("splitCell"),t.can().mergeCells()||e.push("mergeCells"),e},items:[[{key:"addColumnBefore",title:pe(mr,"addColumnBefore"),icon:oS,command:({editor:t})=>{t.chain().focus().addColumnBefore().run()}},{key:"addColumnAfter",title:pe(mr,"addColumnAfter"),icon:iS,command:({editor:t})=>{t.chain().focus().addColumnAfter().run()}},{key:"deleteColumn",title:pe(mr,"deleteColumn"),icon:aS,command:({editor:t})=>{t.chain().focus().deleteColumn().run()}}],[{key:"addRowBefore",title:pe(mr,"addRowBefore"),icon:lS,command:({editor:t})=>{t.chain().focus().addRowBefore().run()}},{key:"addRowAfter",title:pe(mr,"addRowAfter"),icon:sS,command:({editor:t})=>{t.chain().focus().addRowAfter().run()}},{key:"deleteRow",title:pe(mr,"deleteRow"),icon:cS,command:({editor:t})=>{t.chain().focus().deleteRow().run()}}],[{key:"toggleHeaderColumn",title:pe(mr,"toggleHeaderColumn"),icon:pS,command:({editor:t})=>{t.chain().focus().toggleHeaderColumn().run()}},{key:"toggleHeaderRow",title:pe(mr,"toggleHeaderRow"),icon:mS,command:({editor:t})=>{t.chain().focus().toggleHeaderRow().run()}},{key:"toggleHeaderCell",title:pe(mr,"toggleHeaderCell"),icon:hS,command:({editor:t})=>{t.chain().focus().toggleHeaderCell().run()}}],[{key:"mergeCells",title:pe(mr,"mergeCells"),icon:fS,command:({editor:t})=>{t.chain().focus().mergeCells().run()}},{key:"splitCell",title:pe(mr,"splitCell"),icon:dS,command:({editor:t})=>{t.chain().focus().splitCell().run()}},{key:"deleteTable",title:pe(mr,"deleteTable"),icon:uS,command:({editor:t})=>{t.chain().focus().deleteTable().run()}}]]};function Y$({editor:t,source:e,activeMenus:n}){const r={placement:e.placement||"bottom",offset:e.offset||12,flip:!0},[i,o]=ht.useState([]),[l,c]=ht.useState([]),f=(m,g)=>{n.set(m,g)},d=m=>{n.delete(m)},h=(m,g)=>{if(n.size===0||!n.has(m))return!1;let y=-1/0;for(const[,b]of n.entries())b>y&&(y=b);return g>=y};return S.jsx(Z$,{pluginKey:e.pluginKey,shouldShow:({editor:m,state:g})=>{const y=e.shouldShow({editor:m,state:g});let b=!1;if(y?(f(e.pluginKey,e.priority),b=h(e.pluginKey,e.priority)):d(e.pluginKey),b){if(e.activeKeys){const w=e.activeKeys({editor:m,state:g});o(w)}if(e.disabledKeys){const w=e.disabledKeys({editor:m,state:g});c(w)}}return b},options:r,className:"f-tiptap-editor-bubble-menu","data-bubble-menu-type":e.pluginKey,children:e.items.map((m,g)=>S.jsx("div",{className:"f-tiptap-editor-bubble-menu__row",children:m.map(y=>{const b=y.icon,w=i.indexOf(y.key)!==-1,x=l.indexOf(y.key)!==-1;return S.jsx(kt,{type:"button","data-style":"ghost","data-size":"large-icon",role:"button",tabIndex:-1,"aria-label":y.title,disabled:x,"data-active-state":w?"on":"off","aria-pressed":w,tooltip:y.title,onClick:x?void 0:()=>{y.command({editor:t})},children:S.jsx(b,{className:"tiptap-button-icon"})},y.title)})},g))})}const W$=[K$,G$,dj,NI,JV];function X$({editor:t,blockEditor:e}){if(!t||!e)return null;const n=new Map;return S.jsx(S.Fragment,{children:W$.map(r=>S.jsx(Y$,{editor:t,source:r,activeMenus:n},r.pluginKey))})}const OT=M.forwardRef(({orientation:t="horizontal",size:e,className:n="",style:r={},...i},o)=>{const l={...r,...t==="horizontal"&&!e&&{flex:1},...e&&{width:t==="vertical"?"1px":e,height:t==="horizontal"?"1px":e}};return S.jsx("div",{ref:o,...i,className:n,style:l})});OT.displayName="Spacer";const f3=t=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})},d3=(t,e)=>{M.useEffect(()=>{const n=t.current;if(!n)return;let r=!0;r&&requestAnimationFrame(e);const i=new MutationObserver(()=>{r&&requestAnimationFrame(e)});return i.observe(n,{childList:!0,subtree:!0,attributes:!0}),()=>{r=!1,i.disconnect()}},[t,e])},J$=t=>{M.useEffect(()=>{const e=t.current;if(!e)return;const n=()=>Array.from(e.querySelectorAll('button:not([disabled]), [role="button"]:not([disabled]), [tabindex="0"]:not([disabled])')),r=(f,d,h)=>{f.preventDefault();let m=d;m>=h.length?m=0:m<0&&(m=h.length-1),h[m]?.focus()},i=f=>{const d=n();if(!d.length)return;const h=document.activeElement,m=d.indexOf(h);if(!e.contains(h))return;const y={ArrowRight:()=>r(f,m+1,d),ArrowDown:()=>r(f,m+1,d),ArrowLeft:()=>r(f,m-1,d),ArrowUp:()=>r(f,m-1,d),Home:()=>r(f,0,d),End:()=>r(f,d.length-1,d)}[f.key];y&&y()},o=f=>{const d=f.target;e.contains(d)&&d.setAttribute("data-focus-visible","true")},l=f=>{const d=f.target;e.contains(d)&&d.removeAttribute("data-focus-visible")};return e.addEventListener("keydown",i),e.addEventListener("focus",o,!0),e.addEventListener("blur",l,!0),n().forEach(f=>{f.addEventListener("focus",o),f.addEventListener("blur",l)}),()=>{e.removeEventListener("keydown",i),e.removeEventListener("focus",o,!0),e.removeEventListener("blur",l,!0),n().forEach(d=>{d.removeEventListener("focus",o),d.removeEventListener("blur",l)})}},[t])},Q$=t=>{const[e,n]=M.useState(!0),r=M.useRef(!1);M.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[]);const i=M.useCallback(()=>{if(!r.current)return;const o=t.current;if(!o)return;const l=Array.from(o.children).some(c=>c instanceof HTMLElement&&c.getAttribute("role")==="group"?c.children.length>0:!1);n(l)},[t]);return d3(t,i),e},eq=t=>{const[e,n]=M.useState(!0),r=M.useRef(!1);M.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[]);const i=M.useCallback(()=>{if(!r.current)return;const o=t.current;if(!o)return;const l=Array.from(o.children).some(c=>c instanceof HTMLElement);n(l)},[t]);return d3(t,i),e},tq=t=>{const[e,n]=M.useState(!0),r=M.useRef(!1);M.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[]);const i=M.useCallback(()=>{if(!r.current)return;const o=t.current;if(!o)return;const l=o.previousElementSibling,c=o.nextElementSibling;if(!l||!c){n(!1);return}const f=l.getAttribute("role")==="group"&&c.getAttribute("role")==="group",d=l.children.length>0&&c.children.length>0;n(f&&d)},[t]);return d3(t,i),e},DT=M.forwardRef(({children:t,className:e,variant:n="fixed",...r},i)=>{const o=M.useRef(null),l=Q$(o);return J$(o),l?S.jsx("div",{ref:f3([o,i]),role:"toolbar","aria-label":"toolbar","data-variant":n,className:`f-tiptap-editor-toolbar ${e||""}`,...r,children:t}):null});DT.displayName="Toolbar";const er=M.forwardRef(({children:t,className:e,...n},r)=>{const i=M.useRef(null);return eq(i)?S.jsx("div",{ref:f3([i,r]),role:"group",className:`f-tiptap-editor-toolbar__group ${e||""}`,...n,children:t}):null});er.displayName="ToolbarGroup";const Er=M.forwardRef(({...t},e)=>{const n=M.useRef(null);return tq(n)?S.jsx(Ru,{ref:f3([n,e]),orientation:"vertical",decorative:!0,...t}):null});Er.displayName="ToolbarSeparator";const nq={cs:{insert:"Vloit obsah"},en:{insert:"Insert content"}};function rq(t,e){if(!t)return console.log("No editor available for insertFolioTiptapNode"),!1;try{return t.commands.insertFolioTiptapNode(e)}catch(n){return console.error("insertFolioTiptapNode error",n),!1}}const LT=M.forwardRef(({editor:t,disabled:e},n)=>{const r=M.useCallback(o=>{!o.defaultPrevented&&!e&&t&&t.chain().focus().triggerFolioTiptapCommand(null).run()},[e,t]);if(M.useEffect(()=>{const o=l=>{l.origin===window.origin&&(!l.data||l.data.type!=="f-c-tiptap-overlay:saved"||l.data.uniqueId||rq(t,l.data.node))};return window.addEventListener("message",o),()=>{window.removeEventListener("message",o)}},[t]),!t||!t.isEditable)return null;const i=pe(nq,"insert");return S.jsx(kt,{ref:n,type:"button","data-style":"ghost",role:"button",tabIndex:-1,"aria-label":i,tooltip:i,onClick:r,children:S.jsx(bp,{className:"tiptap-button-icon"})})});LT.displayName="FolioTiptapNodeButton";const iq=(t,e)=>e?.schema?e.schema.spec.marks.get(t)!==void 0:!1,oq=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function sq(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return!t||t.replace(oq,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}function lq(t,e,n){try{const r=new URL(t,e);if(sq(r.href,n))return r.href}catch{}return"#"}const _T=M.createContext(null);function HT(){const t=M.useContext(_T);if(!t)throw new Error("Popover components must be wrapped in <Popover />");return t}function aq({initialOpen:t=!1,modal:e,open:n,onOpenChange:r,side:i="bottom",align:o="center",sideOffset:l=4,alignOffset:c=0}={}){const[f,d]=M.useState(t),[h,m]=M.useState(),[g,y]=M.useState(),[b,w]=M.useState(`${i}-${o}`),[x,k]=M.useState({sideOffset:l,alignOffset:c}),A=n??f,N=r??d,D=M.useMemo(()=>[fp({mainAxis:x.sideOffset,crossAxis:x.alignOffset}),zy({fallbackAxisSideDirection:"end",crossAxis:!1}),Iy({limiter:dB({offset:x.sideOffset})})],[x.sideOffset,x.alignOffset]),L=gp({placement:b,open:A,onOpenChange:N,whileElementsMounted:lp,middleware:D}),z=yp([o8(L.context),jy(L.context),Uy(L.context)]),q=M.useCallback((j,ee,$,re)=>{w(`${j}-${ee}`),($!==void 0||re!==void 0)&&k({sideOffset:$??x.sideOffset,alignOffset:re??x.alignOffset})},[x.sideOffset,x.alignOffset]);return M.useMemo(()=>({open:A,setOpen:N,...z,...L,modal:e,labelId:h,descriptionId:g,setLabelId:m,setDescriptionId:y,updatePosition:q}),[A,N,z,L,e,h,g,q])}function cq({children:t,modal:e=!1,...n}){const r=aq({modal:e,...n});return S.jsx(_T.Provider,{value:r,children:t})}const IT=M.forwardRef(function({children:e,asChild:n=!1,...r},i){const o=HT(),l=M.isValidElement(e)?parseInt(M.version,10)>=19?e.props.ref:e.ref:void 0,c=Fs([o.refs.setReference,i,l]);return n&&M.isValidElement(e)?M.cloneElement(e,o.getReferenceProps({ref:c,...r,...e.props,"data-state":o.open?"open":"closed"})):S.jsx("button",{ref:c,"data-state":o.open?"open":"closed",...o.getReferenceProps(r),children:e})}),zT=M.forwardRef(function({className:e,side:n="bottom",align:r="center",sideOffset:i,alignOffset:o,style:l,portal:c=!0,portalProps:f={},asChild:d=!1,children:h,...m},g){const y=HT(),b=M.isValidElement(h)?parseInt(M.version,10)>=19?h.props.ref:h.ref:void 0,w=Fs([y.refs.setFloating,g,b]);if(M.useEffect(()=>{y.updatePosition(n,r,i,o)},[y,n,r,i,o]),!y.context.open)return null;const x={ref:w,style:{position:y.strategy,top:y.y??0,left:y.x??0,...l},"aria-labelledby":y.labelId,"aria-describedby":y.descriptionId,className:`tiptap-popover ${e||""}`,"data-side":n,"data-align":r,"data-state":y.context.open?"open":"closed",...y.getFloatingProps(m)},k=d&&M.isValidElement(h)?M.cloneElement(h,{...x,...h.props}):S.jsx("div",{...x,children:h}),A=S.jsx(i8,{context:y.context,modal:y.modal,children:k});return c?S.jsx(mp,{...f,children:A}):A});IT.displayName="PopoverTrigger";zT.displayName="PopoverContent";const vo={cs:{apply:"Uloit",openTheLink:"Otevt odkaz",openSettings:"Upravit odkaz",removeLink:"Odstranit odkaz",placeholder:"Vloit URL odkazu ",settings:"Nastavit odkaz",openInNew:"Otevt v novm okn",link:"Odkaz"},en:{apply:"Apply",openTheLink:"Open the link",openSettings:"Edit link",removeLink:"Remove link",placeholder:"Paste link URL ",settings:"Link settings",openInNew:"Open in new window",link:"Link"}},pd={href:null,rel:null,target:null},uq=t=>{const{editor:e,onSetLink:n,onLinkActive:r,editorState:i}=t,[o,l]=M.useState({...pd});M.useEffect(()=>{if(!i.active)return;const d=e.getAttributes("link");e.isActive("link")&&o.href===null&&(l({href:d.href||null,rel:d.rel||null,target:d.target||null}),r?.())},[i.active,r,o,e]),M.useEffect(()=>{if(!i.active)return;const d=()=>{const h=e.getAttributes("link");l({href:h.href||null,rel:h.rel||null,target:h.target||null}),e.isActive("link")&&h.href!==null&&r?.()};return e.on("selectionUpdate",d),()=>{e.off("selectionUpdate",d)}},[i.active,r,o,e]);const c=M.useCallback((d=pd)=>{!o.href&&!d.href||(e.chain().focus().extendMarkRange("link").setLink({href:d.href||o.href||"",rel:typeof d.rel>"u"?o.rel:d.rel,target:typeof d.target>"u"?o.target:d.target}).run(),l({...pd}),n?.())},[e,n,o.href,o.rel,o.target]),f=M.useCallback(()=>{e&&(e.chain().focus().extendMarkRange("link").unsetLink().setMeta("preventAutolink",!0).run(),l({...pd}))},[e]);return{linkData:o,setLinkData:l,setLink:c,removeLink:f}},BT=M.forwardRef(({className:t,children:e,...n},r)=>{const i=pe(vo,"link");return S.jsx(kt,{type:"button",className:t,"data-style":"ghost",role:"button",tabIndex:-1,"aria-label":i,tooltip:i,ref:r,...n,children:e||S.jsx(qx,{className:"tiptap-button-icon"})})}),fq=({linkData:t,setLinkData:e,setLink:n,removeLink:r,active:i})=>{const o=f=>{f.key==="Enter"&&(f.preventDefault(),n())},l=()=>{window.parent.postMessage({type:"f-tiptap-editor:open-link-popover",urlJson:t},"*")},c=()=>{if(!t.href)return;const f=lq(t.href,window.location.href);f!=="#"&&window.open(f,"_blank","noopener,noreferrer")};return S.jsx("div",{className:"f-tiptap-link-popover",children:S.jsxs("div",{className:"tiptap-popover__rows",children:[S.jsxs("div",{className:"tiptap-popover__row",children:[S.jsx("input",{type:"url",placeholder:pe(vo,"placeholder"),value:t.href||"",onChange:f=>e({...t,href:f.target.value||null}),onKeyDown:o,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",className:"f-tiptap-link-popover__input"}),S.jsx("div",{className:"tiptap-button-group","data-orientation":"horizontal",children:S.jsx(kt,{type:"button",onClick:()=>n(),title:pe(vo,"apply"),disabled:!t.href&&!i,"data-style":"ghost",children:S.jsx(Ix,{className:"tiptap-button-icon"})})}),S.jsx(Ru,{}),S.jsxs("div",{className:"tiptap-button-group","data-orientation":"horizontal",children:[S.jsx(kt,{type:"button",onClick:c,title:pe(vo,"openTheLink"),disabled:!t.href&&!i,"data-style":"ghost",children:S.jsx(Bx,{className:"tiptap-button-icon"})}),S.jsx(kt,{type:"button",onClick:r,title:pe(vo,"removeLink"),disabled:!t.href&&!i,"data-style":"ghost",children:S.jsx(gS,{className:"tiptap-button-icon"})})]})]}),S.jsxs("div",{className:"tiptap-popover__row",children:[S.jsxs(kt,{type:"button",onClick:l,"data-active-state":t.rel?"on":"off",title:pe(vo,"openSettings"),"data-style":"ghost",className:"f-tiptap-link-popover__settings-button",children:[S.jsx(_V,{className:"tiptap-button-icon"}),pe(vo,"settings")]}),S.jsxs("label",{className:"f-tiptap-link-popover__checkbox-label",children:[S.jsx("input",{type:"checkbox",className:"f-tiptap-link-popover__checkbox",checked:t.target==="_blank",onChange:f=>{n({...t,target:f.target.checked?"_blank":null})}}),S.jsx("span",{className:"f-tiptap-link-popover__checkbox-text",children:pe(vo,"openInNew")})]})]})]})})};function dq({editor:t,editorState:e}){const[n,r]=M.useState(!1),l=uq({editor:t,onSetLink:()=>{r(!1)},onLinkActive:()=>r(!0),editorState:e}),c=M.useCallback(f=>{r(f)},[]);return M.useEffect(()=>{if(!n)return;const f=d=>{if(d.origin===window.origin&&d.data?.type==="f-input-tiptap:save-url-json"&&d.data.urlJson){const h={href:d.data.urlJson.href||null,rel:d.data.urlJson.rel||null,target:d.data.urlJson.target||null};l.setLinkData(h),l.setLink(h)}};return window.addEventListener("message",f),()=>{window.removeEventListener("message",f)}},[n,l]),S.jsxs(cq,{open:n,onOpenChange:c,children:[S.jsx(IT,{asChild:!0,children:S.jsx(BT,{disabled:!e.enabled,"data-active-state":e.active?"on":"off","data-disabled":!e.enabled})}),S.jsx(zT,{children:S.jsx(fq,{active:e.active,...l})})]})}BT.displayName="LinkButton";function VT(t){const{editor:e}=ty();return M.useMemo(()=>t||e,[t,e])}const hq={bold:Lx,italic:ep,underline:ky,strike:wy,code:Hx,superscript:Sy,subscript:xy},pq={bold:"Ctrl-b",italic:"Ctrl-i",underline:"Ctrl-u",strike:"Ctrl-Shift-s",code:"Ctrl-e",superscript:"Ctrl-.",subscript:"Ctrl-,"},mq={cs:{bold:"Tun",italic:"Kurzva",underline:"Podtren",strike:"Pekrtnut",code:"Kd",superscript:"Horn index",subscript:"Doln index"},en:{bold:"Bold",italic:"Italic",underline:"Underline",strike:"Strike",code:"Code",superscript:"Superscript",subscript:"Subscript"}};function jT(t,e){if(!t)return!1;try{return t.can().toggleMark(e)}catch{return!1}}function gq(t,e){return t?t.isActive(e):!1}function yq(t,e){t&&t.chain().focus().toggleMark(e).run()}function vq(t,e,n=!1){return!!(!t||n||t.isActive("codeBlock")||!jT(t,e))}function bq(t){const{editor:e,type:n,hideWhenUnavailable:r,markInSchema:i}=t;return!(!i||!e||r&&(Y2(e.state.selection)||!jT(e,n)))}function Cq(t){return pe(mq,t)}function wq(t,e,n=!1){const r=iq(e,t),i=vq(t,e,n),o=gq(t,e),l=hq[e],c=pq[e],f=Cq(e);return{markInSchema:r,isDisabled:i,isActive:o,Icon:l,shortcutKey:c,formattedName:f}}const UT=M.forwardRef(({editor:t,type:e,text:n,hideWhenUnavailable:r=!1,className:i="",disabled:o,onClick:l,children:c,...f},d)=>{const h=VT(t),{markInSchema:m,isDisabled:g,isActive:y,Icon:b,shortcutKey:w,formattedName:x}=wq(h,e,o),k=M.useCallback(N=>{l?.(N),!N.defaultPrevented&&!g&&h&&yq(h,e)},[l,g,h,e]);return!M.useMemo(()=>bq({editor:h,type:e,hideWhenUnavailable:r,markInSchema:m}),[h,e,r,m])||!h||!h.isEditable?null:S.jsx(kt,{type:"button",className:i.trim(),disabled:g,"data-style":"ghost","data-active-state":y?"on":"off","data-disabled":g,role:"button",tabIndex:-1,"aria-label":x,"aria-pressed":y,tooltip:x,shortcutKeys:w,onClick:k,...f,ref:d,children:c||S.jsxs(S.Fragment,{children:[S.jsx(b,{className:"tiptap-button-icon"}),n&&S.jsx("span",{className:"tiptap-button-text",children:n})]})})});UT.displayName="MarkButton";const xq={undo:yS,redo:Qx},Sq={undo:"Ctrl-z",redo:"Ctrl-Shift-z"},Tq={cs:{undo:"Zpt",redo:"Znovu"},en:{undo:"Undo",redo:"Redo"}};function kq(t){return pe(Tq,t)}function Mq(t,e){if(!t)return!1;const n=t.chain().focus();return e==="undo"?n.undo().run():n.redo().run()}const y2=M.forwardRef(({editor:t,action:e,className:n="",enabled:r,active:i,children:o,...l},c)=>{const f=VT(t),d=M.useCallback(()=>{!f||!r||Mq(f,e)},[f,e,r]),h=xq[e],m=kq(e),g=Sq[e],y=M.useCallback(b=>{console.log("if","!e.defaultPrevented:",!b.defaultPrevented,"!enabled:",!r),!b.defaultPrevented&&r&&d()},[r,d]);return!f||!f.isEditable?null:S.jsx(kt,{ref:c,type:"button",className:n.trim(),disabled:!r,"data-style":"ghost","data-active-state":i?"on":"off","data-disabled":!r,role:"button",tabIndex:-1,"aria-label":m,"aria-pressed":i,tooltip:m,shortcutKeys:g,onClick:y,...l,children:o||S.jsx(S.Fragment,{children:S.jsx(h,{className:"tiptap-button-icon"})})})});y2.displayName="UndoRedoButton";const Eq={cs:{showHtml:"Zobrazit HTML kd"},en:{showHtml:"Show HTML code"}},PT=M.forwardRef(({editor:t},e)=>{const n=M.useCallback(i=>{if(!i.defaultPrevented){const o=t.getHTML();window.parent.postMessage({type:"f-tiptap-editor:show-html",html:o},"*")}},[t]),r=pe(Eq,"showHtml");return S.jsx(kt,{ref:e,type:"button","data-style":"ghost",role:"button",tabIndex:-1,"aria-label":r,tooltip:r,onClick:n,children:S.jsx(fV,{className:"tiptap-button-icon"})})});PT.displayName="FolioTiptapShowHtmlButton";const Aq={cs:{erase:"Smazat formtovn"},en:{erase:"Erase formatting"}},FT=M.forwardRef(({editor:t,enabled:e},n)=>{const r=M.useCallback(o=>{if(!o.defaultPrevented){const l=t.view.state.selection;if(l.empty){const c=t.view.state.doc.nodeAt(l.from);if(c&&c.marks&&c.marks.length>0){const f=t.view.state.doc.resolve(l.from);let d=f.start(f.depth+1);isNaN(d)&&(d=l.from);const h={from:d-1,to:d+c.nodeSize+1};t.chain().focus().setTextSelection(h).unsetAllMarks().run()}}else t.chain().focus().unsetAllMarks().run()}},[t]),i=pe(Aq,"erase");return S.jsx(kt,{ref:n,type:"button","data-style":"ghost",role:"button",tabIndex:-1,"aria-label":i,tooltip:i,onClick:r,disabled:!e,"data-disabled":!e,children:S.jsx(Vx,{className:"tiptap-button-icon"})})});FT.displayName="FolioTiptapEraseMarksButton";function Rq({children:t,enabled:e,active:n,onClick:r,tooltip:i}){return S.jsx(kt,{type:"button",disabled:!e,"data-style":"ghost","data-active-state":n?"on":"off","data-disabled":!e,role:"button",tabIndex:-1,"aria-label":i,"aria-pressed":n,tooltip:i,onClick:r,children:t})}const Nq=({command:t,editor:e})=>()=>{const n=e.chain();n.focus(),t.command({chain:n}),n.run()};function Sc({editorState:t,commandGroup:e,editor:n}){const[r,i]=ht.useState(!1),o=ht.useCallback(h=>{i(h)},[]),l=ht.useCallback(()=>{const h=t.values;return h&&e.commands.find(m=>!m.dontShowAsActiveInCollapsedToolbar&&h.includes(m.key))||null},[t.values,e.commands]);if(!n)return null;const c=l(),f=c&&!t.multiselect?c.icon:e.icon,d=e.title[document.documentElement.lang]||e.title.en;return S.jsxs(kT,{open:r,onOpenChange:o,children:[S.jsx(l3,{asChild:!0,children:S.jsxs(kt,{type:"button",disabled:!t.enabled,"data-style":"ghost","data-active-state":t.active?"on":"off","data-disabled":!t.enabled,role:"button",tabIndex:-1,"aria-label":d,"aria-pressed":t.active,tooltip:d,children:[S.jsx(f,{className:"tiptap-button-icon"}),S.jsx(_x,{className:"tiptap-button-dropdown-small"})]})}),S.jsx(a3,{children:S.jsx(u3,{children:e.commands.map(h=>h.hideInToolbarDropdown?null:S.jsx(c3,{asChild:!0,children:S.jsxs(Rq,{active:t.values?t.values.includes(h.key):!1,enabled:t.enabled,onClick:Nq({editor:n,command:h}),children:[S.jsx(h.icon,{className:"tiptap-button-icon"}),h.title[document.documentElement.lang]||h.title.en]})},h.key))})})]})}const E6={cs:"Vloit",en:"Insert"},$T=({editor:t,node:e})=>{const n=M.useCallback(()=>{window.parent.postMessage({type:"f-tiptap-slash-command:selected",attrs:{type:e?.type}},"*")},[e]),r=c=>{switch(c){case"image":return CV;case"video":return jV;case"newspaper":return MV;default:return console.warn(`Unknown icon string: ${c}`),bp}};if(!e)return;if(!t||!t.isEditable)return null;const i={cs:{insert:e.title.cs||E6.cs},en:{insert:e.title.en||E6.en}},o=pe(i,"insert"),l=r(e.config.toolbar?.icon);return S.jsx(kt,{type:"button","data-style":"ghost",role:"button",tabIndex:-1,"aria-label":o,tooltip:o,onClick:n,children:S.jsx(l,{size:16})})};$T.displayName="FolioEditorToolbarSlotButton";function A6({editor:t,nodes:e}){return!t||!e||e.length===0?null:S.jsx(S.Fragment,{children:e.map(n=>S.jsx(er,{children:S.jsx($T,{editor:t,node:n})}))})}const R6={cs:{mobile:"Mobiln layout",desktop:"Desktop layout"},en:{mobile:"Mobile layout",desktop:"Desktop layout"}},qT=({setResponsivePreviewEnabled:t})=>{const e=pe(R6,"mobile"),n=pe(R6,"desktop");return S.jsxs("div",{className:"f-tiptap-editor-responsive-preview-buttons",children:[S.jsx(kt,{type:"button","data-style":"ghost",role:"button",tabIndex:-1,"aria-label":e,tooltip:e,className:"f-tiptap-editor-responsive-preview-buttons__button f-tiptap-editor-responsive-preview-buttons__button--mobile",onClick:r=>{r.target.blur(),t(!0)},children:S.jsx(rS,{className:"tiptap-button-icon"})}),S.jsx(kt,{type:"button","data-style":"ghost",role:"button",tabIndex:-1,"aria-label":n,tooltip:n,className:"f-tiptap-editor-responsive-preview-buttons__button f-tiptap-editor-responsive-preview-buttons__button--desktop",onClick:r=>{r.target.blur(),t(!1)},children:S.jsx(Yx,{className:"tiptap-button-icon"})})]})};qT.displayName="ResponsivePreviewButtons";const ZT=M.forwardRef(({editor:t,command:e},n)=>{const r=M.useCallback(()=>{if(!t)return;const o=t.chain();o.focus(),e.command({chain:o}),o.run()},[e,t]),i=e.title[document.documentElement.lang]||e.title.en;return t?S.jsx(kt,{ref:n,type:"button","data-style":"ghost",role:"button",tabIndex:-1,"aria-label":i,tooltip:i,onClick:r,children:S.jsx(e.icon,{className:"tiptap-button-icon"})}):null});ZT.displayName="FolioEditorToolbarCommandButton";const zh={cs:{saveAt:"Uloeno v",saveOn:"Uloeno",failedToAutosave:"Chyba ukldn rozpracovanho textu."},en:{saveAt:"Saved at",saveOn:"Saved on",failedToAutosave:"Failed to autosave draft text."}};function Oq(t){const e=new Date;if(t.toDateString()===e.toDateString()){const r=t.toLocaleTimeString("cs-CZ",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return`${pe(zh,"saveAt")} ${r}`}else{const r=t.toLocaleDateString("cs-CZ",{day:"numeric",month:"numeric",hour:"2-digit",minute:"2-digit"});return`${pe(zh,"saveOn")} ${r}`}}const KT=M.forwardRef(({autosaveIndicatorInfo:t},e)=>{const[n,r]=M.useState(t?.latestRevisionAt?new Date(t.latestRevisionAt):null),[i,o]=M.useState(t?.hasUnsavedChanges??!1),[l,c]=M.useState(!1),f=t?.newRecord??!0;M.useEffect(()=>{const g=y=>{y.data?.type==="f-input-tiptap:autosave:auto-saved"?(r(new Date(y.data.updatedAt)),c(!1)):y.data?.type==="f-input-tiptap:autosave:continue-unsaved-changes"?o(!1):y.data?.type==="f-input-tiptap:autosave:failed-to-autosave"&&c(!0)};return window.addEventListener("message",g),()=>window.removeEventListener("message",g)},[]);const d=n?Oq(n):pe(zh,"saveAt"),m=(()=>{if(f)return{icon:S.jsx(jw,{className:"tiptap-button-icon",color:"#FF9A52"}),style:{pointerEvents:"none"},"aria-label":void 0,tooltip:void 0};if(i)return{icon:S.jsx(BV,{className:"tiptap-button-icon",color:"#FF9A52"}),style:{pointerEvents:"none"},"aria-label":void 0,tooltip:void 0};if(l){const g=pe(zh,"failedToAutosave");return{icon:S.jsx(jw,{className:"tiptap-button-icon",color:"#F0655D"}),style:{cursor:"help"},"data-no-hover":"true","aria-label":g,tooltip:g}}return{icon:S.jsx(DV,{className:"tiptap-button-icon",color:"#00B594"}),style:{cursor:"help"},"data-no-hover":"true","aria-label":d,tooltip:d}})();return S.jsx(kt,{ref:e,type:"button","data-style":"ghost",role:"button",tabIndex:-1,style:m.style,"data-no-hover":m["data-no-hover"],"aria-label":m["aria-label"],tooltip:m.tooltip,children:m.icon})});KT.displayName="FolioTiptapAutosaveIndicator";const Il=t=>({editor:e})=>e.isActive("codeBlock")&&e.can().toggleMark(t),ms=t=>({editor:e})=>e.isActive(t),gs={undo:{enabled:({editor:t})=>t.can().undo(),active:()=>!1},redo:{enabled:({editor:t})=>t.can().redo(),active:()=>!1},bold:{enabled:Il("bold"),active:ms("bold")},italic:{enabled:Il("italic"),active:ms("italic")},strike:{enabled:Il("strike"),active:ms("strike")},underline:{enabled:Il("underline"),active:ms("underline")},superscript:{enabled:Il("superscript"),active:ms("superscript")},subscript:{enabled:Il("subscript"),active:ms("subscript")},link:{enabled:({editor:t})=>t.can().setLink?.({href:""}),active:ms("link")},textAlign:{enabled:({editor:t})=>t.can().setTextAlign("left")||t.can().setTextAlign("center"),active:({editor:t})=>t.isActive({textAlign:"center"})||t.isActive({textAlign:"right"}),values:({editor:t})=>{if(t.isActive({textAlign:"left"}))return["align-left"];if(t.isActive({textAlign:"center"}))return["align-center"];if(t.isActive({textAlign:"right"}))return["align-right"]}},erase:{enabled:({editor:t})=>{let e=!1;const n=t.view.state.selection;if(n.empty){const r=t.view.state.doc.nodeAt(n.from);r&&r.marks&&r.marks.length>0&&(e=!0)}else t.view.state.doc.nodesBetween(n.from,n.to,r=>{if(r.marks&&r.marks.length>0)return e=!0,!1});return e},active:()=>!1},textStyles:{enabled:({editor:t})=>t.can().toggleNode("heading","paragraph"),active:({editor:t})=>t.isActive("heading")||t.isActive("folioTiptapStyledParagraph"),values:({editor:t})=>{if(t.isActive("heading")){const e=t.getAttributes("heading");if(e&&e.level)return[`heading-${e.level}`]}else if(t.isActive("folioTiptapStyledParagraph")){const e=t.getAttributes("folioTiptapStyledParagraph");if(e&&e.variant)return[`folioTiptapStyledParagraph-${e.variant}`]}else if(t.isActive("paragraph"))return["paragraph"]}},lists:{enabled:({editor:t})=>t.can().toggleBulletList()||t.can().toggleOrderedList(),active:({editor:t})=>t.isActive("bulletList")||t.isActive("orderedList"),values:({editor:t})=>{if(t.isActive("bulletList"))return["bulletList"];if(t.isActive("orderedList"))return["orderedList"]}},layouts:{onlyInBlockEditor:!0,enabled:({editor:t})=>t.can().insertFolioTiptapColumns()||t.can().insertTable(),active:()=>!1,values:({editor:t})=>{if(t.isActive("folioTiptapColumns"))return["folioTiptapColumns"];if(t.isActive("table"))return["table"]}},textDecorations:{multiselect:!0,enabled:()=>!0,active:({editor:t})=>t.isActive("italic")||t.isActive("underline")||t.isActive("strike")||t.isActive("superscript")||t.isActive("subscript"),values:({editor:t})=>{const e=[];return t.isActive("italic")&&e.push("italic"),t.isActive("underline")&&e.push("underline"),t.isActive("strike")&&e.push("strike"),t.isActive("superscript")&&e.push("superscript"),t.isActive("subscript")&&e.push("subscript"),e}}},Dq=({editor:t,blockEditor:e})=>{const n={};let r=Object.keys(gs);return e||(r=r.filter(i=>!gs[i].onlyInBlockEditor)),t&&t.isEditable?r.forEach(i=>{n[i]={multiselect:gs[i].multiselect,enabled:gs[i].enabled({editor:t}),active:gs[i].active({editor:t}),values:gs[i].values?gs[i].values({editor:t}):void 0}}):r.forEach(i=>{n[i]={enabled:!1,active:!1}}),n},Lq=({blockEditor:t,editor:e,folioTiptapConfig:n,textStylesCommandGroup:r,layoutsCommandGroup:i,setResponsivePreviewEnabled:o,autosaveIndicatorInfo:l})=>{const c=j9({editor:e,selector:({editor:d})=>Dq({editor:d,blockEditor:t})}),f=ht.useMemo(()=>{const d={};return t&&n?.nodes&&n.nodes.forEach(h=>{const m=h.config?.toolbar?.slot;m&&(d[m]||(d[m]=[]),d[m].push(h))}),d},[t,n]);return S.jsxs(S.Fragment,{children:[t?S.jsxs(S.Fragment,{children:[S.jsx(er,{children:S.jsx(LT,{editor:e})}),S.jsx(Er,{})]}):null,S.jsxs(er,{children:[S.jsx(y2,{action:"undo",active:c.undo.active,enabled:c.undo.enabled}),S.jsx(y2,{action:"redo",active:c.redo.active,enabled:c.redo.enabled})]}),S.jsx(Er,{}),S.jsxs(er,{children:[S.jsx(Sc,{editorState:c.textStyles,commandGroup:r,editor:e}),S.jsx(Sc,{editorState:c.lists,commandGroup:Py,editor:e})]}),S.jsx(Er,{}),S.jsxs(er,{children:[S.jsx(UT,{editor:e,type:"bold"}),S.jsx(Sc,{editorState:c.textDecorations,commandGroup:_j,editor:e})]}),S.jsx(Er,{}),S.jsx(er,{children:S.jsx(FT,{editor:e,enabled:c.erase.enabled})}),S.jsx(Er,{}),S.jsxs(er,{children:[S.jsx(dq,{editor:e,editorState:c.link}),S.jsx(A6,{editor:e,nodes:f.after_link})]}),S.jsx(Er,{}),S.jsx(er,{children:S.jsx(Sc,{editorState:c.textAlign,commandGroup:Lj,editor:e})}),t?S.jsxs(S.Fragment,{children:[S.jsx(Er,{}),i&&S.jsx(er,{children:S.jsx(Sc,{editorState:c.layouts,commandGroup:i,editor:e})}),S.jsx(Er,{}),S.jsx(A6,{editor:e,nodes:f.after_layouts}),S.jsx(ZT,{editor:e,command:c8})]}):null,S.jsx(Er,{}),S.jsx(er,{children:S.jsx(PT,{editor:e})}),S.jsx(OT,{}),o&&S.jsx(er,{children:S.jsx(qT,{setResponsivePreviewEnabled:o})}),n?.autosave&&t&&S.jsxs(S.Fragment,{children:[S.jsx(Er,{}),S.jsx(er,{children:S.jsx(KT,{editor:e,autosaveIndicatorInfo:l})})]})]})};function _q({editor:t,blockEditor:e,folioTiptapConfig:n,textStylesCommandGroup:r,layoutsCommandGroup:i,setResponsivePreviewEnabled:o,autosaveIndicatorInfo:l}){return t?S.jsx(DT,{children:S.jsx(Lq,{blockEditor:e,editor:t,folioTiptapConfig:n,textStylesCommandGroup:r,layoutsCommandGroup:i,setResponsivePreviewEnabled:o,autosaveIndicatorInfo:l})}):null}const Hq=(t,e,n)=>{let r=null;return e===void 0&&(e=150),n===void 0&&(n=!1),function(...i){const o=this,l=()=>{r=null,n||t.apply(o,i)},c=n&&!r;r&&clearTimeout(r),r=setTimeout(l,e),c&&t.apply(o,i)}},N6=375;function Iq({enabled:t,shouldScrollToInitial:e,setShouldScrollToInitial:n,children:r}){const[i,o]=M.useState(N6),l=M.useRef(null),c=M.useCallback(d=>{d.preventDefault(),d.stopPropagation();const h=d.clientX,m=i,g=b=>{const w=Math.max(m+2*(b.clientX-h),N6),x=Math.min(window.innerWidth-36,w);o(x)},y=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",y)},[i]);M.useEffect(()=>{e!==null&&l.current&&(n(null),window.setTimeout(()=>{l.current&&(l.current.scrollTop=e)},0))},[e,n]);const f=M.useMemo(()=>Hq(()=>{l.current&&window.parent.postMessage({type:"f-tiptap-editor:scrolled",scrollTop:l.current.scrollTop},"*")}),[]);return S.jsxs("div",{className:"f-tiptap-editor-responsive-preview",children:[S.jsx("div",{className:"f-tiptap-editor-responsive-preview__scroll",ref:l,onScroll:f,children:S.jsx("div",{className:"f-tiptap-editor-responsive-preview__inner",style:{width:t&&i?`${i}px`:"auto"},children:r})}),t?S.jsx("div",{className:"f-tiptap-editor-responsive-preview__handle",style:{left:`calc(50% + ${i/2-18}px)`},onMouseDown:c,children:S.jsxs("div",{className:"f-tiptap-editor-responsive-preview__handle-flex",children:[S.jsx("div",{className:"f-tiptap-editor-responsive-preview__handle-icon-wrap",children:S.jsx(Dx,{})}),S.jsx("div",{className:"f-tiptap-editor-responsive-preview__handle-text",children:`${i}px`})]})}):null]})}function zq({onCreate:t,onUpdate:e,defaultContent:n,type:r,folioTiptapConfig:i,readonly:o,initialScrollTop:l,autosaveIndicatorInfo:c}){const f=M.useRef(null),d=r==="block",[h,m]=M.useState(!1),[g,y]=M.useState(!1),[b,w]=M.useState(!1),[x,k]=M.useState(l),A=M.useMemo(()=>i&&i.styled_paragraph_variants&&i.styled_paragraph_variants.length?nj(i.styled_paragraph_variants):[],[i]),N=M.useMemo(()=>i&&i.enable_pages?ej(i.enable_pages):[],[i]),D=M.useMemo(()=>i&&i.styled_wrap_variants&&i.styled_wrap_variants.length?oj(i.styled_wrap_variants):[],[i]),L=M.useMemo(()=>i&&i.heading_levels&&i.heading_levels.length?i.heading_levels:[2,3,4],[i]),z=M.useMemo(()=>zj({folioTiptapStyledParagraphCommands:A,folioTiptapHeadingLevels:L}),[A,L]),q=M.useMemo(()=>Ij({folioTiptapStyledWrapCommands:D,folioTiptapPagesCommands:N}),[D,N]),j=HD({onUpdate:e,onCreate(re){w(!0),t&&t(re)},onDrop(){for(const re of document.querySelectorAll(".prosemirror-dropcursor-block"))re.hidden=!0},autofocus:d,immediatelyRender:!0,shouldRerenderOnTransaction:!1,editable:!o,editorProps:{attributes:{autocomplete:"off",autocorrect:"off",autocapitalize:"off","aria-label":"Main content area, start typing to enter text.",class:"f-tiptap-editor__tiptap-editor"}},extensions:[C_.configure({heading:{levels:L},gapcursor:!1,link:{openOnClick:!1,enableClickSelection:!0,HTMLAttributes:{rel:null,target:null}}}),w_.configure({alignments:["left","center","right"],types:["heading","paragraph"]}),q_(),Z_,x_,mj,y_.configure({includeChildren:!0,placeholder:({editor:re,node:se})=>{if(d){let ue="commandPlaceholder";if(se.type.name==="heading"){const G=Mt(H=>H.type.name===Bo.name)(re.state.selection);let P=!1;G&&(P=m9(G.node,V=>V.type.name==="heading")[0].node===se),P?ue="headingInPagesPlaceholder":L.length===1?ue="singleHeadingPlaceholder":se.attrs.level&&[2,3,4].indexOf(se.attrs.level)!==-1&&(ue=`h${se.attrs.level}Placeholder`)}return pe(M6,ue)}else return pe(M6,"defaultPlaceholder")}}),...d?[vS.configure({nodes:i.nodes||[],embedNodeClassName:i.embed_node_class_name}),OI,wp,kh,QV,Tu,Bo,la,a8,fj,Tx.extend({parseHTML(){return[{tag:"div.f-tiptap-table-wrapper",contentElement:"table"},{tag:"table"}]},renderHTML({HTMLAttributes:re}){return["div",{class:"f-tiptap-table-wrapper"},["table",re,0]]}}).configure({allowTableNodeSelection:!0,resizable:!1}),nI.configure({table:!1}),Pj.configure({suggestion:d?{...d8,items:f8([z,Py,q,...i.nodes&&i.nodes.length?[Hj(i.nodes)]:[]])}:Zj({textStylesCommandGroup:z})})]:[],tj.configure({variants:i.styled_paragraph_variants||[],variantCommands:A}),ij.configure({variantCommands:D})]});M.useEffect(()=>{if(!f.current)return;const re=f.current,se=new ResizeObserver(ue=>{for(const G of ue)window.parent.postMessage({type:"f-tiptap-editor:resized",height:G.contentRect.height},"*")});return se.observe(re),()=>{se.disconnect()}},[]),M.useEffect(()=>{if(!b||g)return;const re=j$({content:n,editor:j,allowedFolioTiptapNodeTypes:i.nodes||[]});re&&j.commands.setContent(re,{emitUpdate:!1,errorOnInvalidContent:!1}),y(!0),window.parent.postMessage({type:"f-tiptap-editor:initialized-content",content:re},"*")},[n,g,b,j,i]);const ee=M.useCallback(re=>{re.target.classList.contains("f-tiptap-editor__content-wrap")&&j&&j.view&&j.view.dom&&j.view.focus()},[j]);let $="f-tiptap-editor__content f-tiptap-styles";return o&&($+=" f-tiptap-editor__content--readonly"),!b||!g?null:S.jsx(ey.Provider,{value:{editor:j},children:S.jsxs("div",{ref:f,className:`f-tiptap-editor f-tiptap-editor--${d?"block":"rich-text"}${h?" f-tiptap-editor--responsive-preview":""}`,children:[o?null:S.jsx(_q,{editor:j,blockEditor:d,textStylesCommandGroup:z,layoutsCommandGroup:q,folioTiptapConfig:i,setResponsivePreviewEnabled:d?m:void 0,autosaveIndicatorInfo:c}),S.jsx(Iq,{enabled:h,shouldScrollToInitial:x,setShouldScrollToInitial:k,children:S.jsxs("div",{className:"f-tiptap-editor__content-wrap",onClick:ee,children:[d&&!o?S.jsx(V$,{editor:j}):null,S.jsx(RD,{editor:j,role:"presentation",className:$}),o?null:S.jsx(X$,{editor:j,blockEditor:d})]})})]})})}function Bq({onCreate:t,onUpdate:e,defaultContent:n,type:r,folioTiptapConfig:i,readonly:o,initialScrollTop:l,autosaveIndicatorInfo:c}){switch(r){case"block":case"rich-text":return S.jsx(zq,{onCreate:t,onUpdate:e,defaultContent:n,type:r,folioTiptapConfig:i,readonly:o,initialScrollTop:l,autosaveIndicatorInfo:c});default:throw new Error(`Unknown editor type: ${r}`)}}const Vq=t=>t.type==="paragraph"&&(!t.content||t.content.length===0),GT=t=>{if(!t.content||!Array.isArray(t.content)||t.content.length===0)return t;const e=t.content.map(n=>GT(n));return e.length>1&&Vq(e[e.length-1])?{...t,content:e.slice(0,-1)}:{...t,content:e}},O6=t=>GT(t);window.Folio=window.Folio||{};window.Folio.Tiptap=window.Folio.Tiptap||{};window.Folio.Tiptap.root=window.Folio.Tiptap.root||null;window.Folio.Tiptap.getHeight=()=>{const t=document.querySelector(".f-tiptap-editor");if(!t)return 0;const e=t.clientHeight;return Math.max(e,150)};window.Folio.Tiptap.init=t=>{if(window.Folio.Tiptap.root)throw new Error("Tiptap editor is already initialized");if(!t.node)throw new Error("Node is required");const e=({editor:l})=>{window.parent.postMessage({type:"f-tiptap:created",content:O6(P0(l.getJSON())),height:window.Folio.Tiptap.getHeight()},"*"),t.onCreate&&t.onCreate({editor:l})},n=({editor:l})=>{window.parent.postMessage({type:"f-tiptap:updated",content:O6(P0(l.getJSON())),height:window.Folio.Tiptap.getHeight()},"*"),t.onUpdate&&t.onUpdate({editor:l})};let r;t.content&&(r=bS(t.content));const i={nodes:[],styled_paragraph_variants:[],styled_wrap_variants:[],enable_pages:!1},o=gE.createRoot(t.node);return o.render(S.jsx(M.StrictMode,{children:S.jsx(Bq,{onCreate:e,onUpdate:n,defaultContent:r,type:t.type,folioTiptapConfig:t.folioTiptapConfig?{...i,...t.folioTiptapConfig}:i,readonly:t.readonly,initialScrollTop:t.scrollTop||null,autosaveIndicatorInfo:t.autosaveIndicatorInfo})})),window.Folio.Tiptap.root=o,o};window.Folio.Tiptap.destroy=()=>{window.Folio.Tiptap.root&&(window.Folio.Tiptap.root.unmount(),window.Folio.Tiptap.root=null)};window.addEventListener("message",t=>{if(t.origin===window.origin&&t.data){if(t.data.type==="f-input-tiptap:start"){if(!window.Folio.Tiptap.root){const e=document.querySelector(".f-tiptap-iframe-content");if(!e)throw new Error("Node not found for Tiptap editor");if(t.data.lang&&(document.documentElement.lang=t.data.lang),t.data.stylesheetPath){const n=document.createElement("link");n.rel="stylesheet",n.href=t.data.stylesheetPath,document.body.appendChild(n)}e.classList.toggle("f-tiptap-iframe-content--console-aside",!!t.data.windowWidth&&t.data.windowWidth>=1700),window.Folio.Tiptap.init({node:e,type:e.dataset.tiptapType==="block"?"block":"rich-text",folioTiptapConfig:t.data.folioTiptapConfig,content:t.data.content,readonly:!!t.data.readonly,scrollTop:t.data.tiptapScrollTop||0,autosaveIndicatorInfo:t.data.autosaveIndicatorInfo})}}else if(t.data.type==="f-input-tiptap:window-resize"){const e=document.querySelector(".f-tiptap-iframe-content");e&&e.classList.toggle("f-tiptap-iframe-content--console-aside",!!t.data.windowWidth&&t.data.windowWidth>=1700)}}});window.parent.postMessage({type:"f-tiptap:javascript-evaluated"},"*");
//# sourceMappingURL=folio-tiptap.js.map
