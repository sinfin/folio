div class=bem_class_name data=data
  = form do |f|
    - remember_option_keys.each do |opt|
      - if @view_options[opt] != nil
        input[
          type="hidden"
          name="view_options[#{opt}]"
          value=ERB::Util.html_escape(@view_options[opt])
        ]

    - if @view_options[:input_label]
      .form-group.m-0
        label.form-label for="newsletter_subscription[email]"
          = @view_options[:input_label]

    .position-relative
      = input(f)

      - if @view_options[:input_show_at_button]
        span.f-newsletter-subscriptions-form__at-button [
          data=stimulus_action(click: "onAtButtonClick")
        ]
          svg.f-newsletter-subscriptions-form__at-button-svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"
            path d="M12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9ZM7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12Z" fill="currentColor"
            path d="M7.33796 2.03682C9.58236 0.986597 12.1156 0.724951 14.5273 1.29427C16.939 1.86359 19.0878 3.23052 20.6256 5.17359C22.1633 7.11667 23 9.52205 23 12V13C23 14.0609 22.5786 15.0783 21.8284 15.8284C21.0783 16.5786 20.0609 17 19 17C17.9391 17 16.9217 16.5786 16.1716 15.8284C15.4214 15.0783 15 14.0609 15 13V8.00001C15 7.44772 15.4477 7.00001 16 7.00001C16.5523 7.00001 17 7.44772 17 8.00001V13C17 13.5304 17.2107 14.0392 17.5858 14.4142C17.9609 14.7893 18.4696 15 19 15C19.5304 15 20.0392 14.7893 20.4142 14.4142C20.7893 14.0392 21 13.5304 21 13V12C21 9.97258 20.3155 8.00455 19.0573 6.41476C17.7991 4.82497 16.041 3.70658 14.0678 3.24077C12.0946 2.77496 10.0219 2.98904 8.1856 3.84831C6.34927 4.70758 4.85686 6.1617 3.95017 7.97509C3.04348 9.78847 2.77562 11.8549 3.19 13.8395C3.60439 15.8241 4.67673 17.6107 6.23329 18.9098C7.78985 20.2088 9.73943 20.9443 11.7662 20.997C13.7929 21.0496 15.7781 20.4165 17.4 19.2C17.8418 18.8686 18.4686 18.9582 18.8 19.4C19.1314 19.8418 19.0418 20.4686 18.6 20.8C16.6176 22.2868 14.1913 23.0607 11.7142 22.9963C9.23708 22.9319 6.85425 22.033 4.95179 20.4453C3.04933 18.8575 1.73869 16.6739 1.23222 14.2483C0.725757 11.8226 1.05313 9.29702 2.16131 7.08066C3.26949 4.8643 5.09355 3.08704 7.33796 2.03682Z" fill="currentColor"

      = submit_button

    span.folio-loader.f-newsletter-subscriptions-form__loader

    - if !@persisted
      = render(Folio::Captcha::TurnstileComponent.new(appearance: "interaction-only"))

  - if @persisted
    .f-newsletter-subscriptions-form__message
      = message
