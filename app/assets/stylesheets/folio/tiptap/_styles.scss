$f-tiptap__media-min-width--tablet: 576px !default;
$f-tiptap__media-min-width--desktop: 708px !default;

:root {
  // TODO replace these --tt- defaults
  --tt-gray-light-a-100: rgba(15, 22, 36, 0.05);
  --tt-gray-light-a-200: rgba(37, 39, 45, 0.1);
  --tt-gray-light-a-300: rgba(47, 50, 55, 0.2);
  --tt-gray-light-a-500: rgba(52, 55, 60, 0.64);
  --tt-gray-light-a-900: rgba(29, 30, 32, 0.98);

  --tt-gray-dark-a-50: rgba(232, 232, 253, 0.05);
  --tt-gray-dark-a-100: rgba(231, 231, 243, 0.07);
  --tt-gray-dark-a-200: rgba(238, 238, 246, 0.11);
  --tt-gray-dark-a-500: rgba(236, 238, 253, 0.5);
  --tt-gray-dark-a-700: rgba(251, 251, 254, 0.75);
  --tt-gray-dark-a-800: rgba(253, 253, 253, 0.88);
  --tt-gray-dark-a-900: rgba(255, 255, 255, 0.96);

  --tt-gray-dark-100: rgba(32, 32, 34, 1);
  --tt-gray-dark-200: rgba(45, 45, 47, 1);
  --tt-gray-dark-500: rgba(124, 124, 131, 1);
  --tt-gray-dark-900: rgba(245, 245, 245, 1);

  --white: rgb(255, 255, 255);
  --black: rgb(0, 0, 0);
}

.f-tiptap-styles {
  --f-tiptap__spacer: 1rem;
  --f-tiptap-root__background-color: var(--bs-body-bg, #ffffff);
  --f-tiptap-root__color: inherit;
  --f-tiptap-root__font-family: inherit;
  --f-tiptap-root__font-size: inherit;
  --f-tiptap-root__line-height: inherit;
  --f-tiptap-root__padding-x: 0;
  --f-tiptap-root__margin-x: auto;
  --f-tiptap-root__max-width: 750px;
  --f-tiptap-root__white-space: pre-wrap;
  --f-tiptap-root__word-break: break-word;

  --f-tiptap-node__margin-top: var(--f-tiptap__spacer);
  --f-tiptap-node__margin-bottom: var(--f-tiptap__spacer);

  --f-tiptap-headings__margin-top: 2rem;
  --f-tiptap-headings__margin-bottom: var(--f-tiptap-node__margin-bottom);
  --f-tiptap-headings__color: var(--f-tiptap-root__color);
  --f-tiptap-headings__font-family: inherit;
  --f-tiptap-headings__font-size: 3em;
  --f-tiptap-headings__font-weight: bold;
  --f-tiptap-headings__line-height: 1.2;
  --f-tiptap-headings__letter-spacing: normal;

  --f-tiptap-columns__gap: var(--f-tiptap__spacer);
  --f-tiptap-float__aside-margin-y: var(--f-tiptap__spacer);

  --f-tiptap-li__margin-top: 0.5rem;
  --f-tiptap-li__margin-bottom: 0.5rem;

  @each $h in (h1, h2, h3, h4, h5) {
    --f-tiptap-headings-#{$h}__margin-top: var(--f-tiptap-headings__margin-top);
    --f-tiptap-headings-#{$h}__margin-bottom: var(--f-tiptap-headings__margin-bottom);
    --f-tiptap-headings-#{$h}__color: var(--f-tiptap-headings__color);
    --f-tiptap-headings-#{$h}__font-weight: var(--f-tiptap-headings__font-weight);
    --f-tiptap-headings-#{$h}__font-family: var(--f-tiptap-headings__font-family);
    --f-tiptap-headings-#{$h}__font-size: var(--f-tiptap-headings__font-size);
    --f-tiptap-headings-#{$h}__font-size--tablet: var(--f-tiptap-headings-#{$h}__font-size);
    --f-tiptap-headings-#{$h}__font-size--desktop: var(--f-tiptap-headings-#{$h}__font-size--tablet);
    --f-tiptap-headings-#{$h}__line-height: var(--f-tiptap-headings__line-height);
    --f-tiptap-headings-#{$h}__letter-spacing: var(--f-tiptap-headings__letter-spacing);
  }

  --f-tiptap-headings-h2__font-size: 2.4em;
  --f-tiptap-headings-h3__font-size: 1.8em;
  --f-tiptap-headings-h4__font-size: 1.2em;
  --f-tiptap-headings-h5__font-size: 1.2em;

  @each $variant in (small, large) {
    --f-tiptap-styled-paragraph-#{$variant}__background-color: transparent;
    --f-tiptap-styled-paragraph-#{$variant}__border-radius: 0;
    --f-tiptap-styled-paragraph-#{$variant}__color: inherit;
    --f-tiptap-styled-paragraph-#{$variant}__font-family: inherit;
    --f-tiptap-styled-paragraph-#{$variant}__font-size: inherit;
    --f-tiptap-styled-paragraph-#{$variant}__font-size--tablet: var(--f-tiptap-styled-paragraph-#{$variant}__font-size);
    --f-tiptap-styled-paragraph-#{$variant}__font-size--desktop: var(--f-tiptap-styled-paragraph-#{$variant}__font-size--tablet);
    --f-tiptap-styled-paragraph-#{$variant}__font-weight: inherit;
    --f-tiptap-styled-paragraph-#{$variant}__line-height: inherit;
    --f-tiptap-styled-paragraph-#{$variant}__margin-top: var(--f-tiptap-node__margin-top);
    --f-tiptap-styled-paragraph-#{$variant}__margin-bottom: var(--f-tiptap-node__margin-bottom);
    --f-tiptap-styled-paragraph-#{$variant}__padding: 0;
  }

  --f-tiptap-styled-paragraph-small__font-size: 0.8rem;
  --f-tiptap-styled-paragraph-large__font-size: 1.2rem;

  --f-tiptap-a__color: #0a58ca;
  --f-tiptap-a__color-hover: #0a58ca;
  --f-tiptap-a__text-decoration: underline;
  --f-tiptap-a__text-decoration-hover: none;

  --f-tiptap-hr__margin: 2rem;
  --f-tiptap-hr__background: var(--bs-border-color);
  --f-tiptap-hr__height: 1px;

  --f-tiptap-code__border-radius: var(--bs-border-radius);

  --f-tiptap-pages__gap-in-editor-only: 0.5rem;
  --f-tiptap-pages__margin-in-editor-only: 0.5rem 0;
  --f-tiptap-page__primary-color-in-editor-only: #00B594;
  --f-tiptap-page__border-in-editor-only: 2px dashed #00B594;
  --f-tiptap-page__error-color-in-editor-only: #F0655D;
  --f-tiptap-page__error-border-in-editor-only: 2px dashed #F0655D;

  --f-tiptap-table__background: transparent;
  --f-tiptap-table__border: 1px solid var(--tt-gray-light-a-200);
  --f-tiptap-table__cell-padding: 1rem;
  --f-tiptap-table__even-row-background: inherit;
  --f-tiptap-table__font-family: inherit;
  --f-tiptap-table__font-size: inherit;
  --f-tiptap-table__line-height: inherit;
  --f-tiptap-table__odd-row-background: inherit;
  --f-tiptap-table__selected-background: var(--tt-brand-color-50);
  --f-tiptap-table__selected-border: 1px solid var(--tt-brand-color-100);
  --f-tiptap-table__vertical-align: top;

  --f-tiptap-table-td__border-bottom: var(--f-tiptap-table__border);
  --f-tiptap-table-td__border-left: var(--f-tiptap-table__border);
  --f-tiptap-table-td__border-right: var(--f-tiptap-table__border);
  --f-tiptap-table-td__border-top: var(--f-tiptap-table__border);
  --f-tiptap-table-td__min-width: 5rem;

  --f-tiptap-blockquote__padding: 0.375em 0 0.375em 1em;

  --f-tiptap-codeblock__background-color: var(--tt-gray-light-a-50);
  --f-tiptap-codeblock__border-color: var(--tt-gray-light-a-200);
  --f-tiptap-codeblock__border-radius: var(--bs-border-radius);
  --f-tiptap-codeblock__border-width: var(--bs-border-width);
  --f-tiptap-codeblock__color: var(--tt-gray-light-a-800);
  --f-tiptap-codeblock__font-size: 1rem;
  --f-tiptap-codeblock__padding: 1em;

  --f-tiptap-code__background-color: var(--tt-gray-light-a-100);
  --f-tiptap-code__border-color: var(--f-tiptap-codeblock__border-color);
  --f-tiptap-code__border-width: var(--f-tiptap-codeblock__border-width);
  --f-tiptap-code__color: var(--bs-code-color);
  --f-tiptap-code__font-family: var(--bs-font-monospace);
  --f-tiptap-code__font-size: 0.875em;
  --f-tiptap-code__line-height: 1.4;
  --f-tiptap-code__padding: 0.1em 0.2em;

  background: var(--f-tiptap-root__background-color);
  color: var(--f-tiptap-root__color);
  container-type: inline-size;
  font-family: var(--f-tiptap-root__font-family);
  font-size: var(--f-tiptap-root__font-size);
  line-height: var(--f-tiptap-root__line-height);
  margin-left: var(--f-tiptap-root__margin-x);
  margin-right: var(--f-tiptap-root__margin-x);
  max-width: var(--f-tiptap-root__max-width);
  padding-left: var(--f-tiptap-root__padding-x);
  padding-right: var(--f-tiptap-root__padding-x);
  white-space: var(--f-tiptap-root__white-space);
  word-break: var(--f-tiptap-root__word-break);

  .f-tiptap-styles {
    padding-left: 0;
    padding-right: 0;
  }

  .container-fluid {
    padding: 0;
  }

  p,
  ul,
  ol,
  blockquote,
  pre,
  table,
  .f-tiptap-table-wrapper,
  .node-folioTiptapNode,
  .node-folioTiptapInvalidNode,
  .f-tiptap-node,
  .f-tiptap-columns,
  .f-tiptap-float,
  .f-tiptap-styled-paragraph,
  .f-tiptap-styled-wrap,
  .f-tiptap-invalid-node {
    margin-top: var(--f-tiptap-node__margin-top);
    margin-bottom: var(--f-tiptap-node__margin-bottom);

    &:first-child {
      margin-top: 0;
    }

    &:last-child {
      margin-bottom: 0;
    }
  }

  .node-folioTiptapNode,
  .f-tiptap-node,
  .f-tiptap-columns {
    margin-left: calc(var(--f-tiptap-root__padding-x) * -1);
    margin-right: calc(var(--f-tiptap-root__padding-x) * -1);
  }

  .node-folioTiptapNode {
    .f-tiptap-node {
      margin-left: 0;
      margin-right: 0;
    }
  }

  .f-tiptap-avoid-external-layout {
    --f-tiptap-root__padding-x: 0;
  }

  a:not([class]) {
    color: var(--f-tiptap-a__color);
    cursor: pointer;
    text-decoration: var(--f-tiptap-a__text-decoration);

    &:hover {
      color: var(--f-tiptap-a__color-hover);
      text-decoration: var(--f-tiptap-a__text-decoration-hover);
    }
  }

  // Text decoration inheritance for spans
  a span {
    text-decoration: underline;
  }

  s span {
    text-decoration: line-through;
  }

  u span {
    text-decoration: underline;
  }

  blockquote {
    position: relative;
    padding: var(--f-tiptap-blockquote__padding);

    &::before,
    &.is-empty::before {
      position: absolute;
      bottom: 0;
      left: 0;
      top: 0;
      height: 100%;
      width: 0.25em;
      background-color: var(--blockquote-background);
      content: "";
      border-radius: 0;
    }
  }

  h1,
  h2,
  h3,
  h4,
  h5 {
    font-style: inherit;
    position: relative;

    strong {
      font-weight: inherit;
    }

    &:first-child {
      margin-top: 0;
    }

    &:last-child {
      margin-bottom: 0;
    }
  }

  @each $h in (h1, h2, h3, h4, h5) {
    #{$h} {
      color: var(--f-tiptap-headings-#{$h}__color);
      font-family: var(--f-tiptap-headings-#{$h}__font-family);
      font-size: var(--f-tiptap-headings-#{$h}__font-size);
      font-weight: var(--f-tiptap-headings-#{$h}__font-weight);
      letter-spacing: var(--f-tiptap-headings-#{$h}__letter-spacing);
      line-height: var(--f-tiptap-headings-#{$h}__line-height);
      margin-top: var(--f-tiptap-headings-#{$h}__margin-top);
      margin-bottom: var(--f-tiptap-headings-#{$h}__margin-bottom);
    }
  }

  ol,
  ul {
    padding-left: 1.5em;
  }

  li {
    // // reduce spacings inside list
    // --f-tiptap__spacer: 0.5rem;
    // --f-tiptap-node__margin-top: 0.5rem;
    // --f-tiptap-node__margin-bottom: 0.5rem;

    list-style-type: inherit;
    margin-top: var(--f-tiptap-li__margin-top);
    margin-bottom: var(--f-tiptap-li__margin-bottom);

    &:first-child {
      margin-top: 0;
    }

    &:last-child {
      margin-bottom: 0;
    }
  }

  ol {
    list-style: decimal;

    ol {
      list-style: lower-alpha;

      ol {
        list-style: lower-roman;
      }
    }
  }

  // Inline code
  code {
    background-color: var(--f-tiptap-code__background-color);
    border-radius: var(--f-tiptap-code__border-radius);
    border: var(--f-tiptap-code__border-width) solid
      var(--f-tiptap-code__border-color);
    color: var(--f-tiptap-code__color);
    font-family: var(--f-tiptap-code__font-family);
    font-size: var(--f-tiptap-code__font-size);
    line-height: var(--f-tiptap-code__line-height);
    padding: var(--f-tiptap-code__padding);
  }

  // Code blocks
  pre {
    background-color: var(--f-tiptap-codeblock__background-color);
    color: var(--f-tiptap-codeblock__color);
    border: var(--f-tiptap-codeblock__border-width) solid
      var(--f-tiptap-codeblock__border-color);
    padding: var(--f-tiptap-codeblock__padding);
    font-size: var(--f-tiptap-codeblock__font-size);
    border-radius: var(--f-tiptap-codeblock__border-radius);

    code {
      background-color: transparent;
      border: none;
      border-radius: 0;
      -webkit-text-fill-color: inherit;
      color: inherit;
    }
  }

  hr {
    background: var(--f-tiptap-hr__background);
    border: none;
    height: var(--f-tiptap-hr__height);
    margin: var(--f-tiptap-hr__margin) 0;

    .f-tiptap-editor & {
      position: relative;
      overflow: visible;

      &::before {
        content: "";
        position: absolute;
        top: calc(-1 * var(--f-tiptap-hr__margin) + var(--f-tiptap__spacer));
        bottom: calc(-1 * var(--f-tiptap-hr__margin) + var(--f-tiptap__spacer));
        left: 0;
        right: 0;
        display: block;
      }

      &.ProseMirror-selectednode::before {
        background: var(--tt-selection-color);
      }
    }
  }

  .f-tiptap-columns {
    display: flex;
    flex-direction: column;
    gap: var(--f-tiptap-columns__gap);
  }

  .f-tiptap-column {
    box-sizing: border-box;
    position: relative;
    container-type: inline-size;
    flex: 0 0 auto;
  }

  .f-tiptap-float {
    // Default values for CSS custom properties (below 576px, float layout is not active)
    --f-tiptap-float__aside-width: 0;
    --f-tiptap-float__aside-margin-x: 0;
    --f-tiptap-float__aside-offset: 0;
    position: relative;
  }

  .f-tiptap-float__main {
    position: relative;
    z-index: 1;
  }

  .f-tiptap-float__aside {
    margin-bottom: var(--f-tiptap-float__aside-margin-y);
    position: relative;
    z-index: 2;
  }

  .f-tiptap-editor & .f-tiptap-column::before,
  .f-tiptap-editor & .f-tiptap-float::before,
  .f-tiptap-editor & .f-tiptap-float__aside::before {
    content: "";
    pointer-events: none;
    position: absolute;
    display: block;
    inset: 0;
    border: 1px dashed #ccc;
    border-radius: var(--f-tiptap-editor__border-radius);
  }

  .f-tiptap-editor & .f-tiptap-float__aside {
    background-color: var(--bs-body-bg);
  }

  // Force two-line placeholder for empty paragraphs that are only child of [data-node-view-content-react]
  // Get numeric line-height value for multiline placeholder - use variable if numeric, otherwise default to 1.5
  .f-tiptap-float__aside,
  .f-tiptap-float__main {
    [data-node-view-content-react] > p.is-empty:only-child,
    [data-node-view-content-react] > p:has(.ProseMirror-trailingBreak):only-child {
      // Use 2lh (line-height unit) - represents 2 line-heights of the element
      // Fallback for browsers that don't support lh unit, using calculated numeric value
      min-height: calc(2 * 1em * 1.5);
      min-height: 2lh; // Modern browsers: 2 line-heights
    }
  }

  .f-tiptap-styled-paragraph {
    @each $variant in (small, large) {
      &[data-f-tiptap-styled-paragraph-variant="#{$variant}"] {
        background-color: var(--f-tiptap-styled-paragraph-#{$variant}__background-color);
        border-radius: var(--f-tiptap-styled-paragraph-#{$variant}__border-radius);
        color: var(--f-tiptap-styled-paragraph-#{$variant}__color);
        font-family: var(--f-tiptap-styled-paragraph-#{$variant}__font-family);
        font-size: var(--f-tiptap-styled-paragraph-#{$variant}__font-size);
        font-weight: var(--f-tiptap-styled-paragraph-#{$variant}__font-weight);
        line-height: var(--f-tiptap-styled-paragraph-#{$variant}__line-height);
        margin-top: var(--f-tiptap-styled-paragraph-#{$variant}__margin-top);
        margin-bottom: var(--f-tiptap-styled-paragraph-#{$variant}__margin-bottom);
        padding: var(--f-tiptap-styled-paragraph-#{$variant}__padding);
      }
    }
  }

  // .f-tiptap-styled-wrap variants are app-specific, define them in your app's stylesheet

  .f-tiptap-table-wrapper {
    max-width: 100%;
    overflow-x: auto;

    table {
      margin: 0;
    }
  }

  table {
    background: var(--f-tiptap-table__background);
    border: 0;
    border-collapse: collapse;
    font-family: var(--f-tiptap-table__font-family);
    font-size: var(--f-tiptap-table__font-size);
    line-height: var(--f-tiptap-table__line-height);
    max-width: 100%;
    overflow: hidden;
    table-layout: auto;
    width: 100%;

    td,
    th {
      border-bottom: var(--f-tiptap-table-td__border-bottom);
      border-left: var(--f-tiptap-table-td__border-left);
      border-right: var(--f-tiptap-table-td__border-right);
      border-top: var(--f-tiptap-table-td__border-top);
      min-width: 1rem;
      padding: var(--f-tiptap-table__cell-padding);
      position: relative;
      vertical-align: var(--f-tiptap-table__vertical-align);
    }

    td {
      background: var(--f-tiptap-table__background);
    }

    th {
      font-weight: 700;
      text-align: left
    }

    td, th {
      min-width: var(--f-tiptap-table-td__min-width);

      &:first-child {
        border-left: var(--f-tiptap-table-td__border-left);
      }

      &:last-child {
        border-right: var(--f-tiptap-table-td__border-right);
      }
    }

    tr:first-child {
      td, th {
        border-top: var(--f-tiptap-table-td__border-top);
        border-bottom: var(--f-tiptap-table-td__border-bottom);
      }
    }

    tr:last-child {
      td, th {
        border-top: var(--f-tiptap-table-td__border-top);
        border-bottom: var(--f-tiptap-table-td__border-bottom);
      }
    }

    tr:nth-child(odd) {
      td, th {
        background: var(--f-tiptap-table__odd-row-background);
      }
    }

    tr:nth-child(even) {
      td, th {
        background: var(--f-tiptap-table__even-row-background);
      }
    }

    .selectedCell {
      background: var(--f-tiptap-table__selected-background);
      border: var(--f-tiptap-table__selected-border);
    }
  }



  @container (min-width: #{$f-tiptap__media-min-width--tablet}) {
    .f-tiptap-float {
      // Default aside width (medium)
      --f-tiptap-float__aside-width: 240px;
      --f-tiptap-float__aside-side: left;
      --f-tiptap-float__aside-margin-x: 1rem;
      --f-tiptap-float__aside-offset: 0;

      &::after {
        content: "";
        clear: both;
        display: table;
      }
    }

    .f-tiptap-float[data-f-tiptap-float-size="small"] {
      --f-tiptap-float__aside-width: 180px;
    }

    .f-tiptap-float[data-f-tiptap-float-size="large"] {
      --f-tiptap-float__aside-width: 300px;
    }

    .f-tiptap-float[data-f-tiptap-float-side="right"] {
      --f-tiptap-float__aside-side: right;
    }

    .f-tiptap-float__aside {
      float: left;
      margin-right: var(--f-tiptap-float__aside-margin-x);
      margin-bottom: var(--f-tiptap__spacer);
      margin-left: var(--f-tiptap-float__aside-offset);
      width: var(--f-tiptap-float__aside-width);
      position: relative;
      container-type: inline-size;
      box-sizing: border-box;
      min-height: 2rem;
    }

    .f-tiptap-float[data-f-tiptap-float-side="right"] .f-tiptap-float__aside {
      float: right;
      margin-right: var(--f-tiptap-float__aside-offset);
      margin-left: var(--f-tiptap-float__aside-margin-x);
    }

    .f-tiptap-float[data-f-tiptap-float-size="small"] .f-tiptap-float__aside {
      width: var(--f-tiptap-float__aside-width);
    }

    .f-tiptap-float[data-f-tiptap-float-size="large"] .f-tiptap-float__aside {
      width: var(--f-tiptap-float__aside-width);
    }

    .f-tiptap-columns {
      display: grid;
      grid-auto-columns: 1fr;
      grid-auto-flow: column;
      gap: var(--f-tiptap-columns__gap);
    }

    .f-tiptap-editor
      &
      .f-tiptap-columns
      > .f-tiptap-columns:first-child
      .f-tiptap-column::before {
      border-top: 0;
    }

    .f-tiptap-editor
      &
      .f-tiptap-columns
      > .f-tiptap-columns:last-child
      .f-tiptap-column::before {
      border-bottom: 0;
    }

    .f-tiptap-styled-paragraph {
      @each $variant in (small, large) {
        &[data-f-tiptap-styled-paragraph-variant="#{$variant}"] {
          font-size: var(--f-tiptap-styled-paragraph-#{$variant}__font-size--tablet);
        }
      }
    }

    @each $h in (h1, h2, h3, h4, h5) {
      #{$h} {
        font-size: var(--f-tiptap-headings-#{$h}__font-size--tablet);
      }
    }
  }

  @container (min-width: #{$f-tiptap__media-min-width--desktop}) {
    .f-tiptap-columns {
      gap: var(--f-tiptap-columns__gap);
    }

    .f-tiptap-float {
      --f-tiptap-float__aside-margin-x: 1rem;
      --f-tiptap-float__aside-offset: 0;
    }

    .f-tiptap-float__aside {
      margin-right: var(--f-tiptap-float__aside-margin-x);
      margin-bottom: var(--f-tiptap__spacer);
      margin-left: var(--f-tiptap-float__aside-offset);
    }

    .f-tiptap-float[data-f-tiptap-float-side="right"] .f-tiptap-float__aside {
      margin-right: var(--f-tiptap-float__aside-offset);
      margin-left: var(--f-tiptap-float__aside-margin-x);
    }

    .f-tiptap-styled-paragraph {
      @each $variant in (small, large) {
        &[data-f-tiptap-styled-paragraph-variant="#{$variant}"] {
          font-size: var(--f-tiptap-styled-paragraph-#{$variant}__font-size--desktop);
        }
      }
    }

    @each $h in (h1, h2, h3, h4, h5) {
      #{$h} {
        font-size: var(--f-tiptap-headings-#{$h}__font-size--desktop);
      }
    }
  }
}
