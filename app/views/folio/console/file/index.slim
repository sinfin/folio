= render(Folio::Console::Ui::TurboFrameWithLoaderComponent.new(id: @turbo_frame_id,
                                                               turbo_action: "advance"))
  - if action_name == "index_for_picker"
    = render(Folio::Console::Ui::Index::FiltersComponent.new(klass: @klass))

    - if @pagy
      = render(Folio::Console::Ui::PagyComponent.new(pagy: @pagy,
                                                     options: @pagy_options || {}))
  - else
    = index_header file_list_uppy: true

  = render(Folio::FileListComponent.new(file_klass: @klass,
                                        files: controller.instance_variable_get(controller.send(:folio_console_record_variable_name, plural: true)),
                                        editable: true,
                                        destroyable: true,
                                        uploadable: true,
                                        batch_actions: true,
                                        primary_action: action_name,
                                        batch_actions_multi_picker: action_name == "index_for_picker",
                                        serialize_files: action_name == "index_for_modal" || action_name == "index_for_picker",
                                        reload_pagy: true))

  = render(Folio::Console::Ui::PagyComponent.new(pagy: @pagy,
                                                 options: @pagy_options || {}))
